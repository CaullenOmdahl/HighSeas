{"version":3,"file":"CjsdXvoT.js","sources":["../../../../../../src/lib/utils/tv-detection.ts","../../../../../../src/lib/utils/tv-navigation.ts"],"sourcesContent":["/**\n * TV Detection and Platform Utilities\n * Detects if the app is running on Android TV or web browser\n */\n\nimport { browser } from '$app/environment';\n\nlet isAndroidTV = false;\nlet isMobileDevice = false;\nlet screenSize: 'mobile' | 'tablet' | 'desktop' | 'tv' = 'desktop';\n\n/**\n * Initialize platform detection\n * Should be called on app startup\n */\nexport function initializePlatformDetection(): void {\n\tif (!browser) return;\n\n\t// Check if running in Capacitor (native app)\n\tconst isCapacitor = typeof window !== 'undefined' && window.Capacitor;\n\t\n\t// Android TV detection\n\tif (isCapacitor && window.Capacitor.getPlatform() === 'android') {\n\t\t// Check for Android TV specific features\n\t\tconst userAgent = navigator.userAgent.toLowerCase();\n\t\tisAndroidTV = userAgent.includes('android') && \n\t\t\t(userAgent.includes('tv') || userAgent.includes('leanback'));\n\t}\n\n\t// Web-based TV detection (for browser testing)\n\tif (!isCapacitor) {\n\t\tconst userAgent = navigator.userAgent.toLowerCase();\n\t\tisAndroidTV = userAgent.includes('android') && userAgent.includes('tv');\n\t}\n\n\t// Screen size detection\n\tconst width = window.innerWidth;\n\tconst height = window.innerHeight;\n\t\n\tif (width >= 1920 || height >= 1080) {\n\t\tscreenSize = 'tv';\n\t} else if (width >= 1024) {\n\t\tscreenSize = 'desktop';\n\t} else if (width >= 768) {\n\t\tscreenSize = 'tablet';\n\t} else {\n\t\tscreenSize = 'mobile';\n\t\tisMobileDevice = true;\n\t}\n\n\t// Override for Android TV\n\tif (isAndroidTV) {\n\t\tscreenSize = 'tv';\n\t\tisMobileDevice = false;\n\t}\n\n\tconsole.log('ðŸ“º Platform Detection:', {\n\t\tisAndroidTV,\n\t\tisMobileDevice,\n\t\tscreenSize,\n\t\tisCapacitor,\n\t\tuserAgent: navigator.userAgent\n\t});\n}\n\n/**\n * Check if the app is running on Android TV\n */\nexport function getIsAndroidTV(): boolean {\n\treturn isAndroidTV;\n}\n\n/**\n * Check if the app is running on a mobile device\n */\nexport function getIsMobileDevice(): boolean {\n\treturn isMobileDevice;\n}\n\n/**\n * Get the current screen size category\n */\nexport function getScreenSize(): 'mobile' | 'tablet' | 'desktop' | 'tv' {\n\treturn screenSize;\n}\n\n/**\n * Check if the current platform supports D-pad navigation\n */\nexport function supportsDpadNavigation(): boolean {\n\treturn isAndroidTV;\n}\n\n/**\n * Check if the current platform should use 10-foot UI design\n */\nexport function shouldUseTenFootUI(): boolean {\n\treturn isAndroidTV || screenSize === 'tv';\n}\n\n/**\n * Get appropriate font sizes for the current platform\n */\nexport function getFontSizes() {\n\tif (shouldUseTenFootUI()) {\n\t\treturn {\n\t\t\txs: 'text-lg',    // 18px\n\t\t\tsm: 'text-xl',    // 20px\n\t\t\tbase: 'text-2xl', // 24px\n\t\t\tlg: 'text-3xl',   // 30px\n\t\t\txl: 'text-4xl',   // 36px\n\t\t\t'2xl': 'text-5xl' // 48px\n\t\t};\n\t}\n\t\n\treturn {\n\t\txs: 'text-xs',     // 12px\n\t\tsm: 'text-sm',     // 14px\n\t\tbase: 'text-base', // 16px\n\t\tlg: 'text-lg',     // 18px\n\t\txl: 'text-xl',     // 20px\n\t\t'2xl': 'text-2xl'  // 24px\n\t};\n}\n\n/**\n * Get appropriate spacing values for the current platform\n */\nexport function getSpacing() {\n\tif (shouldUseTenFootUI()) {\n\t\treturn {\n\t\t\txs: 8,  // 2rem\n\t\t\tsm: 12, // 3rem\n\t\t\tmd: 16, // 4rem\n\t\t\tlg: 24, // 6rem\n\t\t\txl: 32  // 8rem\n\t\t};\n\t}\n\t\n\treturn {\n\t\txs: 2,  // 0.5rem\n\t\tsm: 4,  // 1rem\n\t\tmd: 6,  // 1.5rem\n\t\tlg: 8,  // 2rem\n\t\txl: 12  // 3rem\n\t};\n}\n\n/**\n * Get appropriate button sizes for the current platform\n */\nexport function getButtonSizes() {\n\tif (shouldUseTenFootUI()) {\n\t\treturn {\n\t\t\tsm: 'px-6 py-3 text-lg',   // Small button for TV\n\t\t\tmd: 'px-8 py-4 text-xl',   // Medium button for TV\n\t\t\tlg: 'px-10 py-5 text-2xl'  // Large button for TV\n\t\t};\n\t}\n\t\n\treturn {\n\t\tsm: 'px-3 py-1.5 text-sm',  // Small button for web/mobile\n\t\tmd: 'px-4 py-2 text-base',  // Medium button for web/mobile\n\t\tlg: 'px-6 py-3 text-lg'     // Large button for web/mobile\n\t};\n}\n\n// Global variable declarations for Capacitor\ndeclare global {\n\tinterface Window {\n\t\tCapacitor: {\n\t\t\tgetPlatform(): string;\n\t\t\tisNative: boolean;\n\t\t};\n\t}\n}","/**\n * TV D-pad Navigation System\n * Handles directional navigation for Android TV remote controls\n */\n\nimport { browser } from '$app/environment';\nimport { getIsAndroidTV } from './tv-detection';\n\ntype NavigationDirection = 'up' | 'down' | 'left' | 'right';\ntype NavigationCallback = (direction: NavigationDirection) => void;\ntype SelectCallback = () => void;\ntype BackCallback = () => void;\n\ninterface NavigationElement {\n\telement: HTMLElement;\n\tid: string;\n\trow: number;\n\tcolumn: number;\n\tonSelect?: SelectCallback;\n\tdisabled?: boolean;\n}\n\nclass TVNavigation {\n\tprivate elements: NavigationElement[] = [];\n\tprivate currentFocusIndex = 0;\n\tprivate isEnabled = false;\n\tprivate callbacks: NavigationCallback[] = [];\n\tprivate selectCallbacks: SelectCallback[] = [];\n\tprivate backCallbacks: BackCallback[] = [];\n\n\tconstructor() {\n\t\tif (browser && getIsAndroidTV()) {\n\t\t\tthis.initializeNavigation();\n\t\t}\n\t}\n\n\tprivate initializeNavigation(): void {\n\t\tthis.isEnabled = true;\n\t\t\n\t\t// Listen for D-pad events\n\t\tdocument.addEventListener('keydown', this.handleKeyDown);\n\t\t\n\t\t// Listen for focus events\n\t\tdocument.addEventListener('focusin', this.handleFocusIn);\n\t\t\n\t\tconsole.log('ðŸ“º TV Navigation initialized');\n\t}\n\n\tprivate handleKeyDown = (event: KeyboardEvent): void => {\n\t\tif (!this.isEnabled || this.elements.length === 0) return;\n\n\t\tconst currentElement = this.elements[this.currentFocusIndex];\n\t\t\n\t\tswitch (event.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.navigateUp();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.navigateDown();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowLeft':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.navigateLeft();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowRight':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.navigateRight();\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\tcase ' ': // Space key\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.handleSelect();\n\t\t\t\tbreak;\n\t\t\tcase 'Escape':\n\t\t\tcase 'Backspace':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.handleBack();\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tprivate handleFocusIn = (event: FocusEvent): void => {\n\t\tconst target = event.target as HTMLElement;\n\t\tconst elementIndex = this.elements.findIndex(el => el.element === target);\n\t\t\n\t\tif (elementIndex !== -1) {\n\t\t\tthis.currentFocusIndex = elementIndex;\n\t\t}\n\t};\n\n\tprivate navigateUp(): void {\n\t\tconst current = this.elements[this.currentFocusIndex];\n\t\tconst candidates = this.elements.filter(el => \n\t\t\t!el.disabled && \n\t\t\tel.row < current.row &&\n\t\t\tMath.abs(el.column - current.column) <= 2\n\t\t);\n\n\t\tif (candidates.length > 0) {\n\t\t\t// Find closest element in the row above\n\t\t\tconst closest = candidates.reduce((prev, curr) => \n\t\t\t\tMath.abs(curr.column - current.column) < Math.abs(prev.column - current.column) ? curr : prev\n\t\t\t);\n\t\t\tthis.focusElement(closest);\n\t\t}\n\n\t\tthis.callbacks.forEach(callback => callback('up'));\n\t}\n\n\tprivate navigateDown(): void {\n\t\tconst current = this.elements[this.currentFocusIndex];\n\t\tconst candidates = this.elements.filter(el => \n\t\t\t!el.disabled && \n\t\t\tel.row > current.row &&\n\t\t\tMath.abs(el.column - current.column) <= 2\n\t\t);\n\n\t\tif (candidates.length > 0) {\n\t\t\t// Find closest element in the row below\n\t\t\tconst closest = candidates.reduce((prev, curr) => \n\t\t\t\tMath.abs(curr.column - current.column) < Math.abs(prev.column - current.column) ? curr : prev\n\t\t\t);\n\t\t\tthis.focusElement(closest);\n\t\t}\n\n\t\tthis.callbacks.forEach(callback => callback('down'));\n\t}\n\n\tprivate navigateLeft(): void {\n\t\tconst current = this.elements[this.currentFocusIndex];\n\t\tconst candidates = this.elements.filter(el => \n\t\t\t!el.disabled && \n\t\t\tel.row === current.row &&\n\t\t\tel.column < current.column\n\t\t);\n\n\t\tif (candidates.length > 0) {\n\t\t\t// Find closest element to the left\n\t\t\tconst closest = candidates.reduce((prev, curr) => \n\t\t\t\tcurr.column > prev.column ? curr : prev\n\t\t\t);\n\t\t\tthis.focusElement(closest);\n\t\t}\n\n\t\tthis.callbacks.forEach(callback => callback('left'));\n\t}\n\n\tprivate navigateRight(): void {\n\t\tconst current = this.elements[this.currentFocusIndex];\n\t\tconst candidates = this.elements.filter(el => \n\t\t\t!el.disabled && \n\t\t\tel.row === current.row &&\n\t\t\tel.column > current.column\n\t\t);\n\n\t\tif (candidates.length > 0) {\n\t\t\t// Find closest element to the right\n\t\t\tconst closest = candidates.reduce((prev, curr) => \n\t\t\t\tcurr.column < prev.column ? curr : prev\n\t\t\t);\n\t\t\tthis.focusElement(closest);\n\t\t}\n\n\t\tthis.callbacks.forEach(callback => callback('right'));\n\t}\n\n\tprivate handleSelect(): void {\n\t\tconst current = this.elements[this.currentFocusIndex];\n\t\tif (current && !current.disabled) {\n\t\t\t// Trigger click event on the element\n\t\t\tcurrent.element.click();\n\t\t\t\n\t\t\t// Call custom select callback if provided\n\t\t\tif (current.onSelect) {\n\t\t\t\tcurrent.onSelect();\n\t\t\t}\n\t\t}\n\n\t\tthis.selectCallbacks.forEach(callback => callback());\n\t}\n\n\tprivate handleBack(): void {\n\t\tthis.backCallbacks.forEach(callback => callback());\n\t}\n\n\tprivate focusElement(navElement: NavigationElement): void {\n\t\tconst index = this.elements.indexOf(navElement);\n\t\tif (index !== -1) {\n\t\t\tthis.currentFocusIndex = index;\n\t\t\tnavElement.element.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Register a focusable element for TV navigation\n\t */\n\tregisterElement(\n\t\telement: HTMLElement, \n\t\trow: number, \n\t\tcolumn: number, \n\t\toptions: { \n\t\t\tid?: string; \n\t\t\tonSelect?: SelectCallback; \n\t\t\tdisabled?: boolean \n\t\t} = {}\n\t): void {\n\t\tconst id = options.id || `nav-${this.elements.length}`;\n\t\t\n\t\t// Remove existing element if it exists\n\t\tthis.unregisterElement(element);\n\t\t\n\t\t// Add tabindex if not already present\n\t\tif (!element.hasAttribute('tabindex')) {\n\t\t\telement.setAttribute('tabindex', '0');\n\t\t}\n\n\t\t// Add navigation data attributes\n\t\telement.setAttribute('data-nav-row', row.toString());\n\t\telement.setAttribute('data-nav-column', column.toString());\n\t\telement.setAttribute('data-nav-id', id);\n\n\t\tconst navElement: NavigationElement = {\n\t\t\telement,\n\t\t\tid,\n\t\t\trow,\n\t\t\tcolumn,\n\t\t\tonSelect: options.onSelect,\n\t\t\tdisabled: options.disabled || false\n\t\t};\n\n\t\tthis.elements.push(navElement);\n\t\t\n\t\t// Sort elements by row then column for proper navigation order\n\t\tthis.elements.sort((a, b) => {\n\t\t\tif (a.row !== b.row) return a.row - b.row;\n\t\t\treturn a.column - b.column;\n\t\t});\n\n\t\tconsole.log(`ðŸ“º Registered navigation element: ${id} at (${row}, ${column})`);\n\t}\n\n\t/**\n\t * Unregister a focusable element\n\t */\n\tunregisterElement(element: HTMLElement): void {\n\t\tconst index = this.elements.findIndex(el => el.element === element);\n\t\tif (index !== -1) {\n\t\t\tthis.elements.splice(index, 1);\n\t\t\t\n\t\t\t// Adjust current focus index if necessary\n\t\t\tif (this.currentFocusIndex >= index && this.currentFocusIndex > 0) {\n\t\t\t\tthis.currentFocusIndex--;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Focus the first element\n\t */\n\tfocusFirst(): void {\n\t\tif (this.elements.length > 0) {\n\t\t\tconst firstEnabled = this.elements.find(el => !el.disabled);\n\t\t\tif (firstEnabled) {\n\t\t\t\tthis.focusElement(firstEnabled);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Focus a specific element by ID\n\t */\n\tfocusById(id: string): void {\n\t\tconst element = this.elements.find(el => el.id === id);\n\t\tif (element) {\n\t\t\tthis.focusElement(element);\n\t\t}\n\t}\n\n\t/**\n\t * Enable or disable navigation\n\t */\n\tsetEnabled(enabled: boolean): void {\n\t\tthis.isEnabled = enabled;\n\t}\n\n\t/**\n\t * Clear all registered elements\n\t */\n\tclear(): void {\n\t\tthis.elements = [];\n\t\tthis.currentFocusIndex = 0;\n\t}\n\n\t/**\n\t * Add navigation callback\n\t */\n\tonNavigation(callback: NavigationCallback): void {\n\t\tthis.callbacks.push(callback);\n\t}\n\n\t/**\n\t * Add select callback\n\t */\n\tonSelect(callback: SelectCallback): void {\n\t\tthis.selectCallbacks.push(callback);\n\t}\n\n\t/**\n\t * Add back callback\n\t */\n\tonBack(callback: BackCallback): void {\n\t\tthis.backCallbacks.push(callback);\n\t}\n\n\t/**\n\t * Remove all callbacks\n\t */\n\tclearCallbacks(): void {\n\t\tthis.callbacks = [];\n\t\tthis.selectCallbacks = [];\n\t\tthis.backCallbacks = [];\n\t}\n\n\t/**\n\t * Get current focused element info\n\t */\n\tgetCurrentFocus(): NavigationElement | null {\n\t\treturn this.elements[this.currentFocusIndex] || null;\n\t}\n\n\t/**\n\t * Cleanup navigation\n\t */\n\tdestroy(): void {\n\t\tif (browser) {\n\t\t\tdocument.removeEventListener('keydown', this.handleKeyDown);\n\t\t\tdocument.removeEventListener('focusin', this.handleFocusIn);\n\t\t}\n\t\tthis.clear();\n\t\tthis.clearCallbacks();\n\t\tthis.isEnabled = false;\n\t}\n}\n\n// Global navigation instance\nlet tvNavigation: TVNavigation | null = null;\n\n/**\n * Get the global TV navigation instance\n */\nexport function getTVNavigation(): TVNavigation {\n\tif (!tvNavigation) {\n\t\ttvNavigation = new TVNavigation();\n\t}\n\treturn tvNavigation;\n}\n\n/**\n * Initialize TV navigation (call this in your app startup)\n */\nexport function initializeTVNavigation(): void {\n\tgetTVNavigation();\n}\n\n/**\n * Cleanup TV navigation (call this on app shutdown)\n */\nexport function destroyTVNavigation(): void {\n\tif (tvNavigation) {\n\t\ttvNavigation.destroy();\n\t\ttvNavigation = null;\n\t}\n}"],"names":["isAndroidTV","screenSize","initializePlatformDetection","isCapacitor","userAgent","width","height","getIsAndroidTV","shouldUseTenFootUI","getFontSizes","getSpacing","TVNavigation","__publicField","event","target","elementIndex","el","current","candidates","closest","prev","curr","callback","navElement","index","element","row","column","options","id","a","b","firstEnabled","enabled","tvNavigation","getTVNavigation","initializeTVNavigation"],"mappings":"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"}