var _e=Object.defineProperty;var pe=(a,e,t)=>e in a?_e(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var X=(a,e,t)=>pe(a,typeof e!="symbol"?e+"":e,t);import{c as me,p as ue,ac as b,y as fe,G,n as y,D as U,q as V,z as de,ay as ce,A as we,C as ye,b as _,e as n,f as M,k as T,u as o,az as ge,g as E,a8 as le,a0 as xe,i as f,j as he,l as be,T as Me,U as ke,F as m,o as p,a3 as I,m as x,L as ze,M as ve,d as Ie,t as Ee,P as Te,a2 as Le,x as B}from"./DXSXZ86w.js";import{g as Se}from"./DFhjXLXr.js";import{b as qe,d as Ce}from"./CjsdXvoT.js";class Pe{constructor(){X(this,"observers",new Map);X(this,"elements",new Map)}createObserver(e){const t=`observer-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,s=new IntersectionObserver(c=>{c.forEach(l=>{l.isIntersecting?(e.onEnter?.(l),e.once&&(s.unobserve(l.target),this.elements.delete(l.target))):e.onExit?.(l)})},{root:e.root,rootMargin:e.rootMargin||"50px",threshold:e.threshold||.1});return this.observers.set(t,s),t}observe(e,t){const s=this.observers.get(e);s&&(s.observe(t),this.elements.set(t,e))}unobserve(e){const t=this.elements.get(e);t&&(this.observers.get(t)?.unobserve(e),this.elements.delete(e))}disconnect(e){const t=this.observers.get(e);t&&(t.disconnect(),this.observers.delete(e))}disconnectAll(){this.observers.forEach(e=>e.disconnect()),this.observers.clear(),this.elements.clear()}}const P=new Pe;function je(a,e,t){const s=P.createObserver({rootMargin:"100px",threshold:.1,once:!0,onEnter:()=>{const c=new Image;c.onload=()=>{a.src=e,a.classList.add("loaded")},c.onerror=()=>{a.classList.add("error")},c.src=e}});return P.observe(s,a),()=>{P.unobserve(a),P.disconnect(s)}}function Ne(a,e){let t=null;if(a instanceof HTMLImageElement&&e.src)t=je(a,e.src);else{const s=P.createObserver(e);P.observe(s,a),t=()=>{P.unobserve(a),P.disconnect(s)}}return{destroy(){t?.()}}}class Be{constructor(){X(this,"metrics",[]);X(this,"thresholds",{fcp:1500,lcp:2500,fid:100,cls:.1});typeof window<"u"&&this.initializeObservers()}initializeObservers(){"PerformanceObserver"in window&&(this.observeMetric("first-contentful-paint","paint"),this.observeMetric("largest-contentful-paint","largest-contentful-paint"),this.observeMetric("first-input-delay","first-input"),this.observeMetric("cumulative-layout-shift","layout-shift"))}observeMetric(e,t){try{new PerformanceObserver(c=>{for(const l of c.getEntries()){let k=0;switch(t){case"paint":k=l.startTime;break;case"largest-contentful-paint":k=l.startTime;break;case"first-input":k=l.processingStart-l.startTime;break;case"layout-shift":k=l.value;break}this.recordMetric(e,k)}}).observe({entryTypes:[t]})}catch{}}recordMetric(e,t){const s={name:e,value:t,timestamp:Date.now()};this.metrics.push(s),this.checkThreshold(e,t),this.metrics.length>100&&(this.metrics=this.metrics.slice(-50))}checkThreshold(e,t){switch(e){case"first-contentful-paint":this.thresholds.fcp;break;case"largest-contentful-paint":this.thresholds.lcp;break;case"first-input-delay":this.thresholds.fid;break;case"cumulative-layout-shift":this.thresholds.cls;break}}mark(e){"performance"in window&&"mark"in performance&&performance.mark(e)}measure(e,t,s){if("performance"in window&&"measure"in performance)try{performance.measure(e,t,s);const c=performance.getEntriesByName(e,"measure")[0];this.recordMetric(e,c.duration)}catch{}}getMetrics(){return[...this.metrics]}getMetricsByName(e){return this.metrics.filter(t=>t.name===e)}getBundleInfo(){if("performance"in window){const e=performance.getEntriesByType("navigation"),t=performance.getEntriesByType("resource");return{navigation:e,resources:t.map(s=>({name:s.name,size:s.transferSize||0,duration:s.duration}))}}return null}}const te=new Be;function Oe(a){te.mark(`${a}-mount-start`)}function Ae(a){te.mark(`${a}-mount-end`),te.measure(`${a}-mount-duration`,`${a}-mount-start`,`${a}-mount-end`)}function Re(a,e){const t=performance.now()-e;te.recordMetric("image-load-time",t)}g[m]="src/lib/components/LazyImage.svelte";var De=_(p('<img class="placeholder-img svelte-25yiqd"/>'),g[m],[[79,4]]),Fe=_(p('<div class="placeholder-skeleton svelte-25yiqd"></div>'),g[m],[[81,4]]),Ue=_(p('<div class="image-placeholder svelte-25yiqd"><!></div>'),g[m],[[77,2]]),Ve=_(p('<div class="image-error svelte-25yiqd"><div class="error-icon svelte-25yiqd">üñºÔ∏è</div> <span class="svelte-25yiqd">Image failed to load</span></div>'),g[m],[[85,2,[[86,3],[87,3]]]]),Ge=_(p('<source type="image/webp" class="svelte-25yiqd"/>'),g[m],[[92,4]]),He=_(p('<picture class="svelte-25yiqd"><!> <img decoding="async"/></picture>'),g[m],[[90,2,[[94,3]]]]),Je=_(p("<div><!></div>"),g[m],[[68,0]]);function g(a,e){me(new.target),ue(e,!1,g);const t=U(),s=U();let c=b(e,"src",8),l=b(e,"alt",8,""),k=b(e,"placeholder",8,""),O=b(e,"webpSrc",8,""),z=b(e,"width",8,"auto"),A=b(e,"height",8,"auto"),L=b(e,"loading",8,"lazy"),H=b(e,"sizes",8,""),Y=b(e,"srcset",8,""),re=b(e,"className",8,""),R=U(),D=U(!1),J=U(!1),j=U(!1),N=0;fe(()=>{G(L(),"eager")&&F()});function Z(u){return u?[320,640,960,1280,1920].map(q=>`${u}?w=${q} ${q}w`).join(", "):""}function F(){y(D)||y(J)||(N=performance.now(),V(j,!0))}function $(){V(D,!0),N>0&&Re(c(),N)}function ae(){V(J,!0)}function se(){!y(j)&&G(L(),"lazy")&&F()}de(()=>(ce(Y()),ce(c())),()=>{V(t,Y()||Z(c()))}),de(()=>ce(O()),()=>{V(s,O()?Z(O()):"")}),we(),ye();var S=Je(),ie=n(S);{var ne=u=>{var h=Ue(),q=n(h);{var K=r=>{var i=De();E(()=>{I(i,"src",k()),I(i,"alt",l())}),f(r,i)},Q=r=>{var i=Fe();f(r,i)};M(()=>T(q,r=>{k()?r(K):r(Q,!1)}),"if",g,78,3)}o(h),f(u,h)},ee=u=>{var h=Me(),q=ke(h);{var K=r=>{var i=Ve();f(r,i)},Q=r=>{var i=He(),d=n(i);{var C=W=>{var oe=Ge();E(()=>{I(oe,"srcset",y(s)),I(oe,"sizes",H()||"100vw")}),f(W,oe)};M(()=>T(d,W=>{y(s)&&W(C)}),"if",g,91,3)}var w=x(d,2);ze(w,W=>V(R,W),()=>y(R)),o(i),E(()=>{I(w,"src",c()),I(w,"srcset",y(t)),I(w,"sizes",H()||"100vw"),I(w,"alt",l()),le(w,1,`lazy-image ${y(D)?"loaded":""}`,"svelte-25yiqd"),I(w,"loading",L())}),ve("load",w,$),ve("error",w,ae),f(r,i)};M(()=>T(q,r=>{y(J)?r(K):r(Q,!1)},!0),"if",g,84,1)}f(u,h)};M(()=>T(ie,u=>{!y(j)&&G(L(),"lazy")?u(ne):u(ee,!1)}),"if",g,76,1)}return o(S),ge(S,(u,h)=>Ne?.(u,h),()=>({onEnter:se,rootMargin:"100px",once:!0})),E(()=>{le(S,1,`lazy-image-container ${re()??""}`,"svelte-25yiqd"),xe(S,`width: ${(G(typeof z(),"number")?z()+"px":z())??""}; height: ${(G(typeof A(),"number")?A()+"px":A())??""};`)}),f(a,S),he({...be()})}function Ke(a,e){if(!qe())return{destroy(){}};const t=Ce();return t.registerElement(a,e.row,e.column,{id:e.id,onSelect:e.onSelect,disabled:e.disabled}),e.focusOnMount&&setTimeout(()=>{a.focus()},100),{update(s){t.unregisterElement(a),t.registerElement(a,s.row,s.column,{id:s.id,onSelect:s.onSelect,disabled:s.disabled})},destroy(){t.unregisterElement(a)}}}v[m]="src/lib/components/MovieCard.svelte";var Qe=_(p('<div class="flex h-full w-full items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900 text-gray-400"><div class="text-center"><div class="mb-2 text-3xl">üé¨</div> <div class="px-3 text-xs font-medium"> </div></div></div>'),v[m],[[75,4,[[78,5,[[79,6],[80,6]]]]]]),We=_(p('<span class="text-gray-300"> </span>'),v[m],[[106,6]]),Xe=_(p('<div class="flex items-center space-x-1"><span class="text-yellow-400">‚òÖ</span> <span> </span></div>'),v[m],[[109,6,[[110,7],[111,7]]]]),Ye=_(p('<div class="mt-1"><span class="rounded bg-red-600 px-1 py-0.5 text-xs font-medium sm:px-1.5"> </span></div>'),v[m],[[116,5,[[117,6]]]]),Ze=_(p('<p class="mt-1 text-xs text-gray-300"> </p>'),v[m],[[130,6]]),$e=_(p('<button class="movie-card group relative w-full cursor-pointer text-left svelte-figfm3" data-movie-card="" data-tv-navigable="" tabindex="0"><div class="relative"><div><!> <div class="card-overlay absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 transition-opacity duration-300 svelte-figfm3"></div> <div class="card-controls pointer-events-none absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-300 svelte-figfm3"><div class="rounded-full bg-white p-2 shadow-lg transition-all sm:p-3"><!></div></div> <div class="card-info absolute right-0 bottom-0 left-0 p-2 text-white opacity-0 transition-opacity duration-300 sm:p-3 svelte-figfm3"><h3 class="mb-1 text-xs leading-tight font-bold sm:text-sm"> </h3> <div class="flex items-center space-x-1 text-xs sm:space-x-2"><!> <!></div> <!></div> <div class="card-title absolute bottom-0 left-0 right-0 p-2 text-white transition-opacity duration-300 sm:p-3 svelte-figfm3"><div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"></div> <div class="relative z-10"><h3 class="line-clamp-2 text-xs font-bold leading-tight sm:text-sm"> </h3> <!></div></div></div></div></button>'),v[m],[[51,0,[[60,1,[[61,2,[[86,3],[91,3,[[94,4]]],[100,3,[[103,4],[104,4]]],[125,3,[[126,4],[127,4,[[128,5]]]]]]]]]]]]);function v(a,e){me(new.target),ue(e,!0,v);let t=b(e,"size",3,"medium"),s=b(e,"row",3,0),c=b(e,"column",3,0);fe(()=>(Oe("MovieCard"),()=>Ae("MovieCard")));const l={small:"w-32 h-44 sm:w-36 sm:h-52 md:w-40 md:h-56",medium:"w-36 h-52 sm:w-44 sm:h-64 md:w-48 md:h-72",large:"w-44 h-64 sm:w-52 sm:h-76 md:w-56 md:h-80"},k=Ee(Te(()=>e.item.poster?e.item.poster.replace(/\.(jpg|jpeg|png)$/i,".webp"):""),"webpPoster");function O(){const r=G(e.item.type,"series")?`/series/${e.item.id}`:`/watch/${e.item.id}`;Se(r)}var z=$e();z.__click=O;var A=n(z),L=n(A),H=n(L);{var Y=r=>{M(()=>g(r,{get src(){return e.item.poster},get webpSrc(){return y(k)},get alt(){return e.item.name},sizes:"(max-width: 768px) 150px, (max-width: 1200px) 200px, 250px",className:"h-full w-full object-cover"}),"component",v,67,4,{componentTag:"LazyImage"})},re=r=>{var i=Qe(),d=n(i),C=x(n(d),2),w=n(C,!0);o(C),o(d),o(i),E(()=>B(w,e.item.name)),f(r,i)};M(()=>T(H,r=>{e.item.poster?r(Y):r(re,!1)}),"if",v,66,3)}var R=x(H,4),D=n(R),J=n(D);M(()=>Le(J,{class:"h-4 w-4 text-black sm:h-5 sm:w-5 md:h-6 md:w-6",fill:"currentColor"}),"component",v,95,5,{componentTag:"Play"}),o(D),o(R);var j=x(R,2),N=n(j),Z=n(N,!0);o(N);var F=x(N,2),$=n(F);{var ae=r=>{var i=We(),d=n(i,!0);o(i),E(()=>B(d,e.item.year)),f(r,i)};M(()=>T($,r=>{e.item.year&&r(ae)}),"if",v,105,5)}var se=x($,2);{var S=r=>{var i=Xe(),d=x(n(i),2),C=n(d,!0);o(d),o(i),E(()=>B(C,e.item.imdbRating)),f(r,i)};M(()=>T(se,r=>{e.item.imdbRating&&r(S)}),"if",v,108,5)}o(F);var ie=x(F,2);{var ne=r=>{var i=Ye(),d=n(i),C=n(d,!0);o(d),o(i),E(()=>B(C,e.item.genre[0])),f(r,i)};M(()=>T(ie,r=>{e.item.genre&&e.item.genre.length>0&&r(ne)}),"if",v,115,4)}o(j);var ee=x(j,2),u=x(n(ee),2),h=n(u),q=n(h,!0);o(h);var K=x(h,2);{var Q=r=>{var i=Ze(),d=n(i,!0);o(i),E(()=>B(d,e.item.year)),f(r,i)};M(()=>T(K,r=>{e.item.year&&r(Q)}),"if",v,129,5)}return o(u),o(ee),o(L),o(A),o(z),ge(z,(r,i)=>Ke?.(r,i),()=>({row:s(),column:c(),id:`movie-${e.item.id}`,onSelect:O})),E(()=>{I(z,"aria-label",e.item.name),le(L,1,`${l[t()]??""} card-image relative overflow-hidden rounded-md bg-gray-900 shadow-lg transition-all duration-300`,"svelte-figfm3"),B(Z,e.item.name),B(q,e.item.name)}),f(a,z),he({...be()})}Ie(["click"]);export{v as M};
//# sourceMappingURL=DFVVn2C0.js.map
