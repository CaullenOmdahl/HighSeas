var m=Object.defineProperty;var b=(a,e,s)=>e in a?m(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var c=(a,e,s)=>b(a,typeof e!="symbol"?e+"":e,s);let o=!1,l="desktop";function v(){const a=typeof window<"u"&&window.Capacitor;if(a&&window.Capacitor.getPlatform()==="android"){const t=navigator.userAgent.toLowerCase();o=t.includes("android")&&(t.includes("tv")||t.includes("leanback"))}if(!a){const t=navigator.userAgent.toLowerCase();o=t.includes("android")&&t.includes("tv")}const e=window.innerWidth,s=window.innerHeight;e>=1920||s>=1080?l="tv":e>=1024?l="desktop":e>=768?l="tablet":l="mobile",o&&(l="tv")}function g(){return o}function h(){return o||l==="tv"}function E(){return h()?{xs:"text-lg",sm:"text-xl",base:"text-2xl",lg:"text-3xl",xl:"text-4xl","2xl":"text-5xl"}:{xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"}}function I(){return h()?{xs:8,sm:12,md:16,lg:24,xl:32}:{xs:2,sm:4,md:6,lg:8,xl:12}}class x{constructor(){c(this,"elements",[]);c(this,"currentFocusIndex",0);c(this,"isEnabled",!1);c(this,"callbacks",[]);c(this,"selectCallbacks",[]);c(this,"backCallbacks",[]);c(this,"handleKeyDown",e=>{if(!(!this.isEnabled||this.elements.length===0))switch(this.elements[this.currentFocusIndex],e.key){case"ArrowUp":e.preventDefault(),this.navigateUp();break;case"ArrowDown":e.preventDefault(),this.navigateDown();break;case"ArrowLeft":e.preventDefault(),this.navigateLeft();break;case"ArrowRight":e.preventDefault(),this.navigateRight();break;case"Enter":case" ":e.preventDefault(),this.handleSelect();break;case"Escape":case"Backspace":e.preventDefault(),this.handleBack();break}});c(this,"handleFocusIn",e=>{const s=e.target,t=this.elements.findIndex(n=>n.element===s);t!==-1&&(this.currentFocusIndex=t)});g()&&this.initializeNavigation()}initializeNavigation(){this.isEnabled=!0,document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("focusin",this.handleFocusIn)}navigateUp(){const e=this.elements[this.currentFocusIndex],s=this.elements.filter(t=>!t.disabled&&t.row<e.row&&Math.abs(t.column-e.column)<=2);if(s.length>0){const t=s.reduce((n,i)=>Math.abs(i.column-e.column)<Math.abs(n.column-e.column)?i:n);this.focusElement(t)}this.callbacks.forEach(t=>t("up"))}navigateDown(){const e=this.elements[this.currentFocusIndex],s=this.elements.filter(t=>!t.disabled&&t.row>e.row&&Math.abs(t.column-e.column)<=2);if(s.length>0){const t=s.reduce((n,i)=>Math.abs(i.column-e.column)<Math.abs(n.column-e.column)?i:n);this.focusElement(t)}this.callbacks.forEach(t=>t("down"))}navigateLeft(){const e=this.elements[this.currentFocusIndex],s=this.elements.filter(t=>!t.disabled&&t.row===e.row&&t.column<e.column);if(s.length>0){const t=s.reduce((n,i)=>i.column>n.column?i:n);this.focusElement(t)}this.callbacks.forEach(t=>t("left"))}navigateRight(){const e=this.elements[this.currentFocusIndex],s=this.elements.filter(t=>!t.disabled&&t.row===e.row&&t.column>e.column);if(s.length>0){const t=s.reduce((n,i)=>i.column<n.column?i:n);this.focusElement(t)}this.callbacks.forEach(t=>t("right"))}handleSelect(){const e=this.elements[this.currentFocusIndex];e&&!e.disabled&&(e.element.click(),e.onSelect&&e.onSelect()),this.selectCallbacks.forEach(s=>s())}handleBack(){this.backCallbacks.forEach(e=>e())}focusElement(e){const s=this.elements.indexOf(e);s!==-1&&(this.currentFocusIndex=s,e.element.focus())}registerElement(e,s,t,n={}){const i=n.id||`nav-${this.elements.length}`;this.unregisterElement(e),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.setAttribute("data-nav-row",s.toString()),e.setAttribute("data-nav-column",t.toString()),e.setAttribute("data-nav-id",i);const f={element:e,id:i,row:s,column:t,onSelect:n.onSelect,disabled:n.disabled||!1};this.elements.push(f),this.elements.sort((r,u)=>r.row!==u.row?r.row-u.row:r.column-u.column)}unregisterElement(e){const s=this.elements.findIndex(t=>t.element===e);s!==-1&&(this.elements.splice(s,1),this.currentFocusIndex>=s&&this.currentFocusIndex>0&&this.currentFocusIndex--)}focusFirst(){if(this.elements.length>0){const e=this.elements.find(s=>!s.disabled);e&&this.focusElement(e)}}focusById(e){const s=this.elements.find(t=>t.id===e);s&&this.focusElement(s)}setEnabled(e){this.isEnabled=e}clear(){this.elements=[],this.currentFocusIndex=0}onNavigation(e){this.callbacks.push(e)}onSelect(e){this.selectCallbacks.push(e)}onBack(e){this.backCallbacks.push(e)}clearCallbacks(){this.callbacks=[],this.selectCallbacks=[],this.backCallbacks=[]}getCurrentFocus(){return this.elements[this.currentFocusIndex]||null}destroy(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("focusin",this.handleFocusIn),this.clear(),this.clearCallbacks(),this.isEnabled=!1}}let d=null;function w(){return d||(d=new x),d}function F(){w()}export{I as a,g as b,F as c,w as d,E as g,v as i,h as s};
//# sourceMappingURL=CjsdXvoT.js.map
