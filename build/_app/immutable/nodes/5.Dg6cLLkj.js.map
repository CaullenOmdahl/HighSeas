{"version":3,"file":"5.Dg6cLLkj.js","sources":["../../../../../../src/routes/search/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { page } from '$app/stores';\n\timport { goto } from '$app/navigation';\n\timport { Search, X } from 'lucide-svelte';\n\timport MovieCard from '$lib/components/MovieCard.svelte';\n\timport { stremioService } from '$lib/services/stremio';\n\timport type { StremioMetaPreview } from '$lib/services/stremio';\n\n\tlet searchQuery = $state('');\n\tlet searchResults = $state<StremioMetaPreview[]>([]);\n\tlet loading = $state(false);\n\tlet searchInput: HTMLInputElement;\n\n\t// Get initial query from URL params\n\tconst urlQuery = $derived($page.url.searchParams.get('q') || '');\n\n\tasync function performSearch(query: string) {\n\t\tif (!query.trim()) {\n\t\t\tsearchResults = [];\n\t\t\treturn;\n\t\t}\n\n\t\tloading = true;\n\t\ttry {\n\t\t\tconst results = await stremioService.search(query.trim());\n\t\t\tsearchResults = results.slice(0, 50); // Limit results\n\t\t\tconsole.log(`Found ${results.length} search results for \"${query}\"`);\n\t\t} catch (error) {\n\t\t\tconsole.error('Search failed:', error);\n\t\t\tsearchResults = [];\n\t\t} finally {\n\t\t\tloading = false;\n\t\t}\n\t}\n\n\tfunction handleSearch() {\n\t\tif (searchQuery.trim()) {\n\t\t\t// Update URL with search query\n\t\t\tconst url = new URL(window.location.href);\n\t\t\turl.searchParams.set('q', searchQuery.trim());\n\t\t\tgoto(url.pathname + url.search, { replaceState: true });\n\n\t\t\tperformSearch(searchQuery);\n\t\t}\n\t}\n\n\tfunction handleKeyPress(event: KeyboardEvent) {\n\t\tif (event.key === 'Enter') {\n\t\t\thandleSearch();\n\t\t}\n\t}\n\n\tfunction clearSearch() {\n\t\tsearchQuery = '';\n\t\tsearchResults = [];\n\t\tconst url = new URL(window.location.href);\n\t\turl.searchParams.delete('q');\n\t\tgoto(url.pathname, { replaceState: true });\n\t\tsearchInput?.focus();\n\t}\n\n\tonMount(() => {\n\t\t// Initialize Stremio service\n\t\tstremioService.initialize();\n\n\t\t// Set initial query and perform search if present\n\t\tif (urlQuery) {\n\t\t\tsearchQuery = urlQuery;\n\t\t\tperformSearch(urlQuery);\n\t\t}\n\n\t\t// Focus search input\n\t\tsearchInput?.focus();\n\t});\n</script>\n\n<svelte:head>\n\t<title>Search{searchQuery ? ` - ${searchQuery}` : ''} - HighSeas</title>\n</svelte:head>\n\n<div class=\"min-h-screen bg-black pt-20\">\n\t<!-- Search Header -->\n\t<div class=\"sticky top-16 z-40 bg-gradient-to-b from-black to-black/90 backdrop-blur-sm\">\n\t\t<div class=\"mx-auto max-w-4xl px-4 py-6 sm:px-6\">\n\t\t\t<div class=\"relative\">\n\t\t\t\t<div class=\"relative flex items-center\">\n\t\t\t\t\t<Search class=\"absolute left-4 h-5 w-5 text-gray-400\" />\n\t\t\t\t\t<input\n\t\t\t\t\t\tbind:this={searchInput}\n\t\t\t\t\t\tbind:value={searchQuery}\n\t\t\t\t\t\tonkeypress={handleKeyPress}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Search movies and TV shows...\"\n\t\t\t\t\t\tclass=\"w-full rounded-full bg-gray-900 py-4 pr-12 pl-12 text-white placeholder-gray-400 focus:bg-gray-800 focus:ring-2 focus:ring-red-600 focus:outline-none\"\n\t\t\t\t\t/>\n\t\t\t\t\t{#if searchQuery}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonclick={clearSearch}\n\t\t\t\t\t\t\tclass=\"absolute right-4 rounded-full p-1 text-gray-400 transition-colors hover:text-white\"\n\t\t\t\t\t\t\taria-label=\"Clear search\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<X class=\"h-5 w-5\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t{#if searchQuery.trim() && !loading}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonclick={handleSearch}\n\t\t\t\t\t\tclass=\"absolute top-1/2 right-2 -translate-y-1/2 rounded-full bg-red-600 px-6 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:ring-2 focus:ring-red-600 focus:ring-offset-2 focus:ring-offset-gray-900 focus:outline-none\"\n\t\t\t\t\t>\n\t\t\t\t\t\tSearch\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<!-- Search Results -->\n\t<div class=\"mx-auto max-w-7xl px-4 pb-12 sm:px-6\">\n\t\t{#if loading}\n\t\t\t<div class=\"flex items-center justify-center py-16\">\n\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"mb-4 inline-block h-12 w-12 animate-spin rounded-full border-b-2 border-red-600\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"text-lg text-white\">Searching...</div>\n\t\t\t\t\t<div class=\"mt-2 text-sm text-gray-400\">Looking through streaming catalogs</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else if searchQuery.trim() && searchResults.length === 0}\n\t\t\t<div class=\"py-16 text-center\">\n\t\t\t\t<div class=\"mb-6 text-6xl opacity-50\">üîç</div>\n\t\t\t\t<h2 class=\"mb-4 text-xl font-bold text-white sm:text-2xl\">No Results Found</h2>\n\t\t\t\t<p class=\"mx-auto mb-6 max-w-md leading-relaxed text-gray-400\">\n\t\t\t\t\tWe couldn't find any movies or TV shows matching \"<strong class=\"text-white\"\n\t\t\t\t\t\t>{searchQuery}</strong\n\t\t\t\t\t>\". Try different keywords or check the spelling.\n\t\t\t\t</p>\n\t\t\t\t<button\n\t\t\t\t\tonclick={clearSearch}\n\t\t\t\t\tclass=\"rounded bg-red-600 px-6 py-3 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:ring-2 focus:ring-red-600 focus:ring-offset-2 focus:ring-offset-black\"\n\t\t\t\t>\n\t\t\t\t\tClear Search\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{:else if searchResults.length > 0}\n\t\t\t<div class=\"mb-6\">\n\t\t\t\t<h2 class=\"text-xl font-semibold text-white sm:text-2xl\">\n\t\t\t\t\tSearch Results for \"<span class=\"text-red-500\">{searchQuery}</span>\"\n\t\t\t\t</h2>\n\t\t\t\t<p class=\"mt-2 text-sm text-gray-400\">{searchResults.length} results found</p>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6\"\n\t\t\t\tdata-search-results\n\t\t\t>\n\t\t\t\t{#each searchResults as item (item.id)}\n\t\t\t\t\t<div class=\"flex justify-center\">\n\t\t\t\t\t\t<MovieCard {item} size=\"medium\" />\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"py-16 text-center\">\n\t\t\t\t<div class=\"mb-6 text-6xl opacity-50\">üé¨</div>\n\t\t\t\t<h2 class=\"mb-4 text-xl font-bold text-white sm:text-2xl\">Discover Content</h2>\n\t\t\t\t<p class=\"mx-auto mb-6 max-w-md leading-relaxed text-gray-400\">\n\t\t\t\t\tSearch through thousands of movies and TV shows. Try searching for your favorite titles,\n\t\t\t\t\tactors, or genres.\n\t\t\t\t</p>\n\t\t\t\t<div class=\"flex flex-wrap justify-center gap-2 text-sm\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\tsearchQuery = 'action';\n\t\t\t\t\t\t\thandleSearch();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclass=\"rounded-full bg-gray-800 px-4 py-2 text-gray-300 transition-colors hover:bg-gray-700 hover:text-white\"\n\t\t\t\t\t\t>Action</button\n\t\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\tsearchQuery = 'comedy';\n\t\t\t\t\t\t\thandleSearch();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclass=\"rounded-full bg-gray-800 px-4 py-2 text-gray-300 transition-colors hover:bg-gray-700 hover:text-white\"\n\t\t\t\t\t\t>Comedy</button\n\t\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\tsearchQuery = 'drama';\n\t\t\t\t\t\t\thandleSearch();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclass=\"rounded-full bg-gray-800 px-4 py-2 text-gray-300 transition-colors hover:bg-gray-700 hover:text-white\"\n\t\t\t\t\t\t>Drama</button\n\t\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\tsearchQuery = 'thriller';\n\t\t\t\t\t\t\thandleSearch();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclass=\"rounded-full bg-gray-800 px-4 py-2 text-gray-300 transition-colors hover:bg-gray-700 hover:text-white\"\n\t\t\t\t\t\t>Thriller</button\n\t\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\tsearchQuery = 'sci-fi';\n\t\t\t\t\t\t\thandleSearch();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclass=\"rounded-full bg-gray-800 px-4 py-2 text-gray-300 transition-colors hover:bg-gray-700 hover:text-white\"\n\t\t\t\t\t\t>Sci-Fi</button\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n</div>\n"],"names":["on_click","_","searchQuery","handleSearch","$.set","on_click_1","__1","on_click_2","__2","on_click_3","__3","on_click_4","__4","searchResults","$.tag","$.state","$.proxy","loading","searchInput","urlQuery","$.derived","$page","performSearch","query","results","stremioService","url","$.get","goto","handleKeyPress","event","$.strict_equals","clearSearch","onMount","$.bind_this","input","$$value","$$render","consequent","consequent_1","$.validate_each_keys","item","$.each","div_9","$.set_text","text_2","consequent_4","alternate","consequent_3","alternate_1","consequent_2","alternate_2","$.bind_value"],"mappings":"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"}