{
  "log": {
    "version": "1.2",
    "creator": {
      "name": "WebInspector",
      "version": "537.36"
    },
    "pages": [],
    "entries": [
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "sendLogBatch",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 50,
                "columnNumber": 12
              },
              {
                "functionName": "flushToFile",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 85,
                "columnNumber": 9
              },
              {
                "functionName": "",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 34,
                "columnNumber": 11
              }
            ]
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "32963",
        "request": {
          "method": "POST",
          "url": "http://localhost:5173/api/logs",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "232"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/watch/tt26743210?stream=https%3A%2F%2Fsgp1-4.download.real-debrid.com%2Fd%2F7ZATI3Q7EVVUS75%2FHow.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv&quality=4K"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 1143,
          "bodySize": 232,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"logs\":[{\"timestamp\":\"2025-08-01T11:31:55.763Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:31:56.838Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"}]}"
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Vary",
              "value": "Origin"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "66"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Fri, 01 Aug 2025 11:31:57 GMT"
            },
            {
              "name": "etag",
              "value": "W/\"42-0vDLuLcFg2+MJjULmeJbiK3gmec\""
            },
            {
              "name": "x-powered-by",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 66,
            "mimeType": "application/json",
            "compression": 0,
            "text": "{\"status\":\"ok\",\"message\":\"Logged 2 entries to app-2025-08-01.log\"}"
          },
          "redirectURL": "",
          "headersSize": 253,
          "bodySize": 66,
          "_transferSize": 319,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:31:57.553Z",
        "time": 19.698999996762723,
        "timings": {
          "blocked": 6.540999996623956,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.477,
          "wait": 8.166000006876885,
          "receive": 4.514999993261881,
          "_blocked_queueing": 5.749999996623956,
          "_workerStart": -4.857,
          "_workerReady": -3.921,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "importUpdatedModule",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 814,
                "columnNumber": 43
              },
              {
                "functionName": "fetchUpdate",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 209,
                "columnNumber": 31
              },
              {
                "functionName": "queueUpdate",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 188,
                "columnNumber": 29
              },
              {
                "functionName": "",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 838,
                "columnNumber": 54
              },
              {
                "functionName": "handleMessage",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 837,
                "columnNumber": 37
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 458,
                  "columnNumber": 41
                },
                {
                  "functionName": "dequeue",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 480,
                  "columnNumber": 7
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 472,
                  "columnNumber": 8
                },
                {
                  "functionName": "enqueue",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 466,
                  "columnNumber": 9
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 458,
                  "columnNumber": 27
                },
                {
                  "functionName": "onMessage",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 305,
                  "columnNumber": 5
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 413,
                  "columnNumber": 4
                }
              ]
            }
          }
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047926856",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/@vite/client"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047926856"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Etag",
              "value": "W/\"208b-k58xCX2QFxjfQNnME5OTbZ3M1oI\""
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Content-Length",
              "value": "26890"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:06 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 26890,
            "mimeType": "text/javascript",
            "text": "import { createHotContext as __vite__createHotContext } from \"/@vite/client\";import.meta.hot = __vite__createHotContext(\"/src/lib/video/StremioVideoPlayer.tsx\");import __vite__cjsImport0_react_jsxDevRuntime from \"/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=905c193d\"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime[\"jsxDEV\"];\nimport * as RefreshRuntime from \"/@react-refresh\";\nconst inWebWorker = typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope;\nlet prevRefreshReg;\nlet prevRefreshSig;\nif (import.meta.hot && !inWebWorker) {\n  if (!window.$RefreshReg$) {\n    throw new Error(\n      \"@vitejs/plugin-react can't detect preamble. Something is wrong.\"\n    );\n  }\n  prevRefreshReg = window.$RefreshReg$;\n  prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = RefreshRuntime.getRefreshReg(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\");\n  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport __vite__cjsImport3_react from \"/node_modules/.vite/deps/react.js?v=905c193d\"; const useEffect = __vite__cjsImport3_react[\"useEffect\"]; const useRef = __vite__cjsImport3_react[\"useRef\"]; const useImperativeHandle = __vite__cjsImport3_react[\"useImperativeHandle\"]; const forwardRef = __vite__cjsImport3_react[\"forwardRef\"];\nimport { StremioVideoSystem } from \"/src/lib/video/StremioVideoSystem.ts?t=1754047926856\";\nconst StremioVideoPlayer = _s(forwardRef(_c = _s((props, ref) => {\n  _s();\n  const containerRef = useRef(null);\n  const videoInstanceRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    dispatch: (action) => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.dispatch(action);\n      }\n    },\n    destroy: () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    }\n  }));\n  useEffect(() => {\n    if (!containerRef.current) {\n      console.warn(\"StremioVideoPlayer: Container element not ready\");\n      return;\n    }\n    console.log(\"StremioVideoPlayer: Initializing video system\");\n    videoInstanceRef.current = new StremioVideoSystem({\n      containerElement: containerRef.current\n    });\n    if (props.onPropChanged) {\n      videoInstanceRef.current.on(\"propChanged\", props.onPropChanged);\n    }\n    if (props.onError) {\n      videoInstanceRef.current.on(\"error\", props.onError);\n    }\n    if (props.onEnded) {\n      videoInstanceRef.current.on(\"ended\", props.onEnded);\n    }\n    const propsToObserve = [\n      \"loaded\",\n      \"paused\",\n      \"time\",\n      \"duration\",\n      \"buffering\",\n      \"buffered\",\n      \"volume\",\n      \"muted\",\n      \"playbackSpeed\",\n      \"audioTracks\",\n      \"subtitlesTracks\"\n    ];\n    propsToObserve.forEach((propName) => {\n      videoInstanceRef.current.dispatch({\n        type: \"observeProp\",\n        propName\n      });\n    });\n    return () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitleTrack) {\n      videoInstanceRef.current.loadSubtitleTrack(props.subtitleTrack);\n    } else {\n      videoInstanceRef.current.loadSubtitleTrack(null);\n    }\n  }, [props.subtitleTrack]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.stream !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"stream\",\n        propValue: props.stream\n      });\n    }\n  }, [props.stream]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.paused !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"paused\",\n        propValue: props.paused\n      });\n    }\n  }, [props.paused]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.time !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"time\",\n        propValue: props.time\n      });\n    }\n  }, [props.time]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.volume !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"volume\",\n        propValue: props.volume\n      });\n    }\n  }, [props.volume]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.muted !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"muted\",\n        propValue: props.muted\n      });\n    }\n  }, [props.muted]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.playbackSpeed !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"playbackSpeed\",\n        propValue: props.playbackSpeed\n      });\n    }\n  }, [props.playbackSpeed]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesSize !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesSize\",\n        propValue: props.subtitlesSize\n      });\n    }\n  }, [props.subtitlesSize]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOffset !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOffset\",\n        propValue: props.subtitlesOffset\n      });\n    }\n  }, [props.subtitlesOffset]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesTextColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesTextColor\",\n        propValue: props.subtitlesTextColor\n      });\n    }\n  }, [props.subtitlesTextColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesBackgroundColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesBackgroundColor\",\n        propValue: props.subtitlesBackgroundColor\n      });\n    }\n  }, [props.subtitlesBackgroundColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOutlineColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOutlineColor\",\n        propValue: props.subtitlesOutlineColor\n      });\n    }\n  }, [props.subtitlesOutlineColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOpacity !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOpacity\",\n        propValue: props.subtitlesOpacity\n      });\n    }\n  }, [props.subtitlesOpacity]);\n  return /* @__PURE__ */ jsxDEV(\n    \"div\",\n    {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: \"#000\",\n        ...props.style\n      },\n      className: props.className\n    },\n    void 0,\n    false,\n    {\n      fileName: \"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\",\n      lineNumber: 320,\n      columnNumber: 5\n    },\n    this\n  );\n}, \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\")), \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\");\n_c2 = StremioVideoPlayer;\nStremioVideoPlayer.displayName = \"StremioVideoPlayer\";\nexport default StremioVideoPlayer;\nvar _c, _c2;\n$RefreshReg$(_c, \"StremioVideoPlayer$forwardRef\");\n$RefreshReg$(_c2, \"StremioVideoPlayer\");\nif (import.meta.hot && !inWebWorker) {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}\nif (import.meta.hot && !inWebWorker) {\n  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {\n    RefreshRuntime.registerExportsForReactRefresh(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports);\n    import.meta.hot.accept((nextExports) => {\n      if (!nextExports) return;\n      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports, nextExports);\n      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);\n    });\n  });\n}\n\n//# sourceMappingURL=data:application/json;base64,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O0FBQUEsRUFTNkI7QUFHakMsR0FBQyxrQ0FBQztBQUFDQyxNQTNPRzdDO0FBNk9OQSxtQkFBbUI4QyxjQUFjO0FBRWpDLGVBQWU5QztBQUFtQixJQUFBRSxJQUFBMkM7QUFBQUUsYUFBQTdDLElBQUE7QUFBQTZDLGFBQUFGLEtBQUEiLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIlN0cmVtaW9WaWRlb1N5c3RlbSIsIlN0cmVtaW9WaWRlb1BsYXllciIsIl9zIiwiX2MiLCJwcm9wcyIsInJlZiIsImNvbnRhaW5lclJlZiIsInZpZGVvSW5zdGFuY2VSZWYiLCJkaXNwYXRjaCIsImFjdGlvbiIsImN1cnJlbnQiLCJkZXN0cm95IiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJjb250YWluZXJFbGVtZW50Iiwib25Qcm9wQ2hhbmdlZCIsIm9uIiwib25FcnJvciIsIm9uRW5kZWQiLCJwcm9wc1RvT2JzZXJ2ZSIsImZvckVhY2giLCJwcm9wTmFtZSIsInR5cGUiLCJzdWJ0aXRsZVRyYWNrIiwibG9hZFN1YnRpdGxlVHJhY2siLCJzdHJlYW0iLCJ1bmRlZmluZWQiLCJwcm9wVmFsdWUiLCJwYXVzZWQiLCJ0aW1lIiwidm9sdW1lIiwibXV0ZWQiLCJwbGF5YmFja1NwZWVkIiwic3VidGl0bGVzU2l6ZSIsInN1YnRpdGxlc09mZnNldCIsInN1YnRpdGxlc1RleHRDb2xvciIsInN1YnRpdGxlc0JhY2tncm91bmRDb2xvciIsInN1YnRpdGxlc091dGxpbmVDb2xvciIsInN1YnRpdGxlc09wYWNpdHkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJjbGFzc05hbWUiLCJfYzIiLCJkaXNwbGF5TmFtZSIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJTdHJlbWlvVmlkZW9QbGF5ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWN0IFdyYXBwZXIgZm9yIFN0cmVtaW8gVmlkZW8gUGxheWVyXG4vLyBJbnRlZ3JhdGVzIFN0cmVtaW8ncyB2aWRlbyBhcmNoaXRlY3R1cmUgd2l0aCBSZWFjdFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUsIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHJlbWlvVmlkZW9TeXN0ZW0gfSBmcm9tICcuL1N0cmVtaW9WaWRlb1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9Qcm9wZXJ0aWVzIHtcbiAgc3RyZWFtPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9hZGVkPzogYm9vbGVhbjtcbiAgcGF1c2VkPzogYm9vbGVhbjtcbiAgdGltZT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIGJ1ZmZlcmluZz86IGJvb2xlYW47XG4gIGJ1ZmZlcmVkPzogVGltZVJhbmdlcyB8IG51bGw7XG4gIGF1ZGlvVHJhY2tzPzogQXVkaW9UcmFja1tdO1xuICBzZWxlY3RlZEF1ZGlvVHJhY2tJZD86IHN0cmluZyB8IG51bGw7XG4gIHN1YnRpdGxlc1RyYWNrcz86IFN1YnRpdGxlVHJhY2tbXTtcbiAgc2VsZWN0ZWRTdWJ0aXRsZXNUcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzT2Zmc2V0PzogbnVtYmVyO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNUZXh0Q29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzT3V0bGluZUNvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPcGFjaXR5PzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgLy8gQWRkaXRpb25hbCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZW1pb1ZpZGVvUGxheWVyUHJvcHMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgc3VidGl0bGVUcmFjaz86IFN1YnRpdGxlVHJhY2sgfCBudWxsO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIG9uUHJvcENoYW5nZWQ/OiAocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcbiAgb25FbmRlZD86ICgpID0+IHZvaWQ7XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVtaW9WaWRlb1BsYXllclJlZiB7XG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFN0cmVtaW9WaWRlb1BsYXllciA9IGZvcndhcmRSZWY8U3RyZW1pb1ZpZGVvUGxheWVyUmVmLCBTdHJlbWlvVmlkZW9QbGF5ZXJQcm9wcz4oKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgdmlkZW9JbnN0YW5jZVJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICBpZiAodmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kZXN0cm95KCk7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1N0cmVtaW9WaWRlb1BsYXllcjogQ29udGFpbmVyIGVsZW1lbnQgbm90IHJlYWR5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N0cmVtaW9WaWRlb1BsYXllcjogSW5pdGlhbGl6aW5nIHZpZGVvIHN5c3RlbScpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBTdHJlbWlvIHZpZGVvIHN5c3RlbSBpbnN0YW5jZVxuICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG5ldyBTdHJlbWlvVmlkZW9TeXN0ZW0oe1xuICAgICAgY29udGFpbmVyRWxlbWVudDogY29udGFpbmVyUmVmLmN1cnJlbnRcbiAgICB9KTtcblxuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICBpZiAocHJvcHMub25Qcm9wQ2hhbmdlZCkge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50Lm9uKCdwcm9wQ2hhbmdlZCcsIHByb3BzLm9uUHJvcENoYW5nZWQpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5vbkVycm9yKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQub24oJ2Vycm9yJywgcHJvcHMub25FcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm9uRW5kZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5vbignZW5kZWQnLCBwcm9wcy5vbkVuZGVkKTtcbiAgICB9XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBwcm9wZXJ0aWVzIHdlIGNhcmUgYWJvdXRcbiAgICBjb25zdCBwcm9wc1RvT2JzZXJ2ZTogKGtleW9mIFZpZGVvUHJvcGVydGllcylbXSA9IFtcbiAgICAgICdsb2FkZWQnLCAncGF1c2VkJywgJ3RpbWUnLCAnZHVyYXRpb24nLCAnYnVmZmVyaW5nJywgJ2J1ZmZlcmVkJyxcbiAgICAgICd2b2x1bWUnLCAnbXV0ZWQnLCAncGxheWJhY2tTcGVlZCcsICdhdWRpb1RyYWNrcycsICdzdWJ0aXRsZXNUcmFja3MnXG4gICAgXTtcblxuICAgIHByb3BzVG9PYnNlcnZlLmZvckVhY2gocHJvcE5hbWUgPT4ge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ29ic2VydmVQcm9wJyxcbiAgICAgICAgcHJvcE5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKTtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHN1YnRpdGxlIHRyYWNrIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnN1YnRpdGxlVHJhY2spIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5sb2FkU3VidGl0bGVUcmFjayhwcm9wcy5zdWJ0aXRsZVRyYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmxvYWRTdWJ0aXRsZVRyYWNrKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlVHJhY2tdKTtcblxuICAvLyBVcGRhdGUgdmlkZW8gcHJvcGVydGllcyB3aGVuIHByb3BzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdzdHJlYW0nLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN0cmVhbVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcHJvcHMuc3RyZWFtXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnBhdXNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAncGF1c2VkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wYXVzZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnBhdXNlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy50aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICd0aW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy50aW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy50aW1lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnZvbHVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAndm9sdW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy52b2x1bWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnZvbHVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5tdXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnbXV0ZWQnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLm11dGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5tdXRlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5wbGF5YmFja1NwZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdwbGF5YmFja1NwZWVkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wbGF5YmFja1NwZWVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5wbGF5YmFja1NwZWVkXSk7XG5cbiAgLy8gU3VidGl0bGUgc3R5bGluZyBwcm9wZXJ0aWVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5zdWJ0aXRsZXNTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1NpemUnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN1YnRpdGxlc1NpemVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlc1NpemVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc09mZnNldCcsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT2Zmc2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPZmZzZXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzVGV4dENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1RleHRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzVGV4dENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNUZXh0Q29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPdXRsaW5lQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCcsXG4gICAgICAgIC4uLnByb3BzLnN0eWxlXG4gICAgICB9fVxuICAgICAgY2xhc3NOYW1lPXtwcm9wcy5jbGFzc05hbWV9XG4gICAgLz5cbiAgKTtcbn0pO1xuXG5TdHJlbWlvVmlkZW9QbGF5ZXIuZGlzcGxheU5hbWUgPSAnU3RyZW1pb1ZpZGVvUGxheWVyJztcblxuZXhwb3J0IGRlZmF1bHQgU3RyZW1pb1ZpZGVvUGxheWVyOyJdLCJmaWxlIjoiL2hvbWUvY2F1bGxlbi9HaXRIdWIvc3RyZW1pby1uZXRmbGl4L3NyYy9saWIvdmlkZW8vU3RyZW1pb1ZpZGVvUGxheWVyLnRzeCJ9"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_serviceWorkerResponseSource": "network"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-08-01T11:32:06.858Z",
        "time": 24.109000005410053,
        "timings": {
          "blocked": 0.6340000075194985,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.002,
          "wait": 23.29299999516178,
          "receive": 0.18000000272877514,
          "_blocked_queueing": 0.6240000075194985,
          "_workerStart": 0.006,
          "_workerReady": 0.331,
          "_workerFetchStart": 0.331,
          "_workerRespondWithSettled": 23.084
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "fetchAndCache",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 153,
                "columnNumber": 25
              },
              {
                "functionName": "handleRequest",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 125,
                "columnNumber": 17
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "3",
                  "url": "http://localhost:5173/sw.js",
                  "lineNumber": 112,
                  "columnNumber": 19
                }
              ],
              "parentId": {
                "id": "13",
                "debuggerId": "7421023915332866740.7548517216261379378"
              }
            }
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33033",
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047926856",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/@vite/client"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047926856"
            }
          ],
          "cookies": [],
          "headersSize": 963,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "26890"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:06 GMT"
            },
            {
              "name": "Etag",
              "value": "W/\"208b-k58xCX2QFxjfQNnME5OTbZ3M1oI\""
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 26890,
            "mimeType": "text/javascript",
            "compression": 0,
            "text": "import { createHotContext as __vite__createHotContext } from \"/@vite/client\";import.meta.hot = __vite__createHotContext(\"/src/lib/video/StremioVideoPlayer.tsx\");import __vite__cjsImport0_react_jsxDevRuntime from \"/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=905c193d\"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime[\"jsxDEV\"];\nimport * as RefreshRuntime from \"/@react-refresh\";\nconst inWebWorker = typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope;\nlet prevRefreshReg;\nlet prevRefreshSig;\nif (import.meta.hot && !inWebWorker) {\n  if (!window.$RefreshReg$) {\n    throw new Error(\n      \"@vitejs/plugin-react can't detect preamble. Something is wrong.\"\n    );\n  }\n  prevRefreshReg = window.$RefreshReg$;\n  prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = RefreshRuntime.getRefreshReg(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\");\n  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport __vite__cjsImport3_react from \"/node_modules/.vite/deps/react.js?v=905c193d\"; const useEffect = __vite__cjsImport3_react[\"useEffect\"]; const useRef = __vite__cjsImport3_react[\"useRef\"]; const useImperativeHandle = __vite__cjsImport3_react[\"useImperativeHandle\"]; const forwardRef = __vite__cjsImport3_react[\"forwardRef\"];\nimport { StremioVideoSystem } from \"/src/lib/video/StremioVideoSystem.ts?t=1754047926856\";\nconst StremioVideoPlayer = _s(forwardRef(_c = _s((props, ref) => {\n  _s();\n  const containerRef = useRef(null);\n  const videoInstanceRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    dispatch: (action) => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.dispatch(action);\n      }\n    },\n    destroy: () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    }\n  }));\n  useEffect(() => {\n    if (!containerRef.current) {\n      console.warn(\"StremioVideoPlayer: Container element not ready\");\n      return;\n    }\n    console.log(\"StremioVideoPlayer: Initializing video system\");\n    videoInstanceRef.current = new StremioVideoSystem({\n      containerElement: containerRef.current\n    });\n    if (props.onPropChanged) {\n      videoInstanceRef.current.on(\"propChanged\", props.onPropChanged);\n    }\n    if (props.onError) {\n      videoInstanceRef.current.on(\"error\", props.onError);\n    }\n    if (props.onEnded) {\n      videoInstanceRef.current.on(\"ended\", props.onEnded);\n    }\n    const propsToObserve = [\n      \"loaded\",\n      \"paused\",\n      \"time\",\n      \"duration\",\n      \"buffering\",\n      \"buffered\",\n      \"volume\",\n      \"muted\",\n      \"playbackSpeed\",\n      \"audioTracks\",\n      \"subtitlesTracks\"\n    ];\n    propsToObserve.forEach((propName) => {\n      videoInstanceRef.current.dispatch({\n        type: \"observeProp\",\n        propName\n      });\n    });\n    return () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitleTrack) {\n      videoInstanceRef.current.loadSubtitleTrack(props.subtitleTrack);\n    } else {\n      videoInstanceRef.current.loadSubtitleTrack(null);\n    }\n  }, [props.subtitleTrack]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.stream !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"stream\",\n        propValue: props.stream\n      });\n    }\n  }, [props.stream]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.paused !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"paused\",\n        propValue: props.paused\n      });\n    }\n  }, [props.paused]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.time !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"time\",\n        propValue: props.time\n      });\n    }\n  }, [props.time]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.volume !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"volume\",\n        propValue: props.volume\n      });\n    }\n  }, [props.volume]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.muted !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"muted\",\n        propValue: props.muted\n      });\n    }\n  }, [props.muted]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.playbackSpeed !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"playbackSpeed\",\n        propValue: props.playbackSpeed\n      });\n    }\n  }, [props.playbackSpeed]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesSize !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesSize\",\n        propValue: props.subtitlesSize\n      });\n    }\n  }, [props.subtitlesSize]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOffset !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOffset\",\n        propValue: props.subtitlesOffset\n      });\n    }\n  }, [props.subtitlesOffset]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesTextColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesTextColor\",\n        propValue: props.subtitlesTextColor\n      });\n    }\n  }, [props.subtitlesTextColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesBackgroundColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesBackgroundColor\",\n        propValue: props.subtitlesBackgroundColor\n      });\n    }\n  }, [props.subtitlesBackgroundColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOutlineColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOutlineColor\",\n        propValue: props.subtitlesOutlineColor\n      });\n    }\n  }, [props.subtitlesOutlineColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOpacity !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOpacity\",\n        propValue: props.subtitlesOpacity\n      });\n    }\n  }, [props.subtitlesOpacity]);\n  return /* @__PURE__ */ jsxDEV(\n    \"div\",\n    {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: \"#000\",\n        ...props.style\n      },\n      className: props.className\n    },\n    void 0,\n    false,\n    {\n      fileName: \"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\",\n      lineNumber: 320,\n      columnNumber: 5\n    },\n    this\n  );\n}, \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\")), \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\");\n_c2 = StremioVideoPlayer;\nStremioVideoPlayer.displayName = \"StremioVideoPlayer\";\nexport default StremioVideoPlayer;\nvar _c, _c2;\n$RefreshReg$(_c, \"StremioVideoPlayer$forwardRef\");\n$RefreshReg$(_c2, \"StremioVideoPlayer\");\nif (import.meta.hot && !inWebWorker) {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}\nif (import.meta.hot && !inWebWorker) {\n  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {\n    RefreshRuntime.registerExportsForReactRefresh(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports);\n    import.meta.hot.accept((nextExports) => {\n      if (!nextExports) return;\n      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports, nextExports);\n      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);\n    });\n  });\n}\n\n//# sourceMappingURL=data:application/json;base64,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O0FBQUEsRUFTNkI7QUFHakMsR0FBQyxrQ0FBQztBQUFDQyxNQTNPRzdDO0FBNk9OQSxtQkFBbUI4QyxjQUFjO0FBRWpDLGVBQWU5QztBQUFtQixJQUFBRSxJQUFBMkM7QUFBQUUsYUFBQTdDLElBQUE7QUFBQTZDLGFBQUFGLEtBQUEiLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIlN0cmVtaW9WaWRlb1N5c3RlbSIsIlN0cmVtaW9WaWRlb1BsYXllciIsIl9zIiwiX2MiLCJwcm9wcyIsInJlZiIsImNvbnRhaW5lclJlZiIsInZpZGVvSW5zdGFuY2VSZWYiLCJkaXNwYXRjaCIsImFjdGlvbiIsImN1cnJlbnQiLCJkZXN0cm95IiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJjb250YWluZXJFbGVtZW50Iiwib25Qcm9wQ2hhbmdlZCIsIm9uIiwib25FcnJvciIsIm9uRW5kZWQiLCJwcm9wc1RvT2JzZXJ2ZSIsImZvckVhY2giLCJwcm9wTmFtZSIsInR5cGUiLCJzdWJ0aXRsZVRyYWNrIiwibG9hZFN1YnRpdGxlVHJhY2siLCJzdHJlYW0iLCJ1bmRlZmluZWQiLCJwcm9wVmFsdWUiLCJwYXVzZWQiLCJ0aW1lIiwidm9sdW1lIiwibXV0ZWQiLCJwbGF5YmFja1NwZWVkIiwic3VidGl0bGVzU2l6ZSIsInN1YnRpdGxlc09mZnNldCIsInN1YnRpdGxlc1RleHRDb2xvciIsInN1YnRpdGxlc0JhY2tncm91bmRDb2xvciIsInN1YnRpdGxlc091dGxpbmVDb2xvciIsInN1YnRpdGxlc09wYWNpdHkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJjbGFzc05hbWUiLCJfYzIiLCJkaXNwbGF5TmFtZSIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJTdHJlbWlvVmlkZW9QbGF5ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWN0IFdyYXBwZXIgZm9yIFN0cmVtaW8gVmlkZW8gUGxheWVyXG4vLyBJbnRlZ3JhdGVzIFN0cmVtaW8ncyB2aWRlbyBhcmNoaXRlY3R1cmUgd2l0aCBSZWFjdFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUsIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHJlbWlvVmlkZW9TeXN0ZW0gfSBmcm9tICcuL1N0cmVtaW9WaWRlb1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9Qcm9wZXJ0aWVzIHtcbiAgc3RyZWFtPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9hZGVkPzogYm9vbGVhbjtcbiAgcGF1c2VkPzogYm9vbGVhbjtcbiAgdGltZT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIGJ1ZmZlcmluZz86IGJvb2xlYW47XG4gIGJ1ZmZlcmVkPzogVGltZVJhbmdlcyB8IG51bGw7XG4gIGF1ZGlvVHJhY2tzPzogQXVkaW9UcmFja1tdO1xuICBzZWxlY3RlZEF1ZGlvVHJhY2tJZD86IHN0cmluZyB8IG51bGw7XG4gIHN1YnRpdGxlc1RyYWNrcz86IFN1YnRpdGxlVHJhY2tbXTtcbiAgc2VsZWN0ZWRTdWJ0aXRsZXNUcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzT2Zmc2V0PzogbnVtYmVyO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNUZXh0Q29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzT3V0bGluZUNvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPcGFjaXR5PzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgLy8gQWRkaXRpb25hbCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZW1pb1ZpZGVvUGxheWVyUHJvcHMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgc3VidGl0bGVUcmFjaz86IFN1YnRpdGxlVHJhY2sgfCBudWxsO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIG9uUHJvcENoYW5nZWQ/OiAocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcbiAgb25FbmRlZD86ICgpID0+IHZvaWQ7XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVtaW9WaWRlb1BsYXllclJlZiB7XG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFN0cmVtaW9WaWRlb1BsYXllciA9IGZvcndhcmRSZWY8U3RyZW1pb1ZpZGVvUGxheWVyUmVmLCBTdHJlbWlvVmlkZW9QbGF5ZXJQcm9wcz4oKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgdmlkZW9JbnN0YW5jZVJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICBpZiAodmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kZXN0cm95KCk7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1N0cmVtaW9WaWRlb1BsYXllcjogQ29udGFpbmVyIGVsZW1lbnQgbm90IHJlYWR5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N0cmVtaW9WaWRlb1BsYXllcjogSW5pdGlhbGl6aW5nIHZpZGVvIHN5c3RlbScpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBTdHJlbWlvIHZpZGVvIHN5c3RlbSBpbnN0YW5jZVxuICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG5ldyBTdHJlbWlvVmlkZW9TeXN0ZW0oe1xuICAgICAgY29udGFpbmVyRWxlbWVudDogY29udGFpbmVyUmVmLmN1cnJlbnRcbiAgICB9KTtcblxuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICBpZiAocHJvcHMub25Qcm9wQ2hhbmdlZCkge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50Lm9uKCdwcm9wQ2hhbmdlZCcsIHByb3BzLm9uUHJvcENoYW5nZWQpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5vbkVycm9yKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQub24oJ2Vycm9yJywgcHJvcHMub25FcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm9uRW5kZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5vbignZW5kZWQnLCBwcm9wcy5vbkVuZGVkKTtcbiAgICB9XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBwcm9wZXJ0aWVzIHdlIGNhcmUgYWJvdXRcbiAgICBjb25zdCBwcm9wc1RvT2JzZXJ2ZTogKGtleW9mIFZpZGVvUHJvcGVydGllcylbXSA9IFtcbiAgICAgICdsb2FkZWQnLCAncGF1c2VkJywgJ3RpbWUnLCAnZHVyYXRpb24nLCAnYnVmZmVyaW5nJywgJ2J1ZmZlcmVkJyxcbiAgICAgICd2b2x1bWUnLCAnbXV0ZWQnLCAncGxheWJhY2tTcGVlZCcsICdhdWRpb1RyYWNrcycsICdzdWJ0aXRsZXNUcmFja3MnXG4gICAgXTtcblxuICAgIHByb3BzVG9PYnNlcnZlLmZvckVhY2gocHJvcE5hbWUgPT4ge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ29ic2VydmVQcm9wJyxcbiAgICAgICAgcHJvcE5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKTtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHN1YnRpdGxlIHRyYWNrIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnN1YnRpdGxlVHJhY2spIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5sb2FkU3VidGl0bGVUcmFjayhwcm9wcy5zdWJ0aXRsZVRyYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmxvYWRTdWJ0aXRsZVRyYWNrKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlVHJhY2tdKTtcblxuICAvLyBVcGRhdGUgdmlkZW8gcHJvcGVydGllcyB3aGVuIHByb3BzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdzdHJlYW0nLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN0cmVhbVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcHJvcHMuc3RyZWFtXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnBhdXNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAncGF1c2VkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wYXVzZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnBhdXNlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy50aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICd0aW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy50aW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy50aW1lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnZvbHVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAndm9sdW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy52b2x1bWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnZvbHVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5tdXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnbXV0ZWQnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLm11dGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5tdXRlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5wbGF5YmFja1NwZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdwbGF5YmFja1NwZWVkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wbGF5YmFja1NwZWVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5wbGF5YmFja1NwZWVkXSk7XG5cbiAgLy8gU3VidGl0bGUgc3R5bGluZyBwcm9wZXJ0aWVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5zdWJ0aXRsZXNTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1NpemUnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN1YnRpdGxlc1NpemVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlc1NpemVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc09mZnNldCcsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT2Zmc2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPZmZzZXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzVGV4dENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1RleHRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzVGV4dENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNUZXh0Q29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPdXRsaW5lQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCcsXG4gICAgICAgIC4uLnByb3BzLnN0eWxlXG4gICAgICB9fVxuICAgICAgY2xhc3NOYW1lPXtwcm9wcy5jbGFzc05hbWV9XG4gICAgLz5cbiAgKTtcbn0pO1xuXG5TdHJlbWlvVmlkZW9QbGF5ZXIuZGlzcGxheU5hbWUgPSAnU3RyZW1pb1ZpZGVvUGxheWVyJztcblxuZXhwb3J0IGRlZmF1bHQgU3RyZW1pb1ZpZGVvUGxheWVyOyJdLCJmaWxlIjoiL2hvbWUvY2F1bGxlbi9HaXRIdWIvc3RyZW1pby1uZXRmbGl4L3NyYy9saWIvdmlkZW8vU3RyZW1pb1ZpZGVvUGxheWVyLnRzeCJ9"
          },
          "redirectURL": "",
          "headersSize": 292,
          "bodySize": 26890,
          "_transferSize": 27182,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:06.860Z",
        "time": 12.09500000600703,
        "timings": {
          "blocked": 3.813000003764406,
          "dns": 0.020000000000000018,
          "ssl": -1,
          "connect": 0.645,
          "send": 0.6179999999999999,
          "wait": 2.5640000069597737,
          "receive": 4.434999995282851,
          "_blocked_queueing": 3.192000003764406,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047926856",
          "lineNumber": 18
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoSystem.ts?t=1754047926856",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047926856"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047926856"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Etag",
              "value": "W/\"6120-QOdSJA7izNWrbBoMvDnrq6iAqwA\""
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Content-Length",
              "value": "86315"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:06 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 86315,
            "mimeType": "text/javascript",
            "text": "import { LogCategory, logInfo, logError, logDebug, logWarn } from \"/src/lib/utils/logger.ts\";\nexport class StremioVideoSystem {\n  containerElement;\n  videoElement = null;\n  subtitlesContainer = null;\n  subtitlesElement = null;\n  hlsInstance = null;\n  observedProps = {};\n  eventListeners = {};\n  // State\n  currentStream = null;\n  currentSubtitleTrack = null;\n  subtitlesData = [];\n  destroyed = false;\n  // Subtitle settings\n  extraSubtitlesSize = 25;\n  extraSubtitlesOffset = 0;\n  extraSubtitlesTextColor = \"#FFFFFF\";\n  extraSubtitlesBackgroundColor = \"rgba(0, 0, 0, 0.7)\";\n  extraSubtitlesOutlineColor = \"#000000\";\n  extraSubtitlesOpacity = 100;\n  extraSubtitlesDelay = 0;\n  constructor(options) {\n    this.containerElement = options.containerElement;\n    this.initializeContainer();\n  }\n  initializeContainer() {\n    this.containerElement.style.position = \"relative\";\n    this.containerElement.style.width = \"100%\";\n    this.containerElement.style.height = \"100%\";\n    this.containerElement.style.backgroundColor = \"#000\";\n  }\n  createVideoElement() {\n    if (this.videoElement) return;\n    logInfo(LogCategory.PLAYER, \"Creating new video element\");\n    this.videoElement = document.createElement(\"video\");\n    this.videoElement.style.width = \"100%\";\n    this.videoElement.style.height = \"100%\";\n    this.videoElement.style.backgroundColor = \"transparent\";\n    this.videoElement.controls = false;\n    this.videoElement.preload = \"auto\";\n    this.videoElement.playsInline = true;\n    if (\"bufferTime\" in this.videoElement) {\n      this.videoElement.bufferTime = 10;\n    }\n    this.containerElement.appendChild(this.videoElement);\n    this.setupVideoEventListeners();\n  }\n  setupVideoEventListeners() {\n    if (!this.videoElement) return;\n    this.videoElement.addEventListener(\"loadstart\", () => {\n      logDebug(LogCategory.PLAYER, \"Video loadstart event\");\n      this.emitPropChanged(\"loaded\", false);\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"loadedmetadata\", () => {\n      if (!this.videoElement) return;\n      logInfo(LogCategory.PLAYER, \"Video loadedmetadata event\", {\n        duration: this.videoElement.duration,\n        durationFormatted: `${Math.floor(this.videoElement.duration / 60)}:${Math.floor(this.videoElement.duration % 60).toString().padStart(2, \"0\")}`\n      });\n      this.emitPropChanged(\"loaded\", true);\n      this.emitPropChanged(\"duration\", this.videoElement.duration * 1e3);\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"timeupdate\", () => {\n      if (!this.videoElement) return;\n      const time = this.videoElement.currentTime * 1e3;\n      this.emitPropChanged(\"time\", time);\n      this.renderSubtitles(time);\n    });\n    this.videoElement.addEventListener(\"play\", () => {\n      this.emitPropChanged(\"paused\", false);\n    });\n    this.videoElement.addEventListener(\"pause\", () => {\n      this.emitPropChanged(\"paused\", true);\n    });\n    this.videoElement.addEventListener(\"waiting\", () => {\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"canplay\", () => {\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"progress\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"buffered\", this.videoElement.buffered);\n    });\n    this.videoElement.addEventListener(\"volumechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"volume\", Math.floor(this.videoElement.volume * 100));\n      this.emitPropChanged(\"muted\", this.videoElement.muted);\n    });\n    this.videoElement.addEventListener(\"ratechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"playbackSpeed\", this.videoElement.playbackRate);\n    });\n    this.videoElement.addEventListener(\"ended\", () => {\n      this.emit(\"ended\");\n    });\n    this.videoElement.addEventListener(\"error\", () => {\n      if (!this.videoElement) return;\n      const error = this.videoElement.error;\n      if (error) {\n        logError(LogCategory.PLAYER, \"Video playback error\", {\n          code: error.code,\n          message: error.message,\n          streamUrl: this.currentStream\n        });\n        this.emit(\"error\", {\n          critical: true,\n          message: `Video error: ${error.message}`,\n          code: error.code\n        });\n      }\n    });\n  }\n  createSubtitlesContainer() {\n    if (this.subtitlesContainer) return;\n    this.subtitlesContainer = document.createElement(\"div\");\n    this.subtitlesContainer.style.position = \"absolute\";\n    this.subtitlesContainer.style.left = \"0\";\n    this.subtitlesContainer.style.top = \"0\";\n    this.subtitlesContainer.style.width = \"100%\";\n    this.subtitlesContainer.style.height = \"100%\";\n    this.subtitlesContainer.style.pointerEvents = \"none\";\n    this.subtitlesContainer.style.zIndex = \"1000\";\n    this.subtitlesContainer.style.display = \"flex\";\n    this.subtitlesContainer.style.flexDirection = \"column\";\n    this.subtitlesContainer.style.justifyContent = \"flex-end\";\n    this.subtitlesContainer.style.alignItems = \"center\";\n    this.subtitlesContainer.style.overflow = \"hidden\";\n    this.containerElement.appendChild(this.subtitlesContainer);\n  }\n  renderSubtitles(currentTime) {\n    if (!this.subtitlesData.length || !this.currentSubtitleTrack) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    const adjustedTime = currentTime + this.extraSubtitlesDelay;\n    const activeCues = this.subtitlesData.filter(\n      (cue) => adjustedTime >= cue.startTime && adjustedTime <= cue.endTime\n    );\n    if (activeCues.length === 0) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    this.createSubtitlesContainer();\n    if (!this.subtitlesElement) {\n      this.subtitlesElement = document.createElement(\"div\");\n      this.subtitlesElement.style.position = \"relative\";\n      this.subtitlesElement.style.maxWidth = \"90%\";\n      this.subtitlesElement.style.textAlign = \"center\";\n      this.subtitlesElement.style.fontFamily = \"Arial, sans-serif\";\n      this.subtitlesElement.style.fontWeight = \"bold\";\n      this.subtitlesElement.style.lineHeight = \"1.2\";\n      this.subtitlesElement.style.wordWrap = \"break-word\";\n      this.subtitlesElement.style.whiteSpace = \"pre-wrap\";\n      this.subtitlesContainer.appendChild(this.subtitlesElement);\n    }\n    while (this.subtitlesElement.firstChild) {\n      this.subtitlesElement.removeChild(this.subtitlesElement.firstChild);\n    }\n    activeCues.forEach((cue) => {\n      const cueElement = document.createElement(\"div\");\n      cueElement.textContent = cue.text;\n      this.styleSubtitleElement(cueElement);\n      this.subtitlesElement.appendChild(cueElement);\n    });\n  }\n  styleSubtitleElement(element) {\n    const fontSize = Math.floor(this.extraSubtitlesSize / 25 * 3.5) + \"vmin\";\n    const opacity = this.extraSubtitlesOpacity / 100;\n    element.style.fontSize = fontSize;\n    element.style.opacity = opacity.toString();\n    element.style.color = this.extraSubtitlesTextColor;\n    element.style.backgroundColor = this.extraSubtitlesBackgroundColor;\n    element.style.padding = \"0.2em 0.4em\";\n    element.style.borderRadius = \"0.2em\";\n    element.style.margin = \"0.1em\";\n    element.style.display = \"inline-block\";\n    const outlineWidth = \"0.15rem\";\n    element.style.textShadow = [\n      `-${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`\n    ].join(\", \");\n    if (this.extraSubtitlesOffset !== 0) {\n      const offsetPercent = this.extraSubtitlesOffset + \"%\";\n      element.style.transform = `translateY(${offsetPercent})`;\n    }\n  }\n  removeSubtitlesElement() {\n    if (this.subtitlesElement && this.subtitlesElement.parentNode) {\n      this.subtitlesElement.parentNode.removeChild(this.subtitlesElement);\n      this.subtitlesElement = null;\n    }\n  }\n  async loadSubtitles(track) {\n    if (!track || !track.url) {\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n      return;\n    }\n    try {\n      const proxyUrl = `/api/subtitles?url=${encodeURIComponent(track.url)}`;\n      logInfo(LogCategory.STREAM, \"Loading subtitles via proxy\", { url: proxyUrl });\n      const response = await fetch(proxyUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to load subtitles: ${response.status}`);\n      }\n      const text = await response.text();\n      this.subtitlesData = this.parseSubtitles(text);\n      this.currentSubtitleTrack = track;\n      logInfo(LogCategory.STREAM, \"Subtitles loaded successfully\", {\n        cuesTotal: this.subtitlesData.length,\n        language: track.language || track.id\n      });\n    } catch (error) {\n      logError(LogCategory.STREAM, \"Subtitle loading failed\", {\n        url: track.url,\n        language: track.language || track.id\n      }, error);\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n    }\n  }\n  parseSubtitles(text) {\n    const cues = [];\n    if (text.includes(\"WEBVTT\")) {\n      logDebug(LogCategory.STREAM, \"Parsing WebVTT subtitles\");\n      const blocks = text.split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 2) {\n          const timeLineIndex = lines.findIndex((line) => line.includes(\"-->\"));\n          if (timeLineIndex >= 0) {\n            const timeLine = lines[timeLineIndex];\n            const textLines = lines.slice(timeLineIndex + 1);\n            const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})/);\n            if (timeMatch) {\n              const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n              const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n              cues.push({\n                startTime,\n                endTime,\n                text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n                // Remove HTML tags\n              });\n            }\n          }\n        }\n      });\n    } else if (text.includes(\"-->\")) {\n      logDebug(LogCategory.STREAM, \"Parsing SRT subtitles\");\n      const blocks = text.trim().split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 3) {\n          const timeLine = lines[1];\n          const textLines = lines.slice(2);\n          const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/);\n          if (timeMatch) {\n            const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n            const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n            cues.push({\n              startTime,\n              endTime,\n              text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n              // Remove HTML tags\n            });\n          }\n        }\n      });\n    }\n    logDebug(LogCategory.STREAM, \"Subtitle parsing completed\", { cuesTotal: cues.length });\n    return cues;\n  }\n  shouldUseHLS(streamUrl) {\n    return streamUrl.includes(\".m3u8\") || typeof window !== \"undefined\" && window.Hls?.isSupported() && !this.videoElement.canPlayType(\"application/vnd.apple.mpegurl\");\n  }\n  setupHLS(streamUrl) {\n    if (typeof window !== \"undefined\" && window.Hls?.isSupported()) {\n      const Hls = window.Hls;\n      this.hlsInstance = new Hls({\n        debug: false,\n        enableWorker: true,\n        lowLatencyMode: false,\n        backBufferLength: 30,\n        maxBufferLength: 50,\n        maxMaxBufferLength: 80,\n        maxFragLookUpTolerance: 0,\n        maxBufferHole: 0,\n        appendErrorMaxRetry: 20,\n        nudgeMaxRetry: 20,\n        manifestLoadingTimeOut: 3e4,\n        manifestLoadingMaxRetry: 10,\n        fragLoadPolicy: {\n          default: {\n            maxTimeToFirstByteMs: 1e4,\n            maxLoadTimeMs: 12e4,\n            timeoutRetry: {\n              maxNumRetry: 20,\n              retryDelayMs: 0,\n              maxRetryDelayMs: 15\n            },\n            errorRetry: {\n              maxNumRetry: 6,\n              retryDelayMs: 1e3,\n              maxRetryDelayMs: 15\n            }\n          }\n        }\n      });\n      this.hlsInstance.loadSource(streamUrl);\n      this.hlsInstance.attachMedia(this.videoElement);\n      this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {\n        this.updateAudioTracks();\n      });\n      this.hlsInstance.on(Hls.Events.ERROR, (_event, data) => {\n        if (data.fatal) {\n          this.emit(\"error\", {\n            critical: true,\n            message: `HLS Error: ${data.type} - ${data.details}`\n          });\n        }\n      });\n    } else {\n      this.videoElement.src = streamUrl;\n    }\n  }\n  updateAudioTracks() {\n    if (this.hlsInstance && this.hlsInstance.audioTracks) {\n      const tracks = this.hlsInstance.audioTracks.map((track, index) => ({\n        id: index.toString(),\n        name: track.name || `Track ${index + 1}`,\n        language: track.lang\n      }));\n      this.emitPropChanged(\"audioTracks\", tracks);\n    }\n  }\n  emitPropChanged(propName, propValue) {\n    if (this.observedProps[propName]) {\n      this.emit(\"propChanged\", propName, propValue);\n    }\n  }\n  emit(event, ...args) {\n    if (this.eventListeners[event]) {\n      this.eventListeners[event].forEach((listener) => listener(...args));\n    }\n  }\n  // Public API\n  on(event, listener) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [];\n    }\n    this.eventListeners[event].push(listener);\n  }\n  dispatch(action) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    switch (action.type) {\n      case \"observeProp\":\n        if (action.propName) {\n          this.observedProps[action.propName] = true;\n          this.emitCurrentProp(action.propName);\n        }\n        break;\n      case \"setProp\":\n        if (action.propName && action.propValue !== void 0) {\n          this.setProp(action.propName, action.propValue);\n        }\n        break;\n      case \"command\":\n        if (action.commandName) {\n          this.executeCommand(action.commandName, action.commandArgs);\n        }\n        break;\n    }\n  }\n  emitCurrentProp(propName) {\n    switch (propName) {\n      case \"loaded\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.readyState >= 1);\n        break;\n      case \"paused\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.paused);\n        break;\n      case \"time\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.currentTime * 1e3 : null);\n        break;\n      case \"duration\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.duration ? this.videoElement.duration * 1e3 : null);\n        break;\n      case \"buffering\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.readyState < 3);\n        break;\n      case \"buffered\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.buffered : null);\n        break;\n      case \"volume\":\n        this.emitPropChanged(propName, this.videoElement ? Math.floor(this.videoElement.volume * 100) : 100);\n        break;\n      case \"muted\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.muted : false);\n        break;\n      case \"playbackSpeed\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.playbackRate : 1);\n        break;\n    }\n  }\n  setProp(propName, propValue) {\n    switch (propName) {\n      case \"stream\":\n        if (propValue) {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"load\",\n            commandArgs: {\n              stream: { url: propValue },\n              autoplay: true\n            }\n          });\n        } else {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"unload\"\n          });\n        }\n        break;\n      case \"paused\":\n        if (this.videoElement) {\n          if (propValue) {\n            this.videoElement.pause();\n          } else {\n            this.videoElement.play().catch(() => {\n            });\n          }\n        }\n        break;\n      case \"time\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.currentTime = propValue / 1e3;\n        }\n        break;\n      case \"volume\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.muted = false;\n          this.videoElement.volume = Math.max(0, Math.min(100, propValue)) / 100;\n        }\n        break;\n      case \"muted\":\n        if (this.videoElement) {\n          this.videoElement.muted = !!propValue;\n        }\n        break;\n      case \"playbackSpeed\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.playbackRate = propValue;\n        }\n        break;\n      case \"selectedSubtitlesTrackId\":\n        break;\n      // Subtitle styling properties\n      case \"extraSubtitlesSize\":\n        this.extraSubtitlesSize = Math.max(10, Math.min(50, propValue || 25));\n        break;\n      case \"extraSubtitlesOffset\":\n        this.extraSubtitlesOffset = Math.max(-20, Math.min(20, propValue || 0));\n        break;\n      case \"extraSubtitlesTextColor\":\n        this.extraSubtitlesTextColor = propValue || \"#FFFFFF\";\n        break;\n      case \"extraSubtitlesBackgroundColor\":\n        this.extraSubtitlesBackgroundColor = propValue || \"rgba(0, 0, 0, 0.7)\";\n        break;\n      case \"extraSubtitlesOutlineColor\":\n        this.extraSubtitlesOutlineColor = propValue || \"#000000\";\n        break;\n      case \"extraSubtitlesOpacity\":\n        this.extraSubtitlesOpacity = Math.max(0, Math.min(100, propValue || 100));\n        break;\n      case \"extraSubtitlesDelay\":\n        this.extraSubtitlesDelay = propValue || 0;\n        break;\n    }\n  }\n  executeCommand(commandName, commandArgs) {\n    switch (commandName) {\n      case \"load\":\n        this.executeLoadCommand(commandArgs);\n        break;\n      case \"unload\":\n        this.executeUnloadCommand();\n        break;\n      case \"play\":\n        if (this.videoElement) {\n          this.videoElement.play().catch(() => {\n          });\n        }\n        break;\n      case \"pause\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n        }\n        break;\n      case \"stop\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n          this.videoElement.currentTime = 0;\n        }\n        break;\n      case \"seek\":\n        if (this.videoElement && commandArgs && commandArgs[0] !== void 0) {\n          this.videoElement.currentTime = commandArgs[0] / 1e3;\n        }\n        break;\n    }\n  }\n  executeLoadCommand(commandArgs) {\n    this.executeUnloadCommand();\n    if (commandArgs && commandArgs.stream && typeof commandArgs.stream.url === \"string\") {\n      this.currentStream = commandArgs.stream.url;\n      if (!this.videoElement) {\n        this.createVideoElement();\n      }\n      logInfo(LogCategory.STREAM, \"Loading stream via load command\", {\n        url: this.currentStream,\n        autoplay: typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true\n      });\n      if (this.videoElement) {\n        this.videoElement.autoplay = typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true;\n        if (commandArgs.time !== null && isFinite(commandArgs.time)) {\n          this.videoElement.currentTime = parseInt(commandArgs.time, 10) / 1e3;\n        }\n        if (this.currentStream && this.shouldUseHLS(this.currentStream)) {\n          logInfo(LogCategory.STREAM, \"Setting up HLS streaming\", { url: this.currentStream });\n          this.setupHLS(this.currentStream);\n        } else {\n          logInfo(LogCategory.STREAM, \"Setting direct video source\", { url: this.currentStream });\n          this.videoElement.preload = \"auto\";\n          this.videoElement.src = this.currentStream;\n          this.videoElement.setAttribute(\"playsinline\", \"true\");\n          this.videoElement.setAttribute(\"webkit-playsinline\", \"true\");\n          let bufferHealthTimer = null;\n          let lowBufferCount = 0;\n          this.videoElement.addEventListener(\"progress\", () => {\n            if (this.videoElement && this.videoElement.buffered.length > 0) {\n              const buffered = this.videoElement.buffered.end(this.videoElement.buffered.length - 1);\n              const current = this.videoElement.currentTime;\n              const bufferAhead = buffered - current;\n              logDebug(LogCategory.PERFORMANCE, \"Buffer status\", {\n                bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                currentTime: `${current.toFixed(1)}s`,\n                bufferedEnd: `${buffered.toFixed(1)}s`,\n                bufferHealth: bufferAhead < 5 ? \"LOW\" : bufferAhead < 15 ? \"MEDIUM\" : \"HIGH\"\n              });\n              if (bufferAhead < 2 && !this.videoElement.paused) {\n                lowBufferCount++;\n                logWarn(LogCategory.PERFORMANCE, \"Low buffer detected\", {\n                  bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                  lowBufferEvents: lowBufferCount\n                });\n                if (lowBufferCount > 3) {\n                  logInfo(LogCategory.PERFORMANCE, \"Pausing for buffer recovery\");\n                  this.videoElement.pause();\n                  if (bufferHealthTimer) clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = setTimeout(() => {\n                    if (this.videoElement && this.videoElement.paused) {\n                      logInfo(LogCategory.PERFORMANCE, \"Resuming after buffer recovery\");\n                      this.videoElement.play().catch(() => {\n                      });\n                      lowBufferCount = 0;\n                    }\n                  }, 2e3);\n                }\n              } else if (bufferAhead > 5) {\n                lowBufferCount = 0;\n                if (bufferHealthTimer) {\n                  clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = null;\n                }\n              }\n            }\n          });\n          this.videoElement.addEventListener(\"stalled\", () => {\n            logWarn(LogCategory.PERFORMANCE, \"Video stalled, attempting recovery\");\n            setTimeout(() => {\n              if (this.videoElement && this.videoElement.readyState < 3) {\n                logInfo(LogCategory.PERFORMANCE, \"Triggering load for stall recovery\");\n                this.videoElement.load();\n              }\n            }, 1e3);\n          });\n          this.videoElement.addEventListener(\"waiting\", () => {\n            logDebug(LogCategory.PERFORMANCE, \"Video waiting for data\");\n          });\n          this.videoElement.load();\n        }\n        this.emitPropChanged(\"stream\", this.currentStream);\n        this.emitPropChanged(\"loaded\", false);\n        this.emitPropChanged(\"buffering\", true);\n      }\n    }\n  }\n  executeUnloadCommand() {\n    this.currentStream = null;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.videoElement) {\n      this.videoElement.removeAttribute(\"src\");\n      this.videoElement.load();\n    }\n    this.emitPropChanged(\"stream\", null);\n  }\n  // Public method to load subtitles\n  loadSubtitleTrack(track) {\n    return this.loadSubtitles(track);\n  }\n  destroy() {\n    if (this.destroyed) return;\n    this.destroyed = true;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.subtitlesContainer && this.subtitlesContainer.parentNode) {\n      this.subtitlesContainer.parentNode.removeChild(this.subtitlesContainer);\n    }\n    if (this.videoElement && this.videoElement.parentNode) {\n      this.videoElement.parentNode.removeChild(this.videoElement);\n    }\n    this.eventListeners = {};\n    this.videoElement = null;\n    this.subtitlesContainer = null;\n    this.subtitlesElement = null;\n  }\n  get isDestroyed() {\n    return this.destroyed;\n  }\n}\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0cmVtaW9WaWRlb1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wbGV0ZSBTdHJlbWlvIFZpZGVvIFBsYXllciBTeXN0ZW1cbi8vIFR5cGVTY3JpcHQgaW1wbGVtZW50YXRpb24gd2l0aCBhbGwgU3RyZW1pbyBmZWF0dXJlc1xuXG5pbXBvcnQgeyBMb2dDYXRlZ29yeSwgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ0RlYnVnLCBsb2dXYXJuIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBWaWRlb1Byb3BlcnRpZXMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBsb2FkZWQ/OiBib29sZWFuO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgYnVmZmVyaW5nPzogYm9vbGVhbjtcbiAgYnVmZmVyZWQ/OiBUaW1lUmFuZ2VzIHwgbnVsbDtcbiAgYXVkaW9UcmFja3M/OiBBdWRpb1RyYWNrW107XG4gIHNlbGVjdGVkQXVkaW9UcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzVHJhY2tzPzogU3VidGl0bGVUcmFja1tdO1xuICBzZWxlY3RlZFN1YnRpdGxlc1RyYWNrSWQ/OiBzdHJpbmcgfCBudWxsO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1NpemU/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIHZvbHVtZT86IG51bWJlcjtcbiAgbXV0ZWQ/OiBib29sZWFuO1xuICBwbGF5YmFja1NwZWVkPzogbnVtYmVyO1xuICAvLyBFbmhhbmNlZCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVDdWUge1xuICBzdGFydFRpbWU6IG51bWJlcjtcbiAgZW5kVGltZTogbnVtYmVyO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9BY3Rpb24ge1xuICB0eXBlOiAnb2JzZXJ2ZVByb3AnIHwgJ3NldFByb3AnIHwgJ2NvbW1hbmQnO1xuICBwcm9wTmFtZT86IGtleW9mIFZpZGVvUHJvcGVydGllcztcbiAgcHJvcFZhbHVlPzogYW55O1xuICBjb21tYW5kTmFtZT86IHN0cmluZztcbiAgY29tbWFuZEFyZ3M/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9PcHRpb25zIHtcbiAgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJlbWlvVmlkZW9TeXN0ZW0ge1xuICBwcml2YXRlIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN1YnRpdGxlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGhsc0luc3RhbmNlOiBhbnkgPSBudWxsO1xuICBcbiAgcHJpdmF0ZSBvYnNlcnZlZFByb3BzOiB7IFtLIGluIGtleW9mIFZpZGVvUHJvcGVydGllc10/OiBib29sZWFuIH0gPSB7fTtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbltdIH0gPSB7fTtcbiAgXG4gIC8vIFN0YXRlXG4gIHByaXZhdGUgY3VycmVudFN0cmVhbTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY3VycmVudFN1YnRpdGxlVHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNEYXRhOiBTdWJ0aXRsZUN1ZVtdID0gW107XG4gIHByaXZhdGUgZGVzdHJveWVkID0gZmFsc2U7XG4gIFxuICAvLyBTdWJ0aXRsZSBzZXR0aW5nc1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzU2l6ZSA9IDI1O1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc1RleHRDb2xvciA9ICcjRkZGRkZGJztcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yID0gJyMwMDAwMDAnO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3BhY2l0eSA9IDEwMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0RlbGF5ID0gMDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBWaWRlb09wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQ7XG4gICAgdGhpcy5pbml0aWFsaXplQ29udGFpbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDb250YWluZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVWaWRlb0VsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ0NyZWF0aW5nIG5ldyB2aWRlbyBlbGVtZW50Jyk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJzsgLy8gQ2hhbmdlZCBmcm9tICdtZXRhZGF0YScgdG8gJ2F1dG8nIGZvciBiZXR0ZXIgYnVmZmVyaW5nXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgIC8vIERvbid0IHNldCBjcm9zc09yaWdpbiBmb3IgUmVhbC1EZWJyaWQgc3RyZWFtcyBhcyB0aGV5IGRvbid0IHN1cHBvcnQgQ09SU1xuICAgIFxuICAgIC8vIEFkZCBidWZmZXIgY29uZmlndXJhdGlvbiBmb3IgYmV0dGVyIHN0cmVhbWluZyBwZXJmb3JtYW5jZVxuICAgIGlmICgnYnVmZmVyVGltZScgaW4gdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICh0aGlzLnZpZGVvRWxlbWVudCBhcyBhbnkpLmJ1ZmZlclRpbWUgPSAxMDsgLy8gMTAgc2Vjb25kcyBidWZmZXJcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuc2V0dXBWaWRlb0V2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVmlkZW9FdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKSA9PiB7XG4gICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QTEFZRVIsICdWaWRlbyBsb2Fkc3RhcnQgZXZlbnQnKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYnVmZmVyaW5nJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUExBWUVSLCAnVmlkZW8gbG9hZGVkbWV0YWRhdGEgZXZlbnQnLCB7IFxuICAgICAgICBkdXJhdGlvbjogdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uRm9ybWF0dGVkOiBgJHtNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uIC8gNjApfToke01hdGguZmxvb3IodGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gJSA2MCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIHRydWUpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2R1cmF0aW9uJywgdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gKiAxMDAwKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpZGVvRWxlbWVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgdGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lICogMTAwMDtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd0aW1lJywgdGltZSk7XG4gICAgICB0aGlzLnJlbmRlclN1YnRpdGxlcyh0aW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJlZCcsIHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd2b2x1bWUnLCBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ211dGVkJywgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdwbGF5YmFja1NwZWVkJywgdGhpcy52aWRlb0VsZW1lbnQucGxheWJhY2tSYXRlKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdlbmRlZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMudmlkZW9FbGVtZW50LmVycm9yO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGxvZ0Vycm9yKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ1ZpZGVvIHBsYXliYWNrIGVycm9yJywge1xuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdHJlYW1Vcmw6IHRoaXMuY3VycmVudFN0cmVhbVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgVmlkZW8gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN1YnRpdGxlc0NvbnRhaW5lcigpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdWJ0aXRsZXMoY3VycmVudFRpbWU6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5zdWJ0aXRsZXNEYXRhLmxlbmd0aCB8fCAhdGhpcy5jdXJyZW50U3VidGl0bGVUcmFjaykge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWRqdXN0ZWRUaW1lID0gY3VycmVudFRpbWUgKyB0aGlzLmV4dHJhU3VidGl0bGVzRGVsYXk7XG4gICAgY29uc3QgYWN0aXZlQ3VlcyA9IHRoaXMuc3VidGl0bGVzRGF0YS5maWx0ZXIoY3VlID0+IFxuICAgICAgYWRqdXN0ZWRUaW1lID49IGN1ZS5zdGFydFRpbWUgJiYgYWRqdXN0ZWRUaW1lIDw9IGN1ZS5lbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChhY3RpdmVDdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVTdWJ0aXRsZXNDb250YWluZXIoKTtcbiAgICBcbiAgICBpZiAoIXRoaXMuc3VidGl0bGVzRWxlbWVudCkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJzkwJSc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdBcmlhbCwgc2Fucy1zZXJpZic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciEuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyBjb250ZW50XG4gICAgd2hpbGUgKHRoaXMuc3VidGl0bGVzRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIFJlbmRlciBhY3RpdmUgY3Vlc1xuICAgIGFjdGl2ZUN1ZXMuZm9yRWFjaChjdWUgPT4ge1xuICAgICAgY29uc3QgY3VlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY3VlRWxlbWVudC50ZXh0Q29udGVudCA9IGN1ZS50ZXh0O1xuICAgICAgdGhpcy5zdHlsZVN1YnRpdGxlRWxlbWVudChjdWVFbGVtZW50KTtcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCEuYXBwZW5kQ2hpbGQoY3VlRWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0eWxlU3VidGl0bGVFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZm9udFNpemUgPSBNYXRoLmZsb29yKCh0aGlzLmV4dHJhU3VidGl0bGVzU2l6ZSAvIDI1KSAqIDMuNSkgKyAndm1pbic7XG4gICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNPcGFjaXR5IC8gMTAwO1xuXG4gICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcbiAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvcjtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3I7XG4gICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuMmVtIDAuNGVtJztcbiAgICBlbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwLjJlbSc7XG4gICAgZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnMC4xZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXG4gICAgLy8gVGV4dCBzaGFkb3cgZm9yIG91dGxpbmUgZWZmZWN0XG4gICAgY29uc3Qgb3V0bGluZVdpZHRoID0gJzAuMTVyZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IFtcbiAgICAgIGAtJHtvdXRsaW5lV2lkdGh9IC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwIC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAke291dGxpbmVXaWR0aH0gLSR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYC0ke291dGxpbmVXaWR0aH0gMCAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAwIDAgJHt0aGlzLmV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yfWAsXG4gICAgICBgLSR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwICR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YFxuICAgIF0uam9pbignLCAnKTtcblxuICAgIC8vIFBvc2l0aW9uIG9mZnNldFxuICAgIGlmICh0aGlzLmV4dHJhU3VidGl0bGVzT2Zmc2V0ICE9PSAwKSB7XG4gICAgICBjb25zdCBvZmZzZXRQZXJjZW50ID0gdGhpcy5leHRyYVN1YnRpdGxlc09mZnNldCArICclJztcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtvZmZzZXRQZXJjZW50fSlgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNFbGVtZW50ICYmIHRoaXMuc3VidGl0bGVzRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0VsZW1lbnQpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRTdWJ0aXRsZXModHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsKSB7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2sudXJsKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0RhdGEgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBvdXIgc3VidGl0bGUgcHJveHkgdG8gYXZvaWQgQ09SUyBpc3N1ZXNcbiAgICAgIGNvbnN0IHByb3h5VXJsID0gYC9hcGkvc3VidGl0bGVzP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0cmFjay51cmwpfWA7XG4gICAgICBcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnTG9hZGluZyBzdWJ0aXRsZXMgdmlhIHByb3h5JywgeyB1cmw6IHByb3h5VXJsIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3h5VXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzdWJ0aXRsZXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gdGhpcy5wYXJzZVN1YnRpdGxlcyh0ZXh0KTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSB0cmFjaztcbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZXMgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgY3Vlc1RvdGFsOiB0aGlzLnN1YnRpdGxlc0RhdGEubGVuZ3RoLFxuICAgICAgICBsYW5ndWFnZTogdHJhY2subGFuZ3VhZ2UgfHwgdHJhY2suaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBsb2FkaW5nIGZhaWxlZCcsIHtcbiAgICAgICAgdXJsOiB0cmFjay51cmwsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5ndWFnZSB8fCB0cmFjay5pZFxuICAgICAgfSwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gW107XG4gICAgICB0aGlzLmN1cnJlbnRTdWJ0aXRsZVRyYWNrID0gbnVsbDtcbiAgICAgIHRoaXMucmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdWJ0aXRsZXModGV4dDogc3RyaW5nKTogU3VidGl0bGVDdWVbXSB7XG4gICAgY29uc3QgY3VlczogU3VidGl0bGVDdWVbXSA9IFtdO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgV2ViVlRUIGZvcm1hdFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdXRUJWVFQnKSkge1xuICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnUGFyc2luZyBXZWJWVFQgc3VidGl0bGVzJyk7XG4gICAgICBcbiAgICAgIC8vIFNwbGl0IGJ5IGRvdWJsZSBuZXdsaW5lcyB0byBnZXQgY3VlIGJsb2Nrc1xuICAgICAgY29uc3QgYmxvY2tzID0gdGV4dC5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgdGltZWxpbmUgKGNvbnRhaW5zIC0tPilcbiAgICAgICAgICBjb25zdCB0aW1lTGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS5pbmNsdWRlcygnLS0+JykpO1xuICAgICAgICAgIGlmICh0aW1lTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVMaW5lID0gbGluZXNbdGltZUxpbmVJbmRleF07XG4gICAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSh0aW1lTGluZUluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlYlZUVCBmb3JtYXQ6IDAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDAuMDAwXG4gICAgICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0aW1lTGluZS5tYXRjaCgvKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KS8pO1xuICAgICAgICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFsyXSkgKiA2MDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFszXSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbNV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzddKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzhdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGN1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dExpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IFxuICAgIC8vIFNSVCBmb3JtYXQgcGFyc2VyXG4gICAgZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnLS0+JykpIHtcbiAgICAgIGxvZ0RlYnVnKExvZ0NhdGVnb3J5LlNUUkVBTSwgJ1BhcnNpbmcgU1JUIHN1YnRpdGxlcycpO1xuICAgICAgXG4gICAgICBjb25zdCBibG9ja3MgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgY29uc3QgdGltZUxpbmUgPSBsaW5lc1sxXTtcbiAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSgyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTUlQgZm9ybWF0OiAwMDowMDowMCwwMDAgLS0+IDAwOjAwOjAwLDAwMFxuICAgICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRpbWVMaW5lLm1hdGNoKC8oXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSwoXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSksKFxcZHszfSkvKTtcbiAgICAgICAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbMl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzNdKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IHBhcnNlSW50KHRpbWVNYXRjaFs1XSkgKiAzNjAwMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFs3XSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbOF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdWVzLnB1c2goe1xuICAgICAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgIHRleHQ6IHRleHRMaW5lcy5qb2luKCdcXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBwYXJzaW5nIGNvbXBsZXRlZCcsIHsgY3Vlc1RvdGFsOiBjdWVzLmxlbmd0aCB9KTtcbiAgICByZXR1cm4gY3VlcztcbiAgfVxuXG5cbiAgcHJpdmF0ZSBzaG91bGRVc2VITFMoc3RyZWFtVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3RyZWFtVXJsLmluY2x1ZGVzKCcubTN1OCcpIHx8IFxuICAgICAgICAgICAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgXG4gICAgICAgICAgICAod2luZG93IGFzIGFueSkuSGxzPy5pc1N1cHBvcnRlZCgpICYmIFxuICAgICAgICAgICAgIXRoaXMudmlkZW9FbGVtZW50IS5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmwnKSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwSExTKHN0cmVhbVVybDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5IbHM/LmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIGNvbnN0IEhscyA9ICh3aW5kb3cgYXMgYW55KS5IbHM7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbmV3IEhscyh7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlV29ya2VyOiB0cnVlLFxuICAgICAgICBsb3dMYXRlbmN5TW9kZTogZmFsc2UsXG4gICAgICAgIGJhY2tCdWZmZXJMZW5ndGg6IDMwLFxuICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDUwLFxuICAgICAgICBtYXhNYXhCdWZmZXJMZW5ndGg6IDgwLFxuICAgICAgICBtYXhGcmFnTG9va1VwVG9sZXJhbmNlOiAwLFxuICAgICAgICBtYXhCdWZmZXJIb2xlOiAwLFxuICAgICAgICBhcHBlbmRFcnJvck1heFJldHJ5OiAyMCxcbiAgICAgICAgbnVkZ2VNYXhSZXRyeTogMjAsXG4gICAgICAgIG1hbmlmZXN0TG9hZGluZ1RpbWVPdXQ6IDMwMDAwLFxuICAgICAgICBtYW5pZmVzdExvYWRpbmdNYXhSZXRyeTogMTAsXG4gICAgICAgIGZyYWdMb2FkUG9saWN5OiB7XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbWF4VGltZVRvRmlyc3RCeXRlTXM6IDEwMDAwLFxuICAgICAgICAgICAgbWF4TG9hZFRpbWVNczogMTIwMDAwLFxuICAgICAgICAgICAgdGltZW91dFJldHJ5OiB7XG4gICAgICAgICAgICAgIG1heE51bVJldHJ5OiAyMCxcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JSZXRyeToge1xuICAgICAgICAgICAgICBtYXhOdW1SZXRyeTogNixcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5sb2FkU291cmNlKHN0cmVhbVVybCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmF0dGFjaE1lZGlhKHRoaXMudmlkZW9FbGVtZW50KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLk1BTklGRVNUX1BBUlNFRCwgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUF1ZGlvVHJhY2tzKCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLkVSUk9SLCAoX2V2ZW50OiBhbnksIGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5mYXRhbCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBITFMgRXJyb3I6ICR7ZGF0YS50eXBlfSAtICR7ZGF0YS5kZXRhaWxzfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIGZvciBTYWZhcmkgYW5kIG90aGVyIGJyb3dzZXJzIHdpdGggbmF0aXZlIEhMUyBzdXBwb3J0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCEuc3JjID0gc3RyZWFtVXJsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQXVkaW9UcmFja3MoKSB7XG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UgJiYgdGhpcy5obHNJbnN0YW5jZS5hdWRpb1RyYWNrcykge1xuICAgICAgY29uc3QgdHJhY2tzOiBBdWRpb1RyYWNrW10gPSB0aGlzLmhsc0luc3RhbmNlLmF1ZGlvVHJhY2tzLm1hcCgodHJhY2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgaWQ6IGluZGV4LnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHRyYWNrLm5hbWUgfHwgYFRyYWNrICR7aW5kZXggKyAxfWAsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5nXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYXVkaW9UcmFja3MnLCB0cmFja3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lOiBrZXlvZiBWaWRlb1Byb3BlcnRpZXMsIHByb3BWYWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZWRQcm9wc1twcm9wTmFtZV0pIHtcbiAgICAgIHRoaXMuZW1pdCgncHJvcENoYW5nZWQnLCBwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUElcbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0cmVtaW9WaWRlb1N5c3RlbSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGRpc3BhdGNoKGFjdGlvbjogVmlkZW9BY3Rpb24pIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3RyZW1pb1ZpZGVvU3lzdGVtIGluc3RhbmNlIGlzIGRlc3Ryb3llZCcpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29ic2VydmVQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZWRQcm9wc1thY3Rpb24ucHJvcE5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmVtaXRDdXJyZW50UHJvcChhY3Rpb24ucHJvcE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzZXRQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSAmJiBhY3Rpb24ucHJvcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnNldFByb3AoYWN0aW9uLnByb3BOYW1lLCBhY3Rpb24ucHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbWFuZCc6XG4gICAgICAgIGlmIChhY3Rpb24uY29tbWFuZE5hbWUpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGFjdGlvbi5jb21tYW5kTmFtZSwgYWN0aW9uLmNvbW1hbmRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXRDdXJyZW50UHJvcChwcm9wTmFtZToga2V5b2YgVmlkZW9Qcm9wZXJ0aWVzKSB7XG4gICAgc3dpdGNoIChwcm9wTmFtZSkge1xuICAgICAgY2FzZSAnbG9hZGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPj0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsICF0aGlzLnZpZGVvRWxlbWVudCB8fCB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSAqIDEwMDAgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5kdXJhdGlvbiA/IHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uICogMTAwMCA6IG51bGwpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmluZyc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCAhdGhpcy52aWRlb0VsZW1lbnQgfHwgdGhpcy52aWRlb0VsZW1lbnQucmVhZHlTdGF0ZSA8IDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2x1bWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkgOiAxMDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ211dGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgOiBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCA/IHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA6IDEpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldFByb3AocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpIHtcbiAgICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICAvLyBVc2UgU3RyZW1pbydzIGxvYWQgY29tbWFuZCBwYXR0ZXJuIGluc3RlYWQgb2YgZGlyZWN0IHN0cmVhbSBzZXR0aW5nXG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICBjb21tYW5kQXJnczoge1xuICAgICAgICAgICAgICBzdHJlYW06IHsgdXJsOiBwcm9wVmFsdWUgfSxcbiAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAndW5sb2FkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgaWYgKHByb3BWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0aW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwcm9wVmFsdWUgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndm9sdW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC52b2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSkpIC8gMTAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbXV0ZWQnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9ICEhcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiBwcm9wVmFsdWUgIT09IG51bGwgJiYgaXNGaW5pdGUocHJvcFZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdGVkU3VidGl0bGVzVHJhY2tJZCc6XG4gICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCBzdWJ0aXRsZSB0cmFja3MgdG8gYmUgcHJvdmlkZWRcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBoYW5kbGUgdGhlIHN1YnRpdGxlIHRyYWNrIGxvYWRpbmdcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBTdWJ0aXRsZSBzdHlsaW5nIHByb3BlcnRpZXNcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzU2l6ZSc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNTaXplID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDUwLCBwcm9wVmFsdWUgfHwgMjUpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc09mZnNldCc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNPZmZzZXQgPSBNYXRoLm1heCgtMjAsIE1hdGgubWluKDIwLCBwcm9wVmFsdWUgfHwgMCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzVGV4dENvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvciA9IHByb3BWYWx1ZSB8fCAnI0ZGRkZGRic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3InOlxuICAgICAgICB0aGlzLmV4dHJhU3VidGl0bGVzQmFja2dyb3VuZENvbG9yID0gcHJvcFZhbHVlIHx8ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvciA9IHByb3BWYWx1ZSB8fCAnIzAwMDAwMCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc09wYWNpdHkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSB8fCAxMDApKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc0RlbGF5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc0RlbGF5ID0gcHJvcFZhbHVlIHx8IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWU6IHN0cmluZywgY29tbWFuZEFyZ3M/OiBhbnkpIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmROYW1lKSB7XG4gICAgICBjYXNlICdsb2FkJzpcbiAgICAgICAgdGhpcy5leGVjdXRlTG9hZENvbW1hbmQoY29tbWFuZEFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VubG9hZCc6XG4gICAgICAgIHRoaXMuZXhlY3V0ZVVubG9hZENvbW1hbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0b3AnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlZWsnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgY29tbWFuZEFyZ3MgJiYgY29tbWFuZEFyZ3NbMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gY29tbWFuZEFyZ3NbMF0gLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUxvYWRDb21tYW5kKGNvbW1hbmRBcmdzOiBhbnkpIHtcbiAgICB0aGlzLmV4ZWN1dGVVbmxvYWRDb21tYW5kKCk7IC8vIFVubG9hZCBhbnkgZXhpc3Rpbmcgc3RyZWFtIGZpcnN0XG4gICAgXG4gICAgaWYgKGNvbW1hbmRBcmdzICYmIGNvbW1hbmRBcmdzLnN0cmVhbSAmJiB0eXBlb2YgY29tbWFuZEFyZ3Muc3RyZWFtLnVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IGNvbW1hbmRBcmdzLnN0cmVhbS51cmw7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVWaWRlb0VsZW1lbnQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdMb2FkaW5nIHN0cmVhbSB2aWEgbG9hZCBjb21tYW5kJywgeyBcbiAgICAgICAgdXJsOiB0aGlzLmN1cnJlbnRTdHJlYW0sXG4gICAgICAgIGF1dG9wbGF5OiB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB2aWRlbyBwcm9wZXJ0aWVzXG4gICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kQXJncy50aW1lICE9PSBudWxsICYmIGlzRmluaXRlKGNvbW1hbmRBcmdzLnRpbWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwYXJzZUludChjb21tYW5kQXJncy50aW1lLCAxMCkgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBITFMgb3IgZGlyZWN0IHZpZGVvXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdHJlYW0gJiYgdGhpcy5zaG91bGRVc2VITFModGhpcy5jdXJyZW50U3RyZWFtKSkge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyB1cCBITFMgc3RyZWFtaW5nJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICB0aGlzLnNldHVwSExTKHRoaXMuY3VycmVudFN0cmVhbSEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyBkaXJlY3QgdmlkZW8gc291cmNlJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ2dyZXNzaXZlIHByZWxvYWQgc3RyYXRlZ3kgZm9yIFJlYWwtRGVicmlkIHN0cmVhbXNcbiAgICAgICAgICAvLyBGb3JjZSBmdWxsIHByZWxvYWRpbmcgdG8gb3ZlcmNvbWUgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSB0aGlzLmN1cnJlbnRTdHJlYW0hO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbmZpZ3VyZSB2aWRlbyBlbGVtZW50IGZvciBvcHRpbWFsIHN0cmVhbWluZ1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNldEF0dHJpYnV0ZSgncGxheXNpbmxpbmUnLCAndHJ1ZScpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNldEF0dHJpYnV0ZSgnd2Via2l0LXBsYXlzaW5saW5lJywgJ3RydWUnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW50ZWxsaWdlbnQgYnVmZmVyIG1vbml0b3Jpbmcgd2l0aCBidWZmZXIgaGVhbHRoIG1hbmFnZW1lbnRcbiAgICAgICAgICBsZXQgYnVmZmVySGVhbHRoVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgbGV0IGxvd0J1ZmZlckNvdW50ID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5idWZmZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckFoZWFkID0gYnVmZmVyZWQgLSBjdXJyZW50O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdCdWZmZXIgc3RhdHVzJywge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckFoZWFkOiBgJHtidWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBgJHtjdXJyZW50LnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVyZWRFbmQ6IGAke2J1ZmZlcmVkLnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoOiBidWZmZXJBaGVhZCA8IDUgPyAnTE9XJyA6IGJ1ZmZlckFoZWFkIDwgMTUgPyAnTUVESVVNJyA6ICdISUdIJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE1vbml0b3IgYnVmZmVyIGhlYWx0aCBhbmQgcGF1c2UgaWYgYnVmZmVyIGlzIGNyaXRpY2FsbHkgbG93XG4gICAgICAgICAgICAgIGlmIChidWZmZXJBaGVhZCA8IDIgJiYgIXRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIGxvd0J1ZmZlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0xvdyBidWZmZXIgZGV0ZWN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgIGxvd0J1ZmZlckV2ZW50czogbG93QnVmZmVyQ291bnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBQYXVzZSBicmllZmx5IHRvIGFsbG93IG1vcmUgYnVmZmVyaW5nIGlmIGJ1ZmZlciBpcyBjcml0aWNhbGx5IGxvd1xuICAgICAgICAgICAgICAgIGlmIChsb3dCdWZmZXJDb3VudCA+IDMpIHtcbiAgICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdQYXVzaW5nIGZvciBidWZmZXIgcmVjb3ZlcnknKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChidWZmZXJIZWFsdGhUaW1lcikgY2xlYXJUaW1lb3V0KGJ1ZmZlckhlYWx0aFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgIGJ1ZmZlckhlYWx0aFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBFUkZPUk1BTkNFLCAnUmVzdW1pbmcgYWZ0ZXIgYnVmZmVyIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChidWZmZXJBaGVhZCA+IDUpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb3VudGVyIHdoZW4gYnVmZmVyIGlzIGhlYWx0aHlcbiAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBzdGFsbCBkZXRlY3Rpb24gYW5kIHJlY292ZXJ5XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3RhbGxlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGxvZ1dhcm4oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdWaWRlbyBzdGFsbGVkLCBhdHRlbXB0aW5nIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAvLyBCcmllZiBwYXVzZSB0byBhbGxvdyBtb3JlIGJ1ZmZlcmluZ1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlIDwgMykge1xuICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdUcmlnZ2VyaW5nIGxvYWQgZm9yIHN0YWxsIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgd2FpdGluZyBldmVudCBoYW5kbGluZ1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1ZpZGVvIHdhaXRpbmcgZm9yIGRhdGEnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEVtaXQgcHJvcGVydHkgY2hhbmdlc1xuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgdGhpcy5jdXJyZW50U3RyZWFtKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZVVubG9hZENvbW1hbmQoKSB7XG4gICAgdGhpcy5jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgICBcbiAgICBpZiAodGhpcy5obHNJbnN0YW5jZSkge1xuICAgICAgdGhpcy5obHNJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgbnVsbCk7XG4gIH1cblxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGxvYWQgc3VidGl0bGVzXG4gIGxvYWRTdWJ0aXRsZVRyYWNrKHRyYWNrOiBTdWJ0aXRsZVRyYWNrIHwgbnVsbCkge1xuICAgIHJldHVybiB0aGlzLmxvYWRTdWJ0aXRsZXModHJhY2spO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHJldHVybjtcblxuICAgICh0aGlzIGFzIGFueSkuZGVzdHJveWVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmhsc0luc3RhbmNlKSB7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuaGxzSW5zdGFuY2UgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciAmJiB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc3VidGl0bGVzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZGVvRWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMudmlkZW9FbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciA9IG51bGw7XG4gICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95ZWQ7XG4gIH1cbn0iXSwibWFwcGluZ3MiOiJBQUdBLFNBQVMsYUFBYSxTQUFTLFVBQVUsVUFBVSxlQUFlO0FBaUUzRCxhQUFNLG1CQUFtQjtBQUFBLEVBQ3RCO0FBQUEsRUFDQSxlQUF3QztBQUFBLEVBQ3hDLHFCQUF5QztBQUFBLEVBQ3pDLG1CQUF1QztBQUFBLEVBQ3ZDLGNBQW1CO0FBQUEsRUFFbkIsZ0JBQTRELENBQUM7QUFBQSxFQUM3RCxpQkFBZ0QsQ0FBQztBQUFBO0FBQUEsRUFHakQsZ0JBQStCO0FBQUEsRUFDL0IsdUJBQTZDO0FBQUEsRUFDN0MsZ0JBQStCLENBQUM7QUFBQSxFQUNoQyxZQUFZO0FBQUE7QUFBQSxFQUdaLHFCQUFxQjtBQUFBLEVBQ3JCLHVCQUF1QjtBQUFBLEVBQ3ZCLDBCQUEwQjtBQUFBLEVBQzFCLGdDQUFnQztBQUFBLEVBQ2hDLDZCQUE2QjtBQUFBLEVBQzdCLHdCQUF3QjtBQUFBLEVBQ3hCLHNCQUFzQjtBQUFBLEVBRTlCLFlBQVksU0FBdUI7QUFDakMsU0FBSyxtQkFBbUIsUUFBUTtBQUNoQyxTQUFLLG9CQUFvQjtBQUFBLEVBQzNCO0FBQUEsRUFFUSxzQkFBc0I7QUFDNUIsU0FBSyxpQkFBaUIsTUFBTSxXQUFXO0FBQ3ZDLFNBQUssaUJBQWlCLE1BQU0sUUFBUTtBQUNwQyxTQUFLLGlCQUFpQixNQUFNLFNBQVM7QUFDckMsU0FBSyxpQkFBaUIsTUFBTSxrQkFBa0I7QUFBQSxFQUNoRDtBQUFBLEVBRVEscUJBQXFCO0FBQzNCLFFBQUksS0FBSyxhQUFjO0FBRXZCLFlBQVEsWUFBWSxRQUFRLDRCQUE0QjtBQUN4RCxTQUFLLGVBQWUsU0FBUyxjQUFjLE9BQU87QUFDbEQsU0FBSyxhQUFhLE1BQU0s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"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_serviceWorkerResponseSource": "network"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-08-01T11:32:06.884Z",
        "time": 20.160999993095174,
        "timings": {
          "blocked": 0.37199999987427146,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.001,
          "wait": 19.289000006190502,
          "receive": 0.4989999870304018,
          "_blocked_queueing": 0.36499999987427145,
          "_workerStart": 0.004,
          "_workerReady": 0.237,
          "_workerFetchStart": 0.237,
          "_workerRespondWithSettled": 19.132
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "fetchAndCache",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 153,
                "columnNumber": 25
              },
              {
                "functionName": "handleRequest",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 125,
                "columnNumber": 17
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "3",
                  "url": "http://localhost:5173/sw.js",
                  "lineNumber": 112,
                  "columnNumber": 19
                }
              ]
            }
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33033",
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoSystem.ts?t=1754047926856",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047926856"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047926856"
            }
          ],
          "cookies": [],
          "headersSize": 1002,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "86315"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:06 GMT"
            },
            {
              "name": "Etag",
              "value": "W/\"6120-QOdSJA7izNWrbBoMvDnrq6iAqwA\""
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 86315,
            "mimeType": "text/javascript",
            "compression": 0,
            "text": "import { LogCategory, logInfo, logError, logDebug, logWarn } from \"/src/lib/utils/logger.ts\";\nexport class StremioVideoSystem {\n  containerElement;\n  videoElement = null;\n  subtitlesContainer = null;\n  subtitlesElement = null;\n  hlsInstance = null;\n  observedProps = {};\n  eventListeners = {};\n  // State\n  currentStream = null;\n  currentSubtitleTrack = null;\n  subtitlesData = [];\n  destroyed = false;\n  // Subtitle settings\n  extraSubtitlesSize = 25;\n  extraSubtitlesOffset = 0;\n  extraSubtitlesTextColor = \"#FFFFFF\";\n  extraSubtitlesBackgroundColor = \"rgba(0, 0, 0, 0.7)\";\n  extraSubtitlesOutlineColor = \"#000000\";\n  extraSubtitlesOpacity = 100;\n  extraSubtitlesDelay = 0;\n  constructor(options) {\n    this.containerElement = options.containerElement;\n    this.initializeContainer();\n  }\n  initializeContainer() {\n    this.containerElement.style.position = \"relative\";\n    this.containerElement.style.width = \"100%\";\n    this.containerElement.style.height = \"100%\";\n    this.containerElement.style.backgroundColor = \"#000\";\n  }\n  createVideoElement() {\n    if (this.videoElement) return;\n    logInfo(LogCategory.PLAYER, \"Creating new video element\");\n    this.videoElement = document.createElement(\"video\");\n    this.videoElement.style.width = \"100%\";\n    this.videoElement.style.height = \"100%\";\n    this.videoElement.style.backgroundColor = \"transparent\";\n    this.videoElement.controls = false;\n    this.videoElement.preload = \"auto\";\n    this.videoElement.playsInline = true;\n    if (\"bufferTime\" in this.videoElement) {\n      this.videoElement.bufferTime = 10;\n    }\n    this.containerElement.appendChild(this.videoElement);\n    this.setupVideoEventListeners();\n  }\n  setupVideoEventListeners() {\n    if (!this.videoElement) return;\n    this.videoElement.addEventListener(\"loadstart\", () => {\n      logDebug(LogCategory.PLAYER, \"Video loadstart event\");\n      this.emitPropChanged(\"loaded\", false);\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"loadedmetadata\", () => {\n      if (!this.videoElement) return;\n      logInfo(LogCategory.PLAYER, \"Video loadedmetadata event\", {\n        duration: this.videoElement.duration,\n        durationFormatted: `${Math.floor(this.videoElement.duration / 60)}:${Math.floor(this.videoElement.duration % 60).toString().padStart(2, \"0\")}`\n      });\n      this.emitPropChanged(\"loaded\", true);\n      this.emitPropChanged(\"duration\", this.videoElement.duration * 1e3);\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"timeupdate\", () => {\n      if (!this.videoElement) return;\n      const time = this.videoElement.currentTime * 1e3;\n      this.emitPropChanged(\"time\", time);\n      this.renderSubtitles(time);\n    });\n    this.videoElement.addEventListener(\"play\", () => {\n      this.emitPropChanged(\"paused\", false);\n    });\n    this.videoElement.addEventListener(\"pause\", () => {\n      this.emitPropChanged(\"paused\", true);\n    });\n    this.videoElement.addEventListener(\"waiting\", () => {\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"canplay\", () => {\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"progress\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"buffered\", this.videoElement.buffered);\n    });\n    this.videoElement.addEventListener(\"volumechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"volume\", Math.floor(this.videoElement.volume * 100));\n      this.emitPropChanged(\"muted\", this.videoElement.muted);\n    });\n    this.videoElement.addEventListener(\"ratechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"playbackSpeed\", this.videoElement.playbackRate);\n    });\n    this.videoElement.addEventListener(\"ended\", () => {\n      this.emit(\"ended\");\n    });\n    this.videoElement.addEventListener(\"error\", () => {\n      if (!this.videoElement) return;\n      const error = this.videoElement.error;\n      if (error) {\n        logError(LogCategory.PLAYER, \"Video playback error\", {\n          code: error.code,\n          message: error.message,\n          streamUrl: this.currentStream\n        });\n        this.emit(\"error\", {\n          critical: true,\n          message: `Video error: ${error.message}`,\n          code: error.code\n        });\n      }\n    });\n  }\n  createSubtitlesContainer() {\n    if (this.subtitlesContainer) return;\n    this.subtitlesContainer = document.createElement(\"div\");\n    this.subtitlesContainer.style.position = \"absolute\";\n    this.subtitlesContainer.style.left = \"0\";\n    this.subtitlesContainer.style.top = \"0\";\n    this.subtitlesContainer.style.width = \"100%\";\n    this.subtitlesContainer.style.height = \"100%\";\n    this.subtitlesContainer.style.pointerEvents = \"none\";\n    this.subtitlesContainer.style.zIndex = \"1000\";\n    this.subtitlesContainer.style.display = \"flex\";\n    this.subtitlesContainer.style.flexDirection = \"column\";\n    this.subtitlesContainer.style.justifyContent = \"flex-end\";\n    this.subtitlesContainer.style.alignItems = \"center\";\n    this.subtitlesContainer.style.overflow = \"hidden\";\n    this.containerElement.appendChild(this.subtitlesContainer);\n  }\n  renderSubtitles(currentTime) {\n    if (!this.subtitlesData.length || !this.currentSubtitleTrack) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    const adjustedTime = currentTime + this.extraSubtitlesDelay;\n    const activeCues = this.subtitlesData.filter(\n      (cue) => adjustedTime >= cue.startTime && adjustedTime <= cue.endTime\n    );\n    if (activeCues.length === 0) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    this.createSubtitlesContainer();\n    if (!this.subtitlesElement) {\n      this.subtitlesElement = document.createElement(\"div\");\n      this.subtitlesElement.style.position = \"relative\";\n      this.subtitlesElement.style.maxWidth = \"90%\";\n      this.subtitlesElement.style.textAlign = \"center\";\n      this.subtitlesElement.style.fontFamily = \"Arial, sans-serif\";\n      this.subtitlesElement.style.fontWeight = \"bold\";\n      this.subtitlesElement.style.lineHeight = \"1.2\";\n      this.subtitlesElement.style.wordWrap = \"break-word\";\n      this.subtitlesElement.style.whiteSpace = \"pre-wrap\";\n      this.subtitlesContainer.appendChild(this.subtitlesElement);\n    }\n    while (this.subtitlesElement.firstChild) {\n      this.subtitlesElement.removeChild(this.subtitlesElement.firstChild);\n    }\n    activeCues.forEach((cue) => {\n      const cueElement = document.createElement(\"div\");\n      cueElement.textContent = cue.text;\n      this.styleSubtitleElement(cueElement);\n      this.subtitlesElement.appendChild(cueElement);\n    });\n  }\n  styleSubtitleElement(element) {\n    const fontSize = Math.floor(this.extraSubtitlesSize / 25 * 3.5) + \"vmin\";\n    const opacity = this.extraSubtitlesOpacity / 100;\n    element.style.fontSize = fontSize;\n    element.style.opacity = opacity.toString();\n    element.style.color = this.extraSubtitlesTextColor;\n    element.style.backgroundColor = this.extraSubtitlesBackgroundColor;\n    element.style.padding = \"0.2em 0.4em\";\n    element.style.borderRadius = \"0.2em\";\n    element.style.margin = \"0.1em\";\n    element.style.display = \"inline-block\";\n    const outlineWidth = \"0.15rem\";\n    element.style.textShadow = [\n      `-${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`\n    ].join(\", \");\n    if (this.extraSubtitlesOffset !== 0) {\n      const offsetPercent = this.extraSubtitlesOffset + \"%\";\n      element.style.transform = `translateY(${offsetPercent})`;\n    }\n  }\n  removeSubtitlesElement() {\n    if (this.subtitlesElement && this.subtitlesElement.parentNode) {\n      this.subtitlesElement.parentNode.removeChild(this.subtitlesElement);\n      this.subtitlesElement = null;\n    }\n  }\n  async loadSubtitles(track) {\n    if (!track || !track.url) {\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n      return;\n    }\n    try {\n      const proxyUrl = `/api/subtitles?url=${encodeURIComponent(track.url)}`;\n      logInfo(LogCategory.STREAM, \"Loading subtitles via proxy\", { url: proxyUrl });\n      const response = await fetch(proxyUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to load subtitles: ${response.status}`);\n      }\n      const text = await response.text();\n      this.subtitlesData = this.parseSubtitles(text);\n      this.currentSubtitleTrack = track;\n      logInfo(LogCategory.STREAM, \"Subtitles loaded successfully\", {\n        cuesTotal: this.subtitlesData.length,\n        language: track.language || track.id\n      });\n    } catch (error) {\n      logError(LogCategory.STREAM, \"Subtitle loading failed\", {\n        url: track.url,\n        language: track.language || track.id\n      }, error);\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n    }\n  }\n  parseSubtitles(text) {\n    const cues = [];\n    if (text.includes(\"WEBVTT\")) {\n      logDebug(LogCategory.STREAM, \"Parsing WebVTT subtitles\");\n      const blocks = text.split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 2) {\n          const timeLineIndex = lines.findIndex((line) => line.includes(\"-->\"));\n          if (timeLineIndex >= 0) {\n            const timeLine = lines[timeLineIndex];\n            const textLines = lines.slice(timeLineIndex + 1);\n            const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})/);\n            if (timeMatch) {\n              const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n              const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n              cues.push({\n                startTime,\n                endTime,\n                text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n                // Remove HTML tags\n              });\n            }\n          }\n        }\n      });\n    } else if (text.includes(\"-->\")) {\n      logDebug(LogCategory.STREAM, \"Parsing SRT subtitles\");\n      const blocks = text.trim().split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 3) {\n          const timeLine = lines[1];\n          const textLines = lines.slice(2);\n          const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/);\n          if (timeMatch) {\n            const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n            const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n            cues.push({\n              startTime,\n              endTime,\n              text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n              // Remove HTML tags\n            });\n          }\n        }\n      });\n    }\n    logDebug(LogCategory.STREAM, \"Subtitle parsing completed\", { cuesTotal: cues.length });\n    return cues;\n  }\n  shouldUseHLS(streamUrl) {\n    return streamUrl.includes(\".m3u8\") || typeof window !== \"undefined\" && window.Hls?.isSupported() && !this.videoElement.canPlayType(\"application/vnd.apple.mpegurl\");\n  }\n  setupHLS(streamUrl) {\n    if (typeof window !== \"undefined\" && window.Hls?.isSupported()) {\n      const Hls = window.Hls;\n      this.hlsInstance = new Hls({\n        debug: false,\n        enableWorker: true,\n        lowLatencyMode: false,\n        backBufferLength: 30,\n        maxBufferLength: 50,\n        maxMaxBufferLength: 80,\n        maxFragLookUpTolerance: 0,\n        maxBufferHole: 0,\n        appendErrorMaxRetry: 20,\n        nudgeMaxRetry: 20,\n        manifestLoadingTimeOut: 3e4,\n        manifestLoadingMaxRetry: 10,\n        fragLoadPolicy: {\n          default: {\n            maxTimeToFirstByteMs: 1e4,\n            maxLoadTimeMs: 12e4,\n            timeoutRetry: {\n              maxNumRetry: 20,\n              retryDelayMs: 0,\n              maxRetryDelayMs: 15\n            },\n            errorRetry: {\n              maxNumRetry: 6,\n              retryDelayMs: 1e3,\n              maxRetryDelayMs: 15\n            }\n          }\n        }\n      });\n      this.hlsInstance.loadSource(streamUrl);\n      this.hlsInstance.attachMedia(this.videoElement);\n      this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {\n        this.updateAudioTracks();\n      });\n      this.hlsInstance.on(Hls.Events.ERROR, (_event, data) => {\n        if (data.fatal) {\n          this.emit(\"error\", {\n            critical: true,\n            message: `HLS Error: ${data.type} - ${data.details}`\n          });\n        }\n      });\n    } else {\n      this.videoElement.src = streamUrl;\n    }\n  }\n  updateAudioTracks() {\n    if (this.hlsInstance && this.hlsInstance.audioTracks) {\n      const tracks = this.hlsInstance.audioTracks.map((track, index) => ({\n        id: index.toString(),\n        name: track.name || `Track ${index + 1}`,\n        language: track.lang\n      }));\n      this.emitPropChanged(\"audioTracks\", tracks);\n    }\n  }\n  emitPropChanged(propName, propValue) {\n    if (this.observedProps[propName]) {\n      this.emit(\"propChanged\", propName, propValue);\n    }\n  }\n  emit(event, ...args) {\n    if (this.eventListeners[event]) {\n      this.eventListeners[event].forEach((listener) => listener(...args));\n    }\n  }\n  // Public API\n  on(event, listener) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [];\n    }\n    this.eventListeners[event].push(listener);\n  }\n  dispatch(action) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    switch (action.type) {\n      case \"observeProp\":\n        if (action.propName) {\n          this.observedProps[action.propName] = true;\n          this.emitCurrentProp(action.propName);\n        }\n        break;\n      case \"setProp\":\n        if (action.propName && action.propValue !== void 0) {\n          this.setProp(action.propName, action.propValue);\n        }\n        break;\n      case \"command\":\n        if (action.commandName) {\n          this.executeCommand(action.commandName, action.commandArgs);\n        }\n        break;\n    }\n  }\n  emitCurrentProp(propName) {\n    switch (propName) {\n      case \"loaded\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.readyState >= 1);\n        break;\n      case \"paused\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.paused);\n        break;\n      case \"time\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.currentTime * 1e3 : null);\n        break;\n      case \"duration\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.duration ? this.videoElement.duration * 1e3 : null);\n        break;\n      case \"buffering\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.readyState < 3);\n        break;\n      case \"buffered\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.buffered : null);\n        break;\n      case \"volume\":\n        this.emitPropChanged(propName, this.videoElement ? Math.floor(this.videoElement.volume * 100) : 100);\n        break;\n      case \"muted\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.muted : false);\n        break;\n      case \"playbackSpeed\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.playbackRate : 1);\n        break;\n    }\n  }\n  setProp(propName, propValue) {\n    switch (propName) {\n      case \"stream\":\n        if (propValue) {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"load\",\n            commandArgs: {\n              stream: { url: propValue },\n              autoplay: true\n            }\n          });\n        } else {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"unload\"\n          });\n        }\n        break;\n      case \"paused\":\n        if (this.videoElement) {\n          if (propValue) {\n            this.videoElement.pause();\n          } else {\n            this.videoElement.play().catch(() => {\n            });\n          }\n        }\n        break;\n      case \"time\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.currentTime = propValue / 1e3;\n        }\n        break;\n      case \"volume\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.muted = false;\n          this.videoElement.volume = Math.max(0, Math.min(100, propValue)) / 100;\n        }\n        break;\n      case \"muted\":\n        if (this.videoElement) {\n          this.videoElement.muted = !!propValue;\n        }\n        break;\n      case \"playbackSpeed\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.playbackRate = propValue;\n        }\n        break;\n      case \"selectedSubtitlesTrackId\":\n        break;\n      // Subtitle styling properties\n      case \"extraSubtitlesSize\":\n        this.extraSubtitlesSize = Math.max(10, Math.min(50, propValue || 25));\n        break;\n      case \"extraSubtitlesOffset\":\n        this.extraSubtitlesOffset = Math.max(-20, Math.min(20, propValue || 0));\n        break;\n      case \"extraSubtitlesTextColor\":\n        this.extraSubtitlesTextColor = propValue || \"#FFFFFF\";\n        break;\n      case \"extraSubtitlesBackgroundColor\":\n        this.extraSubtitlesBackgroundColor = propValue || \"rgba(0, 0, 0, 0.7)\";\n        break;\n      case \"extraSubtitlesOutlineColor\":\n        this.extraSubtitlesOutlineColor = propValue || \"#000000\";\n        break;\n      case \"extraSubtitlesOpacity\":\n        this.extraSubtitlesOpacity = Math.max(0, Math.min(100, propValue || 100));\n        break;\n      case \"extraSubtitlesDelay\":\n        this.extraSubtitlesDelay = propValue || 0;\n        break;\n    }\n  }\n  executeCommand(commandName, commandArgs) {\n    switch (commandName) {\n      case \"load\":\n        this.executeLoadCommand(commandArgs);\n        break;\n      case \"unload\":\n        this.executeUnloadCommand();\n        break;\n      case \"play\":\n        if (this.videoElement) {\n          this.videoElement.play().catch(() => {\n          });\n        }\n        break;\n      case \"pause\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n        }\n        break;\n      case \"stop\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n          this.videoElement.currentTime = 0;\n        }\n        break;\n      case \"seek\":\n        if (this.videoElement && commandArgs && commandArgs[0] !== void 0) {\n          this.videoElement.currentTime = commandArgs[0] / 1e3;\n        }\n        break;\n    }\n  }\n  executeLoadCommand(commandArgs) {\n    this.executeUnloadCommand();\n    if (commandArgs && commandArgs.stream && typeof commandArgs.stream.url === \"string\") {\n      this.currentStream = commandArgs.stream.url;\n      if (!this.videoElement) {\n        this.createVideoElement();\n      }\n      logInfo(LogCategory.STREAM, \"Loading stream via load command\", {\n        url: this.currentStream,\n        autoplay: typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true\n      });\n      if (this.videoElement) {\n        this.videoElement.autoplay = typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true;\n        if (commandArgs.time !== null && isFinite(commandArgs.time)) {\n          this.videoElement.currentTime = parseInt(commandArgs.time, 10) / 1e3;\n        }\n        if (this.currentStream && this.shouldUseHLS(this.currentStream)) {\n          logInfo(LogCategory.STREAM, \"Setting up HLS streaming\", { url: this.currentStream });\n          this.setupHLS(this.currentStream);\n        } else {\n          logInfo(LogCategory.STREAM, \"Setting direct video source\", { url: this.currentStream });\n          this.videoElement.preload = \"auto\";\n          this.videoElement.src = this.currentStream;\n          this.videoElement.setAttribute(\"playsinline\", \"true\");\n          this.videoElement.setAttribute(\"webkit-playsinline\", \"true\");\n          let bufferHealthTimer = null;\n          let lowBufferCount = 0;\n          this.videoElement.addEventListener(\"progress\", () => {\n            if (this.videoElement && this.videoElement.buffered.length > 0) {\n              const buffered = this.videoElement.buffered.end(this.videoElement.buffered.length - 1);\n              const current = this.videoElement.currentTime;\n              const bufferAhead = buffered - current;\n              logDebug(LogCategory.PERFORMANCE, \"Buffer status\", {\n                bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                currentTime: `${current.toFixed(1)}s`,\n                bufferedEnd: `${buffered.toFixed(1)}s`,\n                bufferHealth: bufferAhead < 5 ? \"LOW\" : bufferAhead < 15 ? \"MEDIUM\" : \"HIGH\"\n              });\n              if (bufferAhead < 2 && !this.videoElement.paused) {\n                lowBufferCount++;\n                logWarn(LogCategory.PERFORMANCE, \"Low buffer detected\", {\n                  bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                  lowBufferEvents: lowBufferCount\n                });\n                if (lowBufferCount > 3) {\n                  logInfo(LogCategory.PERFORMANCE, \"Pausing for buffer recovery\");\n                  this.videoElement.pause();\n                  if (bufferHealthTimer) clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = setTimeout(() => {\n                    if (this.videoElement && this.videoElement.paused) {\n                      logInfo(LogCategory.PERFORMANCE, \"Resuming after buffer recovery\");\n                      this.videoElement.play().catch(() => {\n                      });\n                      lowBufferCount = 0;\n                    }\n                  }, 2e3);\n                }\n              } else if (bufferAhead > 5) {\n                lowBufferCount = 0;\n                if (bufferHealthTimer) {\n                  clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = null;\n                }\n              }\n            }\n          });\n          this.videoElement.addEventListener(\"stalled\", () => {\n            logWarn(LogCategory.PERFORMANCE, \"Video stalled, attempting recovery\");\n            setTimeout(() => {\n              if (this.videoElement && this.videoElement.readyState < 3) {\n                logInfo(LogCategory.PERFORMANCE, \"Triggering load for stall recovery\");\n                this.videoElement.load();\n              }\n            }, 1e3);\n          });\n          this.videoElement.addEventListener(\"waiting\", () => {\n            logDebug(LogCategory.PERFORMANCE, \"Video waiting for data\");\n          });\n          this.videoElement.load();\n        }\n        this.emitPropChanged(\"stream\", this.currentStream);\n        this.emitPropChanged(\"loaded\", false);\n        this.emitPropChanged(\"buffering\", true);\n      }\n    }\n  }\n  executeUnloadCommand() {\n    this.currentStream = null;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.videoElement) {\n      this.videoElement.removeAttribute(\"src\");\n      this.videoElement.load();\n    }\n    this.emitPropChanged(\"stream\", null);\n  }\n  // Public method to load subtitles\n  loadSubtitleTrack(track) {\n    return this.loadSubtitles(track);\n  }\n  destroy() {\n    if (this.destroyed) return;\n    this.destroyed = true;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.subtitlesContainer && this.subtitlesContainer.parentNode) {\n      this.subtitlesContainer.parentNode.removeChild(this.subtitlesContainer);\n    }\n    if (this.videoElement && this.videoElement.parentNode) {\n      this.videoElement.parentNode.removeChild(this.videoElement);\n    }\n    this.eventListeners = {};\n    this.videoElement = null;\n    this.subtitlesContainer = null;\n    this.subtitlesElement = null;\n  }\n  get isDestroyed() {\n    return this.destroyed;\n  }\n}\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0cmVtaW9WaWRlb1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wbGV0ZSBTdHJlbWlvIFZpZGVvIFBsYXllciBTeXN0ZW1cbi8vIFR5cGVTY3JpcHQgaW1wbGVtZW50YXRpb24gd2l0aCBhbGwgU3RyZW1pbyBmZWF0dXJlc1xuXG5pbXBvcnQgeyBMb2dDYXRlZ29yeSwgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ0RlYnVnLCBsb2dXYXJuIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBWaWRlb1Byb3BlcnRpZXMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBsb2FkZWQ/OiBib29sZWFuO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgYnVmZmVyaW5nPzogYm9vbGVhbjtcbiAgYnVmZmVyZWQ/OiBUaW1lUmFuZ2VzIHwgbnVsbDtcbiAgYXVkaW9UcmFja3M/OiBBdWRpb1RyYWNrW107XG4gIHNlbGVjdGVkQXVkaW9UcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzVHJhY2tzPzogU3VidGl0bGVUcmFja1tdO1xuICBzZWxlY3RlZFN1YnRpdGxlc1RyYWNrSWQ/OiBzdHJpbmcgfCBudWxsO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1NpemU/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIHZvbHVtZT86IG51bWJlcjtcbiAgbXV0ZWQ/OiBib29sZWFuO1xuICBwbGF5YmFja1NwZWVkPzogbnVtYmVyO1xuICAvLyBFbmhhbmNlZCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVDdWUge1xuICBzdGFydFRpbWU6IG51bWJlcjtcbiAgZW5kVGltZTogbnVtYmVyO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9BY3Rpb24ge1xuICB0eXBlOiAnb2JzZXJ2ZVByb3AnIHwgJ3NldFByb3AnIHwgJ2NvbW1hbmQnO1xuICBwcm9wTmFtZT86IGtleW9mIFZpZGVvUHJvcGVydGllcztcbiAgcHJvcFZhbHVlPzogYW55O1xuICBjb21tYW5kTmFtZT86IHN0cmluZztcbiAgY29tbWFuZEFyZ3M/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9PcHRpb25zIHtcbiAgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJlbWlvVmlkZW9TeXN0ZW0ge1xuICBwcml2YXRlIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN1YnRpdGxlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGhsc0luc3RhbmNlOiBhbnkgPSBudWxsO1xuICBcbiAgcHJpdmF0ZSBvYnNlcnZlZFByb3BzOiB7IFtLIGluIGtleW9mIFZpZGVvUHJvcGVydGllc10/OiBib29sZWFuIH0gPSB7fTtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbltdIH0gPSB7fTtcbiAgXG4gIC8vIFN0YXRlXG4gIHByaXZhdGUgY3VycmVudFN0cmVhbTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY3VycmVudFN1YnRpdGxlVHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNEYXRhOiBTdWJ0aXRsZUN1ZVtdID0gW107XG4gIHByaXZhdGUgZGVzdHJveWVkID0gZmFsc2U7XG4gIFxuICAvLyBTdWJ0aXRsZSBzZXR0aW5nc1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzU2l6ZSA9IDI1O1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc1RleHRDb2xvciA9ICcjRkZGRkZGJztcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yID0gJyMwMDAwMDAnO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3BhY2l0eSA9IDEwMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0RlbGF5ID0gMDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBWaWRlb09wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQ7XG4gICAgdGhpcy5pbml0aWFsaXplQ29udGFpbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDb250YWluZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVWaWRlb0VsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ0NyZWF0aW5nIG5ldyB2aWRlbyBlbGVtZW50Jyk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJzsgLy8gQ2hhbmdlZCBmcm9tICdtZXRhZGF0YScgdG8gJ2F1dG8nIGZvciBiZXR0ZXIgYnVmZmVyaW5nXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgIC8vIERvbid0IHNldCBjcm9zc09yaWdpbiBmb3IgUmVhbC1EZWJyaWQgc3RyZWFtcyBhcyB0aGV5IGRvbid0IHN1cHBvcnQgQ09SU1xuICAgIFxuICAgIC8vIEFkZCBidWZmZXIgY29uZmlndXJhdGlvbiBmb3IgYmV0dGVyIHN0cmVhbWluZyBwZXJmb3JtYW5jZVxuICAgIGlmICgnYnVmZmVyVGltZScgaW4gdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICh0aGlzLnZpZGVvRWxlbWVudCBhcyBhbnkpLmJ1ZmZlclRpbWUgPSAxMDsgLy8gMTAgc2Vjb25kcyBidWZmZXJcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuc2V0dXBWaWRlb0V2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVmlkZW9FdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKSA9PiB7XG4gICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QTEFZRVIsICdWaWRlbyBsb2Fkc3RhcnQgZXZlbnQnKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYnVmZmVyaW5nJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUExBWUVSLCAnVmlkZW8gbG9hZGVkbWV0YWRhdGEgZXZlbnQnLCB7IFxuICAgICAgICBkdXJhdGlvbjogdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uRm9ybWF0dGVkOiBgJHtNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uIC8gNjApfToke01hdGguZmxvb3IodGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gJSA2MCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIHRydWUpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2R1cmF0aW9uJywgdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gKiAxMDAwKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpZGVvRWxlbWVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgdGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lICogMTAwMDtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd0aW1lJywgdGltZSk7XG4gICAgICB0aGlzLnJlbmRlclN1YnRpdGxlcyh0aW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJlZCcsIHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd2b2x1bWUnLCBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ211dGVkJywgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdwbGF5YmFja1NwZWVkJywgdGhpcy52aWRlb0VsZW1lbnQucGxheWJhY2tSYXRlKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdlbmRlZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMudmlkZW9FbGVtZW50LmVycm9yO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGxvZ0Vycm9yKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ1ZpZGVvIHBsYXliYWNrIGVycm9yJywge1xuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdHJlYW1Vcmw6IHRoaXMuY3VycmVudFN0cmVhbVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgVmlkZW8gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN1YnRpdGxlc0NvbnRhaW5lcigpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdWJ0aXRsZXMoY3VycmVudFRpbWU6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5zdWJ0aXRsZXNEYXRhLmxlbmd0aCB8fCAhdGhpcy5jdXJyZW50U3VidGl0bGVUcmFjaykge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWRqdXN0ZWRUaW1lID0gY3VycmVudFRpbWUgKyB0aGlzLmV4dHJhU3VidGl0bGVzRGVsYXk7XG4gICAgY29uc3QgYWN0aXZlQ3VlcyA9IHRoaXMuc3VidGl0bGVzRGF0YS5maWx0ZXIoY3VlID0+IFxuICAgICAgYWRqdXN0ZWRUaW1lID49IGN1ZS5zdGFydFRpbWUgJiYgYWRqdXN0ZWRUaW1lIDw9IGN1ZS5lbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChhY3RpdmVDdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVTdWJ0aXRsZXNDb250YWluZXIoKTtcbiAgICBcbiAgICBpZiAoIXRoaXMuc3VidGl0bGVzRWxlbWVudCkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJzkwJSc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdBcmlhbCwgc2Fucy1zZXJpZic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciEuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyBjb250ZW50XG4gICAgd2hpbGUgKHRoaXMuc3VidGl0bGVzRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIFJlbmRlciBhY3RpdmUgY3Vlc1xuICAgIGFjdGl2ZUN1ZXMuZm9yRWFjaChjdWUgPT4ge1xuICAgICAgY29uc3QgY3VlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY3VlRWxlbWVudC50ZXh0Q29udGVudCA9IGN1ZS50ZXh0O1xuICAgICAgdGhpcy5zdHlsZVN1YnRpdGxlRWxlbWVudChjdWVFbGVtZW50KTtcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCEuYXBwZW5kQ2hpbGQoY3VlRWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0eWxlU3VidGl0bGVFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZm9udFNpemUgPSBNYXRoLmZsb29yKCh0aGlzLmV4dHJhU3VidGl0bGVzU2l6ZSAvIDI1KSAqIDMuNSkgKyAndm1pbic7XG4gICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNPcGFjaXR5IC8gMTAwO1xuXG4gICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcbiAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvcjtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3I7XG4gICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuMmVtIDAuNGVtJztcbiAgICBlbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwLjJlbSc7XG4gICAgZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnMC4xZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXG4gICAgLy8gVGV4dCBzaGFkb3cgZm9yIG91dGxpbmUgZWZmZWN0XG4gICAgY29uc3Qgb3V0bGluZVdpZHRoID0gJzAuMTVyZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IFtcbiAgICAgIGAtJHtvdXRsaW5lV2lkdGh9IC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwIC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAke291dGxpbmVXaWR0aH0gLSR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYC0ke291dGxpbmVXaWR0aH0gMCAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAwIDAgJHt0aGlzLmV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yfWAsXG4gICAgICBgLSR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwICR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YFxuICAgIF0uam9pbignLCAnKTtcblxuICAgIC8vIFBvc2l0aW9uIG9mZnNldFxuICAgIGlmICh0aGlzLmV4dHJhU3VidGl0bGVzT2Zmc2V0ICE9PSAwKSB7XG4gICAgICBjb25zdCBvZmZzZXRQZXJjZW50ID0gdGhpcy5leHRyYVN1YnRpdGxlc09mZnNldCArICclJztcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtvZmZzZXRQZXJjZW50fSlgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNFbGVtZW50ICYmIHRoaXMuc3VidGl0bGVzRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0VsZW1lbnQpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRTdWJ0aXRsZXModHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsKSB7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2sudXJsKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0RhdGEgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBvdXIgc3VidGl0bGUgcHJveHkgdG8gYXZvaWQgQ09SUyBpc3N1ZXNcbiAgICAgIGNvbnN0IHByb3h5VXJsID0gYC9hcGkvc3VidGl0bGVzP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0cmFjay51cmwpfWA7XG4gICAgICBcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnTG9hZGluZyBzdWJ0aXRsZXMgdmlhIHByb3h5JywgeyB1cmw6IHByb3h5VXJsIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3h5VXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzdWJ0aXRsZXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gdGhpcy5wYXJzZVN1YnRpdGxlcyh0ZXh0KTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSB0cmFjaztcbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZXMgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgY3Vlc1RvdGFsOiB0aGlzLnN1YnRpdGxlc0RhdGEubGVuZ3RoLFxuICAgICAgICBsYW5ndWFnZTogdHJhY2subGFuZ3VhZ2UgfHwgdHJhY2suaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBsb2FkaW5nIGZhaWxlZCcsIHtcbiAgICAgICAgdXJsOiB0cmFjay51cmwsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5ndWFnZSB8fCB0cmFjay5pZFxuICAgICAgfSwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gW107XG4gICAgICB0aGlzLmN1cnJlbnRTdWJ0aXRsZVRyYWNrID0gbnVsbDtcbiAgICAgIHRoaXMucmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdWJ0aXRsZXModGV4dDogc3RyaW5nKTogU3VidGl0bGVDdWVbXSB7XG4gICAgY29uc3QgY3VlczogU3VidGl0bGVDdWVbXSA9IFtdO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgV2ViVlRUIGZvcm1hdFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdXRUJWVFQnKSkge1xuICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnUGFyc2luZyBXZWJWVFQgc3VidGl0bGVzJyk7XG4gICAgICBcbiAgICAgIC8vIFNwbGl0IGJ5IGRvdWJsZSBuZXdsaW5lcyB0byBnZXQgY3VlIGJsb2Nrc1xuICAgICAgY29uc3QgYmxvY2tzID0gdGV4dC5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgdGltZWxpbmUgKGNvbnRhaW5zIC0tPilcbiAgICAgICAgICBjb25zdCB0aW1lTGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS5pbmNsdWRlcygnLS0+JykpO1xuICAgICAgICAgIGlmICh0aW1lTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVMaW5lID0gbGluZXNbdGltZUxpbmVJbmRleF07XG4gICAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSh0aW1lTGluZUluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlYlZUVCBmb3JtYXQ6IDAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDAuMDAwXG4gICAgICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0aW1lTGluZS5tYXRjaCgvKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KS8pO1xuICAgICAgICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFsyXSkgKiA2MDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFszXSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbNV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzddKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzhdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGN1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dExpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IFxuICAgIC8vIFNSVCBmb3JtYXQgcGFyc2VyXG4gICAgZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnLS0+JykpIHtcbiAgICAgIGxvZ0RlYnVnKExvZ0NhdGVnb3J5LlNUUkVBTSwgJ1BhcnNpbmcgU1JUIHN1YnRpdGxlcycpO1xuICAgICAgXG4gICAgICBjb25zdCBibG9ja3MgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgY29uc3QgdGltZUxpbmUgPSBsaW5lc1sxXTtcbiAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSgyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTUlQgZm9ybWF0OiAwMDowMDowMCwwMDAgLS0+IDAwOjAwOjAwLDAwMFxuICAgICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRpbWVMaW5lLm1hdGNoKC8oXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSwoXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSksKFxcZHszfSkvKTtcbiAgICAgICAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbMl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzNdKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IHBhcnNlSW50KHRpbWVNYXRjaFs1XSkgKiAzNjAwMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFs3XSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbOF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdWVzLnB1c2goe1xuICAgICAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgIHRleHQ6IHRleHRMaW5lcy5qb2luKCdcXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBwYXJzaW5nIGNvbXBsZXRlZCcsIHsgY3Vlc1RvdGFsOiBjdWVzLmxlbmd0aCB9KTtcbiAgICByZXR1cm4gY3VlcztcbiAgfVxuXG5cbiAgcHJpdmF0ZSBzaG91bGRVc2VITFMoc3RyZWFtVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3RyZWFtVXJsLmluY2x1ZGVzKCcubTN1OCcpIHx8IFxuICAgICAgICAgICAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgXG4gICAgICAgICAgICAod2luZG93IGFzIGFueSkuSGxzPy5pc1N1cHBvcnRlZCgpICYmIFxuICAgICAgICAgICAgIXRoaXMudmlkZW9FbGVtZW50IS5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmwnKSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwSExTKHN0cmVhbVVybDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5IbHM/LmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIGNvbnN0IEhscyA9ICh3aW5kb3cgYXMgYW55KS5IbHM7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbmV3IEhscyh7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlV29ya2VyOiB0cnVlLFxuICAgICAgICBsb3dMYXRlbmN5TW9kZTogZmFsc2UsXG4gICAgICAgIGJhY2tCdWZmZXJMZW5ndGg6IDMwLFxuICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDUwLFxuICAgICAgICBtYXhNYXhCdWZmZXJMZW5ndGg6IDgwLFxuICAgICAgICBtYXhGcmFnTG9va1VwVG9sZXJhbmNlOiAwLFxuICAgICAgICBtYXhCdWZmZXJIb2xlOiAwLFxuICAgICAgICBhcHBlbmRFcnJvck1heFJldHJ5OiAyMCxcbiAgICAgICAgbnVkZ2VNYXhSZXRyeTogMjAsXG4gICAgICAgIG1hbmlmZXN0TG9hZGluZ1RpbWVPdXQ6IDMwMDAwLFxuICAgICAgICBtYW5pZmVzdExvYWRpbmdNYXhSZXRyeTogMTAsXG4gICAgICAgIGZyYWdMb2FkUG9saWN5OiB7XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbWF4VGltZVRvRmlyc3RCeXRlTXM6IDEwMDAwLFxuICAgICAgICAgICAgbWF4TG9hZFRpbWVNczogMTIwMDAwLFxuICAgICAgICAgICAgdGltZW91dFJldHJ5OiB7XG4gICAgICAgICAgICAgIG1heE51bVJldHJ5OiAyMCxcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JSZXRyeToge1xuICAgICAgICAgICAgICBtYXhOdW1SZXRyeTogNixcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5sb2FkU291cmNlKHN0cmVhbVVybCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmF0dGFjaE1lZGlhKHRoaXMudmlkZW9FbGVtZW50KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLk1BTklGRVNUX1BBUlNFRCwgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUF1ZGlvVHJhY2tzKCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLkVSUk9SLCAoX2V2ZW50OiBhbnksIGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5mYXRhbCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBITFMgRXJyb3I6ICR7ZGF0YS50eXBlfSAtICR7ZGF0YS5kZXRhaWxzfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIGZvciBTYWZhcmkgYW5kIG90aGVyIGJyb3dzZXJzIHdpdGggbmF0aXZlIEhMUyBzdXBwb3J0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCEuc3JjID0gc3RyZWFtVXJsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQXVkaW9UcmFja3MoKSB7XG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UgJiYgdGhpcy5obHNJbnN0YW5jZS5hdWRpb1RyYWNrcykge1xuICAgICAgY29uc3QgdHJhY2tzOiBBdWRpb1RyYWNrW10gPSB0aGlzLmhsc0luc3RhbmNlLmF1ZGlvVHJhY2tzLm1hcCgodHJhY2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgaWQ6IGluZGV4LnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHRyYWNrLm5hbWUgfHwgYFRyYWNrICR7aW5kZXggKyAxfWAsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5nXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYXVkaW9UcmFja3MnLCB0cmFja3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lOiBrZXlvZiBWaWRlb1Byb3BlcnRpZXMsIHByb3BWYWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZWRQcm9wc1twcm9wTmFtZV0pIHtcbiAgICAgIHRoaXMuZW1pdCgncHJvcENoYW5nZWQnLCBwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUElcbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0cmVtaW9WaWRlb1N5c3RlbSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGRpc3BhdGNoKGFjdGlvbjogVmlkZW9BY3Rpb24pIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3RyZW1pb1ZpZGVvU3lzdGVtIGluc3RhbmNlIGlzIGRlc3Ryb3llZCcpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29ic2VydmVQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZWRQcm9wc1thY3Rpb24ucHJvcE5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmVtaXRDdXJyZW50UHJvcChhY3Rpb24ucHJvcE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzZXRQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSAmJiBhY3Rpb24ucHJvcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnNldFByb3AoYWN0aW9uLnByb3BOYW1lLCBhY3Rpb24ucHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbWFuZCc6XG4gICAgICAgIGlmIChhY3Rpb24uY29tbWFuZE5hbWUpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGFjdGlvbi5jb21tYW5kTmFtZSwgYWN0aW9uLmNvbW1hbmRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXRDdXJyZW50UHJvcChwcm9wTmFtZToga2V5b2YgVmlkZW9Qcm9wZXJ0aWVzKSB7XG4gICAgc3dpdGNoIChwcm9wTmFtZSkge1xuICAgICAgY2FzZSAnbG9hZGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPj0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsICF0aGlzLnZpZGVvRWxlbWVudCB8fCB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSAqIDEwMDAgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5kdXJhdGlvbiA/IHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uICogMTAwMCA6IG51bGwpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmluZyc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCAhdGhpcy52aWRlb0VsZW1lbnQgfHwgdGhpcy52aWRlb0VsZW1lbnQucmVhZHlTdGF0ZSA8IDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2x1bWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkgOiAxMDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ211dGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgOiBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCA/IHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA6IDEpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldFByb3AocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpIHtcbiAgICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICAvLyBVc2UgU3RyZW1pbydzIGxvYWQgY29tbWFuZCBwYXR0ZXJuIGluc3RlYWQgb2YgZGlyZWN0IHN0cmVhbSBzZXR0aW5nXG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICBjb21tYW5kQXJnczoge1xuICAgICAgICAgICAgICBzdHJlYW06IHsgdXJsOiBwcm9wVmFsdWUgfSxcbiAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAndW5sb2FkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgaWYgKHByb3BWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0aW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwcm9wVmFsdWUgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndm9sdW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC52b2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSkpIC8gMTAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbXV0ZWQnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9ICEhcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiBwcm9wVmFsdWUgIT09IG51bGwgJiYgaXNGaW5pdGUocHJvcFZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdGVkU3VidGl0bGVzVHJhY2tJZCc6XG4gICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCBzdWJ0aXRsZSB0cmFja3MgdG8gYmUgcHJvdmlkZWRcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBoYW5kbGUgdGhlIHN1YnRpdGxlIHRyYWNrIGxvYWRpbmdcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBTdWJ0aXRsZSBzdHlsaW5nIHByb3BlcnRpZXNcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzU2l6ZSc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNTaXplID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDUwLCBwcm9wVmFsdWUgfHwgMjUpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc09mZnNldCc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNPZmZzZXQgPSBNYXRoLm1heCgtMjAsIE1hdGgubWluKDIwLCBwcm9wVmFsdWUgfHwgMCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzVGV4dENvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvciA9IHByb3BWYWx1ZSB8fCAnI0ZGRkZGRic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3InOlxuICAgICAgICB0aGlzLmV4dHJhU3VidGl0bGVzQmFja2dyb3VuZENvbG9yID0gcHJvcFZhbHVlIHx8ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvciA9IHByb3BWYWx1ZSB8fCAnIzAwMDAwMCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc09wYWNpdHkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSB8fCAxMDApKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc0RlbGF5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc0RlbGF5ID0gcHJvcFZhbHVlIHx8IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWU6IHN0cmluZywgY29tbWFuZEFyZ3M/OiBhbnkpIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmROYW1lKSB7XG4gICAgICBjYXNlICdsb2FkJzpcbiAgICAgICAgdGhpcy5leGVjdXRlTG9hZENvbW1hbmQoY29tbWFuZEFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VubG9hZCc6XG4gICAgICAgIHRoaXMuZXhlY3V0ZVVubG9hZENvbW1hbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0b3AnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlZWsnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgY29tbWFuZEFyZ3MgJiYgY29tbWFuZEFyZ3NbMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gY29tbWFuZEFyZ3NbMF0gLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUxvYWRDb21tYW5kKGNvbW1hbmRBcmdzOiBhbnkpIHtcbiAgICB0aGlzLmV4ZWN1dGVVbmxvYWRDb21tYW5kKCk7IC8vIFVubG9hZCBhbnkgZXhpc3Rpbmcgc3RyZWFtIGZpcnN0XG4gICAgXG4gICAgaWYgKGNvbW1hbmRBcmdzICYmIGNvbW1hbmRBcmdzLnN0cmVhbSAmJiB0eXBlb2YgY29tbWFuZEFyZ3Muc3RyZWFtLnVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IGNvbW1hbmRBcmdzLnN0cmVhbS51cmw7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVWaWRlb0VsZW1lbnQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdMb2FkaW5nIHN0cmVhbSB2aWEgbG9hZCBjb21tYW5kJywgeyBcbiAgICAgICAgdXJsOiB0aGlzLmN1cnJlbnRTdHJlYW0sXG4gICAgICAgIGF1dG9wbGF5OiB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB2aWRlbyBwcm9wZXJ0aWVzXG4gICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kQXJncy50aW1lICE9PSBudWxsICYmIGlzRmluaXRlKGNvbW1hbmRBcmdzLnRpbWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwYXJzZUludChjb21tYW5kQXJncy50aW1lLCAxMCkgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBITFMgb3IgZGlyZWN0IHZpZGVvXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdHJlYW0gJiYgdGhpcy5zaG91bGRVc2VITFModGhpcy5jdXJyZW50U3RyZWFtKSkge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyB1cCBITFMgc3RyZWFtaW5nJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICB0aGlzLnNldHVwSExTKHRoaXMuY3VycmVudFN0cmVhbSEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyBkaXJlY3QgdmlkZW8gc291cmNlJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ2dyZXNzaXZlIHByZWxvYWQgc3RyYXRlZ3kgZm9yIFJlYWwtRGVicmlkIHN0cmVhbXNcbiAgICAgICAgICAvLyBGb3JjZSBmdWxsIHByZWxvYWRpbmcgdG8gb3ZlcmNvbWUgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSB0aGlzLmN1cnJlbnRTdHJlYW0hO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbmZpZ3VyZSB2aWRlbyBlbGVtZW50IGZvciBvcHRpbWFsIHN0cmVhbWluZ1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNldEF0dHJpYnV0ZSgncGxheXNpbmxpbmUnLCAndHJ1ZScpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnNldEF0dHJpYnV0ZSgnd2Via2l0LXBsYXlzaW5saW5lJywgJ3RydWUnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW50ZWxsaWdlbnQgYnVmZmVyIG1vbml0b3Jpbmcgd2l0aCBidWZmZXIgaGVhbHRoIG1hbmFnZW1lbnRcbiAgICAgICAgICBsZXQgYnVmZmVySGVhbHRoVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgbGV0IGxvd0J1ZmZlckNvdW50ID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5idWZmZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckFoZWFkID0gYnVmZmVyZWQgLSBjdXJyZW50O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdCdWZmZXIgc3RhdHVzJywge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckFoZWFkOiBgJHtidWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBgJHtjdXJyZW50LnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVyZWRFbmQ6IGAke2J1ZmZlcmVkLnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoOiBidWZmZXJBaGVhZCA8IDUgPyAnTE9XJyA6IGJ1ZmZlckFoZWFkIDwgMTUgPyAnTUVESVVNJyA6ICdISUdIJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE1vbml0b3IgYnVmZmVyIGhlYWx0aCBhbmQgcGF1c2UgaWYgYnVmZmVyIGlzIGNyaXRpY2FsbHkgbG93XG4gICAgICAgICAgICAgIGlmIChidWZmZXJBaGVhZCA8IDIgJiYgIXRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIGxvd0J1ZmZlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0xvdyBidWZmZXIgZGV0ZWN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgIGxvd0J1ZmZlckV2ZW50czogbG93QnVmZmVyQ291bnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBQYXVzZSBicmllZmx5IHRvIGFsbG93IG1vcmUgYnVmZmVyaW5nIGlmIGJ1ZmZlciBpcyBjcml0aWNhbGx5IGxvd1xuICAgICAgICAgICAgICAgIGlmIChsb3dCdWZmZXJDb3VudCA+IDMpIHtcbiAgICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdQYXVzaW5nIGZvciBidWZmZXIgcmVjb3ZlcnknKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChidWZmZXJIZWFsdGhUaW1lcikgY2xlYXJUaW1lb3V0KGJ1ZmZlckhlYWx0aFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgIGJ1ZmZlckhlYWx0aFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBFUkZPUk1BTkNFLCAnUmVzdW1pbmcgYWZ0ZXIgYnVmZmVyIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChidWZmZXJBaGVhZCA+IDUpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb3VudGVyIHdoZW4gYnVmZmVyIGlzIGhlYWx0aHlcbiAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBzdGFsbCBkZXRlY3Rpb24gYW5kIHJlY292ZXJ5XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3RhbGxlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGxvZ1dhcm4oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdWaWRlbyBzdGFsbGVkLCBhdHRlbXB0aW5nIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAvLyBCcmllZiBwYXVzZSB0byBhbGxvdyBtb3JlIGJ1ZmZlcmluZ1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlIDwgMykge1xuICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdUcmlnZ2VyaW5nIGxvYWQgZm9yIHN0YWxsIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgd2FpdGluZyBldmVudCBoYW5kbGluZ1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1ZpZGVvIHdhaXRpbmcgZm9yIGRhdGEnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEVtaXQgcHJvcGVydHkgY2hhbmdlc1xuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgdGhpcy5jdXJyZW50U3RyZWFtKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZVVubG9hZENvbW1hbmQoKSB7XG4gICAgdGhpcy5jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgICBcbiAgICBpZiAodGhpcy5obHNJbnN0YW5jZSkge1xuICAgICAgdGhpcy5obHNJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgbnVsbCk7XG4gIH1cblxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGxvYWQgc3VidGl0bGVzXG4gIGxvYWRTdWJ0aXRsZVRyYWNrKHRyYWNrOiBTdWJ0aXRsZVRyYWNrIHwgbnVsbCkge1xuICAgIHJldHVybiB0aGlzLmxvYWRTdWJ0aXRsZXModHJhY2spO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHJldHVybjtcblxuICAgICh0aGlzIGFzIGFueSkuZGVzdHJveWVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmhsc0luc3RhbmNlKSB7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuaGxzSW5zdGFuY2UgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciAmJiB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc3VidGl0bGVzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZGVvRWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMudmlkZW9FbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciA9IG51bGw7XG4gICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95ZWQ7XG4gIH1cbn0iXSwibWFwcGluZ3MiOiJBQUdBLFNBQVMsYUFBYSxTQUFTLFVBQVUsVUFBVSxlQUFlO0FBaUUzRCxhQUFNLG1CQUFtQjtBQUFBLEVBQ3RCO0FBQUEsRUFDQSxlQUF3QztBQUFBLEVBQ3hDLHFCQUF5QztBQUFBLEVBQ3pDLG1CQUF1QztBQUFBLEVBQ3ZDLGNBQW1CO0FBQUEsRUFFbkIsZ0JBQTRELENBQUM7QUFBQSxFQUM3RCxpQkFBZ0QsQ0FBQztBQUFBO0FBQUEsRUFHakQsZ0JBQStCO0FBQUEsRUFDL0IsdUJBQTZDO0FBQUEsRUFDN0MsZ0JBQStCLENBQUM7QUFBQSxFQUNoQyxZQUFZO0FBQUE7QUFBQSxFQUdaLHFCQUFxQjtBQUFBLEVBQ3JCLHVCQUF1QjtBQUFBLEVBQ3ZCLDBCQUEwQjtBQUFBLEVBQzFCLGdDQUFnQztBQUFBLEVBQ2hDLDZCQUE2QjtBQUFBLEVBQzdCLHdCQUF3QjtBQUFBLEVBQ3hCLHNCQUFzQjtBQUFBLEVBRTlCLFlBQVksU0FBdUI7QUFDakMsU0FBSyxtQkFBbUIsUUFBUTtBQUNoQyxTQUFLLG9CQUFvQjtBQUFBLEVBQzNCO0FBQUEsRUFFUSxzQkFBc0I7QUFDNUIsU0FBSyxpQkFBaUIsTUFBTSxXQUFXO0FBQ3ZDLFNBQUssaUJBQWlCLE1BQU0sUUFBUTtBQUNwQyxTQUFLLGlCQUFpQixNQUFNLFNBQVM7QUFDckMsU0FBSyxpQkFBaUIsTUFBTSxrQkFBa0I7QUFBQSxFQUNoRDtBQUFBLEVBRVEscUJBQXFCO0FBQzNCLFFBQUksS0FBSyxhQUFjO0FBRXZCLFlBQVEsWUFBWSxRQUFRLDRCQUE0QjtBQUN4RCxTQUFLLGVBQWUsU0FBUyxjQUFjLE9BQU87QUFDbEQsU0FBSyxhQUFhLE1BQU0s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"
          },
          "redirectURL": "",
          "headersSize": 292,
          "bodySize": 86315,
          "_transferSize": 86607,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:06.886Z",
        "time": 7.542999999714084,
        "timings": {
          "blocked": 2.6909999919952825,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.14300000000000002,
          "wait": 1.7949999962039291,
          "receive": 2.9140000115148723,
          "_blocked_queueing": 2.4049999919952825,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "sendLogBatch",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 50,
                "columnNumber": 12
              },
              {
                "functionName": "flushToFile",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 85,
                "columnNumber": 9
              },
              {
                "functionName": "",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 34,
                "columnNumber": 11
              }
            ]
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33033",
        "request": {
          "method": "POST",
          "url": "http://localhost:5173/api/logs",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "1137"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/watch/tt26743210?stream=https%3A%2F%2Fsgp1-4.download.real-debrid.com%2Fd%2F7ZATI3Q7EVVUS75%2FHow.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv&quality=4K"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 1144,
          "bodySize": 1137,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"logs\":[{\"timestamp\":\"2025-08-01T11:32:06.927Z\",\"level\":2,\"category\":\"PLAYER\",\"message\":\"Creating new video element\"},{\"timestamp\":\"2025-08-01T11:32:06.929Z\",\"level\":2,\"category\":\"STREAM\",\"message\":\"Loading stream via load command\",\"data\":{\"url\":\"https://sgp1-4.download.real-debrid.com/d/7ZATI3Q7EVVUS75/How.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv\",\"autoplay\":true}},{\"timestamp\":\"2025-08-01T11:32:06.930Z\",\"level\":2,\"category\":\"STREAM\",\"message\":\"Setting direct video source\",\"data\":{\"url\":\"https://sgp1-4.download.real-debrid.com/d/7ZATI3Q7EVVUS75/How.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv\"}},{\"timestamp\":\"2025-08-01T11:32:06.943Z\",\"level\":3,\"category\":\"PLAYER\",\"message\":\"Video loadstart event\"},{\"timestamp\":\"2025-08-01T11:32:06.958Z\",\"level\":2,\"category\":\"PLAYER\",\"message\":\"Video loadedmetadata event\",\"data\":{\"duration\":7519.512,\"durationFormatted\":\"125:19\"}},{\"timestamp\":\"2025-08-01T11:32:07.319Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Buffer status\",\"data\":{\"bufferAhead\":\"-3.4s\",\"currentTime\":\"4.2s\",\"bufferedEnd\":\"0.8s\",\"bufferHealth\":\"LOW\"}}]}"
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Vary",
              "value": "Origin"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "66"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Fri, 01 Aug 2025 11:32:07 GMT"
            },
            {
              "name": "etag",
              "value": "W/\"42-SvYmE4CoSFK6IHst7zAIdxrG0qw\""
            },
            {
              "name": "x-powered-by",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 66,
            "mimeType": "application/json",
            "compression": 0,
            "text": "{\"status\":\"ok\",\"message\":\"Logged 6 entries to app-2025-08-01.log\"}"
          },
          "redirectURL": "",
          "headersSize": 253,
          "bodySize": 66,
          "_transferSize": 319,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:07.553Z",
        "time": 21.931000010226853,
        "timings": {
          "blocked": 5.100000000376254,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.45699999999999996,
          "wait": 12.40400000463985,
          "receive": 3.97000000521075,
          "_blocked_queueing": 4.579000000376254,
          "_workerStart": -4.023,
          "_workerReady": -3.406,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "sendLogBatch",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 50,
                "columnNumber": 12
              },
              {
                "functionName": "flushToFile",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 85,
                "columnNumber": 9
              },
              {
                "functionName": "",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 34,
                "columnNumber": 11
              }
            ]
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33076",
        "request": {
          "method": "POST",
          "url": "http://localhost:5173/api/logs",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "1571"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/watch/tt26743210?stream=https%3A%2F%2Fsgp1-4.download.real-debrid.com%2Fd%2F7ZATI3Q7EVVUS75%2FHow.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv&quality=4K"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 1144,
          "bodySize": 1571,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"logs\":[{\"timestamp\":\"2025-08-01T11:32:07.677Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Buffer status\",\"data\":{\"bufferAhead\":\"-1.4s\",\"currentTime\":\"4.2s\",\"bufferedEnd\":\"2.8s\",\"bufferHealth\":\"LOW\"}},{\"timestamp\":\"2025-08-01T11:32:08.036Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Buffer status\",\"data\":{\"bufferAhead\":\"0.4s\",\"currentTime\":\"4.2s\",\"bufferedEnd\":\"4.6s\",\"bufferHealth\":\"LOW\"}},{\"timestamp\":\"2025-08-01T11:32:08.395Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Buffer status\",\"data\":{\"bufferAhead\":\"2.7s\",\"currentTime\":\"4.2s\",\"bufferedEnd\":\"7.0s\",\"bufferHealth\":\"LOW\"}},{\"timestamp\":\"2025-08-01T11:32:08.755Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Buffer status\",\"data\":{\"bufferAhead\":\"2.7s\",\"currentTime\":\"4.2s\",\"bufferedEnd\":\"7.0s\",\"bufferHealth\":\"LOW\"}},{\"timestamp\":\"2025-08-01T11:32:09.114Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Buffer status\",\"data\":{\"bufferAhead\":\"2.7s\",\"currentTime\":\"4.2s\",\"bufferedEnd\":\"7.0s\",\"bufferHealth\":\"LOW\"}},{\"timestamp\":\"2025-08-01T11:32:09.474Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Buffer status\",\"data\":{\"bufferAhead\":\"2.7s\",\"currentTime\":\"4.2s\",\"bufferedEnd\":\"7.0s\",\"bufferHealth\":\"LOW\"}},{\"timestamp\":\"2025-08-01T11:32:09.833Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Buffer status\",\"data\":{\"bufferAhead\":\"2.7s\",\"currentTime\":\"4.2s\",\"bufferedEnd\":\"7.0s\",\"bufferHealth\":\"LOW\"}},{\"timestamp\":\"2025-08-01T11:32:10.029Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Buffer status\",\"data\":{\"bufferAhead\":\"2.7s\",\"currentTime\":\"4.2s\",\"bufferedEnd\":\"7.0s\",\"bufferHealth\":\"LOW\"}}]}"
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Vary",
              "value": "Origin"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "66"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Fri, 01 Aug 2025 11:32:12 GMT"
            },
            {
              "name": "etag",
              "value": "W/\"42-1yq4G6o3nKZKzNmHn/B2ebUkrWA\""
            },
            {
              "name": "x-powered-by",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 66,
            "mimeType": "application/json",
            "compression": 0,
            "text": "{\"status\":\"ok\",\"message\":\"Logged 8 entries to app-2025-08-01.log\"}"
          },
          "redirectURL": "",
          "headersSize": 253,
          "bodySize": 66,
          "_transferSize": 319,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:12.552Z",
        "time": 13.895000004190951,
        "timings": {
          "blocked": 5.094000002230517,
          "dns": 0.020000000000000018,
          "ssl": -1,
          "connect": 0.9130000000000001,
          "send": 0.972,
          "wait": 4.746999994766899,
          "receive": 2.1490000071935356,
          "_blocked_queueing": 4.520000002230518,
          "_workerStart": -4.052,
          "_workerReady": -3.599,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "importUpdatedModule",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 814,
                "columnNumber": 43
              },
              {
                "functionName": "fetchUpdate",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 209,
                "columnNumber": 31
              },
              {
                "functionName": "queueUpdate",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 188,
                "columnNumber": 29
              },
              {
                "functionName": "",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 838,
                "columnNumber": 54
              },
              {
                "functionName": "handleMessage",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 837,
                "columnNumber": 37
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 458,
                  "columnNumber": 41
                },
                {
                  "functionName": "dequeue",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 480,
                  "columnNumber": 7
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 472,
                  "columnNumber": 8
                },
                {
                  "functionName": "enqueue",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 466,
                  "columnNumber": 9
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 458,
                  "columnNumber": 27
                },
                {
                  "functionName": "onMessage",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 305,
                  "columnNumber": 5
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 413,
                  "columnNumber": 4
                }
              ]
            }
          }
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047934878",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/@vite/client"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047934878"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Etag",
              "value": "W/\"208b-5NhPSMSmVsrwKA1yMJUUm3OqzCg\""
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Content-Length",
              "value": "26890"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:14 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 26890,
            "mimeType": "text/javascript",
            "text": "import { createHotContext as __vite__createHotContext } from \"/@vite/client\";import.meta.hot = __vite__createHotContext(\"/src/lib/video/StremioVideoPlayer.tsx\");import __vite__cjsImport0_react_jsxDevRuntime from \"/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=905c193d\"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime[\"jsxDEV\"];\nimport * as RefreshRuntime from \"/@react-refresh\";\nconst inWebWorker = typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope;\nlet prevRefreshReg;\nlet prevRefreshSig;\nif (import.meta.hot && !inWebWorker) {\n  if (!window.$RefreshReg$) {\n    throw new Error(\n      \"@vitejs/plugin-react can't detect preamble. Something is wrong.\"\n    );\n  }\n  prevRefreshReg = window.$RefreshReg$;\n  prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = RefreshRuntime.getRefreshReg(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\");\n  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport __vite__cjsImport3_react from \"/node_modules/.vite/deps/react.js?v=905c193d\"; const useEffect = __vite__cjsImport3_react[\"useEffect\"]; const useRef = __vite__cjsImport3_react[\"useRef\"]; const useImperativeHandle = __vite__cjsImport3_react[\"useImperativeHandle\"]; const forwardRef = __vite__cjsImport3_react[\"forwardRef\"];\nimport { StremioVideoSystem } from \"/src/lib/video/StremioVideoSystem.ts?t=1754047934878\";\nconst StremioVideoPlayer = _s(forwardRef(_c = _s((props, ref) => {\n  _s();\n  const containerRef = useRef(null);\n  const videoInstanceRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    dispatch: (action) => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.dispatch(action);\n      }\n    },\n    destroy: () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    }\n  }));\n  useEffect(() => {\n    if (!containerRef.current) {\n      console.warn(\"StremioVideoPlayer: Container element not ready\");\n      return;\n    }\n    console.log(\"StremioVideoPlayer: Initializing video system\");\n    videoInstanceRef.current = new StremioVideoSystem({\n      containerElement: containerRef.current\n    });\n    if (props.onPropChanged) {\n      videoInstanceRef.current.on(\"propChanged\", props.onPropChanged);\n    }\n    if (props.onError) {\n      videoInstanceRef.current.on(\"error\", props.onError);\n    }\n    if (props.onEnded) {\n      videoInstanceRef.current.on(\"ended\", props.onEnded);\n    }\n    const propsToObserve = [\n      \"loaded\",\n      \"paused\",\n      \"time\",\n      \"duration\",\n      \"buffering\",\n      \"buffered\",\n      \"volume\",\n      \"muted\",\n      \"playbackSpeed\",\n      \"audioTracks\",\n      \"subtitlesTracks\"\n    ];\n    propsToObserve.forEach((propName) => {\n      videoInstanceRef.current.dispatch({\n        type: \"observeProp\",\n        propName\n      });\n    });\n    return () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitleTrack) {\n      videoInstanceRef.current.loadSubtitleTrack(props.subtitleTrack);\n    } else {\n      videoInstanceRef.current.loadSubtitleTrack(null);\n    }\n  }, [props.subtitleTrack]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.stream !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"stream\",\n        propValue: props.stream\n      });\n    }\n  }, [props.stream]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.paused !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"paused\",\n        propValue: props.paused\n      });\n    }\n  }, [props.paused]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.time !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"time\",\n        propValue: props.time\n      });\n    }\n  }, [props.time]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.volume !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"volume\",\n        propValue: props.volume\n      });\n    }\n  }, [props.volume]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.muted !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"muted\",\n        propValue: props.muted\n      });\n    }\n  }, [props.muted]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.playbackSpeed !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"playbackSpeed\",\n        propValue: props.playbackSpeed\n      });\n    }\n  }, [props.playbackSpeed]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesSize !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesSize\",\n        propValue: props.subtitlesSize\n      });\n    }\n  }, [props.subtitlesSize]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOffset !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOffset\",\n        propValue: props.subtitlesOffset\n      });\n    }\n  }, [props.subtitlesOffset]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesTextColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesTextColor\",\n        propValue: props.subtitlesTextColor\n      });\n    }\n  }, [props.subtitlesTextColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesBackgroundColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesBackgroundColor\",\n        propValue: props.subtitlesBackgroundColor\n      });\n    }\n  }, [props.subtitlesBackgroundColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOutlineColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOutlineColor\",\n        propValue: props.subtitlesOutlineColor\n      });\n    }\n  }, [props.subtitlesOutlineColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOpacity !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOpacity\",\n        propValue: props.subtitlesOpacity\n      });\n    }\n  }, [props.subtitlesOpacity]);\n  return /* @__PURE__ */ jsxDEV(\n    \"div\",\n    {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: \"#000\",\n        ...props.style\n      },\n      className: props.className\n    },\n    void 0,\n    false,\n    {\n      fileName: \"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\",\n      lineNumber: 320,\n      columnNumber: 5\n    },\n    this\n  );\n}, \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\")), \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\");\n_c2 = StremioVideoPlayer;\nStremioVideoPlayer.displayName = \"StremioVideoPlayer\";\nexport default StremioVideoPlayer;\nvar _c, _c2;\n$RefreshReg$(_c, \"StremioVideoPlayer$forwardRef\");\n$RefreshReg$(_c2, \"StremioVideoPlayer\");\nif (import.meta.hot && !inWebWorker) {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}\nif (import.meta.hot && !inWebWorker) {\n  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {\n    RefreshRuntime.registerExportsForReactRefresh(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports);\n    import.meta.hot.accept((nextExports) => {\n      if (!nextExports) return;\n      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports, nextExports);\n      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);\n    });\n  });\n}\n\n//# sourceMappingURL=data:application/json;base64,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O0FBQUEsRUFTNkI7QUFHakMsR0FBQyxrQ0FBQztBQUFDQyxNQTNPRzdDO0FBNk9OQSxtQkFBbUI4QyxjQUFjO0FBRWpDLGVBQWU5QztBQUFtQixJQUFBRSxJQUFBMkM7QUFBQUUsYUFBQTdDLElBQUE7QUFBQTZDLGFBQUFGLEtBQUEiLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIlN0cmVtaW9WaWRlb1N5c3RlbSIsIlN0cmVtaW9WaWRlb1BsYXllciIsIl9zIiwiX2MiLCJwcm9wcyIsInJlZiIsImNvbnRhaW5lclJlZiIsInZpZGVvSW5zdGFuY2VSZWYiLCJkaXNwYXRjaCIsImFjdGlvbiIsImN1cnJlbnQiLCJkZXN0cm95IiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJjb250YWluZXJFbGVtZW50Iiwib25Qcm9wQ2hhbmdlZCIsIm9uIiwib25FcnJvciIsIm9uRW5kZWQiLCJwcm9wc1RvT2JzZXJ2ZSIsImZvckVhY2giLCJwcm9wTmFtZSIsInR5cGUiLCJzdWJ0aXRsZVRyYWNrIiwibG9hZFN1YnRpdGxlVHJhY2siLCJzdHJlYW0iLCJ1bmRlZmluZWQiLCJwcm9wVmFsdWUiLCJwYXVzZWQiLCJ0aW1lIiwidm9sdW1lIiwibXV0ZWQiLCJwbGF5YmFja1NwZWVkIiwic3VidGl0bGVzU2l6ZSIsInN1YnRpdGxlc09mZnNldCIsInN1YnRpdGxlc1RleHRDb2xvciIsInN1YnRpdGxlc0JhY2tncm91bmRDb2xvciIsInN1YnRpdGxlc091dGxpbmVDb2xvciIsInN1YnRpdGxlc09wYWNpdHkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJjbGFzc05hbWUiLCJfYzIiLCJkaXNwbGF5TmFtZSIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJTdHJlbWlvVmlkZW9QbGF5ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWN0IFdyYXBwZXIgZm9yIFN0cmVtaW8gVmlkZW8gUGxheWVyXG4vLyBJbnRlZ3JhdGVzIFN0cmVtaW8ncyB2aWRlbyBhcmNoaXRlY3R1cmUgd2l0aCBSZWFjdFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUsIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHJlbWlvVmlkZW9TeXN0ZW0gfSBmcm9tICcuL1N0cmVtaW9WaWRlb1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9Qcm9wZXJ0aWVzIHtcbiAgc3RyZWFtPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9hZGVkPzogYm9vbGVhbjtcbiAgcGF1c2VkPzogYm9vbGVhbjtcbiAgdGltZT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIGJ1ZmZlcmluZz86IGJvb2xlYW47XG4gIGJ1ZmZlcmVkPzogVGltZVJhbmdlcyB8IG51bGw7XG4gIGF1ZGlvVHJhY2tzPzogQXVkaW9UcmFja1tdO1xuICBzZWxlY3RlZEF1ZGlvVHJhY2tJZD86IHN0cmluZyB8IG51bGw7XG4gIHN1YnRpdGxlc1RyYWNrcz86IFN1YnRpdGxlVHJhY2tbXTtcbiAgc2VsZWN0ZWRTdWJ0aXRsZXNUcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzT2Zmc2V0PzogbnVtYmVyO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNUZXh0Q29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzT3V0bGluZUNvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPcGFjaXR5PzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgLy8gQWRkaXRpb25hbCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZW1pb1ZpZGVvUGxheWVyUHJvcHMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgc3VidGl0bGVUcmFjaz86IFN1YnRpdGxlVHJhY2sgfCBudWxsO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIG9uUHJvcENoYW5nZWQ/OiAocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcbiAgb25FbmRlZD86ICgpID0+IHZvaWQ7XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVtaW9WaWRlb1BsYXllclJlZiB7XG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFN0cmVtaW9WaWRlb1BsYXllciA9IGZvcndhcmRSZWY8U3RyZW1pb1ZpZGVvUGxheWVyUmVmLCBTdHJlbWlvVmlkZW9QbGF5ZXJQcm9wcz4oKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgdmlkZW9JbnN0YW5jZVJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICBpZiAodmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kZXN0cm95KCk7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1N0cmVtaW9WaWRlb1BsYXllcjogQ29udGFpbmVyIGVsZW1lbnQgbm90IHJlYWR5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N0cmVtaW9WaWRlb1BsYXllcjogSW5pdGlhbGl6aW5nIHZpZGVvIHN5c3RlbScpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBTdHJlbWlvIHZpZGVvIHN5c3RlbSBpbnN0YW5jZVxuICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG5ldyBTdHJlbWlvVmlkZW9TeXN0ZW0oe1xuICAgICAgY29udGFpbmVyRWxlbWVudDogY29udGFpbmVyUmVmLmN1cnJlbnRcbiAgICB9KTtcblxuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICBpZiAocHJvcHMub25Qcm9wQ2hhbmdlZCkge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50Lm9uKCdwcm9wQ2hhbmdlZCcsIHByb3BzLm9uUHJvcENoYW5nZWQpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5vbkVycm9yKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQub24oJ2Vycm9yJywgcHJvcHMub25FcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm9uRW5kZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5vbignZW5kZWQnLCBwcm9wcy5vbkVuZGVkKTtcbiAgICB9XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBwcm9wZXJ0aWVzIHdlIGNhcmUgYWJvdXRcbiAgICBjb25zdCBwcm9wc1RvT2JzZXJ2ZTogKGtleW9mIFZpZGVvUHJvcGVydGllcylbXSA9IFtcbiAgICAgICdsb2FkZWQnLCAncGF1c2VkJywgJ3RpbWUnLCAnZHVyYXRpb24nLCAnYnVmZmVyaW5nJywgJ2J1ZmZlcmVkJyxcbiAgICAgICd2b2x1bWUnLCAnbXV0ZWQnLCAncGxheWJhY2tTcGVlZCcsICdhdWRpb1RyYWNrcycsICdzdWJ0aXRsZXNUcmFja3MnXG4gICAgXTtcblxuICAgIHByb3BzVG9PYnNlcnZlLmZvckVhY2gocHJvcE5hbWUgPT4ge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ29ic2VydmVQcm9wJyxcbiAgICAgICAgcHJvcE5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKTtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHN1YnRpdGxlIHRyYWNrIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnN1YnRpdGxlVHJhY2spIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5sb2FkU3VidGl0bGVUcmFjayhwcm9wcy5zdWJ0aXRsZVRyYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmxvYWRTdWJ0aXRsZVRyYWNrKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlVHJhY2tdKTtcblxuICAvLyBVcGRhdGUgdmlkZW8gcHJvcGVydGllcyB3aGVuIHByb3BzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdzdHJlYW0nLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN0cmVhbVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcHJvcHMuc3RyZWFtXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnBhdXNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAncGF1c2VkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wYXVzZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnBhdXNlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy50aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICd0aW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy50aW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy50aW1lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnZvbHVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAndm9sdW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy52b2x1bWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnZvbHVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5tdXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnbXV0ZWQnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLm11dGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5tdXRlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5wbGF5YmFja1NwZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdwbGF5YmFja1NwZWVkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wbGF5YmFja1NwZWVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5wbGF5YmFja1NwZWVkXSk7XG5cbiAgLy8gU3VidGl0bGUgc3R5bGluZyBwcm9wZXJ0aWVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5zdWJ0aXRsZXNTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1NpemUnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN1YnRpdGxlc1NpemVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlc1NpemVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc09mZnNldCcsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT2Zmc2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPZmZzZXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzVGV4dENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1RleHRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzVGV4dENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNUZXh0Q29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPdXRsaW5lQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCcsXG4gICAgICAgIC4uLnByb3BzLnN0eWxlXG4gICAgICB9fVxuICAgICAgY2xhc3NOYW1lPXtwcm9wcy5jbGFzc05hbWV9XG4gICAgLz5cbiAgKTtcbn0pO1xuXG5TdHJlbWlvVmlkZW9QbGF5ZXIuZGlzcGxheU5hbWUgPSAnU3RyZW1pb1ZpZGVvUGxheWVyJztcblxuZXhwb3J0IGRlZmF1bHQgU3RyZW1pb1ZpZGVvUGxheWVyOyJdLCJmaWxlIjoiL2hvbWUvY2F1bGxlbi9HaXRIdWIvc3RyZW1pby1uZXRmbGl4L3NyYy9saWIvdmlkZW8vU3RyZW1pb1ZpZGVvUGxheWVyLnRzeCJ9"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_serviceWorkerResponseSource": "network"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-08-01T11:32:14.879Z",
        "time": 24.86499999940861,
        "timings": {
          "blocked": 0.7569999982276931,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.002,
          "wait": 23.942000003868714,
          "receive": 0.16399999731220305,
          "_blocked_queueing": 0.7469999982276931,
          "_workerStart": 0.007,
          "_workerReady": 0.341,
          "_workerFetchStart": 0.341,
          "_workerRespondWithSettled": 23.62
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "fetchAndCache",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 153,
                "columnNumber": 25
              },
              {
                "functionName": "handleRequest",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 125,
                "columnNumber": 17
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "3",
                  "url": "http://localhost:5173/sw.js",
                  "lineNumber": 112,
                  "columnNumber": 19
                }
              ],
              "parentId": {
                "id": "22",
                "debuggerId": "7421023915332866740.7548517216261379378"
              }
            }
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33095",
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047934878",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/@vite/client"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047934878"
            }
          ],
          "cookies": [],
          "headersSize": 963,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "26890"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:14 GMT"
            },
            {
              "name": "Etag",
              "value": "W/\"208b-5NhPSMSmVsrwKA1yMJUUm3OqzCg\""
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 26890,
            "mimeType": "text/javascript",
            "compression": 0,
            "text": "import { createHotContext as __vite__createHotContext } from \"/@vite/client\";import.meta.hot = __vite__createHotContext(\"/src/lib/video/StremioVideoPlayer.tsx\");import __vite__cjsImport0_react_jsxDevRuntime from \"/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=905c193d\"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime[\"jsxDEV\"];\nimport * as RefreshRuntime from \"/@react-refresh\";\nconst inWebWorker = typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope;\nlet prevRefreshReg;\nlet prevRefreshSig;\nif (import.meta.hot && !inWebWorker) {\n  if (!window.$RefreshReg$) {\n    throw new Error(\n      \"@vitejs/plugin-react can't detect preamble. Something is wrong.\"\n    );\n  }\n  prevRefreshReg = window.$RefreshReg$;\n  prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = RefreshRuntime.getRefreshReg(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\");\n  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport __vite__cjsImport3_react from \"/node_modules/.vite/deps/react.js?v=905c193d\"; const useEffect = __vite__cjsImport3_react[\"useEffect\"]; const useRef = __vite__cjsImport3_react[\"useRef\"]; const useImperativeHandle = __vite__cjsImport3_react[\"useImperativeHandle\"]; const forwardRef = __vite__cjsImport3_react[\"forwardRef\"];\nimport { StremioVideoSystem } from \"/src/lib/video/StremioVideoSystem.ts?t=1754047934878\";\nconst StremioVideoPlayer = _s(forwardRef(_c = _s((props, ref) => {\n  _s();\n  const containerRef = useRef(null);\n  const videoInstanceRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    dispatch: (action) => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.dispatch(action);\n      }\n    },\n    destroy: () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    }\n  }));\n  useEffect(() => {\n    if (!containerRef.current) {\n      console.warn(\"StremioVideoPlayer: Container element not ready\");\n      return;\n    }\n    console.log(\"StremioVideoPlayer: Initializing video system\");\n    videoInstanceRef.current = new StremioVideoSystem({\n      containerElement: containerRef.current\n    });\n    if (props.onPropChanged) {\n      videoInstanceRef.current.on(\"propChanged\", props.onPropChanged);\n    }\n    if (props.onError) {\n      videoInstanceRef.current.on(\"error\", props.onError);\n    }\n    if (props.onEnded) {\n      videoInstanceRef.current.on(\"ended\", props.onEnded);\n    }\n    const propsToObserve = [\n      \"loaded\",\n      \"paused\",\n      \"time\",\n      \"duration\",\n      \"buffering\",\n      \"buffered\",\n      \"volume\",\n      \"muted\",\n      \"playbackSpeed\",\n      \"audioTracks\",\n      \"subtitlesTracks\"\n    ];\n    propsToObserve.forEach((propName) => {\n      videoInstanceRef.current.dispatch({\n        type: \"observeProp\",\n        propName\n      });\n    });\n    return () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitleTrack) {\n      videoInstanceRef.current.loadSubtitleTrack(props.subtitleTrack);\n    } else {\n      videoInstanceRef.current.loadSubtitleTrack(null);\n    }\n  }, [props.subtitleTrack]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.stream !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"stream\",\n        propValue: props.stream\n      });\n    }\n  }, [props.stream]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.paused !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"paused\",\n        propValue: props.paused\n      });\n    }\n  }, [props.paused]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.time !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"time\",\n        propValue: props.time\n      });\n    }\n  }, [props.time]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.volume !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"volume\",\n        propValue: props.volume\n      });\n    }\n  }, [props.volume]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.muted !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"muted\",\n        propValue: props.muted\n      });\n    }\n  }, [props.muted]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.playbackSpeed !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"playbackSpeed\",\n        propValue: props.playbackSpeed\n      });\n    }\n  }, [props.playbackSpeed]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesSize !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesSize\",\n        propValue: props.subtitlesSize\n      });\n    }\n  }, [props.subtitlesSize]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOffset !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOffset\",\n        propValue: props.subtitlesOffset\n      });\n    }\n  }, [props.subtitlesOffset]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesTextColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesTextColor\",\n        propValue: props.subtitlesTextColor\n      });\n    }\n  }, [props.subtitlesTextColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesBackgroundColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesBackgroundColor\",\n        propValue: props.subtitlesBackgroundColor\n      });\n    }\n  }, [props.subtitlesBackgroundColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOutlineColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOutlineColor\",\n        propValue: props.subtitlesOutlineColor\n      });\n    }\n  }, [props.subtitlesOutlineColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOpacity !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOpacity\",\n        propValue: props.subtitlesOpacity\n      });\n    }\n  }, [props.subtitlesOpacity]);\n  return /* @__PURE__ */ jsxDEV(\n    \"div\",\n    {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: \"#000\",\n        ...props.style\n      },\n      className: props.className\n    },\n    void 0,\n    false,\n    {\n      fileName: \"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\",\n      lineNumber: 320,\n      columnNumber: 5\n    },\n    this\n  );\n}, \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\")), \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\");\n_c2 = StremioVideoPlayer;\nStremioVideoPlayer.displayName = \"StremioVideoPlayer\";\nexport default StremioVideoPlayer;\nvar _c, _c2;\n$RefreshReg$(_c, \"StremioVideoPlayer$forwardRef\");\n$RefreshReg$(_c2, \"StremioVideoPlayer\");\nif (import.meta.hot && !inWebWorker) {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}\nif (import.meta.hot && !inWebWorker) {\n  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {\n    RefreshRuntime.registerExportsForReactRefresh(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports);\n    import.meta.hot.accept((nextExports) => {\n      if (!nextExports) return;\n      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports, nextExports);\n      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);\n    });\n  });\n}\n\n//# sourceMappingURL=data:application/json;base64,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O0FBQUEsRUFTNkI7QUFHakMsR0FBQyxrQ0FBQztBQUFDQyxNQTNPRzdDO0FBNk9OQSxtQkFBbUI4QyxjQUFjO0FBRWpDLGVBQWU5QztBQUFtQixJQUFBRSxJQUFBMkM7QUFBQUUsYUFBQTdDLElBQUE7QUFBQTZDLGFBQUFGLEtBQUEiLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIlN0cmVtaW9WaWRlb1N5c3RlbSIsIlN0cmVtaW9WaWRlb1BsYXllciIsIl9zIiwiX2MiLCJwcm9wcyIsInJlZiIsImNvbnRhaW5lclJlZiIsInZpZGVvSW5zdGFuY2VSZWYiLCJkaXNwYXRjaCIsImFjdGlvbiIsImN1cnJlbnQiLCJkZXN0cm95IiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJjb250YWluZXJFbGVtZW50Iiwib25Qcm9wQ2hhbmdlZCIsIm9uIiwib25FcnJvciIsIm9uRW5kZWQiLCJwcm9wc1RvT2JzZXJ2ZSIsImZvckVhY2giLCJwcm9wTmFtZSIsInR5cGUiLCJzdWJ0aXRsZVRyYWNrIiwibG9hZFN1YnRpdGxlVHJhY2siLCJzdHJlYW0iLCJ1bmRlZmluZWQiLCJwcm9wVmFsdWUiLCJwYXVzZWQiLCJ0aW1lIiwidm9sdW1lIiwibXV0ZWQiLCJwbGF5YmFja1NwZWVkIiwic3VidGl0bGVzU2l6ZSIsInN1YnRpdGxlc09mZnNldCIsInN1YnRpdGxlc1RleHRDb2xvciIsInN1YnRpdGxlc0JhY2tncm91bmRDb2xvciIsInN1YnRpdGxlc091dGxpbmVDb2xvciIsInN1YnRpdGxlc09wYWNpdHkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJjbGFzc05hbWUiLCJfYzIiLCJkaXNwbGF5TmFtZSIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJTdHJlbWlvVmlkZW9QbGF5ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWN0IFdyYXBwZXIgZm9yIFN0cmVtaW8gVmlkZW8gUGxheWVyXG4vLyBJbnRlZ3JhdGVzIFN0cmVtaW8ncyB2aWRlbyBhcmNoaXRlY3R1cmUgd2l0aCBSZWFjdFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUsIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHJlbWlvVmlkZW9TeXN0ZW0gfSBmcm9tICcuL1N0cmVtaW9WaWRlb1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9Qcm9wZXJ0aWVzIHtcbiAgc3RyZWFtPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9hZGVkPzogYm9vbGVhbjtcbiAgcGF1c2VkPzogYm9vbGVhbjtcbiAgdGltZT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIGJ1ZmZlcmluZz86IGJvb2xlYW47XG4gIGJ1ZmZlcmVkPzogVGltZVJhbmdlcyB8IG51bGw7XG4gIGF1ZGlvVHJhY2tzPzogQXVkaW9UcmFja1tdO1xuICBzZWxlY3RlZEF1ZGlvVHJhY2tJZD86IHN0cmluZyB8IG51bGw7XG4gIHN1YnRpdGxlc1RyYWNrcz86IFN1YnRpdGxlVHJhY2tbXTtcbiAgc2VsZWN0ZWRTdWJ0aXRsZXNUcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzT2Zmc2V0PzogbnVtYmVyO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNUZXh0Q29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzT3V0bGluZUNvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPcGFjaXR5PzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgLy8gQWRkaXRpb25hbCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZW1pb1ZpZGVvUGxheWVyUHJvcHMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgc3VidGl0bGVUcmFjaz86IFN1YnRpdGxlVHJhY2sgfCBudWxsO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIG9uUHJvcENoYW5nZWQ/OiAocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcbiAgb25FbmRlZD86ICgpID0+IHZvaWQ7XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVtaW9WaWRlb1BsYXllclJlZiB7XG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFN0cmVtaW9WaWRlb1BsYXllciA9IGZvcndhcmRSZWY8U3RyZW1pb1ZpZGVvUGxheWVyUmVmLCBTdHJlbWlvVmlkZW9QbGF5ZXJQcm9wcz4oKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgdmlkZW9JbnN0YW5jZVJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICBpZiAodmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kZXN0cm95KCk7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1N0cmVtaW9WaWRlb1BsYXllcjogQ29udGFpbmVyIGVsZW1lbnQgbm90IHJlYWR5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N0cmVtaW9WaWRlb1BsYXllcjogSW5pdGlhbGl6aW5nIHZpZGVvIHN5c3RlbScpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBTdHJlbWlvIHZpZGVvIHN5c3RlbSBpbnN0YW5jZVxuICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG5ldyBTdHJlbWlvVmlkZW9TeXN0ZW0oe1xuICAgICAgY29udGFpbmVyRWxlbWVudDogY29udGFpbmVyUmVmLmN1cnJlbnRcbiAgICB9KTtcblxuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICBpZiAocHJvcHMub25Qcm9wQ2hhbmdlZCkge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50Lm9uKCdwcm9wQ2hhbmdlZCcsIHByb3BzLm9uUHJvcENoYW5nZWQpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5vbkVycm9yKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQub24oJ2Vycm9yJywgcHJvcHMub25FcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm9uRW5kZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5vbignZW5kZWQnLCBwcm9wcy5vbkVuZGVkKTtcbiAgICB9XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBwcm9wZXJ0aWVzIHdlIGNhcmUgYWJvdXRcbiAgICBjb25zdCBwcm9wc1RvT2JzZXJ2ZTogKGtleW9mIFZpZGVvUHJvcGVydGllcylbXSA9IFtcbiAgICAgICdsb2FkZWQnLCAncGF1c2VkJywgJ3RpbWUnLCAnZHVyYXRpb24nLCAnYnVmZmVyaW5nJywgJ2J1ZmZlcmVkJyxcbiAgICAgICd2b2x1bWUnLCAnbXV0ZWQnLCAncGxheWJhY2tTcGVlZCcsICdhdWRpb1RyYWNrcycsICdzdWJ0aXRsZXNUcmFja3MnXG4gICAgXTtcblxuICAgIHByb3BzVG9PYnNlcnZlLmZvckVhY2gocHJvcE5hbWUgPT4ge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ29ic2VydmVQcm9wJyxcbiAgICAgICAgcHJvcE5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKTtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHN1YnRpdGxlIHRyYWNrIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnN1YnRpdGxlVHJhY2spIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5sb2FkU3VidGl0bGVUcmFjayhwcm9wcy5zdWJ0aXRsZVRyYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmxvYWRTdWJ0aXRsZVRyYWNrKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlVHJhY2tdKTtcblxuICAvLyBVcGRhdGUgdmlkZW8gcHJvcGVydGllcyB3aGVuIHByb3BzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdzdHJlYW0nLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN0cmVhbVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcHJvcHMuc3RyZWFtXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnBhdXNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAncGF1c2VkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wYXVzZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnBhdXNlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy50aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICd0aW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy50aW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy50aW1lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnZvbHVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAndm9sdW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy52b2x1bWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnZvbHVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5tdXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnbXV0ZWQnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLm11dGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5tdXRlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5wbGF5YmFja1NwZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdwbGF5YmFja1NwZWVkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wbGF5YmFja1NwZWVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5wbGF5YmFja1NwZWVkXSk7XG5cbiAgLy8gU3VidGl0bGUgc3R5bGluZyBwcm9wZXJ0aWVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5zdWJ0aXRsZXNTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1NpemUnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN1YnRpdGxlc1NpemVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlc1NpemVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc09mZnNldCcsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT2Zmc2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPZmZzZXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzVGV4dENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1RleHRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzVGV4dENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNUZXh0Q29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPdXRsaW5lQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCcsXG4gICAgICAgIC4uLnByb3BzLnN0eWxlXG4gICAgICB9fVxuICAgICAgY2xhc3NOYW1lPXtwcm9wcy5jbGFzc05hbWV9XG4gICAgLz5cbiAgKTtcbn0pO1xuXG5TdHJlbWlvVmlkZW9QbGF5ZXIuZGlzcGxheU5hbWUgPSAnU3RyZW1pb1ZpZGVvUGxheWVyJztcblxuZXhwb3J0IGRlZmF1bHQgU3RyZW1pb1ZpZGVvUGxheWVyOyJdLCJmaWxlIjoiL2hvbWUvY2F1bGxlbi9HaXRIdWIvc3RyZW1pby1uZXRmbGl4L3NyYy9saWIvdmlkZW8vU3RyZW1pb1ZpZGVvUGxheWVyLnRzeCJ9"
          },
          "redirectURL": "",
          "headersSize": 292,
          "bodySize": 26890,
          "_transferSize": 27182,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:14.881Z",
        "time": 11.113000000644476,
        "timings": {
          "blocked": 3.1849999939007683,
          "dns": 0.02100000000000002,
          "ssl": -1,
          "connect": 0.53,
          "send": 0.43699999999999994,
          "wait": 2.3329999968884514,
          "receive": 4.6070000098552555,
          "_blocked_queueing": 2.7759999939007685,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047934878",
          "lineNumber": 18
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoSystem.ts?t=1754047934878",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047934878"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047934878"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Etag",
              "value": "W/\"6264-oWe09ZU3DYHJcuhVpEGQxa2X164\""
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Content-Length",
              "value": "87623"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:14 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 87623,
            "mimeType": "text/javascript",
            "text": "import { LogCategory, logInfo, logError, logDebug, logWarn } from \"/src/lib/utils/logger.ts\";\nexport class StremioVideoSystem {\n  containerElement;\n  videoElement = null;\n  subtitlesContainer = null;\n  subtitlesElement = null;\n  hlsInstance = null;\n  observedProps = {};\n  eventListeners = {};\n  // State\n  currentStream = null;\n  currentSubtitleTrack = null;\n  subtitlesData = [];\n  destroyed = false;\n  // Subtitle settings\n  extraSubtitlesSize = 25;\n  extraSubtitlesOffset = 0;\n  extraSubtitlesTextColor = \"#FFFFFF\";\n  extraSubtitlesBackgroundColor = \"rgba(0, 0, 0, 0.7)\";\n  extraSubtitlesOutlineColor = \"#000000\";\n  extraSubtitlesOpacity = 100;\n  extraSubtitlesDelay = 0;\n  constructor(options) {\n    this.containerElement = options.containerElement;\n    this.initializeContainer();\n  }\n  initializeContainer() {\n    this.containerElement.style.position = \"relative\";\n    this.containerElement.style.width = \"100%\";\n    this.containerElement.style.height = \"100%\";\n    this.containerElement.style.backgroundColor = \"#000\";\n  }\n  createVideoElement() {\n    if (this.videoElement) return;\n    logInfo(LogCategory.PLAYER, \"Creating new video element\");\n    this.videoElement = document.createElement(\"video\");\n    this.videoElement.style.width = \"100%\";\n    this.videoElement.style.height = \"100%\";\n    this.videoElement.style.backgroundColor = \"transparent\";\n    this.videoElement.controls = false;\n    this.videoElement.preload = \"auto\";\n    this.videoElement.playsInline = true;\n    if (\"bufferTime\" in this.videoElement) {\n      this.videoElement.bufferTime = 10;\n    }\n    this.containerElement.appendChild(this.videoElement);\n    this.setupVideoEventListeners();\n  }\n  setupVideoEventListeners() {\n    if (!this.videoElement) return;\n    this.videoElement.addEventListener(\"loadstart\", () => {\n      logDebug(LogCategory.PLAYER, \"Video loadstart event\");\n      this.emitPropChanged(\"loaded\", false);\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"loadedmetadata\", () => {\n      if (!this.videoElement) return;\n      logInfo(LogCategory.PLAYER, \"Video loadedmetadata event\", {\n        duration: this.videoElement.duration,\n        durationFormatted: `${Math.floor(this.videoElement.duration / 60)}:${Math.floor(this.videoElement.duration % 60).toString().padStart(2, \"0\")}`\n      });\n      this.emitPropChanged(\"loaded\", true);\n      this.emitPropChanged(\"duration\", this.videoElement.duration * 1e3);\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"timeupdate\", () => {\n      if (!this.videoElement) return;\n      const time = this.videoElement.currentTime * 1e3;\n      this.emitPropChanged(\"time\", time);\n      this.renderSubtitles(time);\n    });\n    this.videoElement.addEventListener(\"play\", () => {\n      this.emitPropChanged(\"paused\", false);\n    });\n    this.videoElement.addEventListener(\"pause\", () => {\n      this.emitPropChanged(\"paused\", true);\n    });\n    this.videoElement.addEventListener(\"waiting\", () => {\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"canplay\", () => {\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"progress\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"buffered\", this.videoElement.buffered);\n    });\n    this.videoElement.addEventListener(\"volumechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"volume\", Math.floor(this.videoElement.volume * 100));\n      this.emitPropChanged(\"muted\", this.videoElement.muted);\n    });\n    this.videoElement.addEventListener(\"ratechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"playbackSpeed\", this.videoElement.playbackRate);\n    });\n    this.videoElement.addEventListener(\"ended\", () => {\n      this.emit(\"ended\");\n    });\n    this.videoElement.addEventListener(\"error\", () => {\n      if (!this.videoElement) return;\n      const error = this.videoElement.error;\n      if (error) {\n        logError(LogCategory.PLAYER, \"Video playback error\", {\n          code: error.code,\n          message: error.message,\n          streamUrl: this.currentStream\n        });\n        this.emit(\"error\", {\n          critical: true,\n          message: `Video error: ${error.message}`,\n          code: error.code\n        });\n      }\n    });\n  }\n  createSubtitlesContainer() {\n    if (this.subtitlesContainer) return;\n    this.subtitlesContainer = document.createElement(\"div\");\n    this.subtitlesContainer.style.position = \"absolute\";\n    this.subtitlesContainer.style.left = \"0\";\n    this.subtitlesContainer.style.top = \"0\";\n    this.subtitlesContainer.style.width = \"100%\";\n    this.subtitlesContainer.style.height = \"100%\";\n    this.subtitlesContainer.style.pointerEvents = \"none\";\n    this.subtitlesContainer.style.zIndex = \"1000\";\n    this.subtitlesContainer.style.display = \"flex\";\n    this.subtitlesContainer.style.flexDirection = \"column\";\n    this.subtitlesContainer.style.justifyContent = \"flex-end\";\n    this.subtitlesContainer.style.alignItems = \"center\";\n    this.subtitlesContainer.style.overflow = \"hidden\";\n    this.containerElement.appendChild(this.subtitlesContainer);\n  }\n  renderSubtitles(currentTime) {\n    if (!this.subtitlesData.length || !this.currentSubtitleTrack) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    const adjustedTime = currentTime + this.extraSubtitlesDelay;\n    const activeCues = this.subtitlesData.filter(\n      (cue) => adjustedTime >= cue.startTime && adjustedTime <= cue.endTime\n    );\n    if (activeCues.length === 0) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    this.createSubtitlesContainer();\n    if (!this.subtitlesElement) {\n      this.subtitlesElement = document.createElement(\"div\");\n      this.subtitlesElement.style.position = \"relative\";\n      this.subtitlesElement.style.maxWidth = \"90%\";\n      this.subtitlesElement.style.textAlign = \"center\";\n      this.subtitlesElement.style.fontFamily = \"Arial, sans-serif\";\n      this.subtitlesElement.style.fontWeight = \"bold\";\n      this.subtitlesElement.style.lineHeight = \"1.2\";\n      this.subtitlesElement.style.wordWrap = \"break-word\";\n      this.subtitlesElement.style.whiteSpace = \"pre-wrap\";\n      this.subtitlesContainer.appendChild(this.subtitlesElement);\n    }\n    while (this.subtitlesElement.firstChild) {\n      this.subtitlesElement.removeChild(this.subtitlesElement.firstChild);\n    }\n    activeCues.forEach((cue) => {\n      const cueElement = document.createElement(\"div\");\n      cueElement.textContent = cue.text;\n      this.styleSubtitleElement(cueElement);\n      this.subtitlesElement.appendChild(cueElement);\n    });\n  }\n  styleSubtitleElement(element) {\n    const fontSize = Math.floor(this.extraSubtitlesSize / 25 * 3.5) + \"vmin\";\n    const opacity = this.extraSubtitlesOpacity / 100;\n    element.style.fontSize = fontSize;\n    element.style.opacity = opacity.toString();\n    element.style.color = this.extraSubtitlesTextColor;\n    element.style.backgroundColor = this.extraSubtitlesBackgroundColor;\n    element.style.padding = \"0.2em 0.4em\";\n    element.style.borderRadius = \"0.2em\";\n    element.style.margin = \"0.1em\";\n    element.style.display = \"inline-block\";\n    const outlineWidth = \"0.15rem\";\n    element.style.textShadow = [\n      `-${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`\n    ].join(\", \");\n    if (this.extraSubtitlesOffset !== 0) {\n      const offsetPercent = this.extraSubtitlesOffset + \"%\";\n      element.style.transform = `translateY(${offsetPercent})`;\n    }\n  }\n  removeSubtitlesElement() {\n    if (this.subtitlesElement && this.subtitlesElement.parentNode) {\n      this.subtitlesElement.parentNode.removeChild(this.subtitlesElement);\n      this.subtitlesElement = null;\n    }\n  }\n  async loadSubtitles(track) {\n    if (!track || !track.url) {\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n      return;\n    }\n    try {\n      const proxyUrl = `/api/subtitles?url=${encodeURIComponent(track.url)}`;\n      logInfo(LogCategory.STREAM, \"Loading subtitles via proxy\", { url: proxyUrl });\n      const response = await fetch(proxyUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to load subtitles: ${response.status}`);\n      }\n      const text = await response.text();\n      this.subtitlesData = this.parseSubtitles(text);\n      this.currentSubtitleTrack = track;\n      logInfo(LogCategory.STREAM, \"Subtitles loaded successfully\", {\n        cuesTotal: this.subtitlesData.length,\n        language: track.language || track.id\n      });\n    } catch (error) {\n      logError(LogCategory.STREAM, \"Subtitle loading failed\", {\n        url: track.url,\n        language: track.language || track.id\n      }, error);\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n    }\n  }\n  parseSubtitles(text) {\n    const cues = [];\n    if (text.includes(\"WEBVTT\")) {\n      logDebug(LogCategory.STREAM, \"Parsing WebVTT subtitles\");\n      const blocks = text.split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 2) {\n          const timeLineIndex = lines.findIndex((line) => line.includes(\"-->\"));\n          if (timeLineIndex >= 0) {\n            const timeLine = lines[timeLineIndex];\n            const textLines = lines.slice(timeLineIndex + 1);\n            const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})/);\n            if (timeMatch) {\n              const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n              const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n              cues.push({\n                startTime,\n                endTime,\n                text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n                // Remove HTML tags\n              });\n            }\n          }\n        }\n      });\n    } else if (text.includes(\"-->\")) {\n      logDebug(LogCategory.STREAM, \"Parsing SRT subtitles\");\n      const blocks = text.trim().split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 3) {\n          const timeLine = lines[1];\n          const textLines = lines.slice(2);\n          const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/);\n          if (timeMatch) {\n            const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n            const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n            cues.push({\n              startTime,\n              endTime,\n              text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n              // Remove HTML tags\n            });\n          }\n        }\n      });\n    }\n    logDebug(LogCategory.STREAM, \"Subtitle parsing completed\", { cuesTotal: cues.length });\n    return cues;\n  }\n  shouldUseHLS(streamUrl) {\n    return streamUrl.includes(\".m3u8\") || typeof window !== \"undefined\" && window.Hls?.isSupported() && !this.videoElement.canPlayType(\"application/vnd.apple.mpegurl\");\n  }\n  setupHLS(streamUrl) {\n    if (typeof window !== \"undefined\" && window.Hls?.isSupported()) {\n      const Hls = window.Hls;\n      this.hlsInstance = new Hls({\n        debug: false,\n        enableWorker: true,\n        lowLatencyMode: false,\n        backBufferLength: 30,\n        maxBufferLength: 50,\n        maxMaxBufferLength: 80,\n        maxFragLookUpTolerance: 0,\n        maxBufferHole: 0,\n        appendErrorMaxRetry: 20,\n        nudgeMaxRetry: 20,\n        manifestLoadingTimeOut: 3e4,\n        manifestLoadingMaxRetry: 10,\n        fragLoadPolicy: {\n          default: {\n            maxTimeToFirstByteMs: 1e4,\n            maxLoadTimeMs: 12e4,\n            timeoutRetry: {\n              maxNumRetry: 20,\n              retryDelayMs: 0,\n              maxRetryDelayMs: 15\n            },\n            errorRetry: {\n              maxNumRetry: 6,\n              retryDelayMs: 1e3,\n              maxRetryDelayMs: 15\n            }\n          }\n        }\n      });\n      this.hlsInstance.loadSource(streamUrl);\n      this.hlsInstance.attachMedia(this.videoElement);\n      this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {\n        this.updateAudioTracks();\n      });\n      this.hlsInstance.on(Hls.Events.ERROR, (_event, data) => {\n        if (data.fatal) {\n          this.emit(\"error\", {\n            critical: true,\n            message: `HLS Error: ${data.type} - ${data.details}`\n          });\n        }\n      });\n    } else {\n      this.videoElement.src = streamUrl;\n    }\n  }\n  updateAudioTracks() {\n    if (this.hlsInstance && this.hlsInstance.audioTracks) {\n      const tracks = this.hlsInstance.audioTracks.map((track, index) => ({\n        id: index.toString(),\n        name: track.name || `Track ${index + 1}`,\n        language: track.lang\n      }));\n      this.emitPropChanged(\"audioTracks\", tracks);\n    }\n  }\n  emitPropChanged(propName, propValue) {\n    if (this.observedProps[propName]) {\n      this.emit(\"propChanged\", propName, propValue);\n    }\n  }\n  emit(event, ...args) {\n    if (this.eventListeners[event]) {\n      this.eventListeners[event].forEach((listener) => listener(...args));\n    }\n  }\n  // Public API\n  on(event, listener) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [];\n    }\n    this.eventListeners[event].push(listener);\n  }\n  dispatch(action) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    switch (action.type) {\n      case \"observeProp\":\n        if (action.propName) {\n          this.observedProps[action.propName] = true;\n          this.emitCurrentProp(action.propName);\n        }\n        break;\n      case \"setProp\":\n        if (action.propName && action.propValue !== void 0) {\n          this.setProp(action.propName, action.propValue);\n        }\n        break;\n      case \"command\":\n        if (action.commandName) {\n          this.executeCommand(action.commandName, action.commandArgs);\n        }\n        break;\n    }\n  }\n  emitCurrentProp(propName) {\n    switch (propName) {\n      case \"loaded\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.readyState >= 1);\n        break;\n      case \"paused\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.paused);\n        break;\n      case \"time\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.currentTime * 1e3 : null);\n        break;\n      case \"duration\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.duration ? this.videoElement.duration * 1e3 : null);\n        break;\n      case \"buffering\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.readyState < 3);\n        break;\n      case \"buffered\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.buffered : null);\n        break;\n      case \"volume\":\n        this.emitPropChanged(propName, this.videoElement ? Math.floor(this.videoElement.volume * 100) : 100);\n        break;\n      case \"muted\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.muted : false);\n        break;\n      case \"playbackSpeed\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.playbackRate : 1);\n        break;\n    }\n  }\n  setProp(propName, propValue) {\n    switch (propName) {\n      case \"stream\":\n        if (propValue) {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"load\",\n            commandArgs: {\n              stream: { url: propValue },\n              autoplay: true\n            }\n          });\n        } else {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"unload\"\n          });\n        }\n        break;\n      case \"paused\":\n        if (this.videoElement) {\n          if (propValue) {\n            this.videoElement.pause();\n          } else {\n            this.videoElement.play().catch(() => {\n            });\n          }\n        }\n        break;\n      case \"time\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.currentTime = propValue / 1e3;\n        }\n        break;\n      case \"volume\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.muted = false;\n          this.videoElement.volume = Math.max(0, Math.min(100, propValue)) / 100;\n        }\n        break;\n      case \"muted\":\n        if (this.videoElement) {\n          this.videoElement.muted = !!propValue;\n        }\n        break;\n      case \"playbackSpeed\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.playbackRate = propValue;\n        }\n        break;\n      case \"selectedSubtitlesTrackId\":\n        break;\n      // Subtitle styling properties\n      case \"extraSubtitlesSize\":\n        this.extraSubtitlesSize = Math.max(10, Math.min(50, propValue || 25));\n        break;\n      case \"extraSubtitlesOffset\":\n        this.extraSubtitlesOffset = Math.max(-20, Math.min(20, propValue || 0));\n        break;\n      case \"extraSubtitlesTextColor\":\n        this.extraSubtitlesTextColor = propValue || \"#FFFFFF\";\n        break;\n      case \"extraSubtitlesBackgroundColor\":\n        this.extraSubtitlesBackgroundColor = propValue || \"rgba(0, 0, 0, 0.7)\";\n        break;\n      case \"extraSubtitlesOutlineColor\":\n        this.extraSubtitlesOutlineColor = propValue || \"#000000\";\n        break;\n      case \"extraSubtitlesOpacity\":\n        this.extraSubtitlesOpacity = Math.max(0, Math.min(100, propValue || 100));\n        break;\n      case \"extraSubtitlesDelay\":\n        this.extraSubtitlesDelay = propValue || 0;\n        break;\n    }\n  }\n  executeCommand(commandName, commandArgs) {\n    switch (commandName) {\n      case \"load\":\n        this.executeLoadCommand(commandArgs);\n        break;\n      case \"unload\":\n        this.executeUnloadCommand();\n        break;\n      case \"play\":\n        if (this.videoElement) {\n          this.videoElement.play().catch(() => {\n          });\n        }\n        break;\n      case \"pause\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n        }\n        break;\n      case \"stop\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n          this.videoElement.currentTime = 0;\n        }\n        break;\n      case \"seek\":\n        if (this.videoElement && commandArgs && commandArgs[0] !== void 0) {\n          this.videoElement.currentTime = commandArgs[0] / 1e3;\n        }\n        break;\n    }\n  }\n  executeLoadCommand(commandArgs) {\n    this.executeUnloadCommand();\n    if (commandArgs && commandArgs.stream && typeof commandArgs.stream.url === \"string\") {\n      this.currentStream = commandArgs.stream.url;\n      if (!this.videoElement) {\n        this.createVideoElement();\n      }\n      logInfo(LogCategory.STREAM, \"Loading stream via load command\", {\n        url: this.currentStream,\n        autoplay: typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true\n      });\n      if (this.videoElement) {\n        this.videoElement.autoplay = typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true;\n        if (commandArgs.time !== null && isFinite(commandArgs.time)) {\n          this.videoElement.currentTime = parseInt(commandArgs.time, 10) / 1e3;\n        }\n        if (this.currentStream && this.shouldUseHLS(this.currentStream)) {\n          logInfo(LogCategory.STREAM, \"Setting up HLS streaming\", { url: this.currentStream });\n          this.setupHLS(this.currentStream);\n        } else {\n          logInfo(LogCategory.STREAM, \"Setting direct video source\", { url: this.currentStream });\n          this.videoElement.preload = \"auto\";\n          this.videoElement.src = this.currentStream;\n          this.videoElement.setAttribute(\"playsinline\", \"true\");\n          this.videoElement.setAttribute(\"webkit-playsinline\", \"true\");\n          if (\"bufferData\" in this.videoElement) {\n            this.videoElement.bufferData = true;\n          }\n          this.videoElement.crossOrigin = null;\n          this.videoElement.addEventListener(\"loadstart\", () => {\n            logInfo(LogCategory.PERFORMANCE, \"Starting aggressive buffer loading\");\n          });\n          let bufferHealthTimer = null;\n          let lowBufferCount = 0;\n          this.videoElement.addEventListener(\"progress\", () => {\n            if (this.videoElement && this.videoElement.buffered.length > 0) {\n              const buffered = this.videoElement.buffered.end(this.videoElement.buffered.length - 1);\n              const current = this.videoElement.currentTime;\n              const bufferAhead = buffered - current;\n              logDebug(LogCategory.PERFORMANCE, \"Buffer status\", {\n                bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                currentTime: `${current.toFixed(1)}s`,\n                bufferedEnd: `${buffered.toFixed(1)}s`,\n                bufferHealth: bufferAhead < 5 ? \"LOW\" : bufferAhead < 15 ? \"MEDIUM\" : \"HIGH\"\n              });\n              if (bufferAhead < 2 && !this.videoElement.paused) {\n                lowBufferCount++;\n                logWarn(LogCategory.PERFORMANCE, \"Low buffer detected\", {\n                  bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                  lowBufferEvents: lowBufferCount\n                });\n                if (lowBufferCount > 3) {\n                  logInfo(LogCategory.PERFORMANCE, \"Pausing for buffer recovery\");\n                  this.videoElement.pause();\n                  if (bufferHealthTimer) clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = setTimeout(() => {\n                    if (this.videoElement && this.videoElement.paused) {\n                      logInfo(LogCategory.PERFORMANCE, \"Resuming after buffer recovery\");\n                      this.videoElement.play().catch(() => {\n                      });\n                      lowBufferCount = 0;\n                    }\n                  }, 2e3);\n                }\n              } else if (bufferAhead > 5) {\n                lowBufferCount = 0;\n                if (bufferHealthTimer) {\n                  clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = null;\n                }\n              }\n            }\n          });\n          this.videoElement.addEventListener(\"stalled\", () => {\n            logWarn(LogCategory.PERFORMANCE, \"Video stalled, attempting recovery\");\n            setTimeout(() => {\n              if (this.videoElement && this.videoElement.readyState < 3) {\n                logInfo(LogCategory.PERFORMANCE, \"Triggering load for stall recovery\");\n                this.videoElement.load();\n              }\n            }, 1e3);\n          });\n          this.videoElement.addEventListener(\"waiting\", () => {\n            logDebug(LogCategory.PERFORMANCE, \"Video waiting for data\");\n          });\n          this.videoElement.load();\n        }\n        this.emitPropChanged(\"stream\", this.currentStream);\n        this.emitPropChanged(\"loaded\", false);\n        this.emitPropChanged(\"buffering\", true);\n      }\n    }\n  }\n  executeUnloadCommand() {\n    this.currentStream = null;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.videoElement) {\n      this.videoElement.removeAttribute(\"src\");\n      this.videoElement.load();\n    }\n    this.emitPropChanged(\"stream\", null);\n  }\n  // Public method to load subtitles\n  loadSubtitleTrack(track) {\n    return this.loadSubtitles(track);\n  }\n  destroy() {\n    if (this.destroyed) return;\n    this.destroyed = true;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.subtitlesContainer && this.subtitlesContainer.parentNode) {\n      this.subtitlesContainer.parentNode.removeChild(this.subtitlesContainer);\n    }\n    if (this.videoElement && this.videoElement.parentNode) {\n      this.videoElement.parentNode.removeChild(this.videoElement);\n    }\n    this.eventListeners = {};\n    this.videoElement = null;\n    this.subtitlesContainer = null;\n    this.subtitlesElement = null;\n  }\n  get isDestroyed() {\n    return this.destroyed;\n  }\n}\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0cmVtaW9WaWRlb1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wbGV0ZSBTdHJlbWlvIFZpZGVvIFBsYXllciBTeXN0ZW1cbi8vIFR5cGVTY3JpcHQgaW1wbGVtZW50YXRpb24gd2l0aCBhbGwgU3RyZW1pbyBmZWF0dXJlc1xuXG5pbXBvcnQgeyBMb2dDYXRlZ29yeSwgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ0RlYnVnLCBsb2dXYXJuIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBWaWRlb1Byb3BlcnRpZXMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBsb2FkZWQ/OiBib29sZWFuO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgYnVmZmVyaW5nPzogYm9vbGVhbjtcbiAgYnVmZmVyZWQ/OiBUaW1lUmFuZ2VzIHwgbnVsbDtcbiAgYXVkaW9UcmFja3M/OiBBdWRpb1RyYWNrW107XG4gIHNlbGVjdGVkQXVkaW9UcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzVHJhY2tzPzogU3VidGl0bGVUcmFja1tdO1xuICBzZWxlY3RlZFN1YnRpdGxlc1RyYWNrSWQ/OiBzdHJpbmcgfCBudWxsO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1NpemU/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIHZvbHVtZT86IG51bWJlcjtcbiAgbXV0ZWQ/OiBib29sZWFuO1xuICBwbGF5YmFja1NwZWVkPzogbnVtYmVyO1xuICAvLyBFbmhhbmNlZCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVDdWUge1xuICBzdGFydFRpbWU6IG51bWJlcjtcbiAgZW5kVGltZTogbnVtYmVyO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9BY3Rpb24ge1xuICB0eXBlOiAnb2JzZXJ2ZVByb3AnIHwgJ3NldFByb3AnIHwgJ2NvbW1hbmQnO1xuICBwcm9wTmFtZT86IGtleW9mIFZpZGVvUHJvcGVydGllcztcbiAgcHJvcFZhbHVlPzogYW55O1xuICBjb21tYW5kTmFtZT86IHN0cmluZztcbiAgY29tbWFuZEFyZ3M/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9PcHRpb25zIHtcbiAgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJlbWlvVmlkZW9TeXN0ZW0ge1xuICBwcml2YXRlIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN1YnRpdGxlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGhsc0luc3RhbmNlOiBhbnkgPSBudWxsO1xuICBcbiAgcHJpdmF0ZSBvYnNlcnZlZFByb3BzOiB7IFtLIGluIGtleW9mIFZpZGVvUHJvcGVydGllc10/OiBib29sZWFuIH0gPSB7fTtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbltdIH0gPSB7fTtcbiAgXG4gIC8vIFN0YXRlXG4gIHByaXZhdGUgY3VycmVudFN0cmVhbTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY3VycmVudFN1YnRpdGxlVHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNEYXRhOiBTdWJ0aXRsZUN1ZVtdID0gW107XG4gIHByaXZhdGUgZGVzdHJveWVkID0gZmFsc2U7XG4gIFxuICAvLyBTdWJ0aXRsZSBzZXR0aW5nc1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzU2l6ZSA9IDI1O1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc1RleHRDb2xvciA9ICcjRkZGRkZGJztcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yID0gJyMwMDAwMDAnO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3BhY2l0eSA9IDEwMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0RlbGF5ID0gMDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBWaWRlb09wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQ7XG4gICAgdGhpcy5pbml0aWFsaXplQ29udGFpbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDb250YWluZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVWaWRlb0VsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ0NyZWF0aW5nIG5ldyB2aWRlbyBlbGVtZW50Jyk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJzsgLy8gQ2hhbmdlZCBmcm9tICdtZXRhZGF0YScgdG8gJ2F1dG8nIGZvciBiZXR0ZXIgYnVmZmVyaW5nXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgIC8vIERvbid0IHNldCBjcm9zc09yaWdpbiBmb3IgUmVhbC1EZWJyaWQgc3RyZWFtcyBhcyB0aGV5IGRvbid0IHN1cHBvcnQgQ09SU1xuICAgIFxuICAgIC8vIEFkZCBidWZmZXIgY29uZmlndXJhdGlvbiBmb3IgYmV0dGVyIHN0cmVhbWluZyBwZXJmb3JtYW5jZVxuICAgIGlmICgnYnVmZmVyVGltZScgaW4gdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICh0aGlzLnZpZGVvRWxlbWVudCBhcyBhbnkpLmJ1ZmZlclRpbWUgPSAxMDsgLy8gMTAgc2Vjb25kcyBidWZmZXJcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuc2V0dXBWaWRlb0V2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVmlkZW9FdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKSA9PiB7XG4gICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QTEFZRVIsICdWaWRlbyBsb2Fkc3RhcnQgZXZlbnQnKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYnVmZmVyaW5nJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUExBWUVSLCAnVmlkZW8gbG9hZGVkbWV0YWRhdGEgZXZlbnQnLCB7IFxuICAgICAgICBkdXJhdGlvbjogdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uRm9ybWF0dGVkOiBgJHtNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uIC8gNjApfToke01hdGguZmxvb3IodGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gJSA2MCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIHRydWUpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2R1cmF0aW9uJywgdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gKiAxMDAwKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpZGVvRWxlbWVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgdGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lICogMTAwMDtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd0aW1lJywgdGltZSk7XG4gICAgICB0aGlzLnJlbmRlclN1YnRpdGxlcyh0aW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJlZCcsIHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd2b2x1bWUnLCBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ211dGVkJywgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdwbGF5YmFja1NwZWVkJywgdGhpcy52aWRlb0VsZW1lbnQucGxheWJhY2tSYXRlKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdlbmRlZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMudmlkZW9FbGVtZW50LmVycm9yO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGxvZ0Vycm9yKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ1ZpZGVvIHBsYXliYWNrIGVycm9yJywge1xuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdHJlYW1Vcmw6IHRoaXMuY3VycmVudFN0cmVhbVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgVmlkZW8gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN1YnRpdGxlc0NvbnRhaW5lcigpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdWJ0aXRsZXMoY3VycmVudFRpbWU6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5zdWJ0aXRsZXNEYXRhLmxlbmd0aCB8fCAhdGhpcy5jdXJyZW50U3VidGl0bGVUcmFjaykge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWRqdXN0ZWRUaW1lID0gY3VycmVudFRpbWUgKyB0aGlzLmV4dHJhU3VidGl0bGVzRGVsYXk7XG4gICAgY29uc3QgYWN0aXZlQ3VlcyA9IHRoaXMuc3VidGl0bGVzRGF0YS5maWx0ZXIoY3VlID0+IFxuICAgICAgYWRqdXN0ZWRUaW1lID49IGN1ZS5zdGFydFRpbWUgJiYgYWRqdXN0ZWRUaW1lIDw9IGN1ZS5lbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChhY3RpdmVDdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVTdWJ0aXRsZXNDb250YWluZXIoKTtcbiAgICBcbiAgICBpZiAoIXRoaXMuc3VidGl0bGVzRWxlbWVudCkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJzkwJSc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdBcmlhbCwgc2Fucy1zZXJpZic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciEuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyBjb250ZW50XG4gICAgd2hpbGUgKHRoaXMuc3VidGl0bGVzRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIFJlbmRlciBhY3RpdmUgY3Vlc1xuICAgIGFjdGl2ZUN1ZXMuZm9yRWFjaChjdWUgPT4ge1xuICAgICAgY29uc3QgY3VlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY3VlRWxlbWVudC50ZXh0Q29udGVudCA9IGN1ZS50ZXh0O1xuICAgICAgdGhpcy5zdHlsZVN1YnRpdGxlRWxlbWVudChjdWVFbGVtZW50KTtcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCEuYXBwZW5kQ2hpbGQoY3VlRWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0eWxlU3VidGl0bGVFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZm9udFNpemUgPSBNYXRoLmZsb29yKCh0aGlzLmV4dHJhU3VidGl0bGVzU2l6ZSAvIDI1KSAqIDMuNSkgKyAndm1pbic7XG4gICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNPcGFjaXR5IC8gMTAwO1xuXG4gICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcbiAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvcjtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3I7XG4gICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuMmVtIDAuNGVtJztcbiAgICBlbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwLjJlbSc7XG4gICAgZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnMC4xZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXG4gICAgLy8gVGV4dCBzaGFkb3cgZm9yIG91dGxpbmUgZWZmZWN0XG4gICAgY29uc3Qgb3V0bGluZVdpZHRoID0gJzAuMTVyZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IFtcbiAgICAgIGAtJHtvdXRsaW5lV2lkdGh9IC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwIC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAke291dGxpbmVXaWR0aH0gLSR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYC0ke291dGxpbmVXaWR0aH0gMCAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAwIDAgJHt0aGlzLmV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yfWAsXG4gICAgICBgLSR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwICR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YFxuICAgIF0uam9pbignLCAnKTtcblxuICAgIC8vIFBvc2l0aW9uIG9mZnNldFxuICAgIGlmICh0aGlzLmV4dHJhU3VidGl0bGVzT2Zmc2V0ICE9PSAwKSB7XG4gICAgICBjb25zdCBvZmZzZXRQZXJjZW50ID0gdGhpcy5leHRyYVN1YnRpdGxlc09mZnNldCArICclJztcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtvZmZzZXRQZXJjZW50fSlgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNFbGVtZW50ICYmIHRoaXMuc3VidGl0bGVzRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0VsZW1lbnQpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRTdWJ0aXRsZXModHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsKSB7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2sudXJsKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0RhdGEgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBvdXIgc3VidGl0bGUgcHJveHkgdG8gYXZvaWQgQ09SUyBpc3N1ZXNcbiAgICAgIGNvbnN0IHByb3h5VXJsID0gYC9hcGkvc3VidGl0bGVzP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0cmFjay51cmwpfWA7XG4gICAgICBcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnTG9hZGluZyBzdWJ0aXRsZXMgdmlhIHByb3h5JywgeyB1cmw6IHByb3h5VXJsIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3h5VXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzdWJ0aXRsZXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gdGhpcy5wYXJzZVN1YnRpdGxlcyh0ZXh0KTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSB0cmFjaztcbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZXMgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgY3Vlc1RvdGFsOiB0aGlzLnN1YnRpdGxlc0RhdGEubGVuZ3RoLFxuICAgICAgICBsYW5ndWFnZTogdHJhY2subGFuZ3VhZ2UgfHwgdHJhY2suaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBsb2FkaW5nIGZhaWxlZCcsIHtcbiAgICAgICAgdXJsOiB0cmFjay51cmwsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5ndWFnZSB8fCB0cmFjay5pZFxuICAgICAgfSwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gW107XG4gICAgICB0aGlzLmN1cnJlbnRTdWJ0aXRsZVRyYWNrID0gbnVsbDtcbiAgICAgIHRoaXMucmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdWJ0aXRsZXModGV4dDogc3RyaW5nKTogU3VidGl0bGVDdWVbXSB7XG4gICAgY29uc3QgY3VlczogU3VidGl0bGVDdWVbXSA9IFtdO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgV2ViVlRUIGZvcm1hdFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdXRUJWVFQnKSkge1xuICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnUGFyc2luZyBXZWJWVFQgc3VidGl0bGVzJyk7XG4gICAgICBcbiAgICAgIC8vIFNwbGl0IGJ5IGRvdWJsZSBuZXdsaW5lcyB0byBnZXQgY3VlIGJsb2Nrc1xuICAgICAgY29uc3QgYmxvY2tzID0gdGV4dC5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgdGltZWxpbmUgKGNvbnRhaW5zIC0tPilcbiAgICAgICAgICBjb25zdCB0aW1lTGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS5pbmNsdWRlcygnLS0+JykpO1xuICAgICAgICAgIGlmICh0aW1lTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVMaW5lID0gbGluZXNbdGltZUxpbmVJbmRleF07XG4gICAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSh0aW1lTGluZUluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlYlZUVCBmb3JtYXQ6IDAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDAuMDAwXG4gICAgICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0aW1lTGluZS5tYXRjaCgvKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KS8pO1xuICAgICAgICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFsyXSkgKiA2MDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFszXSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbNV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzddKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzhdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGN1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dExpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IFxuICAgIC8vIFNSVCBmb3JtYXQgcGFyc2VyXG4gICAgZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnLS0+JykpIHtcbiAgICAgIGxvZ0RlYnVnKExvZ0NhdGVnb3J5LlNUUkVBTSwgJ1BhcnNpbmcgU1JUIHN1YnRpdGxlcycpO1xuICAgICAgXG4gICAgICBjb25zdCBibG9ja3MgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgY29uc3QgdGltZUxpbmUgPSBsaW5lc1sxXTtcbiAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSgyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTUlQgZm9ybWF0OiAwMDowMDowMCwwMDAgLS0+IDAwOjAwOjAwLDAwMFxuICAgICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRpbWVMaW5lLm1hdGNoKC8oXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSwoXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSksKFxcZHszfSkvKTtcbiAgICAgICAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbMl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzNdKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IHBhcnNlSW50KHRpbWVNYXRjaFs1XSkgKiAzNjAwMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFs3XSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbOF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdWVzLnB1c2goe1xuICAgICAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgIHRleHQ6IHRleHRMaW5lcy5qb2luKCdcXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBwYXJzaW5nIGNvbXBsZXRlZCcsIHsgY3Vlc1RvdGFsOiBjdWVzLmxlbmd0aCB9KTtcbiAgICByZXR1cm4gY3VlcztcbiAgfVxuXG5cbiAgcHJpdmF0ZSBzaG91bGRVc2VITFMoc3RyZWFtVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3RyZWFtVXJsLmluY2x1ZGVzKCcubTN1OCcpIHx8IFxuICAgICAgICAgICAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgXG4gICAgICAgICAgICAod2luZG93IGFzIGFueSkuSGxzPy5pc1N1cHBvcnRlZCgpICYmIFxuICAgICAgICAgICAgIXRoaXMudmlkZW9FbGVtZW50IS5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmwnKSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwSExTKHN0cmVhbVVybDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5IbHM/LmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIGNvbnN0IEhscyA9ICh3aW5kb3cgYXMgYW55KS5IbHM7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbmV3IEhscyh7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlV29ya2VyOiB0cnVlLFxuICAgICAgICBsb3dMYXRlbmN5TW9kZTogZmFsc2UsXG4gICAgICAgIGJhY2tCdWZmZXJMZW5ndGg6IDMwLFxuICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDUwLFxuICAgICAgICBtYXhNYXhCdWZmZXJMZW5ndGg6IDgwLFxuICAgICAgICBtYXhGcmFnTG9va1VwVG9sZXJhbmNlOiAwLFxuICAgICAgICBtYXhCdWZmZXJIb2xlOiAwLFxuICAgICAgICBhcHBlbmRFcnJvck1heFJldHJ5OiAyMCxcbiAgICAgICAgbnVkZ2VNYXhSZXRyeTogMjAsXG4gICAgICAgIG1hbmlmZXN0TG9hZGluZ1RpbWVPdXQ6IDMwMDAwLFxuICAgICAgICBtYW5pZmVzdExvYWRpbmdNYXhSZXRyeTogMTAsXG4gICAgICAgIGZyYWdMb2FkUG9saWN5OiB7XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbWF4VGltZVRvRmlyc3RCeXRlTXM6IDEwMDAwLFxuICAgICAgICAgICAgbWF4TG9hZFRpbWVNczogMTIwMDAwLFxuICAgICAgICAgICAgdGltZW91dFJldHJ5OiB7XG4gICAgICAgICAgICAgIG1heE51bVJldHJ5OiAyMCxcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JSZXRyeToge1xuICAgICAgICAgICAgICBtYXhOdW1SZXRyeTogNixcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5sb2FkU291cmNlKHN0cmVhbVVybCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmF0dGFjaE1lZGlhKHRoaXMudmlkZW9FbGVtZW50KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLk1BTklGRVNUX1BBUlNFRCwgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUF1ZGlvVHJhY2tzKCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLkVSUk9SLCAoX2V2ZW50OiBhbnksIGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5mYXRhbCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBITFMgRXJyb3I6ICR7ZGF0YS50eXBlfSAtICR7ZGF0YS5kZXRhaWxzfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIGZvciBTYWZhcmkgYW5kIG90aGVyIGJyb3dzZXJzIHdpdGggbmF0aXZlIEhMUyBzdXBwb3J0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCEuc3JjID0gc3RyZWFtVXJsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQXVkaW9UcmFja3MoKSB7XG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UgJiYgdGhpcy5obHNJbnN0YW5jZS5hdWRpb1RyYWNrcykge1xuICAgICAgY29uc3QgdHJhY2tzOiBBdWRpb1RyYWNrW10gPSB0aGlzLmhsc0luc3RhbmNlLmF1ZGlvVHJhY2tzLm1hcCgodHJhY2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgaWQ6IGluZGV4LnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHRyYWNrLm5hbWUgfHwgYFRyYWNrICR7aW5kZXggKyAxfWAsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5nXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYXVkaW9UcmFja3MnLCB0cmFja3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lOiBrZXlvZiBWaWRlb1Byb3BlcnRpZXMsIHByb3BWYWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZWRQcm9wc1twcm9wTmFtZV0pIHtcbiAgICAgIHRoaXMuZW1pdCgncHJvcENoYW5nZWQnLCBwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUElcbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0cmVtaW9WaWRlb1N5c3RlbSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGRpc3BhdGNoKGFjdGlvbjogVmlkZW9BY3Rpb24pIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3RyZW1pb1ZpZGVvU3lzdGVtIGluc3RhbmNlIGlzIGRlc3Ryb3llZCcpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29ic2VydmVQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZWRQcm9wc1thY3Rpb24ucHJvcE5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmVtaXRDdXJyZW50UHJvcChhY3Rpb24ucHJvcE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzZXRQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSAmJiBhY3Rpb24ucHJvcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnNldFByb3AoYWN0aW9uLnByb3BOYW1lLCBhY3Rpb24ucHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbWFuZCc6XG4gICAgICAgIGlmIChhY3Rpb24uY29tbWFuZE5hbWUpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGFjdGlvbi5jb21tYW5kTmFtZSwgYWN0aW9uLmNvbW1hbmRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXRDdXJyZW50UHJvcChwcm9wTmFtZToga2V5b2YgVmlkZW9Qcm9wZXJ0aWVzKSB7XG4gICAgc3dpdGNoIChwcm9wTmFtZSkge1xuICAgICAgY2FzZSAnbG9hZGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPj0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsICF0aGlzLnZpZGVvRWxlbWVudCB8fCB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSAqIDEwMDAgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5kdXJhdGlvbiA/IHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uICogMTAwMCA6IG51bGwpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmluZyc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCAhdGhpcy52aWRlb0VsZW1lbnQgfHwgdGhpcy52aWRlb0VsZW1lbnQucmVhZHlTdGF0ZSA8IDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2x1bWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkgOiAxMDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ211dGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgOiBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCA/IHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA6IDEpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldFByb3AocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpIHtcbiAgICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICAvLyBVc2UgU3RyZW1pbydzIGxvYWQgY29tbWFuZCBwYXR0ZXJuIGluc3RlYWQgb2YgZGlyZWN0IHN0cmVhbSBzZXR0aW5nXG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICBjb21tYW5kQXJnczoge1xuICAgICAgICAgICAgICBzdHJlYW06IHsgdXJsOiBwcm9wVmFsdWUgfSxcbiAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAndW5sb2FkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgaWYgKHByb3BWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0aW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwcm9wVmFsdWUgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndm9sdW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC52b2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSkpIC8gMTAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbXV0ZWQnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9ICEhcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiBwcm9wVmFsdWUgIT09IG51bGwgJiYgaXNGaW5pdGUocHJvcFZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdGVkU3VidGl0bGVzVHJhY2tJZCc6XG4gICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCBzdWJ0aXRsZSB0cmFja3MgdG8gYmUgcHJvdmlkZWRcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBoYW5kbGUgdGhlIHN1YnRpdGxlIHRyYWNrIGxvYWRpbmdcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBTdWJ0aXRsZSBzdHlsaW5nIHByb3BlcnRpZXNcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzU2l6ZSc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNTaXplID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDUwLCBwcm9wVmFsdWUgfHwgMjUpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc09mZnNldCc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNPZmZzZXQgPSBNYXRoLm1heCgtMjAsIE1hdGgubWluKDIwLCBwcm9wVmFsdWUgfHwgMCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzVGV4dENvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvciA9IHByb3BWYWx1ZSB8fCAnI0ZGRkZGRic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3InOlxuICAgICAgICB0aGlzLmV4dHJhU3VidGl0bGVzQmFja2dyb3VuZENvbG9yID0gcHJvcFZhbHVlIHx8ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvciA9IHByb3BWYWx1ZSB8fCAnIzAwMDAwMCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc09wYWNpdHkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSB8fCAxMDApKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc0RlbGF5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc0RlbGF5ID0gcHJvcFZhbHVlIHx8IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWU6IHN0cmluZywgY29tbWFuZEFyZ3M/OiBhbnkpIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmROYW1lKSB7XG4gICAgICBjYXNlICdsb2FkJzpcbiAgICAgICAgdGhpcy5leGVjdXRlTG9hZENvbW1hbmQoY29tbWFuZEFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VubG9hZCc6XG4gICAgICAgIHRoaXMuZXhlY3V0ZVVubG9hZENvbW1hbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0b3AnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlZWsnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgY29tbWFuZEFyZ3MgJiYgY29tbWFuZEFyZ3NbMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gY29tbWFuZEFyZ3NbMF0gLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUxvYWRDb21tYW5kKGNvbW1hbmRBcmdzOiBhbnkpIHtcbiAgICB0aGlzLmV4ZWN1dGVVbmxvYWRDb21tYW5kKCk7IC8vIFVubG9hZCBhbnkgZXhpc3Rpbmcgc3RyZWFtIGZpcnN0XG4gICAgXG4gICAgaWYgKGNvbW1hbmRBcmdzICYmIGNvbW1hbmRBcmdzLnN0cmVhbSAmJiB0eXBlb2YgY29tbWFuZEFyZ3Muc3RyZWFtLnVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IGNvbW1hbmRBcmdzLnN0cmVhbS51cmw7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVWaWRlb0VsZW1lbnQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdMb2FkaW5nIHN0cmVhbSB2aWEgbG9hZCBjb21tYW5kJywgeyBcbiAgICAgICAgdXJsOiB0aGlzLmN1cnJlbnRTdHJlYW0sXG4gICAgICAgIGF1dG9wbGF5OiB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB2aWRlbyBwcm9wZXJ0aWVzXG4gICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kQXJncy50aW1lICE9PSBudWxsICYmIGlzRmluaXRlKGNvbW1hbmRBcmdzLnRpbWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwYXJzZUludChjb21tYW5kQXJncy50aW1lLCAxMCkgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBITFMgb3IgZGlyZWN0IHZpZGVvXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdHJlYW0gJiYgdGhpcy5zaG91bGRVc2VITFModGhpcy5jdXJyZW50U3RyZWFtKSkge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyB1cCBITFMgc3RyZWFtaW5nJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICB0aGlzLnNldHVwSExTKHRoaXMuY3VycmVudFN0cmVhbSEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyBkaXJlY3QgdmlkZW8gc291cmNlJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ2dyZXNzaXZlIHByZWxvYWQgc3RyYXRlZ3kgZm9yIFJlYWwtRGVicmlkIHN0cmVhbXNcbiAgICAgICAgICAvLyBGb3JjZSBmdWxsIHByZWxvYWRpbmcgdG8gb3ZlcmNvbWUgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSB0aGlzLmN1cnJlbnRTdHJlYW0hO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbmZpZ3VyZSB2aWRlbyBlbGVtZW50IGZvciBvcHRpbWFsIHN0cmVhbWluZyBhbmQgYWdncmVzc2l2ZSBidWZmZXJpbmdcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJ3RydWUnKTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICd0cnVlJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yY2UgYWdncmVzc2l2ZSBidWZmZXJpbmcgZm9yIGxhcmdlIGZpbGVzXG4gICAgICAgICAgaWYgKCdidWZmZXJEYXRhJyBpbiB0aGlzLnZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgKHRoaXMudmlkZW9FbGVtZW50IGFzIGFueSkuYnVmZmVyRGF0YSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCBuZXR3b3JrIHN0YXRlIG9wdGltaXphdGlvblxuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmNyb3NzT3JpZ2luID0gbnVsbDsgLy8gUmVtb3ZlIENPUlMgcmVzdHJpY3Rpb25zXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGxvYWQgc3RyYXRlZ3kgb3B0aW1pemF0aW9uXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1N0YXJ0aW5nIGFnZ3Jlc3NpdmUgYnVmZmVyIGxvYWRpbmcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW50ZWxsaWdlbnQgYnVmZmVyIG1vbml0b3Jpbmcgd2l0aCBidWZmZXIgaGVhbHRoIG1hbmFnZW1lbnRcbiAgICAgICAgICBsZXQgYnVmZmVySGVhbHRoVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgbGV0IGxvd0J1ZmZlckNvdW50ID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5idWZmZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckFoZWFkID0gYnVmZmVyZWQgLSBjdXJyZW50O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdCdWZmZXIgc3RhdHVzJywge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckFoZWFkOiBgJHtidWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBgJHtjdXJyZW50LnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVyZWRFbmQ6IGAke2J1ZmZlcmVkLnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoOiBidWZmZXJBaGVhZCA8IDUgPyAnTE9XJyA6IGJ1ZmZlckFoZWFkIDwgMTUgPyAnTUVESVVNJyA6ICdISUdIJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE1vbml0b3IgYnVmZmVyIGhlYWx0aCBhbmQgcGF1c2UgaWYgYnVmZmVyIGlzIGNyaXRpY2FsbHkgbG93XG4gICAgICAgICAgICAgIGlmIChidWZmZXJBaGVhZCA8IDIgJiYgIXRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIGxvd0J1ZmZlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0xvdyBidWZmZXIgZGV0ZWN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgIGxvd0J1ZmZlckV2ZW50czogbG93QnVmZmVyQ291bnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBQYXVzZSBicmllZmx5IHRvIGFsbG93IG1vcmUgYnVmZmVyaW5nIGlmIGJ1ZmZlciBpcyBjcml0aWNhbGx5IGxvd1xuICAgICAgICAgICAgICAgIGlmIChsb3dCdWZmZXJDb3VudCA+IDMpIHtcbiAgICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdQYXVzaW5nIGZvciBidWZmZXIgcmVjb3ZlcnknKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChidWZmZXJIZWFsdGhUaW1lcikgY2xlYXJUaW1lb3V0KGJ1ZmZlckhlYWx0aFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgIGJ1ZmZlckhlYWx0aFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBFUkZPUk1BTkNFLCAnUmVzdW1pbmcgYWZ0ZXIgYnVmZmVyIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChidWZmZXJBaGVhZCA+IDUpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb3VudGVyIHdoZW4gYnVmZmVyIGlzIGhlYWx0aHlcbiAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBzdGFsbCBkZXRlY3Rpb24gYW5kIHJlY292ZXJ5XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3RhbGxlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGxvZ1dhcm4oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdWaWRlbyBzdGFsbGVkLCBhdHRlbXB0aW5nIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAvLyBCcmllZiBwYXVzZSB0byBhbGxvdyBtb3JlIGJ1ZmZlcmluZ1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlIDwgMykge1xuICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdUcmlnZ2VyaW5nIGxvYWQgZm9yIHN0YWxsIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgd2FpdGluZyBldmVudCBoYW5kbGluZ1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1ZpZGVvIHdhaXRpbmcgZm9yIGRhdGEnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEVtaXQgcHJvcGVydHkgY2hhbmdlc1xuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgdGhpcy5jdXJyZW50U3RyZWFtKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZVVubG9hZENvbW1hbmQoKSB7XG4gICAgdGhpcy5jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgICBcbiAgICBpZiAodGhpcy5obHNJbnN0YW5jZSkge1xuICAgICAgdGhpcy5obHNJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgbnVsbCk7XG4gIH1cblxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGxvYWQgc3VidGl0bGVzXG4gIGxvYWRTdWJ0aXRsZVRyYWNrKHRyYWNrOiBTdWJ0aXRsZVRyYWNrIHwgbnVsbCkge1xuICAgIHJldHVybiB0aGlzLmxvYWRTdWJ0aXRsZXModHJhY2spO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHJldHVybjtcblxuICAgICh0aGlzIGFzIGFueSkuZGVzdHJveWVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmhsc0luc3RhbmNlKSB7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuaGxzSW5zdGFuY2UgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciAmJiB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc3VidGl0bGVzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZGVvRWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMudmlkZW9FbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciA9IG51bGw7XG4gICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95ZWQ7XG4gIH1cbn0iXSwibWFwcGluZ3MiOiJBQUdBLFNBQVMsYUFBYSxTQUFTLFVBQVUsVUFBVSxlQUFlO0FBaUUzRCxhQUFNLG1CQUFtQjtBQUFBLEVBQ3RCO0FBQUEsRUFDQSxlQUF3QztBQUFBLEVBQ3hDLHFCQUF5QztBQUFBLEVBQ3pDLG1CQUF1QztBQUFBLEVBQ3ZDLGNBQW1CO0FBQUEsRUFFbkIsZ0JB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"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_serviceWorkerResponseSource": "network"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-08-01T11:32:14.906Z",
        "time": 24.948999998741783,
        "timings": {
          "blocked": 0.4849999934574589,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.002,
          "wait": 23.758999992848373,
          "receive": 0.7030000124359503,
          "_blocked_queueing": 0.4749999934574589,
          "_workerStart": 0.007,
          "_workerReady": 0.304,
          "_workerFetchStart": 0.304,
          "_workerRespondWithSettled": 23.524
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "fetchAndCache",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 153,
                "columnNumber": 25
              },
              {
                "functionName": "handleRequest",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 125,
                "columnNumber": 17
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "3",
                  "url": "http://localhost:5173/sw.js",
                  "lineNumber": 112,
                  "columnNumber": 19
                }
              ]
            }
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33095",
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoSystem.ts?t=1754047934878",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047934878"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047934878"
            }
          ],
          "cookies": [],
          "headersSize": 1002,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "87623"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:14 GMT"
            },
            {
              "name": "Etag",
              "value": "W/\"6264-oWe09ZU3DYHJcuhVpEGQxa2X164\""
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 87623,
            "mimeType": "text/javascript",
            "compression": 0,
            "text": "import { LogCategory, logInfo, logError, logDebug, logWarn } from \"/src/lib/utils/logger.ts\";\nexport class StremioVideoSystem {\n  containerElement;\n  videoElement = null;\n  subtitlesContainer = null;\n  subtitlesElement = null;\n  hlsInstance = null;\n  observedProps = {};\n  eventListeners = {};\n  // State\n  currentStream = null;\n  currentSubtitleTrack = null;\n  subtitlesData = [];\n  destroyed = false;\n  // Subtitle settings\n  extraSubtitlesSize = 25;\n  extraSubtitlesOffset = 0;\n  extraSubtitlesTextColor = \"#FFFFFF\";\n  extraSubtitlesBackgroundColor = \"rgba(0, 0, 0, 0.7)\";\n  extraSubtitlesOutlineColor = \"#000000\";\n  extraSubtitlesOpacity = 100;\n  extraSubtitlesDelay = 0;\n  constructor(options) {\n    this.containerElement = options.containerElement;\n    this.initializeContainer();\n  }\n  initializeContainer() {\n    this.containerElement.style.position = \"relative\";\n    this.containerElement.style.width = \"100%\";\n    this.containerElement.style.height = \"100%\";\n    this.containerElement.style.backgroundColor = \"#000\";\n  }\n  createVideoElement() {\n    if (this.videoElement) return;\n    logInfo(LogCategory.PLAYER, \"Creating new video element\");\n    this.videoElement = document.createElement(\"video\");\n    this.videoElement.style.width = \"100%\";\n    this.videoElement.style.height = \"100%\";\n    this.videoElement.style.backgroundColor = \"transparent\";\n    this.videoElement.controls = false;\n    this.videoElement.preload = \"auto\";\n    this.videoElement.playsInline = true;\n    if (\"bufferTime\" in this.videoElement) {\n      this.videoElement.bufferTime = 10;\n    }\n    this.containerElement.appendChild(this.videoElement);\n    this.setupVideoEventListeners();\n  }\n  setupVideoEventListeners() {\n    if (!this.videoElement) return;\n    this.videoElement.addEventListener(\"loadstart\", () => {\n      logDebug(LogCategory.PLAYER, \"Video loadstart event\");\n      this.emitPropChanged(\"loaded\", false);\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"loadedmetadata\", () => {\n      if (!this.videoElement) return;\n      logInfo(LogCategory.PLAYER, \"Video loadedmetadata event\", {\n        duration: this.videoElement.duration,\n        durationFormatted: `${Math.floor(this.videoElement.duration / 60)}:${Math.floor(this.videoElement.duration % 60).toString().padStart(2, \"0\")}`\n      });\n      this.emitPropChanged(\"loaded\", true);\n      this.emitPropChanged(\"duration\", this.videoElement.duration * 1e3);\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"timeupdate\", () => {\n      if (!this.videoElement) return;\n      const time = this.videoElement.currentTime * 1e3;\n      this.emitPropChanged(\"time\", time);\n      this.renderSubtitles(time);\n    });\n    this.videoElement.addEventListener(\"play\", () => {\n      this.emitPropChanged(\"paused\", false);\n    });\n    this.videoElement.addEventListener(\"pause\", () => {\n      this.emitPropChanged(\"paused\", true);\n    });\n    this.videoElement.addEventListener(\"waiting\", () => {\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"canplay\", () => {\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"progress\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"buffered\", this.videoElement.buffered);\n    });\n    this.videoElement.addEventListener(\"volumechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"volume\", Math.floor(this.videoElement.volume * 100));\n      this.emitPropChanged(\"muted\", this.videoElement.muted);\n    });\n    this.videoElement.addEventListener(\"ratechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"playbackSpeed\", this.videoElement.playbackRate);\n    });\n    this.videoElement.addEventListener(\"ended\", () => {\n      this.emit(\"ended\");\n    });\n    this.videoElement.addEventListener(\"error\", () => {\n      if (!this.videoElement) return;\n      const error = this.videoElement.error;\n      if (error) {\n        logError(LogCategory.PLAYER, \"Video playback error\", {\n          code: error.code,\n          message: error.message,\n          streamUrl: this.currentStream\n        });\n        this.emit(\"error\", {\n          critical: true,\n          message: `Video error: ${error.message}`,\n          code: error.code\n        });\n      }\n    });\n  }\n  createSubtitlesContainer() {\n    if (this.subtitlesContainer) return;\n    this.subtitlesContainer = document.createElement(\"div\");\n    this.subtitlesContainer.style.position = \"absolute\";\n    this.subtitlesContainer.style.left = \"0\";\n    this.subtitlesContainer.style.top = \"0\";\n    this.subtitlesContainer.style.width = \"100%\";\n    this.subtitlesContainer.style.height = \"100%\";\n    this.subtitlesContainer.style.pointerEvents = \"none\";\n    this.subtitlesContainer.style.zIndex = \"1000\";\n    this.subtitlesContainer.style.display = \"flex\";\n    this.subtitlesContainer.style.flexDirection = \"column\";\n    this.subtitlesContainer.style.justifyContent = \"flex-end\";\n    this.subtitlesContainer.style.alignItems = \"center\";\n    this.subtitlesContainer.style.overflow = \"hidden\";\n    this.containerElement.appendChild(this.subtitlesContainer);\n  }\n  renderSubtitles(currentTime) {\n    if (!this.subtitlesData.length || !this.currentSubtitleTrack) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    const adjustedTime = currentTime + this.extraSubtitlesDelay;\n    const activeCues = this.subtitlesData.filter(\n      (cue) => adjustedTime >= cue.startTime && adjustedTime <= cue.endTime\n    );\n    if (activeCues.length === 0) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    this.createSubtitlesContainer();\n    if (!this.subtitlesElement) {\n      this.subtitlesElement = document.createElement(\"div\");\n      this.subtitlesElement.style.position = \"relative\";\n      this.subtitlesElement.style.maxWidth = \"90%\";\n      this.subtitlesElement.style.textAlign = \"center\";\n      this.subtitlesElement.style.fontFamily = \"Arial, sans-serif\";\n      this.subtitlesElement.style.fontWeight = \"bold\";\n      this.subtitlesElement.style.lineHeight = \"1.2\";\n      this.subtitlesElement.style.wordWrap = \"break-word\";\n      this.subtitlesElement.style.whiteSpace = \"pre-wrap\";\n      this.subtitlesContainer.appendChild(this.subtitlesElement);\n    }\n    while (this.subtitlesElement.firstChild) {\n      this.subtitlesElement.removeChild(this.subtitlesElement.firstChild);\n    }\n    activeCues.forEach((cue) => {\n      const cueElement = document.createElement(\"div\");\n      cueElement.textContent = cue.text;\n      this.styleSubtitleElement(cueElement);\n      this.subtitlesElement.appendChild(cueElement);\n    });\n  }\n  styleSubtitleElement(element) {\n    const fontSize = Math.floor(this.extraSubtitlesSize / 25 * 3.5) + \"vmin\";\n    const opacity = this.extraSubtitlesOpacity / 100;\n    element.style.fontSize = fontSize;\n    element.style.opacity = opacity.toString();\n    element.style.color = this.extraSubtitlesTextColor;\n    element.style.backgroundColor = this.extraSubtitlesBackgroundColor;\n    element.style.padding = \"0.2em 0.4em\";\n    element.style.borderRadius = \"0.2em\";\n    element.style.margin = \"0.1em\";\n    element.style.display = \"inline-block\";\n    const outlineWidth = \"0.15rem\";\n    element.style.textShadow = [\n      `-${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`\n    ].join(\", \");\n    if (this.extraSubtitlesOffset !== 0) {\n      const offsetPercent = this.extraSubtitlesOffset + \"%\";\n      element.style.transform = `translateY(${offsetPercent})`;\n    }\n  }\n  removeSubtitlesElement() {\n    if (this.subtitlesElement && this.subtitlesElement.parentNode) {\n      this.subtitlesElement.parentNode.removeChild(this.subtitlesElement);\n      this.subtitlesElement = null;\n    }\n  }\n  async loadSubtitles(track) {\n    if (!track || !track.url) {\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n      return;\n    }\n    try {\n      const proxyUrl = `/api/subtitles?url=${encodeURIComponent(track.url)}`;\n      logInfo(LogCategory.STREAM, \"Loading subtitles via proxy\", { url: proxyUrl });\n      const response = await fetch(proxyUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to load subtitles: ${response.status}`);\n      }\n      const text = await response.text();\n      this.subtitlesData = this.parseSubtitles(text);\n      this.currentSubtitleTrack = track;\n      logInfo(LogCategory.STREAM, \"Subtitles loaded successfully\", {\n        cuesTotal: this.subtitlesData.length,\n        language: track.language || track.id\n      });\n    } catch (error) {\n      logError(LogCategory.STREAM, \"Subtitle loading failed\", {\n        url: track.url,\n        language: track.language || track.id\n      }, error);\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n    }\n  }\n  parseSubtitles(text) {\n    const cues = [];\n    if (text.includes(\"WEBVTT\")) {\n      logDebug(LogCategory.STREAM, \"Parsing WebVTT subtitles\");\n      const blocks = text.split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 2) {\n          const timeLineIndex = lines.findIndex((line) => line.includes(\"-->\"));\n          if (timeLineIndex >= 0) {\n            const timeLine = lines[timeLineIndex];\n            const textLines = lines.slice(timeLineIndex + 1);\n            const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})/);\n            if (timeMatch) {\n              const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n              const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n              cues.push({\n                startTime,\n                endTime,\n                text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n                // Remove HTML tags\n              });\n            }\n          }\n        }\n      });\n    } else if (text.includes(\"-->\")) {\n      logDebug(LogCategory.STREAM, \"Parsing SRT subtitles\");\n      const blocks = text.trim().split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 3) {\n          const timeLine = lines[1];\n          const textLines = lines.slice(2);\n          const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/);\n          if (timeMatch) {\n            const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n            const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n            cues.push({\n              startTime,\n              endTime,\n              text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n              // Remove HTML tags\n            });\n          }\n        }\n      });\n    }\n    logDebug(LogCategory.STREAM, \"Subtitle parsing completed\", { cuesTotal: cues.length });\n    return cues;\n  }\n  shouldUseHLS(streamUrl) {\n    return streamUrl.includes(\".m3u8\") || typeof window !== \"undefined\" && window.Hls?.isSupported() && !this.videoElement.canPlayType(\"application/vnd.apple.mpegurl\");\n  }\n  setupHLS(streamUrl) {\n    if (typeof window !== \"undefined\" && window.Hls?.isSupported()) {\n      const Hls = window.Hls;\n      this.hlsInstance = new Hls({\n        debug: false,\n        enableWorker: true,\n        lowLatencyMode: false,\n        backBufferLength: 30,\n        maxBufferLength: 50,\n        maxMaxBufferLength: 80,\n        maxFragLookUpTolerance: 0,\n        maxBufferHole: 0,\n        appendErrorMaxRetry: 20,\n        nudgeMaxRetry: 20,\n        manifestLoadingTimeOut: 3e4,\n        manifestLoadingMaxRetry: 10,\n        fragLoadPolicy: {\n          default: {\n            maxTimeToFirstByteMs: 1e4,\n            maxLoadTimeMs: 12e4,\n            timeoutRetry: {\n              maxNumRetry: 20,\n              retryDelayMs: 0,\n              maxRetryDelayMs: 15\n            },\n            errorRetry: {\n              maxNumRetry: 6,\n              retryDelayMs: 1e3,\n              maxRetryDelayMs: 15\n            }\n          }\n        }\n      });\n      this.hlsInstance.loadSource(streamUrl);\n      this.hlsInstance.attachMedia(this.videoElement);\n      this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {\n        this.updateAudioTracks();\n      });\n      this.hlsInstance.on(Hls.Events.ERROR, (_event, data) => {\n        if (data.fatal) {\n          this.emit(\"error\", {\n            critical: true,\n            message: `HLS Error: ${data.type} - ${data.details}`\n          });\n        }\n      });\n    } else {\n      this.videoElement.src = streamUrl;\n    }\n  }\n  updateAudioTracks() {\n    if (this.hlsInstance && this.hlsInstance.audioTracks) {\n      const tracks = this.hlsInstance.audioTracks.map((track, index) => ({\n        id: index.toString(),\n        name: track.name || `Track ${index + 1}`,\n        language: track.lang\n      }));\n      this.emitPropChanged(\"audioTracks\", tracks);\n    }\n  }\n  emitPropChanged(propName, propValue) {\n    if (this.observedProps[propName]) {\n      this.emit(\"propChanged\", propName, propValue);\n    }\n  }\n  emit(event, ...args) {\n    if (this.eventListeners[event]) {\n      this.eventListeners[event].forEach((listener) => listener(...args));\n    }\n  }\n  // Public API\n  on(event, listener) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [];\n    }\n    this.eventListeners[event].push(listener);\n  }\n  dispatch(action) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    switch (action.type) {\n      case \"observeProp\":\n        if (action.propName) {\n          this.observedProps[action.propName] = true;\n          this.emitCurrentProp(action.propName);\n        }\n        break;\n      case \"setProp\":\n        if (action.propName && action.propValue !== void 0) {\n          this.setProp(action.propName, action.propValue);\n        }\n        break;\n      case \"command\":\n        if (action.commandName) {\n          this.executeCommand(action.commandName, action.commandArgs);\n        }\n        break;\n    }\n  }\n  emitCurrentProp(propName) {\n    switch (propName) {\n      case \"loaded\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.readyState >= 1);\n        break;\n      case \"paused\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.paused);\n        break;\n      case \"time\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.currentTime * 1e3 : null);\n        break;\n      case \"duration\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.duration ? this.videoElement.duration * 1e3 : null);\n        break;\n      case \"buffering\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.readyState < 3);\n        break;\n      case \"buffered\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.buffered : null);\n        break;\n      case \"volume\":\n        this.emitPropChanged(propName, this.videoElement ? Math.floor(this.videoElement.volume * 100) : 100);\n        break;\n      case \"muted\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.muted : false);\n        break;\n      case \"playbackSpeed\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.playbackRate : 1);\n        break;\n    }\n  }\n  setProp(propName, propValue) {\n    switch (propName) {\n      case \"stream\":\n        if (propValue) {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"load\",\n            commandArgs: {\n              stream: { url: propValue },\n              autoplay: true\n            }\n          });\n        } else {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"unload\"\n          });\n        }\n        break;\n      case \"paused\":\n        if (this.videoElement) {\n          if (propValue) {\n            this.videoElement.pause();\n          } else {\n            this.videoElement.play().catch(() => {\n            });\n          }\n        }\n        break;\n      case \"time\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.currentTime = propValue / 1e3;\n        }\n        break;\n      case \"volume\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.muted = false;\n          this.videoElement.volume = Math.max(0, Math.min(100, propValue)) / 100;\n        }\n        break;\n      case \"muted\":\n        if (this.videoElement) {\n          this.videoElement.muted = !!propValue;\n        }\n        break;\n      case \"playbackSpeed\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.playbackRate = propValue;\n        }\n        break;\n      case \"selectedSubtitlesTrackId\":\n        break;\n      // Subtitle styling properties\n      case \"extraSubtitlesSize\":\n        this.extraSubtitlesSize = Math.max(10, Math.min(50, propValue || 25));\n        break;\n      case \"extraSubtitlesOffset\":\n        this.extraSubtitlesOffset = Math.max(-20, Math.min(20, propValue || 0));\n        break;\n      case \"extraSubtitlesTextColor\":\n        this.extraSubtitlesTextColor = propValue || \"#FFFFFF\";\n        break;\n      case \"extraSubtitlesBackgroundColor\":\n        this.extraSubtitlesBackgroundColor = propValue || \"rgba(0, 0, 0, 0.7)\";\n        break;\n      case \"extraSubtitlesOutlineColor\":\n        this.extraSubtitlesOutlineColor = propValue || \"#000000\";\n        break;\n      case \"extraSubtitlesOpacity\":\n        this.extraSubtitlesOpacity = Math.max(0, Math.min(100, propValue || 100));\n        break;\n      case \"extraSubtitlesDelay\":\n        this.extraSubtitlesDelay = propValue || 0;\n        break;\n    }\n  }\n  executeCommand(commandName, commandArgs) {\n    switch (commandName) {\n      case \"load\":\n        this.executeLoadCommand(commandArgs);\n        break;\n      case \"unload\":\n        this.executeUnloadCommand();\n        break;\n      case \"play\":\n        if (this.videoElement) {\n          this.videoElement.play().catch(() => {\n          });\n        }\n        break;\n      case \"pause\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n        }\n        break;\n      case \"stop\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n          this.videoElement.currentTime = 0;\n        }\n        break;\n      case \"seek\":\n        if (this.videoElement && commandArgs && commandArgs[0] !== void 0) {\n          this.videoElement.currentTime = commandArgs[0] / 1e3;\n        }\n        break;\n    }\n  }\n  executeLoadCommand(commandArgs) {\n    this.executeUnloadCommand();\n    if (commandArgs && commandArgs.stream && typeof commandArgs.stream.url === \"string\") {\n      this.currentStream = commandArgs.stream.url;\n      if (!this.videoElement) {\n        this.createVideoElement();\n      }\n      logInfo(LogCategory.STREAM, \"Loading stream via load command\", {\n        url: this.currentStream,\n        autoplay: typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true\n      });\n      if (this.videoElement) {\n        this.videoElement.autoplay = typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true;\n        if (commandArgs.time !== null && isFinite(commandArgs.time)) {\n          this.videoElement.currentTime = parseInt(commandArgs.time, 10) / 1e3;\n        }\n        if (this.currentStream && this.shouldUseHLS(this.currentStream)) {\n          logInfo(LogCategory.STREAM, \"Setting up HLS streaming\", { url: this.currentStream });\n          this.setupHLS(this.currentStream);\n        } else {\n          logInfo(LogCategory.STREAM, \"Setting direct video source\", { url: this.currentStream });\n          this.videoElement.preload = \"auto\";\n          this.videoElement.src = this.currentStream;\n          this.videoElement.setAttribute(\"playsinline\", \"true\");\n          this.videoElement.setAttribute(\"webkit-playsinline\", \"true\");\n          if (\"bufferData\" in this.videoElement) {\n            this.videoElement.bufferData = true;\n          }\n          this.videoElement.crossOrigin = null;\n          this.videoElement.addEventListener(\"loadstart\", () => {\n            logInfo(LogCategory.PERFORMANCE, \"Starting aggressive buffer loading\");\n          });\n          let bufferHealthTimer = null;\n          let lowBufferCount = 0;\n          this.videoElement.addEventListener(\"progress\", () => {\n            if (this.videoElement && this.videoElement.buffered.length > 0) {\n              const buffered = this.videoElement.buffered.end(this.videoElement.buffered.length - 1);\n              const current = this.videoElement.currentTime;\n              const bufferAhead = buffered - current;\n              logDebug(LogCategory.PERFORMANCE, \"Buffer status\", {\n                bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                currentTime: `${current.toFixed(1)}s`,\n                bufferedEnd: `${buffered.toFixed(1)}s`,\n                bufferHealth: bufferAhead < 5 ? \"LOW\" : bufferAhead < 15 ? \"MEDIUM\" : \"HIGH\"\n              });\n              if (bufferAhead < 2 && !this.videoElement.paused) {\n                lowBufferCount++;\n                logWarn(LogCategory.PERFORMANCE, \"Low buffer detected\", {\n                  bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                  lowBufferEvents: lowBufferCount\n                });\n                if (lowBufferCount > 3) {\n                  logInfo(LogCategory.PERFORMANCE, \"Pausing for buffer recovery\");\n                  this.videoElement.pause();\n                  if (bufferHealthTimer) clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = setTimeout(() => {\n                    if (this.videoElement && this.videoElement.paused) {\n                      logInfo(LogCategory.PERFORMANCE, \"Resuming after buffer recovery\");\n                      this.videoElement.play().catch(() => {\n                      });\n                      lowBufferCount = 0;\n                    }\n                  }, 2e3);\n                }\n              } else if (bufferAhead > 5) {\n                lowBufferCount = 0;\n                if (bufferHealthTimer) {\n                  clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = null;\n                }\n              }\n            }\n          });\n          this.videoElement.addEventListener(\"stalled\", () => {\n            logWarn(LogCategory.PERFORMANCE, \"Video stalled, attempting recovery\");\n            setTimeout(() => {\n              if (this.videoElement && this.videoElement.readyState < 3) {\n                logInfo(LogCategory.PERFORMANCE, \"Triggering load for stall recovery\");\n                this.videoElement.load();\n              }\n            }, 1e3);\n          });\n          this.videoElement.addEventListener(\"waiting\", () => {\n            logDebug(LogCategory.PERFORMANCE, \"Video waiting for data\");\n          });\n          this.videoElement.load();\n        }\n        this.emitPropChanged(\"stream\", this.currentStream);\n        this.emitPropChanged(\"loaded\", false);\n        this.emitPropChanged(\"buffering\", true);\n      }\n    }\n  }\n  executeUnloadCommand() {\n    this.currentStream = null;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.videoElement) {\n      this.videoElement.removeAttribute(\"src\");\n      this.videoElement.load();\n    }\n    this.emitPropChanged(\"stream\", null);\n  }\n  // Public method to load subtitles\n  loadSubtitleTrack(track) {\n    return this.loadSubtitles(track);\n  }\n  destroy() {\n    if (this.destroyed) return;\n    this.destroyed = true;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.subtitlesContainer && this.subtitlesContainer.parentNode) {\n      this.subtitlesContainer.parentNode.removeChild(this.subtitlesContainer);\n    }\n    if (this.videoElement && this.videoElement.parentNode) {\n      this.videoElement.parentNode.removeChild(this.videoElement);\n    }\n    this.eventListeners = {};\n    this.videoElement = null;\n    this.subtitlesContainer = null;\n    this.subtitlesElement = null;\n  }\n  get isDestroyed() {\n    return this.destroyed;\n  }\n}\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0cmVtaW9WaWRlb1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wbGV0ZSBTdHJlbWlvIFZpZGVvIFBsYXllciBTeXN0ZW1cbi8vIFR5cGVTY3JpcHQgaW1wbGVtZW50YXRpb24gd2l0aCBhbGwgU3RyZW1pbyBmZWF0dXJlc1xuXG5pbXBvcnQgeyBMb2dDYXRlZ29yeSwgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ0RlYnVnLCBsb2dXYXJuIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBWaWRlb1Byb3BlcnRpZXMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBsb2FkZWQ/OiBib29sZWFuO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgYnVmZmVyaW5nPzogYm9vbGVhbjtcbiAgYnVmZmVyZWQ/OiBUaW1lUmFuZ2VzIHwgbnVsbDtcbiAgYXVkaW9UcmFja3M/OiBBdWRpb1RyYWNrW107XG4gIHNlbGVjdGVkQXVkaW9UcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzVHJhY2tzPzogU3VidGl0bGVUcmFja1tdO1xuICBzZWxlY3RlZFN1YnRpdGxlc1RyYWNrSWQ/OiBzdHJpbmcgfCBudWxsO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1NpemU/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIHZvbHVtZT86IG51bWJlcjtcbiAgbXV0ZWQ/OiBib29sZWFuO1xuICBwbGF5YmFja1NwZWVkPzogbnVtYmVyO1xuICAvLyBFbmhhbmNlZCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVDdWUge1xuICBzdGFydFRpbWU6IG51bWJlcjtcbiAgZW5kVGltZTogbnVtYmVyO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9BY3Rpb24ge1xuICB0eXBlOiAnb2JzZXJ2ZVByb3AnIHwgJ3NldFByb3AnIHwgJ2NvbW1hbmQnO1xuICBwcm9wTmFtZT86IGtleW9mIFZpZGVvUHJvcGVydGllcztcbiAgcHJvcFZhbHVlPzogYW55O1xuICBjb21tYW5kTmFtZT86IHN0cmluZztcbiAgY29tbWFuZEFyZ3M/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9PcHRpb25zIHtcbiAgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJlbWlvVmlkZW9TeXN0ZW0ge1xuICBwcml2YXRlIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN1YnRpdGxlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGhsc0luc3RhbmNlOiBhbnkgPSBudWxsO1xuICBcbiAgcHJpdmF0ZSBvYnNlcnZlZFByb3BzOiB7IFtLIGluIGtleW9mIFZpZGVvUHJvcGVydGllc10/OiBib29sZWFuIH0gPSB7fTtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbltdIH0gPSB7fTtcbiAgXG4gIC8vIFN0YXRlXG4gIHByaXZhdGUgY3VycmVudFN0cmVhbTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY3VycmVudFN1YnRpdGxlVHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNEYXRhOiBTdWJ0aXRsZUN1ZVtdID0gW107XG4gIHByaXZhdGUgZGVzdHJveWVkID0gZmFsc2U7XG4gIFxuICAvLyBTdWJ0aXRsZSBzZXR0aW5nc1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzU2l6ZSA9IDI1O1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc1RleHRDb2xvciA9ICcjRkZGRkZGJztcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yID0gJyMwMDAwMDAnO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3BhY2l0eSA9IDEwMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0RlbGF5ID0gMDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBWaWRlb09wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQ7XG4gICAgdGhpcy5pbml0aWFsaXplQ29udGFpbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDb250YWluZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVWaWRlb0VsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ0NyZWF0aW5nIG5ldyB2aWRlbyBlbGVtZW50Jyk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJzsgLy8gQ2hhbmdlZCBmcm9tICdtZXRhZGF0YScgdG8gJ2F1dG8nIGZvciBiZXR0ZXIgYnVmZmVyaW5nXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgIC8vIERvbid0IHNldCBjcm9zc09yaWdpbiBmb3IgUmVhbC1EZWJyaWQgc3RyZWFtcyBhcyB0aGV5IGRvbid0IHN1cHBvcnQgQ09SU1xuICAgIFxuICAgIC8vIEFkZCBidWZmZXIgY29uZmlndXJhdGlvbiBmb3IgYmV0dGVyIHN0cmVhbWluZyBwZXJmb3JtYW5jZVxuICAgIGlmICgnYnVmZmVyVGltZScgaW4gdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICh0aGlzLnZpZGVvRWxlbWVudCBhcyBhbnkpLmJ1ZmZlclRpbWUgPSAxMDsgLy8gMTAgc2Vjb25kcyBidWZmZXJcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuc2V0dXBWaWRlb0V2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVmlkZW9FdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKSA9PiB7XG4gICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QTEFZRVIsICdWaWRlbyBsb2Fkc3RhcnQgZXZlbnQnKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYnVmZmVyaW5nJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUExBWUVSLCAnVmlkZW8gbG9hZGVkbWV0YWRhdGEgZXZlbnQnLCB7IFxuICAgICAgICBkdXJhdGlvbjogdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uRm9ybWF0dGVkOiBgJHtNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uIC8gNjApfToke01hdGguZmxvb3IodGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gJSA2MCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIHRydWUpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2R1cmF0aW9uJywgdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gKiAxMDAwKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpZGVvRWxlbWVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgdGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lICogMTAwMDtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd0aW1lJywgdGltZSk7XG4gICAgICB0aGlzLnJlbmRlclN1YnRpdGxlcyh0aW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJlZCcsIHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd2b2x1bWUnLCBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ211dGVkJywgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdwbGF5YmFja1NwZWVkJywgdGhpcy52aWRlb0VsZW1lbnQucGxheWJhY2tSYXRlKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdlbmRlZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMudmlkZW9FbGVtZW50LmVycm9yO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGxvZ0Vycm9yKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ1ZpZGVvIHBsYXliYWNrIGVycm9yJywge1xuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdHJlYW1Vcmw6IHRoaXMuY3VycmVudFN0cmVhbVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgVmlkZW8gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN1YnRpdGxlc0NvbnRhaW5lcigpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdWJ0aXRsZXMoY3VycmVudFRpbWU6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5zdWJ0aXRsZXNEYXRhLmxlbmd0aCB8fCAhdGhpcy5jdXJyZW50U3VidGl0bGVUcmFjaykge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWRqdXN0ZWRUaW1lID0gY3VycmVudFRpbWUgKyB0aGlzLmV4dHJhU3VidGl0bGVzRGVsYXk7XG4gICAgY29uc3QgYWN0aXZlQ3VlcyA9IHRoaXMuc3VidGl0bGVzRGF0YS5maWx0ZXIoY3VlID0+IFxuICAgICAgYWRqdXN0ZWRUaW1lID49IGN1ZS5zdGFydFRpbWUgJiYgYWRqdXN0ZWRUaW1lIDw9IGN1ZS5lbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChhY3RpdmVDdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVTdWJ0aXRsZXNDb250YWluZXIoKTtcbiAgICBcbiAgICBpZiAoIXRoaXMuc3VidGl0bGVzRWxlbWVudCkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJzkwJSc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdBcmlhbCwgc2Fucy1zZXJpZic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciEuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyBjb250ZW50XG4gICAgd2hpbGUgKHRoaXMuc3VidGl0bGVzRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIFJlbmRlciBhY3RpdmUgY3Vlc1xuICAgIGFjdGl2ZUN1ZXMuZm9yRWFjaChjdWUgPT4ge1xuICAgICAgY29uc3QgY3VlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY3VlRWxlbWVudC50ZXh0Q29udGVudCA9IGN1ZS50ZXh0O1xuICAgICAgdGhpcy5zdHlsZVN1YnRpdGxlRWxlbWVudChjdWVFbGVtZW50KTtcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCEuYXBwZW5kQ2hpbGQoY3VlRWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0eWxlU3VidGl0bGVFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZm9udFNpemUgPSBNYXRoLmZsb29yKCh0aGlzLmV4dHJhU3VidGl0bGVzU2l6ZSAvIDI1KSAqIDMuNSkgKyAndm1pbic7XG4gICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNPcGFjaXR5IC8gMTAwO1xuXG4gICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcbiAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvcjtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3I7XG4gICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuMmVtIDAuNGVtJztcbiAgICBlbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwLjJlbSc7XG4gICAgZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnMC4xZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXG4gICAgLy8gVGV4dCBzaGFkb3cgZm9yIG91dGxpbmUgZWZmZWN0XG4gICAgY29uc3Qgb3V0bGluZVdpZHRoID0gJzAuMTVyZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IFtcbiAgICAgIGAtJHtvdXRsaW5lV2lkdGh9IC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwIC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAke291dGxpbmVXaWR0aH0gLSR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYC0ke291dGxpbmVXaWR0aH0gMCAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAwIDAgJHt0aGlzLmV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yfWAsXG4gICAgICBgLSR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwICR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YFxuICAgIF0uam9pbignLCAnKTtcblxuICAgIC8vIFBvc2l0aW9uIG9mZnNldFxuICAgIGlmICh0aGlzLmV4dHJhU3VidGl0bGVzT2Zmc2V0ICE9PSAwKSB7XG4gICAgICBjb25zdCBvZmZzZXRQZXJjZW50ID0gdGhpcy5leHRyYVN1YnRpdGxlc09mZnNldCArICclJztcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtvZmZzZXRQZXJjZW50fSlgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNFbGVtZW50ICYmIHRoaXMuc3VidGl0bGVzRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0VsZW1lbnQpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRTdWJ0aXRsZXModHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsKSB7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2sudXJsKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0RhdGEgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBvdXIgc3VidGl0bGUgcHJveHkgdG8gYXZvaWQgQ09SUyBpc3N1ZXNcbiAgICAgIGNvbnN0IHByb3h5VXJsID0gYC9hcGkvc3VidGl0bGVzP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0cmFjay51cmwpfWA7XG4gICAgICBcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnTG9hZGluZyBzdWJ0aXRsZXMgdmlhIHByb3h5JywgeyB1cmw6IHByb3h5VXJsIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3h5VXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzdWJ0aXRsZXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gdGhpcy5wYXJzZVN1YnRpdGxlcyh0ZXh0KTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSB0cmFjaztcbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZXMgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgY3Vlc1RvdGFsOiB0aGlzLnN1YnRpdGxlc0RhdGEubGVuZ3RoLFxuICAgICAgICBsYW5ndWFnZTogdHJhY2subGFuZ3VhZ2UgfHwgdHJhY2suaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBsb2FkaW5nIGZhaWxlZCcsIHtcbiAgICAgICAgdXJsOiB0cmFjay51cmwsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5ndWFnZSB8fCB0cmFjay5pZFxuICAgICAgfSwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gW107XG4gICAgICB0aGlzLmN1cnJlbnRTdWJ0aXRsZVRyYWNrID0gbnVsbDtcbiAgICAgIHRoaXMucmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdWJ0aXRsZXModGV4dDogc3RyaW5nKTogU3VidGl0bGVDdWVbXSB7XG4gICAgY29uc3QgY3VlczogU3VidGl0bGVDdWVbXSA9IFtdO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgV2ViVlRUIGZvcm1hdFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdXRUJWVFQnKSkge1xuICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnUGFyc2luZyBXZWJWVFQgc3VidGl0bGVzJyk7XG4gICAgICBcbiAgICAgIC8vIFNwbGl0IGJ5IGRvdWJsZSBuZXdsaW5lcyB0byBnZXQgY3VlIGJsb2Nrc1xuICAgICAgY29uc3QgYmxvY2tzID0gdGV4dC5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgdGltZWxpbmUgKGNvbnRhaW5zIC0tPilcbiAgICAgICAgICBjb25zdCB0aW1lTGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS5pbmNsdWRlcygnLS0+JykpO1xuICAgICAgICAgIGlmICh0aW1lTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVMaW5lID0gbGluZXNbdGltZUxpbmVJbmRleF07XG4gICAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSh0aW1lTGluZUluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlYlZUVCBmb3JtYXQ6IDAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDAuMDAwXG4gICAgICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0aW1lTGluZS5tYXRjaCgvKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KS8pO1xuICAgICAgICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFsyXSkgKiA2MDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFszXSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbNV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzddKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzhdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGN1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dExpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IFxuICAgIC8vIFNSVCBmb3JtYXQgcGFyc2VyXG4gICAgZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnLS0+JykpIHtcbiAgICAgIGxvZ0RlYnVnKExvZ0NhdGVnb3J5LlNUUkVBTSwgJ1BhcnNpbmcgU1JUIHN1YnRpdGxlcycpO1xuICAgICAgXG4gICAgICBjb25zdCBibG9ja3MgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgY29uc3QgdGltZUxpbmUgPSBsaW5lc1sxXTtcbiAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSgyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTUlQgZm9ybWF0OiAwMDowMDowMCwwMDAgLS0+IDAwOjAwOjAwLDAwMFxuICAgICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRpbWVMaW5lLm1hdGNoKC8oXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSwoXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSksKFxcZHszfSkvKTtcbiAgICAgICAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbMl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzNdKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IHBhcnNlSW50KHRpbWVNYXRjaFs1XSkgKiAzNjAwMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFs3XSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbOF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdWVzLnB1c2goe1xuICAgICAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgIHRleHQ6IHRleHRMaW5lcy5qb2luKCdcXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBwYXJzaW5nIGNvbXBsZXRlZCcsIHsgY3Vlc1RvdGFsOiBjdWVzLmxlbmd0aCB9KTtcbiAgICByZXR1cm4gY3VlcztcbiAgfVxuXG5cbiAgcHJpdmF0ZSBzaG91bGRVc2VITFMoc3RyZWFtVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3RyZWFtVXJsLmluY2x1ZGVzKCcubTN1OCcpIHx8IFxuICAgICAgICAgICAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgXG4gICAgICAgICAgICAod2luZG93IGFzIGFueSkuSGxzPy5pc1N1cHBvcnRlZCgpICYmIFxuICAgICAgICAgICAgIXRoaXMudmlkZW9FbGVtZW50IS5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmwnKSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwSExTKHN0cmVhbVVybDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5IbHM/LmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIGNvbnN0IEhscyA9ICh3aW5kb3cgYXMgYW55KS5IbHM7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbmV3IEhscyh7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlV29ya2VyOiB0cnVlLFxuICAgICAgICBsb3dMYXRlbmN5TW9kZTogZmFsc2UsXG4gICAgICAgIGJhY2tCdWZmZXJMZW5ndGg6IDMwLFxuICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDUwLFxuICAgICAgICBtYXhNYXhCdWZmZXJMZW5ndGg6IDgwLFxuICAgICAgICBtYXhGcmFnTG9va1VwVG9sZXJhbmNlOiAwLFxuICAgICAgICBtYXhCdWZmZXJIb2xlOiAwLFxuICAgICAgICBhcHBlbmRFcnJvck1heFJldHJ5OiAyMCxcbiAgICAgICAgbnVkZ2VNYXhSZXRyeTogMjAsXG4gICAgICAgIG1hbmlmZXN0TG9hZGluZ1RpbWVPdXQ6IDMwMDAwLFxuICAgICAgICBtYW5pZmVzdExvYWRpbmdNYXhSZXRyeTogMTAsXG4gICAgICAgIGZyYWdMb2FkUG9saWN5OiB7XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbWF4VGltZVRvRmlyc3RCeXRlTXM6IDEwMDAwLFxuICAgICAgICAgICAgbWF4TG9hZFRpbWVNczogMTIwMDAwLFxuICAgICAgICAgICAgdGltZW91dFJldHJ5OiB7XG4gICAgICAgICAgICAgIG1heE51bVJldHJ5OiAyMCxcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JSZXRyeToge1xuICAgICAgICAgICAgICBtYXhOdW1SZXRyeTogNixcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5sb2FkU291cmNlKHN0cmVhbVVybCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmF0dGFjaE1lZGlhKHRoaXMudmlkZW9FbGVtZW50KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLk1BTklGRVNUX1BBUlNFRCwgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUF1ZGlvVHJhY2tzKCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLkVSUk9SLCAoX2V2ZW50OiBhbnksIGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5mYXRhbCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBITFMgRXJyb3I6ICR7ZGF0YS50eXBlfSAtICR7ZGF0YS5kZXRhaWxzfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIGZvciBTYWZhcmkgYW5kIG90aGVyIGJyb3dzZXJzIHdpdGggbmF0aXZlIEhMUyBzdXBwb3J0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCEuc3JjID0gc3RyZWFtVXJsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQXVkaW9UcmFja3MoKSB7XG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UgJiYgdGhpcy5obHNJbnN0YW5jZS5hdWRpb1RyYWNrcykge1xuICAgICAgY29uc3QgdHJhY2tzOiBBdWRpb1RyYWNrW10gPSB0aGlzLmhsc0luc3RhbmNlLmF1ZGlvVHJhY2tzLm1hcCgodHJhY2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgaWQ6IGluZGV4LnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHRyYWNrLm5hbWUgfHwgYFRyYWNrICR7aW5kZXggKyAxfWAsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5nXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYXVkaW9UcmFja3MnLCB0cmFja3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lOiBrZXlvZiBWaWRlb1Byb3BlcnRpZXMsIHByb3BWYWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZWRQcm9wc1twcm9wTmFtZV0pIHtcbiAgICAgIHRoaXMuZW1pdCgncHJvcENoYW5nZWQnLCBwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUElcbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0cmVtaW9WaWRlb1N5c3RlbSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGRpc3BhdGNoKGFjdGlvbjogVmlkZW9BY3Rpb24pIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3RyZW1pb1ZpZGVvU3lzdGVtIGluc3RhbmNlIGlzIGRlc3Ryb3llZCcpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29ic2VydmVQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZWRQcm9wc1thY3Rpb24ucHJvcE5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmVtaXRDdXJyZW50UHJvcChhY3Rpb24ucHJvcE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzZXRQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSAmJiBhY3Rpb24ucHJvcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnNldFByb3AoYWN0aW9uLnByb3BOYW1lLCBhY3Rpb24ucHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbWFuZCc6XG4gICAgICAgIGlmIChhY3Rpb24uY29tbWFuZE5hbWUpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGFjdGlvbi5jb21tYW5kTmFtZSwgYWN0aW9uLmNvbW1hbmRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXRDdXJyZW50UHJvcChwcm9wTmFtZToga2V5b2YgVmlkZW9Qcm9wZXJ0aWVzKSB7XG4gICAgc3dpdGNoIChwcm9wTmFtZSkge1xuICAgICAgY2FzZSAnbG9hZGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPj0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsICF0aGlzLnZpZGVvRWxlbWVudCB8fCB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSAqIDEwMDAgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5kdXJhdGlvbiA/IHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uICogMTAwMCA6IG51bGwpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmluZyc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCAhdGhpcy52aWRlb0VsZW1lbnQgfHwgdGhpcy52aWRlb0VsZW1lbnQucmVhZHlTdGF0ZSA8IDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2x1bWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkgOiAxMDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ211dGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgOiBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCA/IHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA6IDEpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldFByb3AocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpIHtcbiAgICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICAvLyBVc2UgU3RyZW1pbydzIGxvYWQgY29tbWFuZCBwYXR0ZXJuIGluc3RlYWQgb2YgZGlyZWN0IHN0cmVhbSBzZXR0aW5nXG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICBjb21tYW5kQXJnczoge1xuICAgICAgICAgICAgICBzdHJlYW06IHsgdXJsOiBwcm9wVmFsdWUgfSxcbiAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAndW5sb2FkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgaWYgKHByb3BWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0aW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwcm9wVmFsdWUgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndm9sdW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC52b2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSkpIC8gMTAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbXV0ZWQnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9ICEhcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiBwcm9wVmFsdWUgIT09IG51bGwgJiYgaXNGaW5pdGUocHJvcFZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdGVkU3VidGl0bGVzVHJhY2tJZCc6XG4gICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCBzdWJ0aXRsZSB0cmFja3MgdG8gYmUgcHJvdmlkZWRcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBoYW5kbGUgdGhlIHN1YnRpdGxlIHRyYWNrIGxvYWRpbmdcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBTdWJ0aXRsZSBzdHlsaW5nIHByb3BlcnRpZXNcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzU2l6ZSc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNTaXplID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDUwLCBwcm9wVmFsdWUgfHwgMjUpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc09mZnNldCc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNPZmZzZXQgPSBNYXRoLm1heCgtMjAsIE1hdGgubWluKDIwLCBwcm9wVmFsdWUgfHwgMCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzVGV4dENvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvciA9IHByb3BWYWx1ZSB8fCAnI0ZGRkZGRic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3InOlxuICAgICAgICB0aGlzLmV4dHJhU3VidGl0bGVzQmFja2dyb3VuZENvbG9yID0gcHJvcFZhbHVlIHx8ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvciA9IHByb3BWYWx1ZSB8fCAnIzAwMDAwMCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc09wYWNpdHkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSB8fCAxMDApKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc0RlbGF5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc0RlbGF5ID0gcHJvcFZhbHVlIHx8IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWU6IHN0cmluZywgY29tbWFuZEFyZ3M/OiBhbnkpIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmROYW1lKSB7XG4gICAgICBjYXNlICdsb2FkJzpcbiAgICAgICAgdGhpcy5leGVjdXRlTG9hZENvbW1hbmQoY29tbWFuZEFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VubG9hZCc6XG4gICAgICAgIHRoaXMuZXhlY3V0ZVVubG9hZENvbW1hbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0b3AnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlZWsnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgY29tbWFuZEFyZ3MgJiYgY29tbWFuZEFyZ3NbMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gY29tbWFuZEFyZ3NbMF0gLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUxvYWRDb21tYW5kKGNvbW1hbmRBcmdzOiBhbnkpIHtcbiAgICB0aGlzLmV4ZWN1dGVVbmxvYWRDb21tYW5kKCk7IC8vIFVubG9hZCBhbnkgZXhpc3Rpbmcgc3RyZWFtIGZpcnN0XG4gICAgXG4gICAgaWYgKGNvbW1hbmRBcmdzICYmIGNvbW1hbmRBcmdzLnN0cmVhbSAmJiB0eXBlb2YgY29tbWFuZEFyZ3Muc3RyZWFtLnVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IGNvbW1hbmRBcmdzLnN0cmVhbS51cmw7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVWaWRlb0VsZW1lbnQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdMb2FkaW5nIHN0cmVhbSB2aWEgbG9hZCBjb21tYW5kJywgeyBcbiAgICAgICAgdXJsOiB0aGlzLmN1cnJlbnRTdHJlYW0sXG4gICAgICAgIGF1dG9wbGF5OiB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB2aWRlbyBwcm9wZXJ0aWVzXG4gICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kQXJncy50aW1lICE9PSBudWxsICYmIGlzRmluaXRlKGNvbW1hbmRBcmdzLnRpbWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwYXJzZUludChjb21tYW5kQXJncy50aW1lLCAxMCkgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBITFMgb3IgZGlyZWN0IHZpZGVvXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdHJlYW0gJiYgdGhpcy5zaG91bGRVc2VITFModGhpcy5jdXJyZW50U3RyZWFtKSkge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyB1cCBITFMgc3RyZWFtaW5nJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICB0aGlzLnNldHVwSExTKHRoaXMuY3VycmVudFN0cmVhbSEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyBkaXJlY3QgdmlkZW8gc291cmNlJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ2dyZXNzaXZlIHByZWxvYWQgc3RyYXRlZ3kgZm9yIFJlYWwtRGVicmlkIHN0cmVhbXNcbiAgICAgICAgICAvLyBGb3JjZSBmdWxsIHByZWxvYWRpbmcgdG8gb3ZlcmNvbWUgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSB0aGlzLmN1cnJlbnRTdHJlYW0hO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbmZpZ3VyZSB2aWRlbyBlbGVtZW50IGZvciBvcHRpbWFsIHN0cmVhbWluZyBhbmQgYWdncmVzc2l2ZSBidWZmZXJpbmdcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJ3RydWUnKTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICd0cnVlJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yY2UgYWdncmVzc2l2ZSBidWZmZXJpbmcgZm9yIGxhcmdlIGZpbGVzXG4gICAgICAgICAgaWYgKCdidWZmZXJEYXRhJyBpbiB0aGlzLnZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgKHRoaXMudmlkZW9FbGVtZW50IGFzIGFueSkuYnVmZmVyRGF0YSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCBuZXR3b3JrIHN0YXRlIG9wdGltaXphdGlvblxuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmNyb3NzT3JpZ2luID0gbnVsbDsgLy8gUmVtb3ZlIENPUlMgcmVzdHJpY3Rpb25zXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGxvYWQgc3RyYXRlZ3kgb3B0aW1pemF0aW9uXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1N0YXJ0aW5nIGFnZ3Jlc3NpdmUgYnVmZmVyIGxvYWRpbmcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW50ZWxsaWdlbnQgYnVmZmVyIG1vbml0b3Jpbmcgd2l0aCBidWZmZXIgaGVhbHRoIG1hbmFnZW1lbnRcbiAgICAgICAgICBsZXQgYnVmZmVySGVhbHRoVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgbGV0IGxvd0J1ZmZlckNvdW50ID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5idWZmZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckFoZWFkID0gYnVmZmVyZWQgLSBjdXJyZW50O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdCdWZmZXIgc3RhdHVzJywge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckFoZWFkOiBgJHtidWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBgJHtjdXJyZW50LnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVyZWRFbmQ6IGAke2J1ZmZlcmVkLnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoOiBidWZmZXJBaGVhZCA8IDUgPyAnTE9XJyA6IGJ1ZmZlckFoZWFkIDwgMTUgPyAnTUVESVVNJyA6ICdISUdIJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE1vbml0b3IgYnVmZmVyIGhlYWx0aCBhbmQgcGF1c2UgaWYgYnVmZmVyIGlzIGNyaXRpY2FsbHkgbG93XG4gICAgICAgICAgICAgIGlmIChidWZmZXJBaGVhZCA8IDIgJiYgIXRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIGxvd0J1ZmZlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0xvdyBidWZmZXIgZGV0ZWN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgIGxvd0J1ZmZlckV2ZW50czogbG93QnVmZmVyQ291bnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBQYXVzZSBicmllZmx5IHRvIGFsbG93IG1vcmUgYnVmZmVyaW5nIGlmIGJ1ZmZlciBpcyBjcml0aWNhbGx5IGxvd1xuICAgICAgICAgICAgICAgIGlmIChsb3dCdWZmZXJDb3VudCA+IDMpIHtcbiAgICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdQYXVzaW5nIGZvciBidWZmZXIgcmVjb3ZlcnknKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChidWZmZXJIZWFsdGhUaW1lcikgY2xlYXJUaW1lb3V0KGJ1ZmZlckhlYWx0aFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgIGJ1ZmZlckhlYWx0aFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBFUkZPUk1BTkNFLCAnUmVzdW1pbmcgYWZ0ZXIgYnVmZmVyIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChidWZmZXJBaGVhZCA+IDUpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb3VudGVyIHdoZW4gYnVmZmVyIGlzIGhlYWx0aHlcbiAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBzdGFsbCBkZXRlY3Rpb24gYW5kIHJlY292ZXJ5XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3RhbGxlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGxvZ1dhcm4oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdWaWRlbyBzdGFsbGVkLCBhdHRlbXB0aW5nIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAvLyBCcmllZiBwYXVzZSB0byBhbGxvdyBtb3JlIGJ1ZmZlcmluZ1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlIDwgMykge1xuICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdUcmlnZ2VyaW5nIGxvYWQgZm9yIHN0YWxsIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgd2FpdGluZyBldmVudCBoYW5kbGluZ1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1ZpZGVvIHdhaXRpbmcgZm9yIGRhdGEnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEVtaXQgcHJvcGVydHkgY2hhbmdlc1xuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgdGhpcy5jdXJyZW50U3RyZWFtKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZVVubG9hZENvbW1hbmQoKSB7XG4gICAgdGhpcy5jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgICBcbiAgICBpZiAodGhpcy5obHNJbnN0YW5jZSkge1xuICAgICAgdGhpcy5obHNJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgbnVsbCk7XG4gIH1cblxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGxvYWQgc3VidGl0bGVzXG4gIGxvYWRTdWJ0aXRsZVRyYWNrKHRyYWNrOiBTdWJ0aXRsZVRyYWNrIHwgbnVsbCkge1xuICAgIHJldHVybiB0aGlzLmxvYWRTdWJ0aXRsZXModHJhY2spO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHJldHVybjtcblxuICAgICh0aGlzIGFzIGFueSkuZGVzdHJveWVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmhsc0luc3RhbmNlKSB7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuaGxzSW5zdGFuY2UgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciAmJiB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc3VidGl0bGVzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZGVvRWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMudmlkZW9FbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciA9IG51bGw7XG4gICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95ZWQ7XG4gIH1cbn0iXSwibWFwcGluZ3MiOiJBQUdBLFNBQVMsYUFBYSxTQUFTLFVBQVUsVUFBVSxlQUFlO0FBaUUzRCxhQUFNLG1CQUFtQjtBQUFBLEVBQ3RCO0FBQUEsRUFDQSxlQUF3QztBQUFBLEVBQ3hDLHFCQUF5QztBQUFBLEVBQ3pDLG1CQUF1QztBQUFBLEVBQ3ZDLGNBQW1CO0FBQUEsRUFFbkIsZ0JB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"
          },
          "redirectURL": "",
          "headersSize": 292,
          "bodySize": 87623,
          "_transferSize": 87915,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:14.909Z",
        "time": 10.433000003104098,
        "timings": {
          "blocked": 3.4379999964628367,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.24399999999999994,
          "wait": 1.7309999952139332,
          "receive": 5.020000011427328,
          "_blocked_queueing": 2.976999996462837,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "sendLogBatch",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 50,
                "columnNumber": 12
              },
              {
                "functionName": "flushToFile",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 85,
                "columnNumber": 9
              },
              {
                "functionName": "",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 34,
                "columnNumber": 11
              }
            ]
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33095",
        "request": {
          "method": "POST",
          "url": "http://localhost:5173/api/logs",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "1064"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/watch/tt26743210?stream=https%3A%2F%2Fsgp1-4.download.real-debrid.com%2Fd%2F7ZATI3Q7EVVUS75%2FHow.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv&quality=4K"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 1144,
          "bodySize": 1064,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"logs\":[{\"timestamp\":\"2025-08-01T11:32:14.956Z\",\"level\":2,\"category\":\"PLAYER\",\"message\":\"Creating new video element\"},{\"timestamp\":\"2025-08-01T11:32:14.958Z\",\"level\":2,\"category\":\"STREAM\",\"message\":\"Loading stream via load command\",\"data\":{\"url\":\"https://sgp1-4.download.real-debrid.com/d/7ZATI3Q7EVVUS75/How.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv\",\"autoplay\":true}},{\"timestamp\":\"2025-08-01T11:32:14.958Z\",\"level\":2,\"category\":\"STREAM\",\"message\":\"Setting direct video source\",\"data\":{\"url\":\"https://sgp1-4.download.real-debrid.com/d/7ZATI3Q7EVVUS75/How.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv\"}},{\"timestamp\":\"2025-08-01T11:32:14.966Z\",\"level\":3,\"category\":\"PLAYER\",\"message\":\"Video loadstart event\"},{\"timestamp\":\"2025-08-01T11:32:14.966Z\",\"level\":2,\"category\":\"PERFORMANCE\",\"message\":\"Starting aggressive buffer loading\"},{\"timestamp\":\"2025-08-01T11:32:14.974Z\",\"level\":2,\"category\":\"PLAYER\",\"message\":\"Video loadedmetadata event\",\"data\":{\"duration\":7519.512,\"durationFormatted\":\"125:19\"}}]}"
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Vary",
              "value": "Origin"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "66"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Fri, 01 Aug 2025 11:32:17 GMT"
            },
            {
              "name": "etag",
              "value": "W/\"42-SvYmE4CoSFK6IHst7zAIdxrG0qw\""
            },
            {
              "name": "x-powered-by",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 66,
            "mimeType": "application/json",
            "compression": 0,
            "text": "{\"status\":\"ok\",\"message\":\"Logged 6 entries to app-2025-08-01.log\"}"
          },
          "redirectURL": "",
          "headersSize": 253,
          "bodySize": 66,
          "_transferSize": 319,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:17.552Z",
        "time": 13.969000006909482,
        "timings": {
          "blocked": 4.163999997878447,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.2709999999999999,
          "wait": 6.3460000066207725,
          "receive": 3.188000002410263,
          "_blocked_queueing": 3.496999997878447,
          "_workerStart": -2.98,
          "_workerReady": -2.51,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "sendLogBatch",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 50,
                "columnNumber": 12
              },
              {
                "functionName": "flushToFile",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 85,
                "columnNumber": 9
              },
              {
                "functionName": "",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 34,
                "columnNumber": 11
              }
            ]
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33156",
        "request": {
          "method": "POST",
          "url": "http://localhost:5173/api/logs",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "454"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/watch/tt26743210?stream=https%3A%2F%2Fsgp1-4.download.real-debrid.com%2Fd%2F7ZATI3Q7EVVUS75%2FHow.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv&quality=4K"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 1143,
          "bodySize": 454,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"logs\":[{\"timestamp\":\"2025-08-01T11:32:22.735Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:23.963Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:25.177Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:26.432Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"}]}"
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Vary",
              "value": "Origin"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "66"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Fri, 01 Aug 2025 11:32:27 GMT"
            },
            {
              "name": "etag",
              "value": "W/\"42-vzGgeyaTfqfjLv+1PhQ3UOG/z+s\""
            },
            {
              "name": "x-powered-by",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 66,
            "mimeType": "application/json",
            "compression": 0,
            "text": "{\"status\":\"ok\",\"message\":\"Logged 4 entries to app-2025-08-01.log\"}"
          },
          "redirectURL": "",
          "headersSize": 253,
          "bodySize": 66,
          "_transferSize": 319,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:27.552Z",
        "time": 12.617000003193505,
        "timings": {
          "blocked": 3.5709999927747993,
          "dns": 0.013000000000000012,
          "ssl": -1,
          "connect": 0.587,
          "send": 0.393,
          "wait": 5.122000000424683,
          "receive": 2.9310000099940225,
          "_blocked_queueing": 3.2669999927747995,
          "_workerStart": -2.83,
          "_workerReady": -2.361,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "sendLogBatch",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 50,
                "columnNumber": 12
              },
              {
                "functionName": "flushToFile",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 85,
                "columnNumber": 9
              },
              {
                "functionName": "",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 34,
                "columnNumber": 11
              }
            ]
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33182",
        "request": {
          "method": "POST",
          "url": "http://localhost:5173/api/logs",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "454"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/watch/tt26743210?stream=https%3A%2F%2Fsgp1-4.download.real-debrid.com%2Fd%2F7ZATI3Q7EVVUS75%2FHow.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv&quality=4K"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 1143,
          "bodySize": 454,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"logs\":[{\"timestamp\":\"2025-08-01T11:32:27.698Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:29.058Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:30.548Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:31.826Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"}]}"
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Vary",
              "value": "Origin"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "66"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Fri, 01 Aug 2025 11:32:32 GMT"
            },
            {
              "name": "etag",
              "value": "W/\"42-vzGgeyaTfqfjLv+1PhQ3UOG/z+s\""
            },
            {
              "name": "x-powered-by",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 66,
            "mimeType": "application/json",
            "compression": 0,
            "text": "{\"status\":\"ok\",\"message\":\"Logged 4 entries to app-2025-08-01.log\"}"
          },
          "redirectURL": "",
          "headersSize": 253,
          "bodySize": 66,
          "_transferSize": 319,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:32.554Z",
        "time": 28.301000006245452,
        "timings": {
          "blocked": 7.081000013142824,
          "dns": 0.020000000000000018,
          "ssl": -1,
          "connect": 1.0030000000000001,
          "send": 0.8719999999999999,
          "wait": 12.947000002156944,
          "receive": 6.377999990945682,
          "_blocked_queueing": 6.637000013142824,
          "_workerStart": -5.76,
          "_workerReady": -4.513,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "importUpdatedModule",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 814,
                "columnNumber": 43
              },
              {
                "functionName": "fetchUpdate",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 209,
                "columnNumber": 31
              },
              {
                "functionName": "queueUpdate",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 188,
                "columnNumber": 29
              },
              {
                "functionName": "",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 838,
                "columnNumber": 54
              },
              {
                "functionName": "handleMessage",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 837,
                "columnNumber": 37
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 458,
                  "columnNumber": 41
                },
                {
                  "functionName": "dequeue",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 480,
                  "columnNumber": 7
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 472,
                  "columnNumber": 8
                },
                {
                  "functionName": "enqueue",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 466,
                  "columnNumber": 9
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 458,
                  "columnNumber": 27
                },
                {
                  "functionName": "onMessage",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 305,
                  "columnNumber": 5
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 413,
                  "columnNumber": 4
                }
              ]
            }
          }
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047953225",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/@vite/client"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047953225"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Etag",
              "value": "W/\"208b-P22mn7opaW3tc8NY2n5Yphw3N2o\""
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Content-Length",
              "value": "26890"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:33 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 26890,
            "mimeType": "text/javascript",
            "text": "import { createHotContext as __vite__createHotContext } from \"/@vite/client\";import.meta.hot = __vite__createHotContext(\"/src/lib/video/StremioVideoPlayer.tsx\");import __vite__cjsImport0_react_jsxDevRuntime from \"/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=905c193d\"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime[\"jsxDEV\"];\nimport * as RefreshRuntime from \"/@react-refresh\";\nconst inWebWorker = typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope;\nlet prevRefreshReg;\nlet prevRefreshSig;\nif (import.meta.hot && !inWebWorker) {\n  if (!window.$RefreshReg$) {\n    throw new Error(\n      \"@vitejs/plugin-react can't detect preamble. Something is wrong.\"\n    );\n  }\n  prevRefreshReg = window.$RefreshReg$;\n  prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = RefreshRuntime.getRefreshReg(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\");\n  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport __vite__cjsImport3_react from \"/node_modules/.vite/deps/react.js?v=905c193d\"; const useEffect = __vite__cjsImport3_react[\"useEffect\"]; const useRef = __vite__cjsImport3_react[\"useRef\"]; const useImperativeHandle = __vite__cjsImport3_react[\"useImperativeHandle\"]; const forwardRef = __vite__cjsImport3_react[\"forwardRef\"];\nimport { StremioVideoSystem } from \"/src/lib/video/StremioVideoSystem.ts?t=1754047953225\";\nconst StremioVideoPlayer = _s(forwardRef(_c = _s((props, ref) => {\n  _s();\n  const containerRef = useRef(null);\n  const videoInstanceRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    dispatch: (action) => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.dispatch(action);\n      }\n    },\n    destroy: () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    }\n  }));\n  useEffect(() => {\n    if (!containerRef.current) {\n      console.warn(\"StremioVideoPlayer: Container element not ready\");\n      return;\n    }\n    console.log(\"StremioVideoPlayer: Initializing video system\");\n    videoInstanceRef.current = new StremioVideoSystem({\n      containerElement: containerRef.current\n    });\n    if (props.onPropChanged) {\n      videoInstanceRef.current.on(\"propChanged\", props.onPropChanged);\n    }\n    if (props.onError) {\n      videoInstanceRef.current.on(\"error\", props.onError);\n    }\n    if (props.onEnded) {\n      videoInstanceRef.current.on(\"ended\", props.onEnded);\n    }\n    const propsToObserve = [\n      \"loaded\",\n      \"paused\",\n      \"time\",\n      \"duration\",\n      \"buffering\",\n      \"buffered\",\n      \"volume\",\n      \"muted\",\n      \"playbackSpeed\",\n      \"audioTracks\",\n      \"subtitlesTracks\"\n    ];\n    propsToObserve.forEach((propName) => {\n      videoInstanceRef.current.dispatch({\n        type: \"observeProp\",\n        propName\n      });\n    });\n    return () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitleTrack) {\n      videoInstanceRef.current.loadSubtitleTrack(props.subtitleTrack);\n    } else {\n      videoInstanceRef.current.loadSubtitleTrack(null);\n    }\n  }, [props.subtitleTrack]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.stream !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"stream\",\n        propValue: props.stream\n      });\n    }\n  }, [props.stream]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.paused !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"paused\",\n        propValue: props.paused\n      });\n    }\n  }, [props.paused]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.time !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"time\",\n        propValue: props.time\n      });\n    }\n  }, [props.time]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.volume !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"volume\",\n        propValue: props.volume\n      });\n    }\n  }, [props.volume]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.muted !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"muted\",\n        propValue: props.muted\n      });\n    }\n  }, [props.muted]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.playbackSpeed !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"playbackSpeed\",\n        propValue: props.playbackSpeed\n      });\n    }\n  }, [props.playbackSpeed]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesSize !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesSize\",\n        propValue: props.subtitlesSize\n      });\n    }\n  }, [props.subtitlesSize]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOffset !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOffset\",\n        propValue: props.subtitlesOffset\n      });\n    }\n  }, [props.subtitlesOffset]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesTextColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesTextColor\",\n        propValue: props.subtitlesTextColor\n      });\n    }\n  }, [props.subtitlesTextColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesBackgroundColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesBackgroundColor\",\n        propValue: props.subtitlesBackgroundColor\n      });\n    }\n  }, [props.subtitlesBackgroundColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOutlineColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOutlineColor\",\n        propValue: props.subtitlesOutlineColor\n      });\n    }\n  }, [props.subtitlesOutlineColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOpacity !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOpacity\",\n        propValue: props.subtitlesOpacity\n      });\n    }\n  }, [props.subtitlesOpacity]);\n  return /* @__PURE__ */ jsxDEV(\n    \"div\",\n    {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: \"#000\",\n        ...props.style\n      },\n      className: props.className\n    },\n    void 0,\n    false,\n    {\n      fileName: \"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\",\n      lineNumber: 320,\n      columnNumber: 5\n    },\n    this\n  );\n}, \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\")), \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\");\n_c2 = StremioVideoPlayer;\nStremioVideoPlayer.displayName = \"StremioVideoPlayer\";\nexport default StremioVideoPlayer;\nvar _c, _c2;\n$RefreshReg$(_c, \"StremioVideoPlayer$forwardRef\");\n$RefreshReg$(_c2, \"StremioVideoPlayer\");\nif (import.meta.hot && !inWebWorker) {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}\nif (import.meta.hot && !inWebWorker) {\n  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {\n    RefreshRuntime.registerExportsForReactRefresh(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports);\n    import.meta.hot.accept((nextExports) => {\n      if (!nextExports) return;\n      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports, nextExports);\n      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);\n    });\n  });\n}\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6IkFBNFNJOzs7Ozs7Ozs7Ozs7Ozs7OztBQXpTSixTQUFnQkEsV0FBV0MsUUFBUUMscUJBQXFCQyxrQkFBa0I7QUFDMUUsU0FBU0MsMEJBQTBCO0FBeUVuQyxNQUFNQyxxQkFBa0JDLEdBQUdILFdBQTBESSxLQUFBRCxHQUFDLENBQUNFLE9BQU9DLFFBQVE7QUFBQUgsS0FBQTtBQUNwRyxRQUFNSSxlQUFlVCxPQUF1QixJQUFJO0FBQ2hELFFBQU1VLG1CQUFtQlYsT0FBWSxJQUFJO0FBRXpDQyxzQkFBb0JPLEtBQUssT0FBTztBQUFBLElBQzlCRyxVQUFVQSxDQUFDQyxXQUFnQjtBQUN6QixVQUFJRixpQkFBaUJHLFNBQVM7QUFDNUJILHlCQUFpQkcsUUFBUUYsU0FBU0MsTUFBTTtBQUFBLE1BQzFDO0FBQUEsSUFDRjtBQUFBLElBQ0FFLFNBQVNBLE1BQU07QUFDYixVQUFJSixpQkFBaUJHLFNBQVM7QUFDNUJILHlCQUFpQkcsUUFBUUMsUUFBUTtBQUNqQ0oseUJBQWlCRyxVQUFVO0FBQUEsTUFDN0I7QUFBQSxJQUNGO0FBQUEsRUFDRixFQUFFO0FBRUZkLFlBQVUsTUFBTTtBQUNkLFFBQUksQ0FBQ1UsYUFBYUksU0FBUztBQUN6QkUsY0FBUUMsS0FBSyxpREFBaUQ7QUFDOUQ7QUFBQSxJQUNGO0FBRUFELFlBQVFFLElBQUksK0NBQStDO0FBRzNEUCxxQkFBaUJHLFVBQVUsSUFBSVYsbUJBQW1CO0FBQUEsTUFDaERlLGtCQUFrQlQsYUFBYUk7QUFBQUEsSUFDakMsQ0FBQztBQUdELFFBQUlOLE1BQU1ZLGVBQWU7QUFDdkJULHVCQUFpQkcsUUFBUU8sR0FBRyxlQUFlYixNQUFNWSxhQUFhO0FBQUEsSUFDaEU7QUFFQSxRQUFJWixNQUFNYyxTQUFTO0FBQ2pCWCx1QkFBaUJHLFFBQVFPLEdBQUcsU0FBU2IsTUFBTWMsT0FBTztBQUFBLElBQ3BEO0FBRUEsUUFBSWQsTUFBTWUsU0FBUztBQUNqQlosdUJBQWlCRyxRQUFRTyxHQUFHLFNBQVNiLE1BQU1lLE9BQU87QUFBQSxJQUNwRDtBQUdBLFVBQU1DLGlCQUE0QztBQUFBLE1BQ2hEO0FBQUEsTUFBVTtBQUFBLE1BQVU7QUFBQSxNQUFRO0FBQUEsTUFBWTtBQUFBLE1BQWE7QUFBQSxNQUNyRDtBQUFBLE1BQVU7QUFBQSxNQUFTO0FBQUEsTUFBaUI7QUFBQSxNQUFlO0FBQUEsSUFBaUI7QUFHdEVBLG1CQUFlQyxRQUFRLENBQUFDLGFBQVk7QUFDakNmLHVCQUFpQkcsUUFBUUYsU0FBUztBQUFBLFFBQ2hDZSxNQUFNO0FBQUEsUUFDTkQ7QUFBQUEsTUFDRixDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsV0FBTyxNQUFNO0FBQ1gsVUFBSWYsaUJBQWlCRyxTQUFTO0FBQzVCSCx5QkFBaUJHLFFBQVFDLFFBQVE7QUFDakNKLHlCQUFpQkcsVUFBVTtBQUFBLE1BQzdCO0FBQUEsSUFDRjtBQUFBLEVBQ0YsR0FBRyxFQUFFO0FBR0xkLFlBQVUsTUFBTTtBQUNkLFFBQUksQ0FBQ1csaUJBQWlCRyxRQUFTO0FBRS9CLFFBQUlOLE1BQU1vQixlQUFlO0FBQ3ZCakIsdUJBQWlCRyxRQUFRZSxrQkFBa0JyQixNQUFNb0IsYUFBYTtBQUFBLElBQ2hFLE9BQU87QUFDTGpCLHVCQUFpQkcsUUFBUWUsa0JBQWtCLElBQUk7QUFBQSxJQUNqRDtBQUFBLEVBQ0YsR0FBRyxDQUFDckIsTUFBTW9CLGFBQWEsQ0FBQztBQUd4QjVCLFlBQVUsTUFBTTtBQUNkLFFBQUksQ0FBQ1csaUJBQWlCRyxRQUFTO0FBRS9CLFFBQUlOLE1BQU1zQixXQUFXQyxRQUFXO0FBQzlCcEIsdUJBQWlCRyxRQUFRRixTQUFTO0FBQUEsUUFDaENlLE1BQU07QUFBQSxRQUNORCxVQUFVO0FBQUEsUUFDVk0sV0FBV3hCLE1BQU1zQjtBQUFBQSxNQUNuQixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0YsR0FBRyxDQUFDdEIsTUFBTXNCLE1BQU0sQ0FBQztBQUVqQjlCLFlBQVUsTUFBTTtBQUNkLFFBQUksQ0FBQ1csaUJBQWlCRyxRQUFTO0FBRS9CLFFBQUlOLE1BQU15QixXQUFXRixRQUFXO0FBQzlCcEIsdUJBQWlCRyxRQUFRRixTQUFTO0FBQUEsUUFDaENlLE1BQU07QUFBQSxRQUNORCxVQUFVO0FBQUEsUUFDVk0sV0FBV3hCLE1BQU15QjtBQUFBQSxNQUNuQixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0YsR0FBRyxDQUFDekIsTUFBTXlCLE1BQU0sQ0FBQztBQUVqQmpDLFlBQVUsTUFBTTtBQUNkLFFBQUksQ0FBQ1csaUJBQWlCRyxRQUFTO0FBRS9CLFFBQUlOLE1BQU0wQixTQUFTSCxRQUFXO0FBQzVCcEIsdUJBQWlCRyxRQUFRRixTQUFTO0FBQUEsUUFDaENlLE1BQU07QUFBQSxRQUNORCxVQUFVO0FBQUEsUUFDVk0sV0FBV3hCLE1BQU0wQjtBQUFBQSxNQUNuQixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0YsR0FBRyxDQUFDMUIsTUFBTTBCLElBQUksQ0FBQztBQUVmbEMsWUFBVSxNQUFNO0FBQ2QsUUFBSSxDQUFDVyxpQkFBaUJHLFFBQVM7QUFFL0IsUUFBSU4sTUFBTTJCLFdBQVdKLFFBQVc7QUFDOUJwQix1QkFBaUJHLFFBQVFGLFNBQVM7QUFBQSxRQUNoQ2UsTUFBTTtBQUFBLFFBQ05ELFVBQVU7QUFBQSxRQUNWTSxXQUFXeEIsTUFBTTJCO0FBQUFBLE1BQ25CLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRixHQUFHLENBQUMzQixNQUFNMkIsTUFBTSxDQUFDO0FBRWpCbkMsWUFBVSxNQUFNO0FBQ2QsUUFBSSxDQUFDVyxpQkFBaUJHLFFBQVM7QUFFL0IsUUFBSU4sTUFBTTRCLFVBQVVMLFFBQVc7QUFDN0JwQix1QkFBaUJHLFFBQVFGLFNBQVM7QUFBQSxRQUNoQ2UsTUFBTTtBQUFBLFFBQ05ELFVBQVU7QUFBQSxRQUNWTSxXQUFXeEIsTUFBTTRCO0FBQUFBLE1BQ25CLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRixHQUFHLENBQUM1QixNQUFNNEIsS0FBSyxDQUFDO0FBRWhCcEMsWUFBVSxNQUFNO0FBQ2QsUUFBSSxDQUFDVyxpQkFBaUJHLFFBQVM7QUFFL0IsUUFBSU4sTUFBTTZCLGtCQUFrQk4sUUFBVztBQUNyQ3BCLHVCQUFpQkcsUUFBUUYsU0FBUztBQUFBLFFBQ2hDZSxNQUFNO0FBQUEsUUFDTkQsVUFBVTtBQUFBLFFBQ1ZNLFdBQVd4QixNQUFNNkI7QUFBQUEsTUFDbkIsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGLEdBQUcsQ0FBQzdCLE1BQU02QixhQUFhLENBQUM7QUFHeEJyQyxZQUFVLE1BQU07QUFDZCxRQUFJLENBQUNXLGlCQUFpQkcsUUFBUztBQUUvQixRQUFJTixNQUFNOEIsa0JBQWtCUCxRQUFXO0FBQ3JDcEIsdUJBQWlCRyxRQUFRRixTQUFTO0FBQUEsUUFDaENlLE1BQU07QUFBQSxRQUNORCxVQUFVO0FBQUEsUUFDVk0sV0FBV3hCLE1BQU04QjtBQUFBQSxNQUNuQixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0YsR0FBRyxDQUFDOUIsTUFBTThCLGFBQWEsQ0FBQztBQUV4QnRDLFlBQVUsTUFBTTtBQUNkLFFBQUksQ0FBQ1csaUJBQWlCRyxRQUFTO0FBRS9CLFFBQUlOLE1BQU0rQixvQkFBb0JSLFFBQVc7QUFDdkNwQix1QkFBaUJHLFFBQVFGLFNBQVM7QUFBQSxRQUNoQ2UsTUFBTTtBQUFBLFFBQ05ELFVBQVU7QUFBQSxRQUNWTSxXQUFXeEIsTUFBTStCO0FBQUFBLE1BQ25CLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRixHQUFHLENBQUMvQixNQUFNK0IsZUFBZSxDQUFDO0FBRTFCdkMsWUFBVSxNQUFNO0FBQ2QsUUFBSSxDQUFDVyxpQkFBaUJHLFFBQVM7QUFFL0IsUUFBSU4sTUFBTWdDLHVCQUF1QlQsUUFBVztBQUMxQ3BCLHVCQUFpQkcsUUFBUUYsU0FBUztBQUFBLFFBQ2hDZSxNQUFNO0FBQUEsUUFDTkQsVUFBVTtBQUFBLFFBQ1ZNLFdBQVd4QixNQUFNZ0M7QUFBQUEsTUFDbkIsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGLEdBQUcsQ0FBQ2hDLE1BQU1nQyxrQkFBa0IsQ0FBQztBQUU3QnhDLFlBQVUsTUFBTTtBQUNkLFFBQUksQ0FBQ1csaUJBQWlCRyxRQUFTO0FBRS9CLFFBQUlOLE1BQU1pQyw2QkFBNkJWLFFBQVc7QUFDaERwQix1QkFBaUJHLFFBQVFGLFNBQVM7QUFBQSxRQUNoQ2UsTUFBTTtBQUFBLFFBQ05ELFVBQVU7QUFBQSxRQUNWTSxXQUFXeEIsTUFBTWlDO0FBQUFBLE1BQ25CLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRixHQUFHLENBQUNqQyxNQUFNaUMsd0JBQXdCLENBQUM7QUFFbkN6QyxZQUFVLE1BQU07QUFDZCxRQUFJLENBQUNXLGlCQUFpQkcsUUFBUztBQUUvQixRQUFJTixNQUFNa0MsMEJBQTBCWCxRQUFXO0FBQzdDcEIsdUJBQWlCRyxRQUFRRixTQUFTO0FBQUEsUUFDaENlLE1BQU07QUFBQSxRQUNORCxVQUFVO0FBQUEsUUFDVk0sV0FBV3hCLE1BQU1rQztBQUFBQSxNQUNuQixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0YsR0FBRyxDQUFDbEMsTUFBTWtDLHFCQUFxQixDQUFDO0FBRWhDMUMsWUFBVSxNQUFNO0FBQ2QsUUFBSSxDQUFDVyxpQkFBaUJHLFFBQVM7QUFFL0IsUUFBSU4sTUFBTW1DLHFCQUFxQlosUUFBVztBQUN4Q3BCLHVCQUFpQkcsUUFBUUYsU0FBUztBQUFBLFFBQ2hDZSxNQUFNO0FBQUEsUUFDTkQsVUFBVTtBQUFBLFFBQ1ZNLFdBQVd4QixNQUFNbUM7QUFBQUEsTUFDbkIsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGLEdBQUcsQ0FBQ25DLE1BQU1tQyxnQkFBZ0IsQ0FBQztBQUUzQixTQUNFO0FBQUEsSUFBQztBQUFBO0FBQUEsTUFDQyxLQUFLakM7QUFBQUEsTUFDTCxPQUFPO0FBQUEsUUFDTGtDLFVBQVU7QUFBQSxRQUNWQyxPQUFPO0FBQUEsUUFDUEMsUUFBUTtBQUFBLFFBQ1JDLGlCQUFpQjtBQUFBLFFBQ2pCLEdBQUd2QyxNQUFNd0M7QUFBQUEsTUFDWDtBQUFBLE1BQ0EsV0FBV3hDLE1BQU15QztBQUFBQTtBQUFBQSxJQVRuQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFTNkI7QUFHakMsR0FBQyxrQ0FBQztBQUFDQyxNQTNPRzdDO0FBNk9OQSxtQkFBbUI4QyxjQUFjO0FBRWpDLGVBQWU5QztBQUFtQixJQUFBRSxJQUFBMkM7QUFBQUUsYUFBQTdDLElBQUE7QUFBQTZDLGFBQUFGLEtBQUEiLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIlN0cmVtaW9WaWRlb1N5c3RlbSIsIlN0cmVtaW9WaWRlb1BsYXllciIsIl9zIiwiX2MiLCJwcm9wcyIsInJlZiIsImNvbnRhaW5lclJlZiIsInZpZGVvSW5zdGFuY2VSZWYiLCJkaXNwYXRjaCIsImFjdGlvbiIsImN1cnJlbnQiLCJkZXN0cm95IiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJjb250YWluZXJFbGVtZW50Iiwib25Qcm9wQ2hhbmdlZCIsIm9uIiwib25FcnJvciIsIm9uRW5kZWQiLCJwcm9wc1RvT2JzZXJ2ZSIsImZvckVhY2giLCJwcm9wTmFtZSIsInR5cGUiLCJzdWJ0aXRsZVRyYWNrIiwibG9hZFN1YnRpdGxlVHJhY2siLCJzdHJlYW0iLCJ1bmRlZmluZWQiLCJwcm9wVmFsdWUiLCJwYXVzZWQiLCJ0aW1lIiwidm9sdW1lIiwibXV0ZWQiLCJwbGF5YmFja1NwZWVkIiwic3VidGl0bGVzU2l6ZSIsInN1YnRpdGxlc09mZnNldCIsInN1YnRpdGxlc1RleHRDb2xvciIsInN1YnRpdGxlc0JhY2tncm91bmRDb2xvciIsInN1YnRpdGxlc091dGxpbmVDb2xvciIsInN1YnRpdGxlc09wYWNpdHkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJjbGFzc05hbWUiLCJfYzIiLCJkaXNwbGF5TmFtZSIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJTdHJlbWlvVmlkZW9QbGF5ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWN0IFdyYXBwZXIgZm9yIFN0cmVtaW8gVmlkZW8gUGxheWVyXG4vLyBJbnRlZ3JhdGVzIFN0cmVtaW8ncyB2aWRlbyBhcmNoaXRlY3R1cmUgd2l0aCBSZWFjdFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUsIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHJlbWlvVmlkZW9TeXN0ZW0gfSBmcm9tICcuL1N0cmVtaW9WaWRlb1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9Qcm9wZXJ0aWVzIHtcbiAgc3RyZWFtPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9hZGVkPzogYm9vbGVhbjtcbiAgcGF1c2VkPzogYm9vbGVhbjtcbiAgdGltZT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIGJ1ZmZlcmluZz86IGJvb2xlYW47XG4gIGJ1ZmZlcmVkPzogVGltZVJhbmdlcyB8IG51bGw7XG4gIGF1ZGlvVHJhY2tzPzogQXVkaW9UcmFja1tdO1xuICBzZWxlY3RlZEF1ZGlvVHJhY2tJZD86IHN0cmluZyB8IG51bGw7XG4gIHN1YnRpdGxlc1RyYWNrcz86IFN1YnRpdGxlVHJhY2tbXTtcbiAgc2VsZWN0ZWRTdWJ0aXRsZXNUcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzT2Zmc2V0PzogbnVtYmVyO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNUZXh0Q29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzT3V0bGluZUNvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPcGFjaXR5PzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgLy8gQWRkaXRpb25hbCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZW1pb1ZpZGVvUGxheWVyUHJvcHMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgc3VidGl0bGVUcmFjaz86IFN1YnRpdGxlVHJhY2sgfCBudWxsO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIG9uUHJvcENoYW5nZWQ/OiAocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcbiAgb25FbmRlZD86ICgpID0+IHZvaWQ7XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVtaW9WaWRlb1BsYXllclJlZiB7XG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFN0cmVtaW9WaWRlb1BsYXllciA9IGZvcndhcmRSZWY8U3RyZW1pb1ZpZGVvUGxheWVyUmVmLCBTdHJlbWlvVmlkZW9QbGF5ZXJQcm9wcz4oKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgdmlkZW9JbnN0YW5jZVJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICBpZiAodmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kZXN0cm95KCk7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1N0cmVtaW9WaWRlb1BsYXllcjogQ29udGFpbmVyIGVsZW1lbnQgbm90IHJlYWR5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N0cmVtaW9WaWRlb1BsYXllcjogSW5pdGlhbGl6aW5nIHZpZGVvIHN5c3RlbScpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBTdHJlbWlvIHZpZGVvIHN5c3RlbSBpbnN0YW5jZVxuICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG5ldyBTdHJlbWlvVmlkZW9TeXN0ZW0oe1xuICAgICAgY29udGFpbmVyRWxlbWVudDogY29udGFpbmVyUmVmLmN1cnJlbnRcbiAgICB9KTtcblxuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICBpZiAocHJvcHMub25Qcm9wQ2hhbmdlZCkge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50Lm9uKCdwcm9wQ2hhbmdlZCcsIHByb3BzLm9uUHJvcENoYW5nZWQpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5vbkVycm9yKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQub24oJ2Vycm9yJywgcHJvcHMub25FcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm9uRW5kZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5vbignZW5kZWQnLCBwcm9wcy5vbkVuZGVkKTtcbiAgICB9XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBwcm9wZXJ0aWVzIHdlIGNhcmUgYWJvdXRcbiAgICBjb25zdCBwcm9wc1RvT2JzZXJ2ZTogKGtleW9mIFZpZGVvUHJvcGVydGllcylbXSA9IFtcbiAgICAgICdsb2FkZWQnLCAncGF1c2VkJywgJ3RpbWUnLCAnZHVyYXRpb24nLCAnYnVmZmVyaW5nJywgJ2J1ZmZlcmVkJyxcbiAgICAgICd2b2x1bWUnLCAnbXV0ZWQnLCAncGxheWJhY2tTcGVlZCcsICdhdWRpb1RyYWNrcycsICdzdWJ0aXRsZXNUcmFja3MnXG4gICAgXTtcblxuICAgIHByb3BzVG9PYnNlcnZlLmZvckVhY2gocHJvcE5hbWUgPT4ge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ29ic2VydmVQcm9wJyxcbiAgICAgICAgcHJvcE5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKTtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHN1YnRpdGxlIHRyYWNrIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnN1YnRpdGxlVHJhY2spIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5sb2FkU3VidGl0bGVUcmFjayhwcm9wcy5zdWJ0aXRsZVRyYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmxvYWRTdWJ0aXRsZVRyYWNrKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlVHJhY2tdKTtcblxuICAvLyBVcGRhdGUgdmlkZW8gcHJvcGVydGllcyB3aGVuIHByb3BzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdzdHJlYW0nLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN0cmVhbVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcHJvcHMuc3RyZWFtXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnBhdXNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAncGF1c2VkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wYXVzZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnBhdXNlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy50aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICd0aW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy50aW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy50aW1lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnZvbHVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAndm9sdW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy52b2x1bWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnZvbHVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5tdXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnbXV0ZWQnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLm11dGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5tdXRlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5wbGF5YmFja1NwZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdwbGF5YmFja1NwZWVkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wbGF5YmFja1NwZWVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5wbGF5YmFja1NwZWVkXSk7XG5cbiAgLy8gU3VidGl0bGUgc3R5bGluZyBwcm9wZXJ0aWVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5zdWJ0aXRsZXNTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1NpemUnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN1YnRpdGxlc1NpemVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlc1NpemVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc09mZnNldCcsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT2Zmc2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPZmZzZXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzVGV4dENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1RleHRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzVGV4dENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNUZXh0Q29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPdXRsaW5lQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCcsXG4gICAgICAgIC4uLnByb3BzLnN0eWxlXG4gICAgICB9fVxuICAgICAgY2xhc3NOYW1lPXtwcm9wcy5jbGFzc05hbWV9XG4gICAgLz5cbiAgKTtcbn0pO1xuXG5TdHJlbWlvVmlkZW9QbGF5ZXIuZGlzcGxheU5hbWUgPSAnU3RyZW1pb1ZpZGVvUGxheWVyJztcblxuZXhwb3J0IGRlZmF1bHQgU3RyZW1pb1ZpZGVvUGxheWVyOyJdLCJmaWxlIjoiL2hvbWUvY2F1bGxlbi9HaXRIdWIvc3RyZW1pby1uZXRmbGl4L3NyYy9saWIvdmlkZW8vU3RyZW1pb1ZpZGVvUGxheWVyLnRzeCJ9"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_serviceWorkerResponseSource": "network"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-08-01T11:32:33.227Z",
        "time": 17.07999999052845,
        "timings": {
          "blocked": 0.5229999993843958,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.0010000000000000009,
          "wait": 16.45199999959208,
          "receive": 0.10399999155197293,
          "_blocked_queueing": 0.5139999993843958,
          "_workerStart": 0.006,
          "_workerReady": 0.629,
          "_workerFetchStart": 0.629,
          "_workerRespondWithSettled": 16.284
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "fetchAndCache",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 153,
                "columnNumber": 25
              },
              {
                "functionName": "handleRequest",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 125,
                "columnNumber": 17
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "3",
                  "url": "http://localhost:5173/sw.js",
                  "lineNumber": 112,
                  "columnNumber": 19
                }
              ],
              "parentId": {
                "id": "68",
                "debuggerId": "7421023915332866740.7548517216261379378"
              }
            }
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33193",
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047953225",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/@vite/client"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047953225"
            }
          ],
          "cookies": [],
          "headersSize": 963,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "26890"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:33 GMT"
            },
            {
              "name": "Etag",
              "value": "W/\"208b-P22mn7opaW3tc8NY2n5Yphw3N2o\""
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 26890,
            "mimeType": "text/javascript",
            "compression": 0,
            "text": "import { createHotContext as __vite__createHotContext } from \"/@vite/client\";import.meta.hot = __vite__createHotContext(\"/src/lib/video/StremioVideoPlayer.tsx\");import __vite__cjsImport0_react_jsxDevRuntime from \"/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=905c193d\"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime[\"jsxDEV\"];\nimport * as RefreshRuntime from \"/@react-refresh\";\nconst inWebWorker = typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope;\nlet prevRefreshReg;\nlet prevRefreshSig;\nif (import.meta.hot && !inWebWorker) {\n  if (!window.$RefreshReg$) {\n    throw new Error(\n      \"@vitejs/plugin-react can't detect preamble. Something is wrong.\"\n    );\n  }\n  prevRefreshReg = window.$RefreshReg$;\n  prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = RefreshRuntime.getRefreshReg(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\");\n  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport __vite__cjsImport3_react from \"/node_modules/.vite/deps/react.js?v=905c193d\"; const useEffect = __vite__cjsImport3_react[\"useEffect\"]; const useRef = __vite__cjsImport3_react[\"useRef\"]; const useImperativeHandle = __vite__cjsImport3_react[\"useImperativeHandle\"]; const forwardRef = __vite__cjsImport3_react[\"forwardRef\"];\nimport { StremioVideoSystem } from \"/src/lib/video/StremioVideoSystem.ts?t=1754047953225\";\nconst StremioVideoPlayer = _s(forwardRef(_c = _s((props, ref) => {\n  _s();\n  const containerRef = useRef(null);\n  const videoInstanceRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    dispatch: (action) => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.dispatch(action);\n      }\n    },\n    destroy: () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    }\n  }));\n  useEffect(() => {\n    if (!containerRef.current) {\n      console.warn(\"StremioVideoPlayer: Container element not ready\");\n      return;\n    }\n    console.log(\"StremioVideoPlayer: Initializing video system\");\n    videoInstanceRef.current = new StremioVideoSystem({\n      containerElement: containerRef.current\n    });\n    if (props.onPropChanged) {\n      videoInstanceRef.current.on(\"propChanged\", props.onPropChanged);\n    }\n    if (props.onError) {\n      videoInstanceRef.current.on(\"error\", props.onError);\n    }\n    if (props.onEnded) {\n      videoInstanceRef.current.on(\"ended\", props.onEnded);\n    }\n    const propsToObserve = [\n      \"loaded\",\n      \"paused\",\n      \"time\",\n      \"duration\",\n      \"buffering\",\n      \"buffered\",\n      \"volume\",\n      \"muted\",\n      \"playbackSpeed\",\n      \"audioTracks\",\n      \"subtitlesTracks\"\n    ];\n    propsToObserve.forEach((propName) => {\n      videoInstanceRef.current.dispatch({\n        type: \"observeProp\",\n        propName\n      });\n    });\n    return () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitleTrack) {\n      videoInstanceRef.current.loadSubtitleTrack(props.subtitleTrack);\n    } else {\n      videoInstanceRef.current.loadSubtitleTrack(null);\n    }\n  }, [props.subtitleTrack]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.stream !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"stream\",\n        propValue: props.stream\n      });\n    }\n  }, [props.stream]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.paused !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"paused\",\n        propValue: props.paused\n      });\n    }\n  }, [props.paused]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.time !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"time\",\n        propValue: props.time\n      });\n    }\n  }, [props.time]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.volume !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"volume\",\n        propValue: props.volume\n      });\n    }\n  }, [props.volume]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.muted !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"muted\",\n        propValue: props.muted\n      });\n    }\n  }, [props.muted]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.playbackSpeed !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"playbackSpeed\",\n        propValue: props.playbackSpeed\n      });\n    }\n  }, [props.playbackSpeed]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesSize !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesSize\",\n        propValue: props.subtitlesSize\n      });\n    }\n  }, [props.subtitlesSize]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOffset !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOffset\",\n        propValue: props.subtitlesOffset\n      });\n    }\n  }, [props.subtitlesOffset]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesTextColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesTextColor\",\n        propValue: props.subtitlesTextColor\n      });\n    }\n  }, [props.subtitlesTextColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesBackgroundColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesBackgroundColor\",\n        propValue: props.subtitlesBackgroundColor\n      });\n    }\n  }, [props.subtitlesBackgroundColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOutlineColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOutlineColor\",\n        propValue: props.subtitlesOutlineColor\n      });\n    }\n  }, [props.subtitlesOutlineColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOpacity !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOpacity\",\n        propValue: props.subtitlesOpacity\n      });\n    }\n  }, [props.subtitlesOpacity]);\n  return /* @__PURE__ */ jsxDEV(\n    \"div\",\n    {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: \"#000\",\n        ...props.style\n      },\n      className: props.className\n    },\n    void 0,\n    false,\n    {\n      fileName: \"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\",\n      lineNumber: 320,\n      columnNumber: 5\n    },\n    this\n  );\n}, \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\")), \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\");\n_c2 = StremioVideoPlayer;\nStremioVideoPlayer.displayName = \"StremioVideoPlayer\";\nexport default StremioVideoPlayer;\nvar _c, _c2;\n$RefreshReg$(_c, \"StremioVideoPlayer$forwardRef\");\n$RefreshReg$(_c2, \"StremioVideoPlayer\");\nif (import.meta.hot && !inWebWorker) {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}\nif (import.meta.hot && !inWebWorker) {\n  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {\n    RefreshRuntime.registerExportsForReactRefresh(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports);\n    import.meta.hot.accept((nextExports) => {\n      if (!nextExports) return;\n      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports, nextExports);\n      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);\n    });\n  });\n}\n\n//# sourceMappingURL=data:application/json;base64,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O0FBQUEsRUFTNkI7QUFHakMsR0FBQyxrQ0FBQztBQUFDQyxNQTNPRzdDO0FBNk9OQSxtQkFBbUI4QyxjQUFjO0FBRWpDLGVBQWU5QztBQUFtQixJQUFBRSxJQUFBMkM7QUFBQUUsYUFBQTdDLElBQUE7QUFBQTZDLGFBQUFGLEtBQUEiLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIlN0cmVtaW9WaWRlb1N5c3RlbSIsIlN0cmVtaW9WaWRlb1BsYXllciIsIl9zIiwiX2MiLCJwcm9wcyIsInJlZiIsImNvbnRhaW5lclJlZiIsInZpZGVvSW5zdGFuY2VSZWYiLCJkaXNwYXRjaCIsImFjdGlvbiIsImN1cnJlbnQiLCJkZXN0cm95IiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJjb250YWluZXJFbGVtZW50Iiwib25Qcm9wQ2hhbmdlZCIsIm9uIiwib25FcnJvciIsIm9uRW5kZWQiLCJwcm9wc1RvT2JzZXJ2ZSIsImZvckVhY2giLCJwcm9wTmFtZSIsInR5cGUiLCJzdWJ0aXRsZVRyYWNrIiwibG9hZFN1YnRpdGxlVHJhY2siLCJzdHJlYW0iLCJ1bmRlZmluZWQiLCJwcm9wVmFsdWUiLCJwYXVzZWQiLCJ0aW1lIiwidm9sdW1lIiwibXV0ZWQiLCJwbGF5YmFja1NwZWVkIiwic3VidGl0bGVzU2l6ZSIsInN1YnRpdGxlc09mZnNldCIsInN1YnRpdGxlc1RleHRDb2xvciIsInN1YnRpdGxlc0JhY2tncm91bmRDb2xvciIsInN1YnRpdGxlc091dGxpbmVDb2xvciIsInN1YnRpdGxlc09wYWNpdHkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJjbGFzc05hbWUiLCJfYzIiLCJkaXNwbGF5TmFtZSIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJTdHJlbWlvVmlkZW9QbGF5ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWN0IFdyYXBwZXIgZm9yIFN0cmVtaW8gVmlkZW8gUGxheWVyXG4vLyBJbnRlZ3JhdGVzIFN0cmVtaW8ncyB2aWRlbyBhcmNoaXRlY3R1cmUgd2l0aCBSZWFjdFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUsIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHJlbWlvVmlkZW9TeXN0ZW0gfSBmcm9tICcuL1N0cmVtaW9WaWRlb1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9Qcm9wZXJ0aWVzIHtcbiAgc3RyZWFtPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9hZGVkPzogYm9vbGVhbjtcbiAgcGF1c2VkPzogYm9vbGVhbjtcbiAgdGltZT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIGJ1ZmZlcmluZz86IGJvb2xlYW47XG4gIGJ1ZmZlcmVkPzogVGltZVJhbmdlcyB8IG51bGw7XG4gIGF1ZGlvVHJhY2tzPzogQXVkaW9UcmFja1tdO1xuICBzZWxlY3RlZEF1ZGlvVHJhY2tJZD86IHN0cmluZyB8IG51bGw7XG4gIHN1YnRpdGxlc1RyYWNrcz86IFN1YnRpdGxlVHJhY2tbXTtcbiAgc2VsZWN0ZWRTdWJ0aXRsZXNUcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzT2Zmc2V0PzogbnVtYmVyO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNUZXh0Q29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzT3V0bGluZUNvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPcGFjaXR5PzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgLy8gQWRkaXRpb25hbCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZW1pb1ZpZGVvUGxheWVyUHJvcHMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgc3VidGl0bGVUcmFjaz86IFN1YnRpdGxlVHJhY2sgfCBudWxsO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIG9uUHJvcENoYW5nZWQ/OiAocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcbiAgb25FbmRlZD86ICgpID0+IHZvaWQ7XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVtaW9WaWRlb1BsYXllclJlZiB7XG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFN0cmVtaW9WaWRlb1BsYXllciA9IGZvcndhcmRSZWY8U3RyZW1pb1ZpZGVvUGxheWVyUmVmLCBTdHJlbWlvVmlkZW9QbGF5ZXJQcm9wcz4oKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgdmlkZW9JbnN0YW5jZVJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICBpZiAodmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kZXN0cm95KCk7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1N0cmVtaW9WaWRlb1BsYXllcjogQ29udGFpbmVyIGVsZW1lbnQgbm90IHJlYWR5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N0cmVtaW9WaWRlb1BsYXllcjogSW5pdGlhbGl6aW5nIHZpZGVvIHN5c3RlbScpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBTdHJlbWlvIHZpZGVvIHN5c3RlbSBpbnN0YW5jZVxuICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG5ldyBTdHJlbWlvVmlkZW9TeXN0ZW0oe1xuICAgICAgY29udGFpbmVyRWxlbWVudDogY29udGFpbmVyUmVmLmN1cnJlbnRcbiAgICB9KTtcblxuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICBpZiAocHJvcHMub25Qcm9wQ2hhbmdlZCkge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50Lm9uKCdwcm9wQ2hhbmdlZCcsIHByb3BzLm9uUHJvcENoYW5nZWQpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5vbkVycm9yKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQub24oJ2Vycm9yJywgcHJvcHMub25FcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm9uRW5kZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5vbignZW5kZWQnLCBwcm9wcy5vbkVuZGVkKTtcbiAgICB9XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBwcm9wZXJ0aWVzIHdlIGNhcmUgYWJvdXRcbiAgICBjb25zdCBwcm9wc1RvT2JzZXJ2ZTogKGtleW9mIFZpZGVvUHJvcGVydGllcylbXSA9IFtcbiAgICAgICdsb2FkZWQnLCAncGF1c2VkJywgJ3RpbWUnLCAnZHVyYXRpb24nLCAnYnVmZmVyaW5nJywgJ2J1ZmZlcmVkJyxcbiAgICAgICd2b2x1bWUnLCAnbXV0ZWQnLCAncGxheWJhY2tTcGVlZCcsICdhdWRpb1RyYWNrcycsICdzdWJ0aXRsZXNUcmFja3MnXG4gICAgXTtcblxuICAgIHByb3BzVG9PYnNlcnZlLmZvckVhY2gocHJvcE5hbWUgPT4ge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ29ic2VydmVQcm9wJyxcbiAgICAgICAgcHJvcE5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKTtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHN1YnRpdGxlIHRyYWNrIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnN1YnRpdGxlVHJhY2spIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5sb2FkU3VidGl0bGVUcmFjayhwcm9wcy5zdWJ0aXRsZVRyYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmxvYWRTdWJ0aXRsZVRyYWNrKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlVHJhY2tdKTtcblxuICAvLyBVcGRhdGUgdmlkZW8gcHJvcGVydGllcyB3aGVuIHByb3BzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdzdHJlYW0nLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN0cmVhbVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcHJvcHMuc3RyZWFtXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnBhdXNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAncGF1c2VkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wYXVzZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnBhdXNlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy50aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICd0aW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy50aW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy50aW1lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnZvbHVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAndm9sdW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy52b2x1bWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnZvbHVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5tdXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnbXV0ZWQnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLm11dGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5tdXRlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5wbGF5YmFja1NwZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdwbGF5YmFja1NwZWVkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wbGF5YmFja1NwZWVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5wbGF5YmFja1NwZWVkXSk7XG5cbiAgLy8gU3VidGl0bGUgc3R5bGluZyBwcm9wZXJ0aWVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5zdWJ0aXRsZXNTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1NpemUnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN1YnRpdGxlc1NpemVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlc1NpemVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc09mZnNldCcsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT2Zmc2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPZmZzZXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzVGV4dENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1RleHRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzVGV4dENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNUZXh0Q29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPdXRsaW5lQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCcsXG4gICAgICAgIC4uLnByb3BzLnN0eWxlXG4gICAgICB9fVxuICAgICAgY2xhc3NOYW1lPXtwcm9wcy5jbGFzc05hbWV9XG4gICAgLz5cbiAgKTtcbn0pO1xuXG5TdHJlbWlvVmlkZW9QbGF5ZXIuZGlzcGxheU5hbWUgPSAnU3RyZW1pb1ZpZGVvUGxheWVyJztcblxuZXhwb3J0IGRlZmF1bHQgU3RyZW1pb1ZpZGVvUGxheWVyOyJdLCJmaWxlIjoiL2hvbWUvY2F1bGxlbi9HaXRIdWIvc3RyZW1pby1uZXRmbGl4L3NyYy9saWIvdmlkZW8vU3RyZW1pb1ZpZGVvUGxheWVyLnRzeCJ9"
          },
          "redirectURL": "",
          "headersSize": 292,
          "bodySize": 26890,
          "_transferSize": 27182,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:33.229Z",
        "time": 8.347999992025084,
        "timings": {
          "blocked": 2.055999996319413,
          "dns": 0.01100000000000001,
          "ssl": -1,
          "connect": 0.324,
          "send": 0.17500000000000004,
          "wait": 2.3640000027436763,
          "receive": 3.4179999929619953,
          "_blocked_queueing": 1.7729999963194132,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047953225",
          "lineNumber": 18
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoSystem.ts?t=1754047953225",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047953225"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047953225"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Etag",
              "value": "W/\"64fa-46arnhEKGIlpNQfdDG2pPdorfjE\""
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Content-Length",
              "value": "89897"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:33 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 89897,
            "mimeType": "text/javascript",
            "text": "import { LogCategory, logInfo, logError, logDebug, logWarn } from \"/src/lib/utils/logger.ts\";\nexport class StremioVideoSystem {\n  containerElement;\n  videoElement = null;\n  subtitlesContainer = null;\n  subtitlesElement = null;\n  hlsInstance = null;\n  observedProps = {};\n  eventListeners = {};\n  // State\n  currentStream = null;\n  currentSubtitleTrack = null;\n  subtitlesData = [];\n  destroyed = false;\n  // Subtitle settings\n  extraSubtitlesSize = 25;\n  extraSubtitlesOffset = 0;\n  extraSubtitlesTextColor = \"#FFFFFF\";\n  extraSubtitlesBackgroundColor = \"rgba(0, 0, 0, 0.7)\";\n  extraSubtitlesOutlineColor = \"#000000\";\n  extraSubtitlesOpacity = 100;\n  extraSubtitlesDelay = 0;\n  constructor(options) {\n    this.containerElement = options.containerElement;\n    this.initializeContainer();\n  }\n  initializeContainer() {\n    this.containerElement.style.position = \"relative\";\n    this.containerElement.style.width = \"100%\";\n    this.containerElement.style.height = \"100%\";\n    this.containerElement.style.backgroundColor = \"#000\";\n  }\n  createVideoElement() {\n    if (this.videoElement) return;\n    logInfo(LogCategory.PLAYER, \"Creating new video element\");\n    this.videoElement = document.createElement(\"video\");\n    this.videoElement.style.width = \"100%\";\n    this.videoElement.style.height = \"100%\";\n    this.videoElement.style.backgroundColor = \"transparent\";\n    this.videoElement.controls = false;\n    this.videoElement.preload = \"auto\";\n    this.videoElement.playsInline = true;\n    if (\"bufferTime\" in this.videoElement) {\n      this.videoElement.bufferTime = 10;\n    }\n    this.containerElement.appendChild(this.videoElement);\n    this.setupVideoEventListeners();\n  }\n  setupVideoEventListeners() {\n    if (!this.videoElement) return;\n    this.videoElement.addEventListener(\"loadstart\", () => {\n      logDebug(LogCategory.PLAYER, \"Video loadstart event\");\n      this.emitPropChanged(\"loaded\", false);\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"loadedmetadata\", () => {\n      if (!this.videoElement) return;\n      logInfo(LogCategory.PLAYER, \"Video loadedmetadata event\", {\n        duration: this.videoElement.duration,\n        durationFormatted: `${Math.floor(this.videoElement.duration / 60)}:${Math.floor(this.videoElement.duration % 60).toString().padStart(2, \"0\")}`\n      });\n      this.emitPropChanged(\"loaded\", true);\n      this.emitPropChanged(\"duration\", this.videoElement.duration * 1e3);\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"timeupdate\", () => {\n      if (!this.videoElement) return;\n      const time = this.videoElement.currentTime * 1e3;\n      this.emitPropChanged(\"time\", time);\n      this.renderSubtitles(time);\n    });\n    this.videoElement.addEventListener(\"play\", () => {\n      this.emitPropChanged(\"paused\", false);\n    });\n    this.videoElement.addEventListener(\"pause\", () => {\n      this.emitPropChanged(\"paused\", true);\n    });\n    this.videoElement.addEventListener(\"waiting\", () => {\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"canplay\", () => {\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"progress\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"buffered\", this.videoElement.buffered);\n    });\n    this.videoElement.addEventListener(\"volumechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"volume\", Math.floor(this.videoElement.volume * 100));\n      this.emitPropChanged(\"muted\", this.videoElement.muted);\n    });\n    this.videoElement.addEventListener(\"ratechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"playbackSpeed\", this.videoElement.playbackRate);\n    });\n    this.videoElement.addEventListener(\"ended\", () => {\n      this.emit(\"ended\");\n    });\n    this.videoElement.addEventListener(\"error\", () => {\n      if (!this.videoElement) return;\n      const error = this.videoElement.error;\n      if (error) {\n        logError(LogCategory.PLAYER, \"Video playback error\", {\n          code: error.code,\n          message: error.message,\n          streamUrl: this.currentStream\n        });\n        this.emit(\"error\", {\n          critical: true,\n          message: `Video error: ${error.message}`,\n          code: error.code\n        });\n      }\n    });\n  }\n  createSubtitlesContainer() {\n    if (this.subtitlesContainer) return;\n    this.subtitlesContainer = document.createElement(\"div\");\n    this.subtitlesContainer.style.position = \"absolute\";\n    this.subtitlesContainer.style.left = \"0\";\n    this.subtitlesContainer.style.top = \"0\";\n    this.subtitlesContainer.style.width = \"100%\";\n    this.subtitlesContainer.style.height = \"100%\";\n    this.subtitlesContainer.style.pointerEvents = \"none\";\n    this.subtitlesContainer.style.zIndex = \"1000\";\n    this.subtitlesContainer.style.display = \"flex\";\n    this.subtitlesContainer.style.flexDirection = \"column\";\n    this.subtitlesContainer.style.justifyContent = \"flex-end\";\n    this.subtitlesContainer.style.alignItems = \"center\";\n    this.subtitlesContainer.style.overflow = \"hidden\";\n    this.containerElement.appendChild(this.subtitlesContainer);\n  }\n  renderSubtitles(currentTime) {\n    if (!this.subtitlesData.length || !this.currentSubtitleTrack) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    const adjustedTime = currentTime + this.extraSubtitlesDelay;\n    const activeCues = this.subtitlesData.filter(\n      (cue) => adjustedTime >= cue.startTime && adjustedTime <= cue.endTime\n    );\n    if (activeCues.length === 0) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    this.createSubtitlesContainer();\n    if (!this.subtitlesElement) {\n      this.subtitlesElement = document.createElement(\"div\");\n      this.subtitlesElement.style.position = \"relative\";\n      this.subtitlesElement.style.maxWidth = \"90%\";\n      this.subtitlesElement.style.textAlign = \"center\";\n      this.subtitlesElement.style.fontFamily = \"Arial, sans-serif\";\n      this.subtitlesElement.style.fontWeight = \"bold\";\n      this.subtitlesElement.style.lineHeight = \"1.2\";\n      this.subtitlesElement.style.wordWrap = \"break-word\";\n      this.subtitlesElement.style.whiteSpace = \"pre-wrap\";\n      this.subtitlesContainer.appendChild(this.subtitlesElement);\n    }\n    while (this.subtitlesElement.firstChild) {\n      this.subtitlesElement.removeChild(this.subtitlesElement.firstChild);\n    }\n    activeCues.forEach((cue) => {\n      const cueElement = document.createElement(\"div\");\n      cueElement.textContent = cue.text;\n      this.styleSubtitleElement(cueElement);\n      this.subtitlesElement.appendChild(cueElement);\n    });\n  }\n  styleSubtitleElement(element) {\n    const fontSize = Math.floor(this.extraSubtitlesSize / 25 * 3.5) + \"vmin\";\n    const opacity = this.extraSubtitlesOpacity / 100;\n    element.style.fontSize = fontSize;\n    element.style.opacity = opacity.toString();\n    element.style.color = this.extraSubtitlesTextColor;\n    element.style.backgroundColor = this.extraSubtitlesBackgroundColor;\n    element.style.padding = \"0.2em 0.4em\";\n    element.style.borderRadius = \"0.2em\";\n    element.style.margin = \"0.1em\";\n    element.style.display = \"inline-block\";\n    const outlineWidth = \"0.15rem\";\n    element.style.textShadow = [\n      `-${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`\n    ].join(\", \");\n    if (this.extraSubtitlesOffset !== 0) {\n      const offsetPercent = this.extraSubtitlesOffset + \"%\";\n      element.style.transform = `translateY(${offsetPercent})`;\n    }\n  }\n  removeSubtitlesElement() {\n    if (this.subtitlesElement && this.subtitlesElement.parentNode) {\n      this.subtitlesElement.parentNode.removeChild(this.subtitlesElement);\n      this.subtitlesElement = null;\n    }\n  }\n  async loadSubtitles(track) {\n    if (!track || !track.url) {\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n      return;\n    }\n    try {\n      const proxyUrl = `/api/subtitles?url=${encodeURIComponent(track.url)}`;\n      logInfo(LogCategory.STREAM, \"Loading subtitles via proxy\", { url: proxyUrl });\n      const response = await fetch(proxyUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to load subtitles: ${response.status}`);\n      }\n      const text = await response.text();\n      this.subtitlesData = this.parseSubtitles(text);\n      this.currentSubtitleTrack = track;\n      logInfo(LogCategory.STREAM, \"Subtitles loaded successfully\", {\n        cuesTotal: this.subtitlesData.length,\n        language: track.language || track.id\n      });\n    } catch (error) {\n      logError(LogCategory.STREAM, \"Subtitle loading failed\", {\n        url: track.url,\n        language: track.language || track.id\n      }, error);\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n    }\n  }\n  parseSubtitles(text) {\n    const cues = [];\n    if (text.includes(\"WEBVTT\")) {\n      logDebug(LogCategory.STREAM, \"Parsing WebVTT subtitles\");\n      const blocks = text.split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 2) {\n          const timeLineIndex = lines.findIndex((line) => line.includes(\"-->\"));\n          if (timeLineIndex >= 0) {\n            const timeLine = lines[timeLineIndex];\n            const textLines = lines.slice(timeLineIndex + 1);\n            const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})/);\n            if (timeMatch) {\n              const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n              const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n              cues.push({\n                startTime,\n                endTime,\n                text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n                // Remove HTML tags\n              });\n            }\n          }\n        }\n      });\n    } else if (text.includes(\"-->\")) {\n      logDebug(LogCategory.STREAM, \"Parsing SRT subtitles\");\n      const blocks = text.trim().split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 3) {\n          const timeLine = lines[1];\n          const textLines = lines.slice(2);\n          const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/);\n          if (timeMatch) {\n            const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n            const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n            cues.push({\n              startTime,\n              endTime,\n              text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n              // Remove HTML tags\n            });\n          }\n        }\n      });\n    }\n    logDebug(LogCategory.STREAM, \"Subtitle parsing completed\", { cuesTotal: cues.length });\n    return cues;\n  }\n  shouldUseHLS(streamUrl) {\n    return streamUrl.includes(\".m3u8\") || typeof window !== \"undefined\" && window.Hls?.isSupported() && !this.videoElement.canPlayType(\"application/vnd.apple.mpegurl\");\n  }\n  setupHLS(streamUrl) {\n    if (typeof window !== \"undefined\" && window.Hls?.isSupported()) {\n      const Hls = window.Hls;\n      this.hlsInstance = new Hls({\n        debug: false,\n        enableWorker: true,\n        lowLatencyMode: false,\n        backBufferLength: 30,\n        maxBufferLength: 50,\n        maxMaxBufferLength: 80,\n        maxFragLookUpTolerance: 0,\n        maxBufferHole: 0,\n        appendErrorMaxRetry: 20,\n        nudgeMaxRetry: 20,\n        manifestLoadingTimeOut: 3e4,\n        manifestLoadingMaxRetry: 10,\n        fragLoadPolicy: {\n          default: {\n            maxTimeToFirstByteMs: 1e4,\n            maxLoadTimeMs: 12e4,\n            timeoutRetry: {\n              maxNumRetry: 20,\n              retryDelayMs: 0,\n              maxRetryDelayMs: 15\n            },\n            errorRetry: {\n              maxNumRetry: 6,\n              retryDelayMs: 1e3,\n              maxRetryDelayMs: 15\n            }\n          }\n        }\n      });\n      this.hlsInstance.loadSource(streamUrl);\n      this.hlsInstance.attachMedia(this.videoElement);\n      this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {\n        this.updateAudioTracks();\n      });\n      this.hlsInstance.on(Hls.Events.ERROR, (_event, data) => {\n        if (data.fatal) {\n          this.emit(\"error\", {\n            critical: true,\n            message: `HLS Error: ${data.type} - ${data.details}`\n          });\n        }\n      });\n    } else {\n      this.videoElement.src = streamUrl;\n    }\n  }\n  updateAudioTracks() {\n    if (this.hlsInstance && this.hlsInstance.audioTracks) {\n      const tracks = this.hlsInstance.audioTracks.map((track, index) => ({\n        id: index.toString(),\n        name: track.name || `Track ${index + 1}`,\n        language: track.lang\n      }));\n      this.emitPropChanged(\"audioTracks\", tracks);\n    }\n  }\n  emitPropChanged(propName, propValue) {\n    if (this.observedProps[propName]) {\n      this.emit(\"propChanged\", propName, propValue);\n    }\n  }\n  emit(event, ...args) {\n    if (this.eventListeners[event]) {\n      this.eventListeners[event].forEach((listener) => listener(...args));\n    }\n  }\n  // Public API\n  on(event, listener) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [];\n    }\n    this.eventListeners[event].push(listener);\n  }\n  dispatch(action) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    switch (action.type) {\n      case \"observeProp\":\n        if (action.propName) {\n          this.observedProps[action.propName] = true;\n          this.emitCurrentProp(action.propName);\n        }\n        break;\n      case \"setProp\":\n        if (action.propName && action.propValue !== void 0) {\n          this.setProp(action.propName, action.propValue);\n        }\n        break;\n      case \"command\":\n        if (action.commandName) {\n          this.executeCommand(action.commandName, action.commandArgs);\n        }\n        break;\n    }\n  }\n  emitCurrentProp(propName) {\n    switch (propName) {\n      case \"loaded\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.readyState >= 1);\n        break;\n      case \"paused\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.paused);\n        break;\n      case \"time\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.currentTime * 1e3 : null);\n        break;\n      case \"duration\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.duration ? this.videoElement.duration * 1e3 : null);\n        break;\n      case \"buffering\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.readyState < 3);\n        break;\n      case \"buffered\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.buffered : null);\n        break;\n      case \"volume\":\n        this.emitPropChanged(propName, this.videoElement ? Math.floor(this.videoElement.volume * 100) : 100);\n        break;\n      case \"muted\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.muted : false);\n        break;\n      case \"playbackSpeed\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.playbackRate : 1);\n        break;\n    }\n  }\n  setProp(propName, propValue) {\n    switch (propName) {\n      case \"stream\":\n        if (propValue) {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"load\",\n            commandArgs: {\n              stream: { url: propValue },\n              autoplay: true\n            }\n          });\n        } else {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"unload\"\n          });\n        }\n        break;\n      case \"paused\":\n        if (this.videoElement) {\n          if (propValue) {\n            this.videoElement.pause();\n          } else {\n            this.videoElement.play().catch(() => {\n            });\n          }\n        }\n        break;\n      case \"time\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.currentTime = propValue / 1e3;\n        }\n        break;\n      case \"volume\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.muted = false;\n          this.videoElement.volume = Math.max(0, Math.min(100, propValue)) / 100;\n        }\n        break;\n      case \"muted\":\n        if (this.videoElement) {\n          this.videoElement.muted = !!propValue;\n        }\n        break;\n      case \"playbackSpeed\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.playbackRate = propValue;\n        }\n        break;\n      case \"selectedSubtitlesTrackId\":\n        break;\n      // Subtitle styling properties\n      case \"extraSubtitlesSize\":\n        this.extraSubtitlesSize = Math.max(10, Math.min(50, propValue || 25));\n        break;\n      case \"extraSubtitlesOffset\":\n        this.extraSubtitlesOffset = Math.max(-20, Math.min(20, propValue || 0));\n        break;\n      case \"extraSubtitlesTextColor\":\n        this.extraSubtitlesTextColor = propValue || \"#FFFFFF\";\n        break;\n      case \"extraSubtitlesBackgroundColor\":\n        this.extraSubtitlesBackgroundColor = propValue || \"rgba(0, 0, 0, 0.7)\";\n        break;\n      case \"extraSubtitlesOutlineColor\":\n        this.extraSubtitlesOutlineColor = propValue || \"#000000\";\n        break;\n      case \"extraSubtitlesOpacity\":\n        this.extraSubtitlesOpacity = Math.max(0, Math.min(100, propValue || 100));\n        break;\n      case \"extraSubtitlesDelay\":\n        this.extraSubtitlesDelay = propValue || 0;\n        break;\n    }\n  }\n  executeCommand(commandName, commandArgs) {\n    switch (commandName) {\n      case \"load\":\n        this.executeLoadCommand(commandArgs);\n        break;\n      case \"unload\":\n        this.executeUnloadCommand();\n        break;\n      case \"play\":\n        if (this.videoElement) {\n          this.videoElement.play().catch(() => {\n          });\n        }\n        break;\n      case \"pause\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n        }\n        break;\n      case \"stop\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n          this.videoElement.currentTime = 0;\n        }\n        break;\n      case \"seek\":\n        if (this.videoElement && commandArgs && commandArgs[0] !== void 0) {\n          this.videoElement.currentTime = commandArgs[0] / 1e3;\n        }\n        break;\n    }\n  }\n  executeLoadCommand(commandArgs) {\n    this.executeUnloadCommand();\n    if (commandArgs && commandArgs.stream && typeof commandArgs.stream.url === \"string\") {\n      this.currentStream = commandArgs.stream.url;\n      if (!this.videoElement) {\n        this.createVideoElement();\n      }\n      logInfo(LogCategory.STREAM, \"Loading stream via load command\", {\n        url: this.currentStream,\n        autoplay: typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true\n      });\n      if (this.videoElement) {\n        this.videoElement.autoplay = typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true;\n        if (commandArgs.time !== null && isFinite(commandArgs.time)) {\n          this.videoElement.currentTime = parseInt(commandArgs.time, 10) / 1e3;\n        }\n        if (this.currentStream && this.shouldUseHLS(this.currentStream)) {\n          logInfo(LogCategory.STREAM, \"Setting up HLS streaming\", { url: this.currentStream });\n          this.setupHLS(this.currentStream);\n        } else {\n          logInfo(LogCategory.STREAM, \"Setting direct video source\", { url: this.currentStream });\n          this.videoElement.preload = \"auto\";\n          this.videoElement.src = this.currentStream;\n          this.videoElement.setAttribute(\"playsinline\", \"true\");\n          this.videoElement.setAttribute(\"webkit-playsinline\", \"true\");\n          if (\"bufferData\" in this.videoElement) {\n            this.videoElement.bufferData = true;\n          }\n          this.videoElement.crossOrigin = null;\n          this.videoElement.addEventListener(\"loadstart\", () => {\n            logInfo(LogCategory.PERFORMANCE, \"Starting aggressive buffer loading\");\n          });\n          let bufferHealthTimer = null;\n          let lowBufferCount = 0;\n          this.videoElement.addEventListener(\"progress\", () => {\n            if (this.videoElement && this.videoElement.buffered.length > 0) {\n              const buffered = this.videoElement.buffered.end(this.videoElement.buffered.length - 1);\n              const current = this.videoElement.currentTime;\n              const bufferAhead = buffered - current;\n              logDebug(LogCategory.PERFORMANCE, \"Buffer status\", {\n                bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                currentTime: `${current.toFixed(1)}s`,\n                bufferedEnd: `${buffered.toFixed(1)}s`,\n                bufferHealth: bufferAhead < 5 ? \"LOW\" : bufferAhead < 15 ? \"MEDIUM\" : \"HIGH\"\n              });\n              if (bufferAhead < 5 && !this.videoElement.paused) {\n                lowBufferCount++;\n                logWarn(LogCategory.PERFORMANCE, \"Low buffer detected\", {\n                  bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                  lowBufferEvents: lowBufferCount,\n                  readyState: this.videoElement.readyState\n                });\n                if (bufferAhead < 3 || lowBufferCount > 2) {\n                  logInfo(LogCategory.PERFORMANCE, \"Pausing for aggressive buffer recovery\", {\n                    bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                    pauseDuration: \"5000ms\"\n                  });\n                  this.videoElement.pause();\n                  if (bufferHealthTimer) clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = setTimeout(() => {\n                    if (this.videoElement && this.videoElement.paused) {\n                      const newBuffered = this.videoElement.buffered.length > 0 ? this.videoElement.buffered.end(this.videoElement.buffered.length - 1) : 0;\n                      const newBufferAhead = newBuffered - this.videoElement.currentTime;\n                      logInfo(LogCategory.PERFORMANCE, \"Resuming after buffer recovery\", {\n                        bufferBefore: `${bufferAhead.toFixed(1)}s`,\n                        bufferAfter: `${newBufferAhead.toFixed(1)}s`\n                      });\n                      this.videoElement.play().catch(() => {\n                      });\n                      lowBufferCount = Math.max(0, lowBufferCount - 1);\n                    }\n                  }, 5e3);\n                }\n              } else if (bufferAhead > 10) {\n                lowBufferCount = 0;\n                if (bufferHealthTimer) {\n                  clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = null;\n                }\n              }\n            }\n          });\n          this.videoElement.addEventListener(\"stalled\", () => {\n            logWarn(LogCategory.PERFORMANCE, \"Video stalled, attempting recovery\");\n            setTimeout(() => {\n              if (this.videoElement && this.videoElement.readyState < 3) {\n                logInfo(LogCategory.PERFORMANCE, \"Triggering load for stall recovery\");\n                this.videoElement.load();\n              }\n            }, 1e3);\n          });\n          this.videoElement.addEventListener(\"waiting\", () => {\n            logDebug(LogCategory.PERFORMANCE, \"Video waiting for data\");\n          });\n          this.videoElement.load();\n        }\n        this.emitPropChanged(\"stream\", this.currentStream);\n        this.emitPropChanged(\"loaded\", false);\n        this.emitPropChanged(\"buffering\", true);\n      }\n    }\n  }\n  executeUnloadCommand() {\n    this.currentStream = null;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.videoElement) {\n      this.videoElement.removeAttribute(\"src\");\n      this.videoElement.load();\n    }\n    this.emitPropChanged(\"stream\", null);\n  }\n  // Public method to load subtitles\n  loadSubtitleTrack(track) {\n    return this.loadSubtitles(track);\n  }\n  destroy() {\n    if (this.destroyed) return;\n    this.destroyed = true;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.subtitlesContainer && this.subtitlesContainer.parentNode) {\n      this.subtitlesContainer.parentNode.removeChild(this.subtitlesContainer);\n    }\n    if (this.videoElement && this.videoElement.parentNode) {\n      this.videoElement.parentNode.removeChild(this.videoElement);\n    }\n    this.eventListeners = {};\n    this.videoElement = null;\n    this.subtitlesContainer = null;\n    this.subtitlesElement = null;\n  }\n  get isDestroyed() {\n    return this.destroyed;\n  }\n}\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0cmVtaW9WaWRlb1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wbGV0ZSBTdHJlbWlvIFZpZGVvIFBsYXllciBTeXN0ZW1cbi8vIFR5cGVTY3JpcHQgaW1wbGVtZW50YXRpb24gd2l0aCBhbGwgU3RyZW1pbyBmZWF0dXJlc1xuXG5pbXBvcnQgeyBMb2dDYXRlZ29yeSwgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ0RlYnVnLCBsb2dXYXJuIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBWaWRlb1Byb3BlcnRpZXMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBsb2FkZWQ/OiBib29sZWFuO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgYnVmZmVyaW5nPzogYm9vbGVhbjtcbiAgYnVmZmVyZWQ/OiBUaW1lUmFuZ2VzIHwgbnVsbDtcbiAgYXVkaW9UcmFja3M/OiBBdWRpb1RyYWNrW107XG4gIHNlbGVjdGVkQXVkaW9UcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzVHJhY2tzPzogU3VidGl0bGVUcmFja1tdO1xuICBzZWxlY3RlZFN1YnRpdGxlc1RyYWNrSWQ/OiBzdHJpbmcgfCBudWxsO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1NpemU/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIHZvbHVtZT86IG51bWJlcjtcbiAgbXV0ZWQ/OiBib29sZWFuO1xuICBwbGF5YmFja1NwZWVkPzogbnVtYmVyO1xuICAvLyBFbmhhbmNlZCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVDdWUge1xuICBzdGFydFRpbWU6IG51bWJlcjtcbiAgZW5kVGltZTogbnVtYmVyO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9BY3Rpb24ge1xuICB0eXBlOiAnb2JzZXJ2ZVByb3AnIHwgJ3NldFByb3AnIHwgJ2NvbW1hbmQnO1xuICBwcm9wTmFtZT86IGtleW9mIFZpZGVvUHJvcGVydGllcztcbiAgcHJvcFZhbHVlPzogYW55O1xuICBjb21tYW5kTmFtZT86IHN0cmluZztcbiAgY29tbWFuZEFyZ3M/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9PcHRpb25zIHtcbiAgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJlbWlvVmlkZW9TeXN0ZW0ge1xuICBwcml2YXRlIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN1YnRpdGxlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGhsc0luc3RhbmNlOiBhbnkgPSBudWxsO1xuICBcbiAgcHJpdmF0ZSBvYnNlcnZlZFByb3BzOiB7IFtLIGluIGtleW9mIFZpZGVvUHJvcGVydGllc10/OiBib29sZWFuIH0gPSB7fTtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbltdIH0gPSB7fTtcbiAgXG4gIC8vIFN0YXRlXG4gIHByaXZhdGUgY3VycmVudFN0cmVhbTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY3VycmVudFN1YnRpdGxlVHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNEYXRhOiBTdWJ0aXRsZUN1ZVtdID0gW107XG4gIHByaXZhdGUgZGVzdHJveWVkID0gZmFsc2U7XG4gIFxuICAvLyBTdWJ0aXRsZSBzZXR0aW5nc1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzU2l6ZSA9IDI1O1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc1RleHRDb2xvciA9ICcjRkZGRkZGJztcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yID0gJyMwMDAwMDAnO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3BhY2l0eSA9IDEwMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0RlbGF5ID0gMDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBWaWRlb09wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQ7XG4gICAgdGhpcy5pbml0aWFsaXplQ29udGFpbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDb250YWluZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVWaWRlb0VsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ0NyZWF0aW5nIG5ldyB2aWRlbyBlbGVtZW50Jyk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJzsgLy8gQ2hhbmdlZCBmcm9tICdtZXRhZGF0YScgdG8gJ2F1dG8nIGZvciBiZXR0ZXIgYnVmZmVyaW5nXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgIC8vIERvbid0IHNldCBjcm9zc09yaWdpbiBmb3IgUmVhbC1EZWJyaWQgc3RyZWFtcyBhcyB0aGV5IGRvbid0IHN1cHBvcnQgQ09SU1xuICAgIFxuICAgIC8vIEFkZCBidWZmZXIgY29uZmlndXJhdGlvbiBmb3IgYmV0dGVyIHN0cmVhbWluZyBwZXJmb3JtYW5jZVxuICAgIGlmICgnYnVmZmVyVGltZScgaW4gdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICh0aGlzLnZpZGVvRWxlbWVudCBhcyBhbnkpLmJ1ZmZlclRpbWUgPSAxMDsgLy8gMTAgc2Vjb25kcyBidWZmZXJcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuc2V0dXBWaWRlb0V2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVmlkZW9FdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKSA9PiB7XG4gICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QTEFZRVIsICdWaWRlbyBsb2Fkc3RhcnQgZXZlbnQnKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYnVmZmVyaW5nJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUExBWUVSLCAnVmlkZW8gbG9hZGVkbWV0YWRhdGEgZXZlbnQnLCB7IFxuICAgICAgICBkdXJhdGlvbjogdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uRm9ybWF0dGVkOiBgJHtNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uIC8gNjApfToke01hdGguZmxvb3IodGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gJSA2MCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIHRydWUpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2R1cmF0aW9uJywgdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gKiAxMDAwKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpZGVvRWxlbWVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgdGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lICogMTAwMDtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd0aW1lJywgdGltZSk7XG4gICAgICB0aGlzLnJlbmRlclN1YnRpdGxlcyh0aW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJlZCcsIHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd2b2x1bWUnLCBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ211dGVkJywgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdwbGF5YmFja1NwZWVkJywgdGhpcy52aWRlb0VsZW1lbnQucGxheWJhY2tSYXRlKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdlbmRlZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMudmlkZW9FbGVtZW50LmVycm9yO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGxvZ0Vycm9yKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ1ZpZGVvIHBsYXliYWNrIGVycm9yJywge1xuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdHJlYW1Vcmw6IHRoaXMuY3VycmVudFN0cmVhbVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgVmlkZW8gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN1YnRpdGxlc0NvbnRhaW5lcigpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdWJ0aXRsZXMoY3VycmVudFRpbWU6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5zdWJ0aXRsZXNEYXRhLmxlbmd0aCB8fCAhdGhpcy5jdXJyZW50U3VidGl0bGVUcmFjaykge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWRqdXN0ZWRUaW1lID0gY3VycmVudFRpbWUgKyB0aGlzLmV4dHJhU3VidGl0bGVzRGVsYXk7XG4gICAgY29uc3QgYWN0aXZlQ3VlcyA9IHRoaXMuc3VidGl0bGVzRGF0YS5maWx0ZXIoY3VlID0+IFxuICAgICAgYWRqdXN0ZWRUaW1lID49IGN1ZS5zdGFydFRpbWUgJiYgYWRqdXN0ZWRUaW1lIDw9IGN1ZS5lbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChhY3RpdmVDdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVTdWJ0aXRsZXNDb250YWluZXIoKTtcbiAgICBcbiAgICBpZiAoIXRoaXMuc3VidGl0bGVzRWxlbWVudCkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJzkwJSc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdBcmlhbCwgc2Fucy1zZXJpZic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciEuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyBjb250ZW50XG4gICAgd2hpbGUgKHRoaXMuc3VidGl0bGVzRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIFJlbmRlciBhY3RpdmUgY3Vlc1xuICAgIGFjdGl2ZUN1ZXMuZm9yRWFjaChjdWUgPT4ge1xuICAgICAgY29uc3QgY3VlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY3VlRWxlbWVudC50ZXh0Q29udGVudCA9IGN1ZS50ZXh0O1xuICAgICAgdGhpcy5zdHlsZVN1YnRpdGxlRWxlbWVudChjdWVFbGVtZW50KTtcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCEuYXBwZW5kQ2hpbGQoY3VlRWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0eWxlU3VidGl0bGVFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZm9udFNpemUgPSBNYXRoLmZsb29yKCh0aGlzLmV4dHJhU3VidGl0bGVzU2l6ZSAvIDI1KSAqIDMuNSkgKyAndm1pbic7XG4gICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNPcGFjaXR5IC8gMTAwO1xuXG4gICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcbiAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvcjtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3I7XG4gICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuMmVtIDAuNGVtJztcbiAgICBlbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwLjJlbSc7XG4gICAgZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnMC4xZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXG4gICAgLy8gVGV4dCBzaGFkb3cgZm9yIG91dGxpbmUgZWZmZWN0XG4gICAgY29uc3Qgb3V0bGluZVdpZHRoID0gJzAuMTVyZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IFtcbiAgICAgIGAtJHtvdXRsaW5lV2lkdGh9IC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwIC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAke291dGxpbmVXaWR0aH0gLSR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYC0ke291dGxpbmVXaWR0aH0gMCAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAwIDAgJHt0aGlzLmV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yfWAsXG4gICAgICBgLSR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwICR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YFxuICAgIF0uam9pbignLCAnKTtcblxuICAgIC8vIFBvc2l0aW9uIG9mZnNldFxuICAgIGlmICh0aGlzLmV4dHJhU3VidGl0bGVzT2Zmc2V0ICE9PSAwKSB7XG4gICAgICBjb25zdCBvZmZzZXRQZXJjZW50ID0gdGhpcy5leHRyYVN1YnRpdGxlc09mZnNldCArICclJztcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtvZmZzZXRQZXJjZW50fSlgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNFbGVtZW50ICYmIHRoaXMuc3VidGl0bGVzRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0VsZW1lbnQpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRTdWJ0aXRsZXModHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsKSB7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2sudXJsKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0RhdGEgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBvdXIgc3VidGl0bGUgcHJveHkgdG8gYXZvaWQgQ09SUyBpc3N1ZXNcbiAgICAgIGNvbnN0IHByb3h5VXJsID0gYC9hcGkvc3VidGl0bGVzP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0cmFjay51cmwpfWA7XG4gICAgICBcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnTG9hZGluZyBzdWJ0aXRsZXMgdmlhIHByb3h5JywgeyB1cmw6IHByb3h5VXJsIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3h5VXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzdWJ0aXRsZXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gdGhpcy5wYXJzZVN1YnRpdGxlcyh0ZXh0KTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSB0cmFjaztcbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZXMgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgY3Vlc1RvdGFsOiB0aGlzLnN1YnRpdGxlc0RhdGEubGVuZ3RoLFxuICAgICAgICBsYW5ndWFnZTogdHJhY2subGFuZ3VhZ2UgfHwgdHJhY2suaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBsb2FkaW5nIGZhaWxlZCcsIHtcbiAgICAgICAgdXJsOiB0cmFjay51cmwsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5ndWFnZSB8fCB0cmFjay5pZFxuICAgICAgfSwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gW107XG4gICAgICB0aGlzLmN1cnJlbnRTdWJ0aXRsZVRyYWNrID0gbnVsbDtcbiAgICAgIHRoaXMucmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdWJ0aXRsZXModGV4dDogc3RyaW5nKTogU3VidGl0bGVDdWVbXSB7XG4gICAgY29uc3QgY3VlczogU3VidGl0bGVDdWVbXSA9IFtdO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgV2ViVlRUIGZvcm1hdFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdXRUJWVFQnKSkge1xuICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnUGFyc2luZyBXZWJWVFQgc3VidGl0bGVzJyk7XG4gICAgICBcbiAgICAgIC8vIFNwbGl0IGJ5IGRvdWJsZSBuZXdsaW5lcyB0byBnZXQgY3VlIGJsb2Nrc1xuICAgICAgY29uc3QgYmxvY2tzID0gdGV4dC5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgdGltZWxpbmUgKGNvbnRhaW5zIC0tPilcbiAgICAgICAgICBjb25zdCB0aW1lTGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS5pbmNsdWRlcygnLS0+JykpO1xuICAgICAgICAgIGlmICh0aW1lTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVMaW5lID0gbGluZXNbdGltZUxpbmVJbmRleF07XG4gICAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSh0aW1lTGluZUluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlYlZUVCBmb3JtYXQ6IDAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDAuMDAwXG4gICAgICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0aW1lTGluZS5tYXRjaCgvKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KS8pO1xuICAgICAgICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFsyXSkgKiA2MDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFszXSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbNV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzddKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzhdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGN1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dExpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IFxuICAgIC8vIFNSVCBmb3JtYXQgcGFyc2VyXG4gICAgZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnLS0+JykpIHtcbiAgICAgIGxvZ0RlYnVnKExvZ0NhdGVnb3J5LlNUUkVBTSwgJ1BhcnNpbmcgU1JUIHN1YnRpdGxlcycpO1xuICAgICAgXG4gICAgICBjb25zdCBibG9ja3MgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgY29uc3QgdGltZUxpbmUgPSBsaW5lc1sxXTtcbiAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSgyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTUlQgZm9ybWF0OiAwMDowMDowMCwwMDAgLS0+IDAwOjAwOjAwLDAwMFxuICAgICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRpbWVMaW5lLm1hdGNoKC8oXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSwoXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSksKFxcZHszfSkvKTtcbiAgICAgICAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbMl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzNdKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IHBhcnNlSW50KHRpbWVNYXRjaFs1XSkgKiAzNjAwMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFs3XSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbOF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdWVzLnB1c2goe1xuICAgICAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgIHRleHQ6IHRleHRMaW5lcy5qb2luKCdcXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBwYXJzaW5nIGNvbXBsZXRlZCcsIHsgY3Vlc1RvdGFsOiBjdWVzLmxlbmd0aCB9KTtcbiAgICByZXR1cm4gY3VlcztcbiAgfVxuXG5cbiAgcHJpdmF0ZSBzaG91bGRVc2VITFMoc3RyZWFtVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3RyZWFtVXJsLmluY2x1ZGVzKCcubTN1OCcpIHx8IFxuICAgICAgICAgICAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgXG4gICAgICAgICAgICAod2luZG93IGFzIGFueSkuSGxzPy5pc1N1cHBvcnRlZCgpICYmIFxuICAgICAgICAgICAgIXRoaXMudmlkZW9FbGVtZW50IS5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmwnKSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwSExTKHN0cmVhbVVybDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5IbHM/LmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIGNvbnN0IEhscyA9ICh3aW5kb3cgYXMgYW55KS5IbHM7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbmV3IEhscyh7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlV29ya2VyOiB0cnVlLFxuICAgICAgICBsb3dMYXRlbmN5TW9kZTogZmFsc2UsXG4gICAgICAgIGJhY2tCdWZmZXJMZW5ndGg6IDMwLFxuICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDUwLFxuICAgICAgICBtYXhNYXhCdWZmZXJMZW5ndGg6IDgwLFxuICAgICAgICBtYXhGcmFnTG9va1VwVG9sZXJhbmNlOiAwLFxuICAgICAgICBtYXhCdWZmZXJIb2xlOiAwLFxuICAgICAgICBhcHBlbmRFcnJvck1heFJldHJ5OiAyMCxcbiAgICAgICAgbnVkZ2VNYXhSZXRyeTogMjAsXG4gICAgICAgIG1hbmlmZXN0TG9hZGluZ1RpbWVPdXQ6IDMwMDAwLFxuICAgICAgICBtYW5pZmVzdExvYWRpbmdNYXhSZXRyeTogMTAsXG4gICAgICAgIGZyYWdMb2FkUG9saWN5OiB7XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbWF4VGltZVRvRmlyc3RCeXRlTXM6IDEwMDAwLFxuICAgICAgICAgICAgbWF4TG9hZFRpbWVNczogMTIwMDAwLFxuICAgICAgICAgICAgdGltZW91dFJldHJ5OiB7XG4gICAgICAgICAgICAgIG1heE51bVJldHJ5OiAyMCxcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JSZXRyeToge1xuICAgICAgICAgICAgICBtYXhOdW1SZXRyeTogNixcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5sb2FkU291cmNlKHN0cmVhbVVybCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmF0dGFjaE1lZGlhKHRoaXMudmlkZW9FbGVtZW50KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLk1BTklGRVNUX1BBUlNFRCwgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUF1ZGlvVHJhY2tzKCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLkVSUk9SLCAoX2V2ZW50OiBhbnksIGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5mYXRhbCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBITFMgRXJyb3I6ICR7ZGF0YS50eXBlfSAtICR7ZGF0YS5kZXRhaWxzfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIGZvciBTYWZhcmkgYW5kIG90aGVyIGJyb3dzZXJzIHdpdGggbmF0aXZlIEhMUyBzdXBwb3J0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCEuc3JjID0gc3RyZWFtVXJsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQXVkaW9UcmFja3MoKSB7XG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UgJiYgdGhpcy5obHNJbnN0YW5jZS5hdWRpb1RyYWNrcykge1xuICAgICAgY29uc3QgdHJhY2tzOiBBdWRpb1RyYWNrW10gPSB0aGlzLmhsc0luc3RhbmNlLmF1ZGlvVHJhY2tzLm1hcCgodHJhY2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgaWQ6IGluZGV4LnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHRyYWNrLm5hbWUgfHwgYFRyYWNrICR7aW5kZXggKyAxfWAsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5nXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYXVkaW9UcmFja3MnLCB0cmFja3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lOiBrZXlvZiBWaWRlb1Byb3BlcnRpZXMsIHByb3BWYWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZWRQcm9wc1twcm9wTmFtZV0pIHtcbiAgICAgIHRoaXMuZW1pdCgncHJvcENoYW5nZWQnLCBwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUElcbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0cmVtaW9WaWRlb1N5c3RlbSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGRpc3BhdGNoKGFjdGlvbjogVmlkZW9BY3Rpb24pIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3RyZW1pb1ZpZGVvU3lzdGVtIGluc3RhbmNlIGlzIGRlc3Ryb3llZCcpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29ic2VydmVQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZWRQcm9wc1thY3Rpb24ucHJvcE5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmVtaXRDdXJyZW50UHJvcChhY3Rpb24ucHJvcE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzZXRQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSAmJiBhY3Rpb24ucHJvcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnNldFByb3AoYWN0aW9uLnByb3BOYW1lLCBhY3Rpb24ucHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbWFuZCc6XG4gICAgICAgIGlmIChhY3Rpb24uY29tbWFuZE5hbWUpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGFjdGlvbi5jb21tYW5kTmFtZSwgYWN0aW9uLmNvbW1hbmRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXRDdXJyZW50UHJvcChwcm9wTmFtZToga2V5b2YgVmlkZW9Qcm9wZXJ0aWVzKSB7XG4gICAgc3dpdGNoIChwcm9wTmFtZSkge1xuICAgICAgY2FzZSAnbG9hZGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPj0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsICF0aGlzLnZpZGVvRWxlbWVudCB8fCB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSAqIDEwMDAgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5kdXJhdGlvbiA/IHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uICogMTAwMCA6IG51bGwpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmluZyc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCAhdGhpcy52aWRlb0VsZW1lbnQgfHwgdGhpcy52aWRlb0VsZW1lbnQucmVhZHlTdGF0ZSA8IDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2x1bWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkgOiAxMDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ211dGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgOiBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCA/IHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA6IDEpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldFByb3AocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpIHtcbiAgICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICAvLyBVc2UgU3RyZW1pbydzIGxvYWQgY29tbWFuZCBwYXR0ZXJuIGluc3RlYWQgb2YgZGlyZWN0IHN0cmVhbSBzZXR0aW5nXG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICBjb21tYW5kQXJnczoge1xuICAgICAgICAgICAgICBzdHJlYW06IHsgdXJsOiBwcm9wVmFsdWUgfSxcbiAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAndW5sb2FkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgaWYgKHByb3BWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0aW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwcm9wVmFsdWUgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndm9sdW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC52b2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSkpIC8gMTAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbXV0ZWQnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9ICEhcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiBwcm9wVmFsdWUgIT09IG51bGwgJiYgaXNGaW5pdGUocHJvcFZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdGVkU3VidGl0bGVzVHJhY2tJZCc6XG4gICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCBzdWJ0aXRsZSB0cmFja3MgdG8gYmUgcHJvdmlkZWRcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBoYW5kbGUgdGhlIHN1YnRpdGxlIHRyYWNrIGxvYWRpbmdcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBTdWJ0aXRsZSBzdHlsaW5nIHByb3BlcnRpZXNcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzU2l6ZSc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNTaXplID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDUwLCBwcm9wVmFsdWUgfHwgMjUpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc09mZnNldCc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNPZmZzZXQgPSBNYXRoLm1heCgtMjAsIE1hdGgubWluKDIwLCBwcm9wVmFsdWUgfHwgMCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzVGV4dENvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvciA9IHByb3BWYWx1ZSB8fCAnI0ZGRkZGRic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3InOlxuICAgICAgICB0aGlzLmV4dHJhU3VidGl0bGVzQmFja2dyb3VuZENvbG9yID0gcHJvcFZhbHVlIHx8ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvciA9IHByb3BWYWx1ZSB8fCAnIzAwMDAwMCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc09wYWNpdHkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSB8fCAxMDApKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc0RlbGF5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc0RlbGF5ID0gcHJvcFZhbHVlIHx8IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWU6IHN0cmluZywgY29tbWFuZEFyZ3M/OiBhbnkpIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmROYW1lKSB7XG4gICAgICBjYXNlICdsb2FkJzpcbiAgICAgICAgdGhpcy5leGVjdXRlTG9hZENvbW1hbmQoY29tbWFuZEFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VubG9hZCc6XG4gICAgICAgIHRoaXMuZXhlY3V0ZVVubG9hZENvbW1hbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0b3AnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlZWsnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgY29tbWFuZEFyZ3MgJiYgY29tbWFuZEFyZ3NbMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gY29tbWFuZEFyZ3NbMF0gLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUxvYWRDb21tYW5kKGNvbW1hbmRBcmdzOiBhbnkpIHtcbiAgICB0aGlzLmV4ZWN1dGVVbmxvYWRDb21tYW5kKCk7IC8vIFVubG9hZCBhbnkgZXhpc3Rpbmcgc3RyZWFtIGZpcnN0XG4gICAgXG4gICAgaWYgKGNvbW1hbmRBcmdzICYmIGNvbW1hbmRBcmdzLnN0cmVhbSAmJiB0eXBlb2YgY29tbWFuZEFyZ3Muc3RyZWFtLnVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IGNvbW1hbmRBcmdzLnN0cmVhbS51cmw7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVWaWRlb0VsZW1lbnQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdMb2FkaW5nIHN0cmVhbSB2aWEgbG9hZCBjb21tYW5kJywgeyBcbiAgICAgICAgdXJsOiB0aGlzLmN1cnJlbnRTdHJlYW0sXG4gICAgICAgIGF1dG9wbGF5OiB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB2aWRlbyBwcm9wZXJ0aWVzXG4gICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kQXJncy50aW1lICE9PSBudWxsICYmIGlzRmluaXRlKGNvbW1hbmRBcmdzLnRpbWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwYXJzZUludChjb21tYW5kQXJncy50aW1lLCAxMCkgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBITFMgb3IgZGlyZWN0IHZpZGVvXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdHJlYW0gJiYgdGhpcy5zaG91bGRVc2VITFModGhpcy5jdXJyZW50U3RyZWFtKSkge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyB1cCBITFMgc3RyZWFtaW5nJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICB0aGlzLnNldHVwSExTKHRoaXMuY3VycmVudFN0cmVhbSEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyBkaXJlY3QgdmlkZW8gc291cmNlJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ2dyZXNzaXZlIHByZWxvYWQgc3RyYXRlZ3kgZm9yIFJlYWwtRGVicmlkIHN0cmVhbXNcbiAgICAgICAgICAvLyBGb3JjZSBmdWxsIHByZWxvYWRpbmcgdG8gb3ZlcmNvbWUgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSB0aGlzLmN1cnJlbnRTdHJlYW0hO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbmZpZ3VyZSB2aWRlbyBlbGVtZW50IGZvciBvcHRpbWFsIHN0cmVhbWluZyBhbmQgYWdncmVzc2l2ZSBidWZmZXJpbmdcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJ3RydWUnKTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICd0cnVlJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yY2UgYWdncmVzc2l2ZSBidWZmZXJpbmcgZm9yIGxhcmdlIGZpbGVzXG4gICAgICAgICAgaWYgKCdidWZmZXJEYXRhJyBpbiB0aGlzLnZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgKHRoaXMudmlkZW9FbGVtZW50IGFzIGFueSkuYnVmZmVyRGF0YSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCBuZXR3b3JrIHN0YXRlIG9wdGltaXphdGlvblxuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmNyb3NzT3JpZ2luID0gbnVsbDsgLy8gUmVtb3ZlIENPUlMgcmVzdHJpY3Rpb25zXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGxvYWQgc3RyYXRlZ3kgb3B0aW1pemF0aW9uXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1N0YXJ0aW5nIGFnZ3Jlc3NpdmUgYnVmZmVyIGxvYWRpbmcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW50ZWxsaWdlbnQgYnVmZmVyIG1vbml0b3Jpbmcgd2l0aCBidWZmZXIgaGVhbHRoIG1hbmFnZW1lbnRcbiAgICAgICAgICBsZXQgYnVmZmVySGVhbHRoVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgbGV0IGxvd0J1ZmZlckNvdW50ID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5idWZmZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckFoZWFkID0gYnVmZmVyZWQgLSBjdXJyZW50O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdCdWZmZXIgc3RhdHVzJywge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckFoZWFkOiBgJHtidWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBgJHtjdXJyZW50LnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVyZWRFbmQ6IGAke2J1ZmZlcmVkLnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoOiBidWZmZXJBaGVhZCA8IDUgPyAnTE9XJyA6IGJ1ZmZlckFoZWFkIDwgMTUgPyAnTUVESVVNJyA6ICdISUdIJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE1vcmUgYWdncmVzc2l2ZSBidWZmZXIgbWFuYWdlbWVudCBmb3IgUmVhbC1EZWJyaWQgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgICAgIGlmIChidWZmZXJBaGVhZCA8IDUgJiYgIXRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIGxvd0J1ZmZlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0xvdyBidWZmZXIgZGV0ZWN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgIGxvd0J1ZmZlckV2ZW50czogbG93QnVmZmVyQ291bnQsXG4gICAgICAgICAgICAgICAgICByZWFkeVN0YXRlOiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRm9yIHZlcnkgbG93IGJ1ZmZlciBvciBmcmVxdWVudCBidWZmZXJpbmcsIHBhdXNlIGxvbmdlciB0byBidWlsZCB1cCBidWZmZXJcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyQWhlYWQgPCAzIHx8IGxvd0J1ZmZlckNvdW50ID4gMikge1xuICAgICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1BhdXNpbmcgZm9yIGFnZ3Jlc3NpdmUgYnVmZmVyIHJlY292ZXJ5Jywge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgICAgcGF1c2VEdXJhdGlvbjogJzUwMDBtcydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0J1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQubGVuZ3RoID4gMCA/IFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdCdWZmZXJBaGVhZCA9IG5ld0J1ZmZlcmVkIC0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1Jlc3VtaW5nIGFmdGVyIGJ1ZmZlciByZWNvdmVyeScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlckJlZm9yZTogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlckFmdGVyOiBgJHtuZXdCdWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IE1hdGgubWF4KDAsIGxvd0J1ZmZlckNvdW50IC0gMSk7IC8vIEdyYWR1YWxseSByZWR1Y2UgY291bnRlclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LCA1MDAwKTsgLy8gTG9uZ2VyIHBhdXNlIGZvciBiZXR0ZXIgYnVmZmVyIGJ1aWxkaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJ1ZmZlckFoZWFkID4gMTApIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb3VudGVyIHdoZW4gYnVmZmVyIGlzIHRydWx5IGhlYWx0aHlcbiAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBzdGFsbCBkZXRlY3Rpb24gYW5kIHJlY292ZXJ5XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3RhbGxlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGxvZ1dhcm4oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdWaWRlbyBzdGFsbGVkLCBhdHRlbXB0aW5nIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAvLyBCcmllZiBwYXVzZSB0byBhbGxvdyBtb3JlIGJ1ZmZlcmluZ1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlIDwgMykge1xuICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdUcmlnZ2VyaW5nIGxvYWQgZm9yIHN0YWxsIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgd2FpdGluZyBldmVudCBoYW5kbGluZ1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1ZpZGVvIHdhaXRpbmcgZm9yIGRhdGEnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEVtaXQgcHJvcGVydHkgY2hhbmdlc1xuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgdGhpcy5jdXJyZW50U3RyZWFtKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZVVubG9hZENvbW1hbmQoKSB7XG4gICAgdGhpcy5jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgICBcbiAgICBpZiAodGhpcy5obHNJbnN0YW5jZSkge1xuICAgICAgdGhpcy5obHNJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgbnVsbCk7XG4gIH1cblxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGxvYWQgc3VidGl0bGVzXG4gIGxvYWRTdWJ0aXRsZVRyYWNrKHRyYWNrOiBTdWJ0aXRsZVRyYWNrIHwgbnVsbCkge1xuICAgIHJldHVybiB0aGlzLmxvYWRTdWJ0aXRsZXModHJhY2spO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHJldHVybjtcblxuICAgICh0aGlzIGFzIGFueSkuZGVzdHJveWVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmhsc0luc3RhbmNlKSB7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuaGxzSW5zdGFuY2UgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciAmJiB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc3VidGl0bGVzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZGVvRWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMudmlkZW9FbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciA9IG51bGw7XG4gICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95ZWQ7XG4gIH1cbn0iXSwibWFwcGluZ3MiOiJBQUdBLFNBQVMsYUFBYSxTQUFTLFVBQVUsVUFBVSxlQUFlO0FBaUUzRCxhQUFNLG1CQUFtQjtBQUFBLEVBQ3RCO0FBQUEsRUFDQSxlQUF3QztBQUFBLEVBQ3hDLHFCQUF5QztBQUFBLEVBQ3pDLG1CQUF1QztBQUFBLEVBQ3ZDLGNBQW1CO0FBQUEsRUFFbkIsZ0JBQTRELENBQUM7QUFBQSxFQUM3RCxpQkFBZ0QsQ0FBQztBQUFBO0FBQUEsRUFHakQsZ0JBQStCO0FB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"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_serviceWorkerResponseSource": "network"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-08-01T11:32:33.245Z",
        "time": 25.190000000293367,
        "timings": {
          "blocked": 0.3719999929368496,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.002,
          "wait": 24.09999999779556,
          "receive": 0.7160000095609576,
          "_blocked_queueing": 0.3659999929368496,
          "_workerStart": 0.004,
          "_workerReady": 0.207,
          "_workerFetchStart": 0.207,
          "_workerRespondWithSettled": 23.884
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "fetchAndCache",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 153,
                "columnNumber": 25
              },
              {
                "functionName": "handleRequest",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 125,
                "columnNumber": 17
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "3",
                  "url": "http://localhost:5173/sw.js",
                  "lineNumber": 112,
                  "columnNumber": 19
                }
              ]
            }
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33193",
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoSystem.ts?t=1754047953225",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047953225"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047953225"
            }
          ],
          "cookies": [],
          "headersSize": 1002,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "89897"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:33 GMT"
            },
            {
              "name": "Etag",
              "value": "W/\"64fa-46arnhEKGIlpNQfdDG2pPdorfjE\""
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 89897,
            "mimeType": "text/javascript",
            "compression": 0,
            "text": "import { LogCategory, logInfo, logError, logDebug, logWarn } from \"/src/lib/utils/logger.ts\";\nexport class StremioVideoSystem {\n  containerElement;\n  videoElement = null;\n  subtitlesContainer = null;\n  subtitlesElement = null;\n  hlsInstance = null;\n  observedProps = {};\n  eventListeners = {};\n  // State\n  currentStream = null;\n  currentSubtitleTrack = null;\n  subtitlesData = [];\n  destroyed = false;\n  // Subtitle settings\n  extraSubtitlesSize = 25;\n  extraSubtitlesOffset = 0;\n  extraSubtitlesTextColor = \"#FFFFFF\";\n  extraSubtitlesBackgroundColor = \"rgba(0, 0, 0, 0.7)\";\n  extraSubtitlesOutlineColor = \"#000000\";\n  extraSubtitlesOpacity = 100;\n  extraSubtitlesDelay = 0;\n  constructor(options) {\n    this.containerElement = options.containerElement;\n    this.initializeContainer();\n  }\n  initializeContainer() {\n    this.containerElement.style.position = \"relative\";\n    this.containerElement.style.width = \"100%\";\n    this.containerElement.style.height = \"100%\";\n    this.containerElement.style.backgroundColor = \"#000\";\n  }\n  createVideoElement() {\n    if (this.videoElement) return;\n    logInfo(LogCategory.PLAYER, \"Creating new video element\");\n    this.videoElement = document.createElement(\"video\");\n    this.videoElement.style.width = \"100%\";\n    this.videoElement.style.height = \"100%\";\n    this.videoElement.style.backgroundColor = \"transparent\";\n    this.videoElement.controls = false;\n    this.videoElement.preload = \"auto\";\n    this.videoElement.playsInline = true;\n    if (\"bufferTime\" in this.videoElement) {\n      this.videoElement.bufferTime = 10;\n    }\n    this.containerElement.appendChild(this.videoElement);\n    this.setupVideoEventListeners();\n  }\n  setupVideoEventListeners() {\n    if (!this.videoElement) return;\n    this.videoElement.addEventListener(\"loadstart\", () => {\n      logDebug(LogCategory.PLAYER, \"Video loadstart event\");\n      this.emitPropChanged(\"loaded\", false);\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"loadedmetadata\", () => {\n      if (!this.videoElement) return;\n      logInfo(LogCategory.PLAYER, \"Video loadedmetadata event\", {\n        duration: this.videoElement.duration,\n        durationFormatted: `${Math.floor(this.videoElement.duration / 60)}:${Math.floor(this.videoElement.duration % 60).toString().padStart(2, \"0\")}`\n      });\n      this.emitPropChanged(\"loaded\", true);\n      this.emitPropChanged(\"duration\", this.videoElement.duration * 1e3);\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"timeupdate\", () => {\n      if (!this.videoElement) return;\n      const time = this.videoElement.currentTime * 1e3;\n      this.emitPropChanged(\"time\", time);\n      this.renderSubtitles(time);\n    });\n    this.videoElement.addEventListener(\"play\", () => {\n      this.emitPropChanged(\"paused\", false);\n    });\n    this.videoElement.addEventListener(\"pause\", () => {\n      this.emitPropChanged(\"paused\", true);\n    });\n    this.videoElement.addEventListener(\"waiting\", () => {\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"canplay\", () => {\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"progress\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"buffered\", this.videoElement.buffered);\n    });\n    this.videoElement.addEventListener(\"volumechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"volume\", Math.floor(this.videoElement.volume * 100));\n      this.emitPropChanged(\"muted\", this.videoElement.muted);\n    });\n    this.videoElement.addEventListener(\"ratechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"playbackSpeed\", this.videoElement.playbackRate);\n    });\n    this.videoElement.addEventListener(\"ended\", () => {\n      this.emit(\"ended\");\n    });\n    this.videoElement.addEventListener(\"error\", () => {\n      if (!this.videoElement) return;\n      const error = this.videoElement.error;\n      if (error) {\n        logError(LogCategory.PLAYER, \"Video playback error\", {\n          code: error.code,\n          message: error.message,\n          streamUrl: this.currentStream\n        });\n        this.emit(\"error\", {\n          critical: true,\n          message: `Video error: ${error.message}`,\n          code: error.code\n        });\n      }\n    });\n  }\n  createSubtitlesContainer() {\n    if (this.subtitlesContainer) return;\n    this.subtitlesContainer = document.createElement(\"div\");\n    this.subtitlesContainer.style.position = \"absolute\";\n    this.subtitlesContainer.style.left = \"0\";\n    this.subtitlesContainer.style.top = \"0\";\n    this.subtitlesContainer.style.width = \"100%\";\n    this.subtitlesContainer.style.height = \"100%\";\n    this.subtitlesContainer.style.pointerEvents = \"none\";\n    this.subtitlesContainer.style.zIndex = \"1000\";\n    this.subtitlesContainer.style.display = \"flex\";\n    this.subtitlesContainer.style.flexDirection = \"column\";\n    this.subtitlesContainer.style.justifyContent = \"flex-end\";\n    this.subtitlesContainer.style.alignItems = \"center\";\n    this.subtitlesContainer.style.overflow = \"hidden\";\n    this.containerElement.appendChild(this.subtitlesContainer);\n  }\n  renderSubtitles(currentTime) {\n    if (!this.subtitlesData.length || !this.currentSubtitleTrack) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    const adjustedTime = currentTime + this.extraSubtitlesDelay;\n    const activeCues = this.subtitlesData.filter(\n      (cue) => adjustedTime >= cue.startTime && adjustedTime <= cue.endTime\n    );\n    if (activeCues.length === 0) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    this.createSubtitlesContainer();\n    if (!this.subtitlesElement) {\n      this.subtitlesElement = document.createElement(\"div\");\n      this.subtitlesElement.style.position = \"relative\";\n      this.subtitlesElement.style.maxWidth = \"90%\";\n      this.subtitlesElement.style.textAlign = \"center\";\n      this.subtitlesElement.style.fontFamily = \"Arial, sans-serif\";\n      this.subtitlesElement.style.fontWeight = \"bold\";\n      this.subtitlesElement.style.lineHeight = \"1.2\";\n      this.subtitlesElement.style.wordWrap = \"break-word\";\n      this.subtitlesElement.style.whiteSpace = \"pre-wrap\";\n      this.subtitlesContainer.appendChild(this.subtitlesElement);\n    }\n    while (this.subtitlesElement.firstChild) {\n      this.subtitlesElement.removeChild(this.subtitlesElement.firstChild);\n    }\n    activeCues.forEach((cue) => {\n      const cueElement = document.createElement(\"div\");\n      cueElement.textContent = cue.text;\n      this.styleSubtitleElement(cueElement);\n      this.subtitlesElement.appendChild(cueElement);\n    });\n  }\n  styleSubtitleElement(element) {\n    const fontSize = Math.floor(this.extraSubtitlesSize / 25 * 3.5) + \"vmin\";\n    const opacity = this.extraSubtitlesOpacity / 100;\n    element.style.fontSize = fontSize;\n    element.style.opacity = opacity.toString();\n    element.style.color = this.extraSubtitlesTextColor;\n    element.style.backgroundColor = this.extraSubtitlesBackgroundColor;\n    element.style.padding = \"0.2em 0.4em\";\n    element.style.borderRadius = \"0.2em\";\n    element.style.margin = \"0.1em\";\n    element.style.display = \"inline-block\";\n    const outlineWidth = \"0.15rem\";\n    element.style.textShadow = [\n      `-${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`\n    ].join(\", \");\n    if (this.extraSubtitlesOffset !== 0) {\n      const offsetPercent = this.extraSubtitlesOffset + \"%\";\n      element.style.transform = `translateY(${offsetPercent})`;\n    }\n  }\n  removeSubtitlesElement() {\n    if (this.subtitlesElement && this.subtitlesElement.parentNode) {\n      this.subtitlesElement.parentNode.removeChild(this.subtitlesElement);\n      this.subtitlesElement = null;\n    }\n  }\n  async loadSubtitles(track) {\n    if (!track || !track.url) {\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n      return;\n    }\n    try {\n      const proxyUrl = `/api/subtitles?url=${encodeURIComponent(track.url)}`;\n      logInfo(LogCategory.STREAM, \"Loading subtitles via proxy\", { url: proxyUrl });\n      const response = await fetch(proxyUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to load subtitles: ${response.status}`);\n      }\n      const text = await response.text();\n      this.subtitlesData = this.parseSubtitles(text);\n      this.currentSubtitleTrack = track;\n      logInfo(LogCategory.STREAM, \"Subtitles loaded successfully\", {\n        cuesTotal: this.subtitlesData.length,\n        language: track.language || track.id\n      });\n    } catch (error) {\n      logError(LogCategory.STREAM, \"Subtitle loading failed\", {\n        url: track.url,\n        language: track.language || track.id\n      }, error);\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n    }\n  }\n  parseSubtitles(text) {\n    const cues = [];\n    if (text.includes(\"WEBVTT\")) {\n      logDebug(LogCategory.STREAM, \"Parsing WebVTT subtitles\");\n      const blocks = text.split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 2) {\n          const timeLineIndex = lines.findIndex((line) => line.includes(\"-->\"));\n          if (timeLineIndex >= 0) {\n            const timeLine = lines[timeLineIndex];\n            const textLines = lines.slice(timeLineIndex + 1);\n            const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})/);\n            if (timeMatch) {\n              const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n              const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n              cues.push({\n                startTime,\n                endTime,\n                text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n                // Remove HTML tags\n              });\n            }\n          }\n        }\n      });\n    } else if (text.includes(\"-->\")) {\n      logDebug(LogCategory.STREAM, \"Parsing SRT subtitles\");\n      const blocks = text.trim().split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 3) {\n          const timeLine = lines[1];\n          const textLines = lines.slice(2);\n          const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/);\n          if (timeMatch) {\n            const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n            const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n            cues.push({\n              startTime,\n              endTime,\n              text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n              // Remove HTML tags\n            });\n          }\n        }\n      });\n    }\n    logDebug(LogCategory.STREAM, \"Subtitle parsing completed\", { cuesTotal: cues.length });\n    return cues;\n  }\n  shouldUseHLS(streamUrl) {\n    return streamUrl.includes(\".m3u8\") || typeof window !== \"undefined\" && window.Hls?.isSupported() && !this.videoElement.canPlayType(\"application/vnd.apple.mpegurl\");\n  }\n  setupHLS(streamUrl) {\n    if (typeof window !== \"undefined\" && window.Hls?.isSupported()) {\n      const Hls = window.Hls;\n      this.hlsInstance = new Hls({\n        debug: false,\n        enableWorker: true,\n        lowLatencyMode: false,\n        backBufferLength: 30,\n        maxBufferLength: 50,\n        maxMaxBufferLength: 80,\n        maxFragLookUpTolerance: 0,\n        maxBufferHole: 0,\n        appendErrorMaxRetry: 20,\n        nudgeMaxRetry: 20,\n        manifestLoadingTimeOut: 3e4,\n        manifestLoadingMaxRetry: 10,\n        fragLoadPolicy: {\n          default: {\n            maxTimeToFirstByteMs: 1e4,\n            maxLoadTimeMs: 12e4,\n            timeoutRetry: {\n              maxNumRetry: 20,\n              retryDelayMs: 0,\n              maxRetryDelayMs: 15\n            },\n            errorRetry: {\n              maxNumRetry: 6,\n              retryDelayMs: 1e3,\n              maxRetryDelayMs: 15\n            }\n          }\n        }\n      });\n      this.hlsInstance.loadSource(streamUrl);\n      this.hlsInstance.attachMedia(this.videoElement);\n      this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {\n        this.updateAudioTracks();\n      });\n      this.hlsInstance.on(Hls.Events.ERROR, (_event, data) => {\n        if (data.fatal) {\n          this.emit(\"error\", {\n            critical: true,\n            message: `HLS Error: ${data.type} - ${data.details}`\n          });\n        }\n      });\n    } else {\n      this.videoElement.src = streamUrl;\n    }\n  }\n  updateAudioTracks() {\n    if (this.hlsInstance && this.hlsInstance.audioTracks) {\n      const tracks = this.hlsInstance.audioTracks.map((track, index) => ({\n        id: index.toString(),\n        name: track.name || `Track ${index + 1}`,\n        language: track.lang\n      }));\n      this.emitPropChanged(\"audioTracks\", tracks);\n    }\n  }\n  emitPropChanged(propName, propValue) {\n    if (this.observedProps[propName]) {\n      this.emit(\"propChanged\", propName, propValue);\n    }\n  }\n  emit(event, ...args) {\n    if (this.eventListeners[event]) {\n      this.eventListeners[event].forEach((listener) => listener(...args));\n    }\n  }\n  // Public API\n  on(event, listener) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [];\n    }\n    this.eventListeners[event].push(listener);\n  }\n  dispatch(action) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    switch (action.type) {\n      case \"observeProp\":\n        if (action.propName) {\n          this.observedProps[action.propName] = true;\n          this.emitCurrentProp(action.propName);\n        }\n        break;\n      case \"setProp\":\n        if (action.propName && action.propValue !== void 0) {\n          this.setProp(action.propName, action.propValue);\n        }\n        break;\n      case \"command\":\n        if (action.commandName) {\n          this.executeCommand(action.commandName, action.commandArgs);\n        }\n        break;\n    }\n  }\n  emitCurrentProp(propName) {\n    switch (propName) {\n      case \"loaded\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.readyState >= 1);\n        break;\n      case \"paused\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.paused);\n        break;\n      case \"time\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.currentTime * 1e3 : null);\n        break;\n      case \"duration\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.duration ? this.videoElement.duration * 1e3 : null);\n        break;\n      case \"buffering\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.readyState < 3);\n        break;\n      case \"buffered\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.buffered : null);\n        break;\n      case \"volume\":\n        this.emitPropChanged(propName, this.videoElement ? Math.floor(this.videoElement.volume * 100) : 100);\n        break;\n      case \"muted\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.muted : false);\n        break;\n      case \"playbackSpeed\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.playbackRate : 1);\n        break;\n    }\n  }\n  setProp(propName, propValue) {\n    switch (propName) {\n      case \"stream\":\n        if (propValue) {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"load\",\n            commandArgs: {\n              stream: { url: propValue },\n              autoplay: true\n            }\n          });\n        } else {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"unload\"\n          });\n        }\n        break;\n      case \"paused\":\n        if (this.videoElement) {\n          if (propValue) {\n            this.videoElement.pause();\n          } else {\n            this.videoElement.play().catch(() => {\n            });\n          }\n        }\n        break;\n      case \"time\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.currentTime = propValue / 1e3;\n        }\n        break;\n      case \"volume\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.muted = false;\n          this.videoElement.volume = Math.max(0, Math.min(100, propValue)) / 100;\n        }\n        break;\n      case \"muted\":\n        if (this.videoElement) {\n          this.videoElement.muted = !!propValue;\n        }\n        break;\n      case \"playbackSpeed\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.playbackRate = propValue;\n        }\n        break;\n      case \"selectedSubtitlesTrackId\":\n        break;\n      // Subtitle styling properties\n      case \"extraSubtitlesSize\":\n        this.extraSubtitlesSize = Math.max(10, Math.min(50, propValue || 25));\n        break;\n      case \"extraSubtitlesOffset\":\n        this.extraSubtitlesOffset = Math.max(-20, Math.min(20, propValue || 0));\n        break;\n      case \"extraSubtitlesTextColor\":\n        this.extraSubtitlesTextColor = propValue || \"#FFFFFF\";\n        break;\n      case \"extraSubtitlesBackgroundColor\":\n        this.extraSubtitlesBackgroundColor = propValue || \"rgba(0, 0, 0, 0.7)\";\n        break;\n      case \"extraSubtitlesOutlineColor\":\n        this.extraSubtitlesOutlineColor = propValue || \"#000000\";\n        break;\n      case \"extraSubtitlesOpacity\":\n        this.extraSubtitlesOpacity = Math.max(0, Math.min(100, propValue || 100));\n        break;\n      case \"extraSubtitlesDelay\":\n        this.extraSubtitlesDelay = propValue || 0;\n        break;\n    }\n  }\n  executeCommand(commandName, commandArgs) {\n    switch (commandName) {\n      case \"load\":\n        this.executeLoadCommand(commandArgs);\n        break;\n      case \"unload\":\n        this.executeUnloadCommand();\n        break;\n      case \"play\":\n        if (this.videoElement) {\n          this.videoElement.play().catch(() => {\n          });\n        }\n        break;\n      case \"pause\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n        }\n        break;\n      case \"stop\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n          this.videoElement.currentTime = 0;\n        }\n        break;\n      case \"seek\":\n        if (this.videoElement && commandArgs && commandArgs[0] !== void 0) {\n          this.videoElement.currentTime = commandArgs[0] / 1e3;\n        }\n        break;\n    }\n  }\n  executeLoadCommand(commandArgs) {\n    this.executeUnloadCommand();\n    if (commandArgs && commandArgs.stream && typeof commandArgs.stream.url === \"string\") {\n      this.currentStream = commandArgs.stream.url;\n      if (!this.videoElement) {\n        this.createVideoElement();\n      }\n      logInfo(LogCategory.STREAM, \"Loading stream via load command\", {\n        url: this.currentStream,\n        autoplay: typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true\n      });\n      if (this.videoElement) {\n        this.videoElement.autoplay = typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true;\n        if (commandArgs.time !== null && isFinite(commandArgs.time)) {\n          this.videoElement.currentTime = parseInt(commandArgs.time, 10) / 1e3;\n        }\n        if (this.currentStream && this.shouldUseHLS(this.currentStream)) {\n          logInfo(LogCategory.STREAM, \"Setting up HLS streaming\", { url: this.currentStream });\n          this.setupHLS(this.currentStream);\n        } else {\n          logInfo(LogCategory.STREAM, \"Setting direct video source\", { url: this.currentStream });\n          this.videoElement.preload = \"auto\";\n          this.videoElement.src = this.currentStream;\n          this.videoElement.setAttribute(\"playsinline\", \"true\");\n          this.videoElement.setAttribute(\"webkit-playsinline\", \"true\");\n          if (\"bufferData\" in this.videoElement) {\n            this.videoElement.bufferData = true;\n          }\n          this.videoElement.crossOrigin = null;\n          this.videoElement.addEventListener(\"loadstart\", () => {\n            logInfo(LogCategory.PERFORMANCE, \"Starting aggressive buffer loading\");\n          });\n          let bufferHealthTimer = null;\n          let lowBufferCount = 0;\n          this.videoElement.addEventListener(\"progress\", () => {\n            if (this.videoElement && this.videoElement.buffered.length > 0) {\n              const buffered = this.videoElement.buffered.end(this.videoElement.buffered.length - 1);\n              const current = this.videoElement.currentTime;\n              const bufferAhead = buffered - current;\n              logDebug(LogCategory.PERFORMANCE, \"Buffer status\", {\n                bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                currentTime: `${current.toFixed(1)}s`,\n                bufferedEnd: `${buffered.toFixed(1)}s`,\n                bufferHealth: bufferAhead < 5 ? \"LOW\" : bufferAhead < 15 ? \"MEDIUM\" : \"HIGH\"\n              });\n              if (bufferAhead < 5 && !this.videoElement.paused) {\n                lowBufferCount++;\n                logWarn(LogCategory.PERFORMANCE, \"Low buffer detected\", {\n                  bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                  lowBufferEvents: lowBufferCount,\n                  readyState: this.videoElement.readyState\n                });\n                if (bufferAhead < 3 || lowBufferCount > 2) {\n                  logInfo(LogCategory.PERFORMANCE, \"Pausing for aggressive buffer recovery\", {\n                    bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                    pauseDuration: \"5000ms\"\n                  });\n                  this.videoElement.pause();\n                  if (bufferHealthTimer) clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = setTimeout(() => {\n                    if (this.videoElement && this.videoElement.paused) {\n                      const newBuffered = this.videoElement.buffered.length > 0 ? this.videoElement.buffered.end(this.videoElement.buffered.length - 1) : 0;\n                      const newBufferAhead = newBuffered - this.videoElement.currentTime;\n                      logInfo(LogCategory.PERFORMANCE, \"Resuming after buffer recovery\", {\n                        bufferBefore: `${bufferAhead.toFixed(1)}s`,\n                        bufferAfter: `${newBufferAhead.toFixed(1)}s`\n                      });\n                      this.videoElement.play().catch(() => {\n                      });\n                      lowBufferCount = Math.max(0, lowBufferCount - 1);\n                    }\n                  }, 5e3);\n                }\n              } else if (bufferAhead > 10) {\n                lowBufferCount = 0;\n                if (bufferHealthTimer) {\n                  clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = null;\n                }\n              }\n            }\n          });\n          this.videoElement.addEventListener(\"stalled\", () => {\n            logWarn(LogCategory.PERFORMANCE, \"Video stalled, attempting recovery\");\n            setTimeout(() => {\n              if (this.videoElement && this.videoElement.readyState < 3) {\n                logInfo(LogCategory.PERFORMANCE, \"Triggering load for stall recovery\");\n                this.videoElement.load();\n              }\n            }, 1e3);\n          });\n          this.videoElement.addEventListener(\"waiting\", () => {\n            logDebug(LogCategory.PERFORMANCE, \"Video waiting for data\");\n          });\n          this.videoElement.load();\n        }\n        this.emitPropChanged(\"stream\", this.currentStream);\n        this.emitPropChanged(\"loaded\", false);\n        this.emitPropChanged(\"buffering\", true);\n      }\n    }\n  }\n  executeUnloadCommand() {\n    this.currentStream = null;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.videoElement) {\n      this.videoElement.removeAttribute(\"src\");\n      this.videoElement.load();\n    }\n    this.emitPropChanged(\"stream\", null);\n  }\n  // Public method to load subtitles\n  loadSubtitleTrack(track) {\n    return this.loadSubtitles(track);\n  }\n  destroy() {\n    if (this.destroyed) return;\n    this.destroyed = true;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.subtitlesContainer && this.subtitlesContainer.parentNode) {\n      this.subtitlesContainer.parentNode.removeChild(this.subtitlesContainer);\n    }\n    if (this.videoElement && this.videoElement.parentNode) {\n      this.videoElement.parentNode.removeChild(this.videoElement);\n    }\n    this.eventListeners = {};\n    this.videoElement = null;\n    this.subtitlesContainer = null;\n    this.subtitlesElement = null;\n  }\n  get isDestroyed() {\n    return this.destroyed;\n  }\n}\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0cmVtaW9WaWRlb1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wbGV0ZSBTdHJlbWlvIFZpZGVvIFBsYXllciBTeXN0ZW1cbi8vIFR5cGVTY3JpcHQgaW1wbGVtZW50YXRpb24gd2l0aCBhbGwgU3RyZW1pbyBmZWF0dXJlc1xuXG5pbXBvcnQgeyBMb2dDYXRlZ29yeSwgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ0RlYnVnLCBsb2dXYXJuIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBWaWRlb1Byb3BlcnRpZXMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBsb2FkZWQ/OiBib29sZWFuO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgYnVmZmVyaW5nPzogYm9vbGVhbjtcbiAgYnVmZmVyZWQ/OiBUaW1lUmFuZ2VzIHwgbnVsbDtcbiAgYXVkaW9UcmFja3M/OiBBdWRpb1RyYWNrW107XG4gIHNlbGVjdGVkQXVkaW9UcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzVHJhY2tzPzogU3VidGl0bGVUcmFja1tdO1xuICBzZWxlY3RlZFN1YnRpdGxlc1RyYWNrSWQ/OiBzdHJpbmcgfCBudWxsO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1NpemU/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIHZvbHVtZT86IG51bWJlcjtcbiAgbXV0ZWQ/OiBib29sZWFuO1xuICBwbGF5YmFja1NwZWVkPzogbnVtYmVyO1xuICAvLyBFbmhhbmNlZCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVDdWUge1xuICBzdGFydFRpbWU6IG51bWJlcjtcbiAgZW5kVGltZTogbnVtYmVyO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9BY3Rpb24ge1xuICB0eXBlOiAnb2JzZXJ2ZVByb3AnIHwgJ3NldFByb3AnIHwgJ2NvbW1hbmQnO1xuICBwcm9wTmFtZT86IGtleW9mIFZpZGVvUHJvcGVydGllcztcbiAgcHJvcFZhbHVlPzogYW55O1xuICBjb21tYW5kTmFtZT86IHN0cmluZztcbiAgY29tbWFuZEFyZ3M/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9PcHRpb25zIHtcbiAgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJlbWlvVmlkZW9TeXN0ZW0ge1xuICBwcml2YXRlIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN1YnRpdGxlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGhsc0luc3RhbmNlOiBhbnkgPSBudWxsO1xuICBcbiAgcHJpdmF0ZSBvYnNlcnZlZFByb3BzOiB7IFtLIGluIGtleW9mIFZpZGVvUHJvcGVydGllc10/OiBib29sZWFuIH0gPSB7fTtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbltdIH0gPSB7fTtcbiAgXG4gIC8vIFN0YXRlXG4gIHByaXZhdGUgY3VycmVudFN0cmVhbTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY3VycmVudFN1YnRpdGxlVHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNEYXRhOiBTdWJ0aXRsZUN1ZVtdID0gW107XG4gIHByaXZhdGUgZGVzdHJveWVkID0gZmFsc2U7XG4gIFxuICAvLyBTdWJ0aXRsZSBzZXR0aW5nc1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzU2l6ZSA9IDI1O1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc1RleHRDb2xvciA9ICcjRkZGRkZGJztcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yID0gJyMwMDAwMDAnO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3BhY2l0eSA9IDEwMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0RlbGF5ID0gMDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBWaWRlb09wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQ7XG4gICAgdGhpcy5pbml0aWFsaXplQ29udGFpbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDb250YWluZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVWaWRlb0VsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ0NyZWF0aW5nIG5ldyB2aWRlbyBlbGVtZW50Jyk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJzsgLy8gQ2hhbmdlZCBmcm9tICdtZXRhZGF0YScgdG8gJ2F1dG8nIGZvciBiZXR0ZXIgYnVmZmVyaW5nXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgIC8vIERvbid0IHNldCBjcm9zc09yaWdpbiBmb3IgUmVhbC1EZWJyaWQgc3RyZWFtcyBhcyB0aGV5IGRvbid0IHN1cHBvcnQgQ09SU1xuICAgIFxuICAgIC8vIEFkZCBidWZmZXIgY29uZmlndXJhdGlvbiBmb3IgYmV0dGVyIHN0cmVhbWluZyBwZXJmb3JtYW5jZVxuICAgIGlmICgnYnVmZmVyVGltZScgaW4gdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICh0aGlzLnZpZGVvRWxlbWVudCBhcyBhbnkpLmJ1ZmZlclRpbWUgPSAxMDsgLy8gMTAgc2Vjb25kcyBidWZmZXJcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuc2V0dXBWaWRlb0V2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVmlkZW9FdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKSA9PiB7XG4gICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QTEFZRVIsICdWaWRlbyBsb2Fkc3RhcnQgZXZlbnQnKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYnVmZmVyaW5nJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUExBWUVSLCAnVmlkZW8gbG9hZGVkbWV0YWRhdGEgZXZlbnQnLCB7IFxuICAgICAgICBkdXJhdGlvbjogdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uRm9ybWF0dGVkOiBgJHtNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uIC8gNjApfToke01hdGguZmxvb3IodGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gJSA2MCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIHRydWUpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2R1cmF0aW9uJywgdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gKiAxMDAwKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpZGVvRWxlbWVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgdGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lICogMTAwMDtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd0aW1lJywgdGltZSk7XG4gICAgICB0aGlzLnJlbmRlclN1YnRpdGxlcyh0aW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJlZCcsIHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd2b2x1bWUnLCBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ211dGVkJywgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdwbGF5YmFja1NwZWVkJywgdGhpcy52aWRlb0VsZW1lbnQucGxheWJhY2tSYXRlKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdlbmRlZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMudmlkZW9FbGVtZW50LmVycm9yO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGxvZ0Vycm9yKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ1ZpZGVvIHBsYXliYWNrIGVycm9yJywge1xuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdHJlYW1Vcmw6IHRoaXMuY3VycmVudFN0cmVhbVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgVmlkZW8gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN1YnRpdGxlc0NvbnRhaW5lcigpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdWJ0aXRsZXMoY3VycmVudFRpbWU6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5zdWJ0aXRsZXNEYXRhLmxlbmd0aCB8fCAhdGhpcy5jdXJyZW50U3VidGl0bGVUcmFjaykge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWRqdXN0ZWRUaW1lID0gY3VycmVudFRpbWUgKyB0aGlzLmV4dHJhU3VidGl0bGVzRGVsYXk7XG4gICAgY29uc3QgYWN0aXZlQ3VlcyA9IHRoaXMuc3VidGl0bGVzRGF0YS5maWx0ZXIoY3VlID0+IFxuICAgICAgYWRqdXN0ZWRUaW1lID49IGN1ZS5zdGFydFRpbWUgJiYgYWRqdXN0ZWRUaW1lIDw9IGN1ZS5lbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChhY3RpdmVDdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVTdWJ0aXRsZXNDb250YWluZXIoKTtcbiAgICBcbiAgICBpZiAoIXRoaXMuc3VidGl0bGVzRWxlbWVudCkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJzkwJSc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdBcmlhbCwgc2Fucy1zZXJpZic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciEuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyBjb250ZW50XG4gICAgd2hpbGUgKHRoaXMuc3VidGl0bGVzRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIFJlbmRlciBhY3RpdmUgY3Vlc1xuICAgIGFjdGl2ZUN1ZXMuZm9yRWFjaChjdWUgPT4ge1xuICAgICAgY29uc3QgY3VlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY3VlRWxlbWVudC50ZXh0Q29udGVudCA9IGN1ZS50ZXh0O1xuICAgICAgdGhpcy5zdHlsZVN1YnRpdGxlRWxlbWVudChjdWVFbGVtZW50KTtcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCEuYXBwZW5kQ2hpbGQoY3VlRWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0eWxlU3VidGl0bGVFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZm9udFNpemUgPSBNYXRoLmZsb29yKCh0aGlzLmV4dHJhU3VidGl0bGVzU2l6ZSAvIDI1KSAqIDMuNSkgKyAndm1pbic7XG4gICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNPcGFjaXR5IC8gMTAwO1xuXG4gICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcbiAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvcjtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3I7XG4gICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuMmVtIDAuNGVtJztcbiAgICBlbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwLjJlbSc7XG4gICAgZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnMC4xZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXG4gICAgLy8gVGV4dCBzaGFkb3cgZm9yIG91dGxpbmUgZWZmZWN0XG4gICAgY29uc3Qgb3V0bGluZVdpZHRoID0gJzAuMTVyZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IFtcbiAgICAgIGAtJHtvdXRsaW5lV2lkdGh9IC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwIC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAke291dGxpbmVXaWR0aH0gLSR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYC0ke291dGxpbmVXaWR0aH0gMCAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAwIDAgJHt0aGlzLmV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yfWAsXG4gICAgICBgLSR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwICR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YFxuICAgIF0uam9pbignLCAnKTtcblxuICAgIC8vIFBvc2l0aW9uIG9mZnNldFxuICAgIGlmICh0aGlzLmV4dHJhU3VidGl0bGVzT2Zmc2V0ICE9PSAwKSB7XG4gICAgICBjb25zdCBvZmZzZXRQZXJjZW50ID0gdGhpcy5leHRyYVN1YnRpdGxlc09mZnNldCArICclJztcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtvZmZzZXRQZXJjZW50fSlgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNFbGVtZW50ICYmIHRoaXMuc3VidGl0bGVzRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0VsZW1lbnQpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRTdWJ0aXRsZXModHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsKSB7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2sudXJsKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0RhdGEgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBvdXIgc3VidGl0bGUgcHJveHkgdG8gYXZvaWQgQ09SUyBpc3N1ZXNcbiAgICAgIGNvbnN0IHByb3h5VXJsID0gYC9hcGkvc3VidGl0bGVzP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0cmFjay51cmwpfWA7XG4gICAgICBcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnTG9hZGluZyBzdWJ0aXRsZXMgdmlhIHByb3h5JywgeyB1cmw6IHByb3h5VXJsIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3h5VXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzdWJ0aXRsZXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gdGhpcy5wYXJzZVN1YnRpdGxlcyh0ZXh0KTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSB0cmFjaztcbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZXMgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgY3Vlc1RvdGFsOiB0aGlzLnN1YnRpdGxlc0RhdGEubGVuZ3RoLFxuICAgICAgICBsYW5ndWFnZTogdHJhY2subGFuZ3VhZ2UgfHwgdHJhY2suaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBsb2FkaW5nIGZhaWxlZCcsIHtcbiAgICAgICAgdXJsOiB0cmFjay51cmwsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5ndWFnZSB8fCB0cmFjay5pZFxuICAgICAgfSwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gW107XG4gICAgICB0aGlzLmN1cnJlbnRTdWJ0aXRsZVRyYWNrID0gbnVsbDtcbiAgICAgIHRoaXMucmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdWJ0aXRsZXModGV4dDogc3RyaW5nKTogU3VidGl0bGVDdWVbXSB7XG4gICAgY29uc3QgY3VlczogU3VidGl0bGVDdWVbXSA9IFtdO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgV2ViVlRUIGZvcm1hdFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdXRUJWVFQnKSkge1xuICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnUGFyc2luZyBXZWJWVFQgc3VidGl0bGVzJyk7XG4gICAgICBcbiAgICAgIC8vIFNwbGl0IGJ5IGRvdWJsZSBuZXdsaW5lcyB0byBnZXQgY3VlIGJsb2Nrc1xuICAgICAgY29uc3QgYmxvY2tzID0gdGV4dC5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgdGltZWxpbmUgKGNvbnRhaW5zIC0tPilcbiAgICAgICAgICBjb25zdCB0aW1lTGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS5pbmNsdWRlcygnLS0+JykpO1xuICAgICAgICAgIGlmICh0aW1lTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVMaW5lID0gbGluZXNbdGltZUxpbmVJbmRleF07XG4gICAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSh0aW1lTGluZUluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlYlZUVCBmb3JtYXQ6IDAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDAuMDAwXG4gICAgICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0aW1lTGluZS5tYXRjaCgvKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KS8pO1xuICAgICAgICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFsyXSkgKiA2MDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFszXSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbNV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzddKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzhdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGN1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dExpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IFxuICAgIC8vIFNSVCBmb3JtYXQgcGFyc2VyXG4gICAgZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnLS0+JykpIHtcbiAgICAgIGxvZ0RlYnVnKExvZ0NhdGVnb3J5LlNUUkVBTSwgJ1BhcnNpbmcgU1JUIHN1YnRpdGxlcycpO1xuICAgICAgXG4gICAgICBjb25zdCBibG9ja3MgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgY29uc3QgdGltZUxpbmUgPSBsaW5lc1sxXTtcbiAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSgyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTUlQgZm9ybWF0OiAwMDowMDowMCwwMDAgLS0+IDAwOjAwOjAwLDAwMFxuICAgICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRpbWVMaW5lLm1hdGNoKC8oXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSwoXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSksKFxcZHszfSkvKTtcbiAgICAgICAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbMl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzNdKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IHBhcnNlSW50KHRpbWVNYXRjaFs1XSkgKiAzNjAwMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFs3XSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbOF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdWVzLnB1c2goe1xuICAgICAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgIHRleHQ6IHRleHRMaW5lcy5qb2luKCdcXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBwYXJzaW5nIGNvbXBsZXRlZCcsIHsgY3Vlc1RvdGFsOiBjdWVzLmxlbmd0aCB9KTtcbiAgICByZXR1cm4gY3VlcztcbiAgfVxuXG5cbiAgcHJpdmF0ZSBzaG91bGRVc2VITFMoc3RyZWFtVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3RyZWFtVXJsLmluY2x1ZGVzKCcubTN1OCcpIHx8IFxuICAgICAgICAgICAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgXG4gICAgICAgICAgICAod2luZG93IGFzIGFueSkuSGxzPy5pc1N1cHBvcnRlZCgpICYmIFxuICAgICAgICAgICAgIXRoaXMudmlkZW9FbGVtZW50IS5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmwnKSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwSExTKHN0cmVhbVVybDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5IbHM/LmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIGNvbnN0IEhscyA9ICh3aW5kb3cgYXMgYW55KS5IbHM7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbmV3IEhscyh7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlV29ya2VyOiB0cnVlLFxuICAgICAgICBsb3dMYXRlbmN5TW9kZTogZmFsc2UsXG4gICAgICAgIGJhY2tCdWZmZXJMZW5ndGg6IDMwLFxuICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDUwLFxuICAgICAgICBtYXhNYXhCdWZmZXJMZW5ndGg6IDgwLFxuICAgICAgICBtYXhGcmFnTG9va1VwVG9sZXJhbmNlOiAwLFxuICAgICAgICBtYXhCdWZmZXJIb2xlOiAwLFxuICAgICAgICBhcHBlbmRFcnJvck1heFJldHJ5OiAyMCxcbiAgICAgICAgbnVkZ2VNYXhSZXRyeTogMjAsXG4gICAgICAgIG1hbmlmZXN0TG9hZGluZ1RpbWVPdXQ6IDMwMDAwLFxuICAgICAgICBtYW5pZmVzdExvYWRpbmdNYXhSZXRyeTogMTAsXG4gICAgICAgIGZyYWdMb2FkUG9saWN5OiB7XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbWF4VGltZVRvRmlyc3RCeXRlTXM6IDEwMDAwLFxuICAgICAgICAgICAgbWF4TG9hZFRpbWVNczogMTIwMDAwLFxuICAgICAgICAgICAgdGltZW91dFJldHJ5OiB7XG4gICAgICAgICAgICAgIG1heE51bVJldHJ5OiAyMCxcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JSZXRyeToge1xuICAgICAgICAgICAgICBtYXhOdW1SZXRyeTogNixcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5sb2FkU291cmNlKHN0cmVhbVVybCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmF0dGFjaE1lZGlhKHRoaXMudmlkZW9FbGVtZW50KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLk1BTklGRVNUX1BBUlNFRCwgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUF1ZGlvVHJhY2tzKCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLkVSUk9SLCAoX2V2ZW50OiBhbnksIGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5mYXRhbCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBITFMgRXJyb3I6ICR7ZGF0YS50eXBlfSAtICR7ZGF0YS5kZXRhaWxzfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIGZvciBTYWZhcmkgYW5kIG90aGVyIGJyb3dzZXJzIHdpdGggbmF0aXZlIEhMUyBzdXBwb3J0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCEuc3JjID0gc3RyZWFtVXJsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQXVkaW9UcmFja3MoKSB7XG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UgJiYgdGhpcy5obHNJbnN0YW5jZS5hdWRpb1RyYWNrcykge1xuICAgICAgY29uc3QgdHJhY2tzOiBBdWRpb1RyYWNrW10gPSB0aGlzLmhsc0luc3RhbmNlLmF1ZGlvVHJhY2tzLm1hcCgodHJhY2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgaWQ6IGluZGV4LnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHRyYWNrLm5hbWUgfHwgYFRyYWNrICR7aW5kZXggKyAxfWAsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5nXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYXVkaW9UcmFja3MnLCB0cmFja3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lOiBrZXlvZiBWaWRlb1Byb3BlcnRpZXMsIHByb3BWYWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZWRQcm9wc1twcm9wTmFtZV0pIHtcbiAgICAgIHRoaXMuZW1pdCgncHJvcENoYW5nZWQnLCBwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUElcbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0cmVtaW9WaWRlb1N5c3RlbSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGRpc3BhdGNoKGFjdGlvbjogVmlkZW9BY3Rpb24pIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3RyZW1pb1ZpZGVvU3lzdGVtIGluc3RhbmNlIGlzIGRlc3Ryb3llZCcpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29ic2VydmVQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZWRQcm9wc1thY3Rpb24ucHJvcE5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmVtaXRDdXJyZW50UHJvcChhY3Rpb24ucHJvcE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzZXRQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSAmJiBhY3Rpb24ucHJvcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnNldFByb3AoYWN0aW9uLnByb3BOYW1lLCBhY3Rpb24ucHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbWFuZCc6XG4gICAgICAgIGlmIChhY3Rpb24uY29tbWFuZE5hbWUpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGFjdGlvbi5jb21tYW5kTmFtZSwgYWN0aW9uLmNvbW1hbmRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXRDdXJyZW50UHJvcChwcm9wTmFtZToga2V5b2YgVmlkZW9Qcm9wZXJ0aWVzKSB7XG4gICAgc3dpdGNoIChwcm9wTmFtZSkge1xuICAgICAgY2FzZSAnbG9hZGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPj0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsICF0aGlzLnZpZGVvRWxlbWVudCB8fCB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSAqIDEwMDAgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5kdXJhdGlvbiA/IHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uICogMTAwMCA6IG51bGwpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmluZyc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCAhdGhpcy52aWRlb0VsZW1lbnQgfHwgdGhpcy52aWRlb0VsZW1lbnQucmVhZHlTdGF0ZSA8IDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2x1bWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkgOiAxMDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ211dGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgOiBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCA/IHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA6IDEpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldFByb3AocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpIHtcbiAgICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICAvLyBVc2UgU3RyZW1pbydzIGxvYWQgY29tbWFuZCBwYXR0ZXJuIGluc3RlYWQgb2YgZGlyZWN0IHN0cmVhbSBzZXR0aW5nXG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICBjb21tYW5kQXJnczoge1xuICAgICAgICAgICAgICBzdHJlYW06IHsgdXJsOiBwcm9wVmFsdWUgfSxcbiAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAndW5sb2FkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgaWYgKHByb3BWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0aW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwcm9wVmFsdWUgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndm9sdW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC52b2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSkpIC8gMTAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbXV0ZWQnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9ICEhcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiBwcm9wVmFsdWUgIT09IG51bGwgJiYgaXNGaW5pdGUocHJvcFZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdGVkU3VidGl0bGVzVHJhY2tJZCc6XG4gICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCBzdWJ0aXRsZSB0cmFja3MgdG8gYmUgcHJvdmlkZWRcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBoYW5kbGUgdGhlIHN1YnRpdGxlIHRyYWNrIGxvYWRpbmdcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBTdWJ0aXRsZSBzdHlsaW5nIHByb3BlcnRpZXNcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzU2l6ZSc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNTaXplID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDUwLCBwcm9wVmFsdWUgfHwgMjUpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc09mZnNldCc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNPZmZzZXQgPSBNYXRoLm1heCgtMjAsIE1hdGgubWluKDIwLCBwcm9wVmFsdWUgfHwgMCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzVGV4dENvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvciA9IHByb3BWYWx1ZSB8fCAnI0ZGRkZGRic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3InOlxuICAgICAgICB0aGlzLmV4dHJhU3VidGl0bGVzQmFja2dyb3VuZENvbG9yID0gcHJvcFZhbHVlIHx8ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvciA9IHByb3BWYWx1ZSB8fCAnIzAwMDAwMCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc09wYWNpdHkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSB8fCAxMDApKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc0RlbGF5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc0RlbGF5ID0gcHJvcFZhbHVlIHx8IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWU6IHN0cmluZywgY29tbWFuZEFyZ3M/OiBhbnkpIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmROYW1lKSB7XG4gICAgICBjYXNlICdsb2FkJzpcbiAgICAgICAgdGhpcy5leGVjdXRlTG9hZENvbW1hbmQoY29tbWFuZEFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VubG9hZCc6XG4gICAgICAgIHRoaXMuZXhlY3V0ZVVubG9hZENvbW1hbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0b3AnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlZWsnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgY29tbWFuZEFyZ3MgJiYgY29tbWFuZEFyZ3NbMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gY29tbWFuZEFyZ3NbMF0gLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUxvYWRDb21tYW5kKGNvbW1hbmRBcmdzOiBhbnkpIHtcbiAgICB0aGlzLmV4ZWN1dGVVbmxvYWRDb21tYW5kKCk7IC8vIFVubG9hZCBhbnkgZXhpc3Rpbmcgc3RyZWFtIGZpcnN0XG4gICAgXG4gICAgaWYgKGNvbW1hbmRBcmdzICYmIGNvbW1hbmRBcmdzLnN0cmVhbSAmJiB0eXBlb2YgY29tbWFuZEFyZ3Muc3RyZWFtLnVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IGNvbW1hbmRBcmdzLnN0cmVhbS51cmw7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVWaWRlb0VsZW1lbnQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdMb2FkaW5nIHN0cmVhbSB2aWEgbG9hZCBjb21tYW5kJywgeyBcbiAgICAgICAgdXJsOiB0aGlzLmN1cnJlbnRTdHJlYW0sXG4gICAgICAgIGF1dG9wbGF5OiB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB2aWRlbyBwcm9wZXJ0aWVzXG4gICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kQXJncy50aW1lICE9PSBudWxsICYmIGlzRmluaXRlKGNvbW1hbmRBcmdzLnRpbWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwYXJzZUludChjb21tYW5kQXJncy50aW1lLCAxMCkgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBITFMgb3IgZGlyZWN0IHZpZGVvXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdHJlYW0gJiYgdGhpcy5zaG91bGRVc2VITFModGhpcy5jdXJyZW50U3RyZWFtKSkge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyB1cCBITFMgc3RyZWFtaW5nJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICB0aGlzLnNldHVwSExTKHRoaXMuY3VycmVudFN0cmVhbSEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyBkaXJlY3QgdmlkZW8gc291cmNlJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ2dyZXNzaXZlIHByZWxvYWQgc3RyYXRlZ3kgZm9yIFJlYWwtRGVicmlkIHN0cmVhbXNcbiAgICAgICAgICAvLyBGb3JjZSBmdWxsIHByZWxvYWRpbmcgdG8gb3ZlcmNvbWUgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSB0aGlzLmN1cnJlbnRTdHJlYW0hO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbmZpZ3VyZSB2aWRlbyBlbGVtZW50IGZvciBvcHRpbWFsIHN0cmVhbWluZyBhbmQgYWdncmVzc2l2ZSBidWZmZXJpbmdcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJ3RydWUnKTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICd0cnVlJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yY2UgYWdncmVzc2l2ZSBidWZmZXJpbmcgZm9yIGxhcmdlIGZpbGVzXG4gICAgICAgICAgaWYgKCdidWZmZXJEYXRhJyBpbiB0aGlzLnZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgKHRoaXMudmlkZW9FbGVtZW50IGFzIGFueSkuYnVmZmVyRGF0YSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCBuZXR3b3JrIHN0YXRlIG9wdGltaXphdGlvblxuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmNyb3NzT3JpZ2luID0gbnVsbDsgLy8gUmVtb3ZlIENPUlMgcmVzdHJpY3Rpb25zXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGxvYWQgc3RyYXRlZ3kgb3B0aW1pemF0aW9uXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1N0YXJ0aW5nIGFnZ3Jlc3NpdmUgYnVmZmVyIGxvYWRpbmcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW50ZWxsaWdlbnQgYnVmZmVyIG1vbml0b3Jpbmcgd2l0aCBidWZmZXIgaGVhbHRoIG1hbmFnZW1lbnRcbiAgICAgICAgICBsZXQgYnVmZmVySGVhbHRoVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgbGV0IGxvd0J1ZmZlckNvdW50ID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5idWZmZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckFoZWFkID0gYnVmZmVyZWQgLSBjdXJyZW50O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdCdWZmZXIgc3RhdHVzJywge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckFoZWFkOiBgJHtidWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBgJHtjdXJyZW50LnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVyZWRFbmQ6IGAke2J1ZmZlcmVkLnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoOiBidWZmZXJBaGVhZCA8IDUgPyAnTE9XJyA6IGJ1ZmZlckFoZWFkIDwgMTUgPyAnTUVESVVNJyA6ICdISUdIJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE1vcmUgYWdncmVzc2l2ZSBidWZmZXIgbWFuYWdlbWVudCBmb3IgUmVhbC1EZWJyaWQgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgICAgIGlmIChidWZmZXJBaGVhZCA8IDUgJiYgIXRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIGxvd0J1ZmZlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0xvdyBidWZmZXIgZGV0ZWN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgIGxvd0J1ZmZlckV2ZW50czogbG93QnVmZmVyQ291bnQsXG4gICAgICAgICAgICAgICAgICByZWFkeVN0YXRlOiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRm9yIHZlcnkgbG93IGJ1ZmZlciBvciBmcmVxdWVudCBidWZmZXJpbmcsIHBhdXNlIGxvbmdlciB0byBidWlsZCB1cCBidWZmZXJcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyQWhlYWQgPCAzIHx8IGxvd0J1ZmZlckNvdW50ID4gMikge1xuICAgICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1BhdXNpbmcgZm9yIGFnZ3Jlc3NpdmUgYnVmZmVyIHJlY292ZXJ5Jywge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgICAgcGF1c2VEdXJhdGlvbjogJzUwMDBtcydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0J1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQubGVuZ3RoID4gMCA/IFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdCdWZmZXJBaGVhZCA9IG5ld0J1ZmZlcmVkIC0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1Jlc3VtaW5nIGFmdGVyIGJ1ZmZlciByZWNvdmVyeScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlckJlZm9yZTogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlckFmdGVyOiBgJHtuZXdCdWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IE1hdGgubWF4KDAsIGxvd0J1ZmZlckNvdW50IC0gMSk7IC8vIEdyYWR1YWxseSByZWR1Y2UgY291bnRlclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LCA1MDAwKTsgLy8gTG9uZ2VyIHBhdXNlIGZvciBiZXR0ZXIgYnVmZmVyIGJ1aWxkaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJ1ZmZlckFoZWFkID4gMTApIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb3VudGVyIHdoZW4gYnVmZmVyIGlzIHRydWx5IGhlYWx0aHlcbiAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBzdGFsbCBkZXRlY3Rpb24gYW5kIHJlY292ZXJ5XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3RhbGxlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGxvZ1dhcm4oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdWaWRlbyBzdGFsbGVkLCBhdHRlbXB0aW5nIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAvLyBCcmllZiBwYXVzZSB0byBhbGxvdyBtb3JlIGJ1ZmZlcmluZ1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlIDwgMykge1xuICAgICAgICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdUcmlnZ2VyaW5nIGxvYWQgZm9yIHN0YWxsIHJlY292ZXJ5Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgd2FpdGluZyBldmVudCBoYW5kbGluZ1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1ZpZGVvIHdhaXRpbmcgZm9yIGRhdGEnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEVtaXQgcHJvcGVydHkgY2hhbmdlc1xuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgdGhpcy5jdXJyZW50U3RyZWFtKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZVVubG9hZENvbW1hbmQoKSB7XG4gICAgdGhpcy5jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgICBcbiAgICBpZiAodGhpcy5obHNJbnN0YW5jZSkge1xuICAgICAgdGhpcy5obHNJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnc3RyZWFtJywgbnVsbCk7XG4gIH1cblxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGxvYWQgc3VidGl0bGVzXG4gIGxvYWRTdWJ0aXRsZVRyYWNrKHRyYWNrOiBTdWJ0aXRsZVRyYWNrIHwgbnVsbCkge1xuICAgIHJldHVybiB0aGlzLmxvYWRTdWJ0aXRsZXModHJhY2spO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHJldHVybjtcblxuICAgICh0aGlzIGFzIGFueSkuZGVzdHJveWVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmhsc0luc3RhbmNlKSB7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuaGxzSW5zdGFuY2UgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciAmJiB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc3VidGl0bGVzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZGVvRWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudExpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMudmlkZW9FbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciA9IG51bGw7XG4gICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kZXN0cm95ZWQ7XG4gIH1cbn0iXSwibWFwcGluZ3MiOiJBQUdBLFNBQVMsYUFBYSxTQUFTLFVBQVUsVUFBVSxlQUFlO0FBaUUzRCxhQUFNLG1CQUFtQjtBQUFBLEVBQ3RCO0FBQUEsRUFDQSxlQUF3QztBQUFBLEVBQ3hDLHFCQUF5QztBQUFBLEVBQ3pDLG1CQUF1QztBQUFBLEVBQ3ZDLGNBQW1CO0FBQUEsRUFFbkIsZ0JBQTRELENBQUM7QUFBQSxFQUM3RCxpQkFBZ0QsQ0FBQztBQUFBO0FBQUEsRUFHakQsZ0JBQStCO0FB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"
          },
          "redirectURL": "",
          "headersSize": 292,
          "bodySize": 89897,
          "_transferSize": 90189,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:33.247Z",
        "time": 10.748999993666075,
        "timings": {
          "blocked": 1.947999992580153,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.133,
          "wait": 1.219999997152947,
          "receive": 7.448000003932975,
          "_blocked_queueing": 1.632999992580153,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "sendLogBatch",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 50,
                "columnNumber": 12
              },
              {
                "functionName": "flushToFile",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 85,
                "columnNumber": 9
              },
              {
                "functionName": "",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 34,
                "columnNumber": 11
              }
            ]
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33193",
        "request": {
          "method": "POST",
          "url": "http://localhost:5173/api/logs",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "43910"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/watch/tt26743210?stream=https%3A%2F%2Fsgp1-4.download.real-debrid.com%2Fd%2F7ZATI3Q7EVVUS75%2FHow.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv&quality=4K"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 1145,
          "bodySize": 43910,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"logs\":[{\"timestamp\":\"2025-08-01T11:32:33.299Z\",\"level\":2,\"category\":\"PLAYER\",\"message\":\"Creating new video element\"},{\"timestamp\":\"2025-08-01T11:32:33.301Z\",\"level\":2,\"category\":\"STREAM\",\"message\":\"Loading stream via load command\",\"data\":{\"url\":\"https://sgp1-4.download.real-debrid.com/d/7ZATI3Q7EVVUS75/How.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv\",\"autoplay\":true}},{\"timestamp\":\"2025-08-01T11:32:33.302Z\",\"level\":2,\"category\":\"STREAM\",\"message\":\"Setting direct video source\",\"data\":{\"url\":\"https://sgp1-4.download.real-debrid.com/d/7ZATI3Q7EVVUS75/How.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv\"}},{\"timestamp\":\"2025-08-01T11:32:33.323Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.328Z\",\"level\":3,\"category\":\"PLAYER\",\"message\":\"Video loadstart event\"},{\"timestamp\":\"2025-08-01T11:32:33.328Z\",\"level\":2,\"category\":\"PERFORMANCE\",\"message\":\"Starting aggressive buffer loading\"},{\"timestamp\":\"2025-08-01T11:32:33.338Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.357Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.369Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.370Z\",\"level\":2,\"category\":\"PLAYER\",\"message\":\"Video loadedmetadata event\",\"data\":{\"duration\":7519.512,\"durationFormatted\":\"125:19\"}},{\"timestamp\":\"2025-08-01T11:32:33.381Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.389Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.397Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.404Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.413Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.430Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.443Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.453Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.463Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.475Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.488Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.496Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.506Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.513Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.522Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.529Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.538Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.544Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.552Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.562Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.571Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.581Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.590Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.600Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.611Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.621Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.630Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.639Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.649Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.660Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.670Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.680Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.688Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.696Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.705Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.713Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.721Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.730Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.737Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.743Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.754Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.765Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.784Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.797Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.810Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.825Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.835Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.850Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.859Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.869Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.884Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.892Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.903Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.916Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.925Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.940Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.954Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.968Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.982Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:33.994Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.005Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.024Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.037Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.050Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.060Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.073Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.086Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.096Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.112Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.133Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.143Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.156Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.167Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.182Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.195Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.207Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.222Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.237Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.252Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.266Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.282Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.296Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.309Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.327Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.342Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.364Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.379Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.395Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.412Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.433Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.450Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.470Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.487Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.501Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.510Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.527Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.540Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.549Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.564Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.576Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.590Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.599Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.613Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.625Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.635Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.650Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.661Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.669Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.680Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.692Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.700Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.711Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.720Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.735Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.750Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.761Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.769Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.777Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.785Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.792Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.800Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.812Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.827Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.840Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.851Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.862Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.869Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.875Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.884Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.892Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.900Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.912Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.926Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.936Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.945Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.954Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.966Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.976Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.984Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:34.991Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.002Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.013Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.025Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.039Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.053Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.065Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.073Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.082Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.089Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.144Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.170Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.182Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.190Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.198Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.203Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.213Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.224Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.234Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.244Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.253Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.263Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.273Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.284Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.297Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.313Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.327Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.345Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.357Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.372Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.388Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.399Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.411Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.424Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.439Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.452Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.461Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.470Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.481Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.491Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.499Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.508Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.517Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.525Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.533Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.542Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.550Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.557Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.565Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.573Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.585Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.600Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.610Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.622Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.637Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.647Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.658Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.671Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.681Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.693Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.708Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.716Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.729Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.738Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.748Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.758Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.770Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.783Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.793Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.804Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.813Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.825Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.839Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.847Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.861Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.868Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.881Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.889Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.902Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.910Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.923Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.932Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.940Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.948Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.960Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.966Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.974Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.981Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.989Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:35.996Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.002Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.011Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.021Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.030Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.042Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.052Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.060Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.069Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.081Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.089Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.097Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.106Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.120Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.129Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.139Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.156Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.164Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.177Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.188Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.200Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.213Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.224Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.231Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.242Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.250Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.260Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.269Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.280Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.289Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.296Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.305Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.314Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.324Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.332Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.340Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.350Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.358Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.364Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.371Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.381Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.394Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.407Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.429Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.454Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.463Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.495Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.505Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.519Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.525Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.533Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.542Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.547Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.554Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.563Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.571Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.579Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.592Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.601Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.616Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.626Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.638Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.648Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.667Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.683Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.695Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.706Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.718Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.729Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.742Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.753Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.767Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.775Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.786Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.794Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.803Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.813Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.825Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.834Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.845Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.854Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.863Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.872Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.886Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.896Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.905Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.916Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.924Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.936Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.945Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.954Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.963Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.974Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.981Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:36.995Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.011Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.020Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.035Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.047Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.055Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.070Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.082Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.093Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.103Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.112Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.120Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.126Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.134Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.147Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.159Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.167Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.179Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.188Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.198Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.212Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.223Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.241Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.255Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.265Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.274Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.287Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.299Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.307Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.319Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.328Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.334Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.347Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.359Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.369Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.379Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.385Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.393Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.400Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.406Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.413Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.419Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.426Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.432Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.440Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.446Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.452Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.460Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.469Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.479Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.487Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.494Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.503Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.512Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.520Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.530Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.536Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.544Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.552Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.561Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"}]}"
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Vary",
              "value": "Origin"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "68"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Fri, 01 Aug 2025 11:32:37 GMT"
            },
            {
              "name": "etag",
              "value": "W/\"44-PrSZGpqLth3VTJtuapicmk1QRhs\""
            },
            {
              "name": "x-powered-by",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 68,
            "mimeType": "application/json",
            "compression": 0,
            "text": "{\"status\":\"ok\",\"message\":\"Logged 392 entries to app-2025-08-01.log\"}"
          },
          "redirectURL": "",
          "headersSize": 253,
          "bodySize": 68,
          "_transferSize": 321,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:37.563Z",
        "time": 18.395999999484047,
        "timings": {
          "blocked": 5.807999989645555,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.34299999999999997,
          "wait": 8.441999995679595,
          "receive": 3.803000014158897,
          "_blocked_queueing": 5.406999989645556,
          "_workerStart": -4.524,
          "_workerReady": -3.943,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "sendLogBatch",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 50,
                "columnNumber": 12
              },
              {
                "functionName": "flushToFile",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 85,
                "columnNumber": 9
              },
              {
                "functionName": "",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 34,
                "columnNumber": 11
              }
            ]
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33242",
        "request": {
          "method": "POST",
          "url": "http://localhost:5173/api/logs",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "49738"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/watch/tt26743210?stream=https%3A%2F%2Fsgp1-4.download.real-debrid.com%2Fd%2F7ZATI3Q7EVVUS75%2FHow.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv&quality=4K"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 1145,
          "bodySize": 49738,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"logs\":[{\"timestamp\":\"2025-08-01T11:32:37.572Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.581Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.596Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.609Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.619Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.626Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.633Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.647Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.657Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.665Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.679Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.687Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.699Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.710Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.720Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.732Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.741Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.757Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.770Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.788Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.824Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.841Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.861Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.870Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.876Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.885Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.889Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.896Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.907Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.914Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.924Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.935Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.947Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.960Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.970Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.987Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:37.996Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.006Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.018Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.030Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.038Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.051Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.061Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.073Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.080Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.089Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.100Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.109Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.122Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.136Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.149Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.158Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.170Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.177Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.189Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.196Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.211Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.225Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.234Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.247Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.256Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.272Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.285Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.293Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.304Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.313Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.323Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.329Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.340Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.351Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.358Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.369Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.381Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.393Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.403Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.415Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.425Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.437Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.450Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.459Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.474Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.486Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.496Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.505Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.519Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.530Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.541Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.554Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.565Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.577Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.587Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.596Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.607Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.616Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.624Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.633Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.644Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.655Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.664Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.673Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.681Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.688Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.696Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.706Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.713Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.722Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.729Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.743Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.750Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.761Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.770Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.781Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.787Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.797Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.805Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.813Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.828Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.842Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.853Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.868Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.880Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.888Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.900Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.908Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.922Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.931Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.940Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.948Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.960Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.970Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.978Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.989Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:38.997Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.005Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.015Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.023Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.030Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.041Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.050Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.063Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.075Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.085Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.097Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.107Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.116Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.125Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.134Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.150Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.168Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.184Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.206Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.221Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.250Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.264Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.272Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.282Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.287Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.297Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.303Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.311Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.321Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.333Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.343Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.354Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.366Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.376Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.388Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.400Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.410Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.422Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.432Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.443Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.452Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.463Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.479Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.489Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.503Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.514Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.524Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.539Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.549Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.560Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.581Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.595Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.607Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.621Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.632Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.645Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.658Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.673Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.684Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.695Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.708Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.721Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.733Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.744Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.762Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.778Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.788Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.804Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.814Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.826Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.841Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.850Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.864Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.874Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.890Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.905Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.917Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.928Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.938Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.959Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.975Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:39.987Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.003Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.016Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.028Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.039Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.053Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.062Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.076Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.088Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.096Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.112Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.121Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.132Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.141Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.151Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.159Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.166Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.175Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.182Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.190Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.196Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.206Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.213Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.222Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.230Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.239Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.247Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.254Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.263Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.269Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.276Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.286Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.293Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.304Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.313Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.326Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.333Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.345Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.351Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.361Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.368Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.377Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.385Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.393Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.403Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.416Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.423Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.432Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.444Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.455Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.462Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.472Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.481Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.488Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.499Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.507Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.518Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.525Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.541Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.547Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.566Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.586Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.594Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.627Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.642Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.694Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.704Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.709Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.716Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.727Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.739Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.746Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.755Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.764Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.782Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.801Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.814Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.831Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.843Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.853Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.865Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.878Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.887Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.903Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.922Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.933Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.947Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.965Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.974Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:40.986Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.001Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.011Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.022Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.034Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.048Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.061Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.078Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.089Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.102Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.112Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.129Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.142Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.152Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.159Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.166Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.181Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.194Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.205Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.224Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.240Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.249Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.257Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.267Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.280Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.294Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.313Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.326Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.337Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.353Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.367Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.379Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.391Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.401Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.408Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.416Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.426Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.437Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.452Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.465Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.480Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.487Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.497Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.504Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.514Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.523Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.535Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.543Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.553Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.562Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.573Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.583Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.596Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.604Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.612Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.621Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.629Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.640Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.648Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.660Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.669Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.679Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.687Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.696Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.705Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.713Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.722Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.729Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.737Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.749Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.754Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.765Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.772Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.781Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.788Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.796Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.807Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.815Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.825Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.833Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.842Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.849Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.857Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.863Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.871Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.877Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.887Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.894Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.904Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.912Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.920Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.929Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.939Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.947Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.956Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.970Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:41.989Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.003Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.039Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.051Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.089Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.098Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.105Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.113Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.123Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.130Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.145Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.153Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.164Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.180Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.194Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.204Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.215Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.227Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.241Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.255Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.268Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.281Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.288Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.297Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.309Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.318Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.333Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.347Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.356Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.369Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.377Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.384Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.391Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.399Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.410Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.422Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.433Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.442Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.452Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.460Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.471Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.484Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.495Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.505Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.512Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.517Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.527Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.540Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.549Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.558Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"}]}"
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Vary",
              "value": "Origin"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "68"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Fri, 01 Aug 2025 11:32:42 GMT"
            },
            {
              "name": "etag",
              "value": "W/\"44-FVLpilxSYYme2WKwkXzKzoNRaMM\""
            },
            {
              "name": "x-powered-by",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 68,
            "mimeType": "application/json",
            "compression": 0,
            "text": "{\"status\":\"ok\",\"message\":\"Logged 448 entries to app-2025-08-01.log\"}"
          },
          "redirectURL": "",
          "headersSize": 253,
          "bodySize": 68,
          "_transferSize": 321,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:42.568Z",
        "time": 23.400000007692725,
        "timings": {
          "blocked": 9.515000003960916,
          "dns": 0.015000000000000013,
          "ssl": -1,
          "connect": 0.5389999999999999,
          "send": 1.1109999999999998,
          "wait": 9.237999998300337,
          "receive": 2.9820000054314733,
          "_blocked_queueing": 9.103000003960915,
          "_workerStart": -6.723,
          "_workerReady": -5.582,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "importUpdatedModule",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 814,
                "columnNumber": 43
              },
              {
                "functionName": "fetchUpdate",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 209,
                "columnNumber": 31
              },
              {
                "functionName": "queueUpdate",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 188,
                "columnNumber": 29
              },
              {
                "functionName": "",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 838,
                "columnNumber": 54
              },
              {
                "functionName": "handleMessage",
                "scriptId": "167",
                "url": "http://localhost:5173/@vite/client",
                "lineNumber": 837,
                "columnNumber": 37
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 458,
                  "columnNumber": 41
                },
                {
                  "functionName": "dequeue",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 480,
                  "columnNumber": 7
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 472,
                  "columnNumber": 8
                },
                {
                  "functionName": "enqueue",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 466,
                  "columnNumber": 9
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 458,
                  "columnNumber": 27
                },
                {
                  "functionName": "onMessage",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 305,
                  "columnNumber": 5
                },
                {
                  "functionName": "",
                  "scriptId": "167",
                  "url": "http://localhost:5173/@vite/client",
                  "lineNumber": 413,
                  "columnNumber": 4
                }
              ]
            }
          }
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047966153",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/@vite/client"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047966153"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Etag",
              "value": "W/\"208b-mF2U3U9AOxXImr/CSGdbpLI+jt4\""
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Content-Length",
              "value": "26890"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:46 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 26890,
            "mimeType": "text/javascript",
            "text": "import { createHotContext as __vite__createHotContext } from \"/@vite/client\";import.meta.hot = __vite__createHotContext(\"/src/lib/video/StremioVideoPlayer.tsx\");import __vite__cjsImport0_react_jsxDevRuntime from \"/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=905c193d\"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime[\"jsxDEV\"];\nimport * as RefreshRuntime from \"/@react-refresh\";\nconst inWebWorker = typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope;\nlet prevRefreshReg;\nlet prevRefreshSig;\nif (import.meta.hot && !inWebWorker) {\n  if (!window.$RefreshReg$) {\n    throw new Error(\n      \"@vitejs/plugin-react can't detect preamble. Something is wrong.\"\n    );\n  }\n  prevRefreshReg = window.$RefreshReg$;\n  prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = RefreshRuntime.getRefreshReg(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\");\n  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport __vite__cjsImport3_react from \"/node_modules/.vite/deps/react.js?v=905c193d\"; const useEffect = __vite__cjsImport3_react[\"useEffect\"]; const useRef = __vite__cjsImport3_react[\"useRef\"]; const useImperativeHandle = __vite__cjsImport3_react[\"useImperativeHandle\"]; const forwardRef = __vite__cjsImport3_react[\"forwardRef\"];\nimport { StremioVideoSystem } from \"/src/lib/video/StremioVideoSystem.ts?t=1754047966153\";\nconst StremioVideoPlayer = _s(forwardRef(_c = _s((props, ref) => {\n  _s();\n  const containerRef = useRef(null);\n  const videoInstanceRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    dispatch: (action) => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.dispatch(action);\n      }\n    },\n    destroy: () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    }\n  }));\n  useEffect(() => {\n    if (!containerRef.current) {\n      console.warn(\"StremioVideoPlayer: Container element not ready\");\n      return;\n    }\n    console.log(\"StremioVideoPlayer: Initializing video system\");\n    videoInstanceRef.current = new StremioVideoSystem({\n      containerElement: containerRef.current\n    });\n    if (props.onPropChanged) {\n      videoInstanceRef.current.on(\"propChanged\", props.onPropChanged);\n    }\n    if (props.onError) {\n      videoInstanceRef.current.on(\"error\", props.onError);\n    }\n    if (props.onEnded) {\n      videoInstanceRef.current.on(\"ended\", props.onEnded);\n    }\n    const propsToObserve = [\n      \"loaded\",\n      \"paused\",\n      \"time\",\n      \"duration\",\n      \"buffering\",\n      \"buffered\",\n      \"volume\",\n      \"muted\",\n      \"playbackSpeed\",\n      \"audioTracks\",\n      \"subtitlesTracks\"\n    ];\n    propsToObserve.forEach((propName) => {\n      videoInstanceRef.current.dispatch({\n        type: \"observeProp\",\n        propName\n      });\n    });\n    return () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitleTrack) {\n      videoInstanceRef.current.loadSubtitleTrack(props.subtitleTrack);\n    } else {\n      videoInstanceRef.current.loadSubtitleTrack(null);\n    }\n  }, [props.subtitleTrack]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.stream !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"stream\",\n        propValue: props.stream\n      });\n    }\n  }, [props.stream]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.paused !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"paused\",\n        propValue: props.paused\n      });\n    }\n  }, [props.paused]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.time !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"time\",\n        propValue: props.time\n      });\n    }\n  }, [props.time]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.volume !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"volume\",\n        propValue: props.volume\n      });\n    }\n  }, [props.volume]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.muted !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"muted\",\n        propValue: props.muted\n      });\n    }\n  }, [props.muted]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.playbackSpeed !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"playbackSpeed\",\n        propValue: props.playbackSpeed\n      });\n    }\n  }, [props.playbackSpeed]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesSize !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesSize\",\n        propValue: props.subtitlesSize\n      });\n    }\n  }, [props.subtitlesSize]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOffset !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOffset\",\n        propValue: props.subtitlesOffset\n      });\n    }\n  }, [props.subtitlesOffset]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesTextColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesTextColor\",\n        propValue: props.subtitlesTextColor\n      });\n    }\n  }, [props.subtitlesTextColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesBackgroundColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesBackgroundColor\",\n        propValue: props.subtitlesBackgroundColor\n      });\n    }\n  }, [props.subtitlesBackgroundColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOutlineColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOutlineColor\",\n        propValue: props.subtitlesOutlineColor\n      });\n    }\n  }, [props.subtitlesOutlineColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOpacity !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOpacity\",\n        propValue: props.subtitlesOpacity\n      });\n    }\n  }, [props.subtitlesOpacity]);\n  return /* @__PURE__ */ jsxDEV(\n    \"div\",\n    {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: \"#000\",\n        ...props.style\n      },\n      className: props.className\n    },\n    void 0,\n    false,\n    {\n      fileName: \"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\",\n      lineNumber: 320,\n      columnNumber: 5\n    },\n    this\n  );\n}, \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\")), \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\");\n_c2 = StremioVideoPlayer;\nStremioVideoPlayer.displayName = \"StremioVideoPlayer\";\nexport default StremioVideoPlayer;\nvar _c, _c2;\n$RefreshReg$(_c, \"StremioVideoPlayer$forwardRef\");\n$RefreshReg$(_c2, \"StremioVideoPlayer\");\nif (import.meta.hot && !inWebWorker) {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}\nif (import.meta.hot && !inWebWorker) {\n  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {\n    RefreshRuntime.registerExportsForReactRefresh(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports);\n    import.meta.hot.accept((nextExports) => {\n      if (!nextExports) return;\n      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports, nextExports);\n      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);\n    });\n  });\n}\n\n//# sourceMappingURL=data:application/json;base64,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O0FBQUEsRUFTNkI7QUFHakMsR0FBQyxrQ0FBQztBQUFDQyxNQTNPRzdDO0FBNk9OQSxtQkFBbUI4QyxjQUFjO0FBRWpDLGVBQWU5QztBQUFtQixJQUFBRSxJQUFBMkM7QUFBQUUsYUFBQTdDLElBQUE7QUFBQTZDLGFBQUFGLEtBQUEiLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIlN0cmVtaW9WaWRlb1N5c3RlbSIsIlN0cmVtaW9WaWRlb1BsYXllciIsIl9zIiwiX2MiLCJwcm9wcyIsInJlZiIsImNvbnRhaW5lclJlZiIsInZpZGVvSW5zdGFuY2VSZWYiLCJkaXNwYXRjaCIsImFjdGlvbiIsImN1cnJlbnQiLCJkZXN0cm95IiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJjb250YWluZXJFbGVtZW50Iiwib25Qcm9wQ2hhbmdlZCIsIm9uIiwib25FcnJvciIsIm9uRW5kZWQiLCJwcm9wc1RvT2JzZXJ2ZSIsImZvckVhY2giLCJwcm9wTmFtZSIsInR5cGUiLCJzdWJ0aXRsZVRyYWNrIiwibG9hZFN1YnRpdGxlVHJhY2siLCJzdHJlYW0iLCJ1bmRlZmluZWQiLCJwcm9wVmFsdWUiLCJwYXVzZWQiLCJ0aW1lIiwidm9sdW1lIiwibXV0ZWQiLCJwbGF5YmFja1NwZWVkIiwic3VidGl0bGVzU2l6ZSIsInN1YnRpdGxlc09mZnNldCIsInN1YnRpdGxlc1RleHRDb2xvciIsInN1YnRpdGxlc0JhY2tncm91bmRDb2xvciIsInN1YnRpdGxlc091dGxpbmVDb2xvciIsInN1YnRpdGxlc09wYWNpdHkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJjbGFzc05hbWUiLCJfYzIiLCJkaXNwbGF5TmFtZSIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJTdHJlbWlvVmlkZW9QbGF5ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWN0IFdyYXBwZXIgZm9yIFN0cmVtaW8gVmlkZW8gUGxheWVyXG4vLyBJbnRlZ3JhdGVzIFN0cmVtaW8ncyB2aWRlbyBhcmNoaXRlY3R1cmUgd2l0aCBSZWFjdFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUsIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHJlbWlvVmlkZW9TeXN0ZW0gfSBmcm9tICcuL1N0cmVtaW9WaWRlb1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9Qcm9wZXJ0aWVzIHtcbiAgc3RyZWFtPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9hZGVkPzogYm9vbGVhbjtcbiAgcGF1c2VkPzogYm9vbGVhbjtcbiAgdGltZT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIGJ1ZmZlcmluZz86IGJvb2xlYW47XG4gIGJ1ZmZlcmVkPzogVGltZVJhbmdlcyB8IG51bGw7XG4gIGF1ZGlvVHJhY2tzPzogQXVkaW9UcmFja1tdO1xuICBzZWxlY3RlZEF1ZGlvVHJhY2tJZD86IHN0cmluZyB8IG51bGw7XG4gIHN1YnRpdGxlc1RyYWNrcz86IFN1YnRpdGxlVHJhY2tbXTtcbiAgc2VsZWN0ZWRTdWJ0aXRsZXNUcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzT2Zmc2V0PzogbnVtYmVyO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNUZXh0Q29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzT3V0bGluZUNvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPcGFjaXR5PzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgLy8gQWRkaXRpb25hbCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZW1pb1ZpZGVvUGxheWVyUHJvcHMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgc3VidGl0bGVUcmFjaz86IFN1YnRpdGxlVHJhY2sgfCBudWxsO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIG9uUHJvcENoYW5nZWQ/OiAocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcbiAgb25FbmRlZD86ICgpID0+IHZvaWQ7XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVtaW9WaWRlb1BsYXllclJlZiB7XG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFN0cmVtaW9WaWRlb1BsYXllciA9IGZvcndhcmRSZWY8U3RyZW1pb1ZpZGVvUGxheWVyUmVmLCBTdHJlbWlvVmlkZW9QbGF5ZXJQcm9wcz4oKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgdmlkZW9JbnN0YW5jZVJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICBpZiAodmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kZXN0cm95KCk7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1N0cmVtaW9WaWRlb1BsYXllcjogQ29udGFpbmVyIGVsZW1lbnQgbm90IHJlYWR5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N0cmVtaW9WaWRlb1BsYXllcjogSW5pdGlhbGl6aW5nIHZpZGVvIHN5c3RlbScpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBTdHJlbWlvIHZpZGVvIHN5c3RlbSBpbnN0YW5jZVxuICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG5ldyBTdHJlbWlvVmlkZW9TeXN0ZW0oe1xuICAgICAgY29udGFpbmVyRWxlbWVudDogY29udGFpbmVyUmVmLmN1cnJlbnRcbiAgICB9KTtcblxuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICBpZiAocHJvcHMub25Qcm9wQ2hhbmdlZCkge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50Lm9uKCdwcm9wQ2hhbmdlZCcsIHByb3BzLm9uUHJvcENoYW5nZWQpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5vbkVycm9yKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQub24oJ2Vycm9yJywgcHJvcHMub25FcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm9uRW5kZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5vbignZW5kZWQnLCBwcm9wcy5vbkVuZGVkKTtcbiAgICB9XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBwcm9wZXJ0aWVzIHdlIGNhcmUgYWJvdXRcbiAgICBjb25zdCBwcm9wc1RvT2JzZXJ2ZTogKGtleW9mIFZpZGVvUHJvcGVydGllcylbXSA9IFtcbiAgICAgICdsb2FkZWQnLCAncGF1c2VkJywgJ3RpbWUnLCAnZHVyYXRpb24nLCAnYnVmZmVyaW5nJywgJ2J1ZmZlcmVkJyxcbiAgICAgICd2b2x1bWUnLCAnbXV0ZWQnLCAncGxheWJhY2tTcGVlZCcsICdhdWRpb1RyYWNrcycsICdzdWJ0aXRsZXNUcmFja3MnXG4gICAgXTtcblxuICAgIHByb3BzVG9PYnNlcnZlLmZvckVhY2gocHJvcE5hbWUgPT4ge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ29ic2VydmVQcm9wJyxcbiAgICAgICAgcHJvcE5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKTtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHN1YnRpdGxlIHRyYWNrIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnN1YnRpdGxlVHJhY2spIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5sb2FkU3VidGl0bGVUcmFjayhwcm9wcy5zdWJ0aXRsZVRyYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmxvYWRTdWJ0aXRsZVRyYWNrKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlVHJhY2tdKTtcblxuICAvLyBVcGRhdGUgdmlkZW8gcHJvcGVydGllcyB3aGVuIHByb3BzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdzdHJlYW0nLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN0cmVhbVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcHJvcHMuc3RyZWFtXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnBhdXNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAncGF1c2VkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wYXVzZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnBhdXNlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy50aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICd0aW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy50aW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy50aW1lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnZvbHVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAndm9sdW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy52b2x1bWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnZvbHVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5tdXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnbXV0ZWQnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLm11dGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5tdXRlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5wbGF5YmFja1NwZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdwbGF5YmFja1NwZWVkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wbGF5YmFja1NwZWVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5wbGF5YmFja1NwZWVkXSk7XG5cbiAgLy8gU3VidGl0bGUgc3R5bGluZyBwcm9wZXJ0aWVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5zdWJ0aXRsZXNTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1NpemUnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN1YnRpdGxlc1NpemVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlc1NpemVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc09mZnNldCcsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT2Zmc2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPZmZzZXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzVGV4dENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1RleHRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzVGV4dENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNUZXh0Q29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPdXRsaW5lQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCcsXG4gICAgICAgIC4uLnByb3BzLnN0eWxlXG4gICAgICB9fVxuICAgICAgY2xhc3NOYW1lPXtwcm9wcy5jbGFzc05hbWV9XG4gICAgLz5cbiAgKTtcbn0pO1xuXG5TdHJlbWlvVmlkZW9QbGF5ZXIuZGlzcGxheU5hbWUgPSAnU3RyZW1pb1ZpZGVvUGxheWVyJztcblxuZXhwb3J0IGRlZmF1bHQgU3RyZW1pb1ZpZGVvUGxheWVyOyJdLCJmaWxlIjoiL2hvbWUvY2F1bGxlbi9HaXRIdWIvc3RyZW1pby1uZXRmbGl4L3NyYy9saWIvdmlkZW8vU3RyZW1pb1ZpZGVvUGxheWVyLnRzeCJ9"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_serviceWorkerResponseSource": "network"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-08-01T11:32:46.193Z",
        "time": 34.2100000125356,
        "timings": {
          "blocked": 0.6190000007487834,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.0020000000000000018,
          "wait": 33.263000003287566,
          "receive": 0.3260000084992498,
          "_blocked_queueing": 0.6040000007487833,
          "_workerStart": 0.011,
          "_workerReady": 0.56,
          "_workerFetchStart": 0.56,
          "_workerRespondWithSettled": 32.872
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "fetchAndCache",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 153,
                "columnNumber": 25
              },
              {
                "functionName": "handleRequest",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 125,
                "columnNumber": 17
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "3",
                  "url": "http://localhost:5173/sw.js",
                  "lineNumber": 112,
                  "columnNumber": 19
                }
              ],
              "parentId": {
                "id": "2388",
                "debuggerId": "7421023915332866740.7548517216261379378"
              }
            }
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33265",
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047966153",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/@vite/client"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047966153"
            }
          ],
          "cookies": [],
          "headersSize": 963,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "26890"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:46 GMT"
            },
            {
              "name": "Etag",
              "value": "W/\"208b-mF2U3U9AOxXImr/CSGdbpLI+jt4\""
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 26890,
            "mimeType": "text/javascript",
            "compression": 0,
            "text": "import { createHotContext as __vite__createHotContext } from \"/@vite/client\";import.meta.hot = __vite__createHotContext(\"/src/lib/video/StremioVideoPlayer.tsx\");import __vite__cjsImport0_react_jsxDevRuntime from \"/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=905c193d\"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime[\"jsxDEV\"];\nimport * as RefreshRuntime from \"/@react-refresh\";\nconst inWebWorker = typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope;\nlet prevRefreshReg;\nlet prevRefreshSig;\nif (import.meta.hot && !inWebWorker) {\n  if (!window.$RefreshReg$) {\n    throw new Error(\n      \"@vitejs/plugin-react can't detect preamble. Something is wrong.\"\n    );\n  }\n  prevRefreshReg = window.$RefreshReg$;\n  prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = RefreshRuntime.getRefreshReg(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\");\n  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport __vite__cjsImport3_react from \"/node_modules/.vite/deps/react.js?v=905c193d\"; const useEffect = __vite__cjsImport3_react[\"useEffect\"]; const useRef = __vite__cjsImport3_react[\"useRef\"]; const useImperativeHandle = __vite__cjsImport3_react[\"useImperativeHandle\"]; const forwardRef = __vite__cjsImport3_react[\"forwardRef\"];\nimport { StremioVideoSystem } from \"/src/lib/video/StremioVideoSystem.ts?t=1754047966153\";\nconst StremioVideoPlayer = _s(forwardRef(_c = _s((props, ref) => {\n  _s();\n  const containerRef = useRef(null);\n  const videoInstanceRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    dispatch: (action) => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.dispatch(action);\n      }\n    },\n    destroy: () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    }\n  }));\n  useEffect(() => {\n    if (!containerRef.current) {\n      console.warn(\"StremioVideoPlayer: Container element not ready\");\n      return;\n    }\n    console.log(\"StremioVideoPlayer: Initializing video system\");\n    videoInstanceRef.current = new StremioVideoSystem({\n      containerElement: containerRef.current\n    });\n    if (props.onPropChanged) {\n      videoInstanceRef.current.on(\"propChanged\", props.onPropChanged);\n    }\n    if (props.onError) {\n      videoInstanceRef.current.on(\"error\", props.onError);\n    }\n    if (props.onEnded) {\n      videoInstanceRef.current.on(\"ended\", props.onEnded);\n    }\n    const propsToObserve = [\n      \"loaded\",\n      \"paused\",\n      \"time\",\n      \"duration\",\n      \"buffering\",\n      \"buffered\",\n      \"volume\",\n      \"muted\",\n      \"playbackSpeed\",\n      \"audioTracks\",\n      \"subtitlesTracks\"\n    ];\n    propsToObserve.forEach((propName) => {\n      videoInstanceRef.current.dispatch({\n        type: \"observeProp\",\n        propName\n      });\n    });\n    return () => {\n      if (videoInstanceRef.current) {\n        videoInstanceRef.current.destroy();\n        videoInstanceRef.current = null;\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitleTrack) {\n      videoInstanceRef.current.loadSubtitleTrack(props.subtitleTrack);\n    } else {\n      videoInstanceRef.current.loadSubtitleTrack(null);\n    }\n  }, [props.subtitleTrack]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.stream !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"stream\",\n        propValue: props.stream\n      });\n    }\n  }, [props.stream]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.paused !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"paused\",\n        propValue: props.paused\n      });\n    }\n  }, [props.paused]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.time !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"time\",\n        propValue: props.time\n      });\n    }\n  }, [props.time]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.volume !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"volume\",\n        propValue: props.volume\n      });\n    }\n  }, [props.volume]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.muted !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"muted\",\n        propValue: props.muted\n      });\n    }\n  }, [props.muted]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.playbackSpeed !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"playbackSpeed\",\n        propValue: props.playbackSpeed\n      });\n    }\n  }, [props.playbackSpeed]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesSize !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesSize\",\n        propValue: props.subtitlesSize\n      });\n    }\n  }, [props.subtitlesSize]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOffset !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOffset\",\n        propValue: props.subtitlesOffset\n      });\n    }\n  }, [props.subtitlesOffset]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesTextColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesTextColor\",\n        propValue: props.subtitlesTextColor\n      });\n    }\n  }, [props.subtitlesTextColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesBackgroundColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesBackgroundColor\",\n        propValue: props.subtitlesBackgroundColor\n      });\n    }\n  }, [props.subtitlesBackgroundColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOutlineColor !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOutlineColor\",\n        propValue: props.subtitlesOutlineColor\n      });\n    }\n  }, [props.subtitlesOutlineColor]);\n  useEffect(() => {\n    if (!videoInstanceRef.current) return;\n    if (props.subtitlesOpacity !== void 0) {\n      videoInstanceRef.current.dispatch({\n        type: \"setProp\",\n        propName: \"extraSubtitlesOpacity\",\n        propValue: props.subtitlesOpacity\n      });\n    }\n  }, [props.subtitlesOpacity]);\n  return /* @__PURE__ */ jsxDEV(\n    \"div\",\n    {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        backgroundColor: \"#000\",\n        ...props.style\n      },\n      className: props.className\n    },\n    void 0,\n    false,\n    {\n      fileName: \"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\",\n      lineNumber: 320,\n      columnNumber: 5\n    },\n    this\n  );\n}, \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\")), \"Q8koD2b9Ht7qt6vl33zDTZyUyzw=\");\n_c2 = StremioVideoPlayer;\nStremioVideoPlayer.displayName = \"StremioVideoPlayer\";\nexport default StremioVideoPlayer;\nvar _c, _c2;\n$RefreshReg$(_c, \"StremioVideoPlayer$forwardRef\");\n$RefreshReg$(_c2, \"StremioVideoPlayer\");\nif (import.meta.hot && !inWebWorker) {\n  window.$RefreshReg$ = prevRefreshReg;\n  window.$RefreshSig$ = prevRefreshSig;\n}\nif (import.meta.hot && !inWebWorker) {\n  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {\n    RefreshRuntime.registerExportsForReactRefresh(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports);\n    import.meta.hot.accept((nextExports) => {\n      if (!nextExports) return;\n      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate(\"/home/caullen/GitHub/stremio-netflix/src/lib/video/StremioVideoPlayer.tsx\", currentExports, nextExports);\n      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);\n    });\n  });\n}\n\n//# sourceMappingURL=data:application/json;base64,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O0FBQUEsRUFTNkI7QUFHakMsR0FBQyxrQ0FBQztBQUFDQyxNQTNPRzdDO0FBNk9OQSxtQkFBbUI4QyxjQUFjO0FBRWpDLGVBQWU5QztBQUFtQixJQUFBRSxJQUFBMkM7QUFBQUUsYUFBQTdDLElBQUE7QUFBQTZDLGFBQUFGLEtBQUEiLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiZm9yd2FyZFJlZiIsIlN0cmVtaW9WaWRlb1N5c3RlbSIsIlN0cmVtaW9WaWRlb1BsYXllciIsIl9zIiwiX2MiLCJwcm9wcyIsInJlZiIsImNvbnRhaW5lclJlZiIsInZpZGVvSW5zdGFuY2VSZWYiLCJkaXNwYXRjaCIsImFjdGlvbiIsImN1cnJlbnQiLCJkZXN0cm95IiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJjb250YWluZXJFbGVtZW50Iiwib25Qcm9wQ2hhbmdlZCIsIm9uIiwib25FcnJvciIsIm9uRW5kZWQiLCJwcm9wc1RvT2JzZXJ2ZSIsImZvckVhY2giLCJwcm9wTmFtZSIsInR5cGUiLCJzdWJ0aXRsZVRyYWNrIiwibG9hZFN1YnRpdGxlVHJhY2siLCJzdHJlYW0iLCJ1bmRlZmluZWQiLCJwcm9wVmFsdWUiLCJwYXVzZWQiLCJ0aW1lIiwidm9sdW1lIiwibXV0ZWQiLCJwbGF5YmFja1NwZWVkIiwic3VidGl0bGVzU2l6ZSIsInN1YnRpdGxlc09mZnNldCIsInN1YnRpdGxlc1RleHRDb2xvciIsInN1YnRpdGxlc0JhY2tncm91bmRDb2xvciIsInN1YnRpdGxlc091dGxpbmVDb2xvciIsInN1YnRpdGxlc09wYWNpdHkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJjbGFzc05hbWUiLCJfYzIiLCJkaXNwbGF5TmFtZSIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJTdHJlbWlvVmlkZW9QbGF5ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlYWN0IFdyYXBwZXIgZm9yIFN0cmVtaW8gVmlkZW8gUGxheWVyXG4vLyBJbnRlZ3JhdGVzIFN0cmVtaW8ncyB2aWRlbyBhcmNoaXRlY3R1cmUgd2l0aCBSZWFjdFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGUsIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHJlbWlvVmlkZW9TeXN0ZW0gfSBmcm9tICcuL1N0cmVtaW9WaWRlb1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9Qcm9wZXJ0aWVzIHtcbiAgc3RyZWFtPzogc3RyaW5nIHwgbnVsbDtcbiAgbG9hZGVkPzogYm9vbGVhbjtcbiAgcGF1c2VkPzogYm9vbGVhbjtcbiAgdGltZT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIGJ1ZmZlcmluZz86IGJvb2xlYW47XG4gIGJ1ZmZlcmVkPzogVGltZVJhbmdlcyB8IG51bGw7XG4gIGF1ZGlvVHJhY2tzPzogQXVkaW9UcmFja1tdO1xuICBzZWxlY3RlZEF1ZGlvVHJhY2tJZD86IHN0cmluZyB8IG51bGw7XG4gIHN1YnRpdGxlc1RyYWNrcz86IFN1YnRpdGxlVHJhY2tbXTtcbiAgc2VsZWN0ZWRTdWJ0aXRsZXNUcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzT2Zmc2V0PzogbnVtYmVyO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNUZXh0Q29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzT3V0bGluZUNvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPcGFjaXR5PzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgLy8gQWRkaXRpb25hbCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZW1pb1ZpZGVvUGxheWVyUHJvcHMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICB2b2x1bWU/OiBudW1iZXI7XG4gIG11dGVkPzogYm9vbGVhbjtcbiAgcGxheWJhY2tTcGVlZD86IG51bWJlcjtcbiAgc3VidGl0bGVUcmFjaz86IFN1YnRpdGxlVHJhY2sgfCBudWxsO1xuICBzdWJ0aXRsZXNTaXplPzogbnVtYmVyO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIG9uUHJvcENoYW5nZWQ/OiAocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcbiAgb25FbmRlZD86ICgpID0+IHZvaWQ7XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVtaW9WaWRlb1BsYXllclJlZiB7XG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFN0cmVtaW9WaWRlb1BsYXllciA9IGZvcndhcmRSZWY8U3RyZW1pb1ZpZGVvUGxheWVyUmVmLCBTdHJlbWlvVmlkZW9QbGF5ZXJQcm9wcz4oKHByb3BzLCByZWYpID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgdmlkZW9JbnN0YW5jZVJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgIGRpc3BhdGNoOiAoYWN0aW9uOiBhbnkpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICBpZiAodmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kZXN0cm95KCk7XG4gICAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1N0cmVtaW9WaWRlb1BsYXllcjogQ29udGFpbmVyIGVsZW1lbnQgbm90IHJlYWR5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1N0cmVtaW9WaWRlb1BsYXllcjogSW5pdGlhbGl6aW5nIHZpZGVvIHN5c3RlbScpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBTdHJlbWlvIHZpZGVvIHN5c3RlbSBpbnN0YW5jZVxuICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCA9IG5ldyBTdHJlbWlvVmlkZW9TeXN0ZW0oe1xuICAgICAgY29udGFpbmVyRWxlbWVudDogY29udGFpbmVyUmVmLmN1cnJlbnRcbiAgICB9KTtcblxuICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICBpZiAocHJvcHMub25Qcm9wQ2hhbmdlZCkge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50Lm9uKCdwcm9wQ2hhbmdlZCcsIHByb3BzLm9uUHJvcENoYW5nZWQpO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5vbkVycm9yKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQub24oJ2Vycm9yJywgcHJvcHMub25FcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm9uRW5kZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5vbignZW5kZWQnLCBwcm9wcy5vbkVuZGVkKTtcbiAgICB9XG5cbiAgICAvLyBPYnNlcnZlIGFsbCBwcm9wZXJ0aWVzIHdlIGNhcmUgYWJvdXRcbiAgICBjb25zdCBwcm9wc1RvT2JzZXJ2ZTogKGtleW9mIFZpZGVvUHJvcGVydGllcylbXSA9IFtcbiAgICAgICdsb2FkZWQnLCAncGF1c2VkJywgJ3RpbWUnLCAnZHVyYXRpb24nLCAnYnVmZmVyaW5nJywgJ2J1ZmZlcmVkJyxcbiAgICAgICd2b2x1bWUnLCAnbXV0ZWQnLCAncGxheWJhY2tTcGVlZCcsICdhdWRpb1RyYWNrcycsICdzdWJ0aXRsZXNUcmFja3MnXG4gICAgXTtcblxuICAgIHByb3BzVG9PYnNlcnZlLmZvckVhY2gocHJvcE5hbWUgPT4ge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogJ29ic2VydmVQcm9wJyxcbiAgICAgICAgcHJvcE5hbWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKTtcbiAgICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHN1YnRpdGxlIHRyYWNrIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnN1YnRpdGxlVHJhY2spIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5sb2FkU3VidGl0bGVUcmFjayhwcm9wcy5zdWJ0aXRsZVRyYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50LmxvYWRTdWJ0aXRsZVRyYWNrKG51bGwpO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlVHJhY2tdKTtcblxuICAvLyBVcGRhdGUgdmlkZW8gcHJvcGVydGllcyB3aGVuIHByb3BzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdzdHJlYW0nLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN0cmVhbVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcHJvcHMuc3RyZWFtXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnBhdXNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAncGF1c2VkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wYXVzZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnBhdXNlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy50aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICd0aW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy50aW1lXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy50aW1lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXZpZGVvSW5zdGFuY2VSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb3BzLnZvbHVtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAndm9sdW1lJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy52b2x1bWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnZvbHVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5tdXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnbXV0ZWQnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLm11dGVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5tdXRlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5wbGF5YmFja1NwZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdwbGF5YmFja1NwZWVkJyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5wbGF5YmFja1NwZWVkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5wbGF5YmFja1NwZWVkXSk7XG5cbiAgLy8gU3VidGl0bGUgc3R5bGluZyBwcm9wZXJ0aWVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9wcy5zdWJ0aXRsZXNTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1NpemUnLFxuICAgICAgICBwcm9wVmFsdWU6IHByb3BzLnN1YnRpdGxlc1NpemVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Byb3BzLnN1YnRpdGxlc1NpemVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc09mZnNldCcsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT2Zmc2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPZmZzZXRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzVGV4dENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc1RleHRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzVGV4dENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNUZXh0Q29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzQmFja2dyb3VuZENvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZGVvSW5zdGFuY2VSZWYuY3VycmVudC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdzZXRQcm9wJyxcbiAgICAgICAgcHJvcE5hbWU6ICdleHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcicsXG4gICAgICAgIHByb3BWYWx1ZTogcHJvcHMuc3VidGl0bGVzT3V0bGluZUNvbG9yXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPdXRsaW5lQ29sb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdmlkZW9JbnN0YW5jZVJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICBpZiAocHJvcHMuc3VidGl0bGVzT3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWRlb0luc3RhbmNlUmVmLmN1cnJlbnQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiAnc2V0UHJvcCcsXG4gICAgICAgIHByb3BOYW1lOiAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JyxcbiAgICAgICAgcHJvcFZhbHVlOiBwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwcm9wcy5zdWJ0aXRsZXNPcGFjaXR5XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCcsXG4gICAgICAgIC4uLnByb3BzLnN0eWxlXG4gICAgICB9fVxuICAgICAgY2xhc3NOYW1lPXtwcm9wcy5jbGFzc05hbWV9XG4gICAgLz5cbiAgKTtcbn0pO1xuXG5TdHJlbWlvVmlkZW9QbGF5ZXIuZGlzcGxheU5hbWUgPSAnU3RyZW1pb1ZpZGVvUGxheWVyJztcblxuZXhwb3J0IGRlZmF1bHQgU3RyZW1pb1ZpZGVvUGxheWVyOyJdLCJmaWxlIjoiL2hvbWUvY2F1bGxlbi9HaXRIdWIvc3RyZW1pby1uZXRmbGl4L3NyYy9saWIvdmlkZW8vU3RyZW1pb1ZpZGVvUGxheWVyLnRzeCJ9"
          },
          "redirectURL": "",
          "headersSize": 292,
          "bodySize": 26890,
          "_transferSize": 27182,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:46.196Z",
        "time": 13.742999999097549,
        "timings": {
          "blocked": 4.333999999294058,
          "dns": 0.01200000000000001,
          "ssl": -1,
          "connect": 1.163,
          "send": 1.608,
          "wait": 1.2859999964600428,
          "receive": 5.340000003343448,
          "_blocked_queueing": 4.0169999992940575,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "url": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047966153",
          "lineNumber": 18
        },
        "_priority": "High",
        "_resourceType": "script",
        "cache": {},
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoSystem.ts?t=1754047966153",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047966153"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047966153"
            }
          ],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Etag",
              "value": "W/\"671b-MDfjgxSgvHuypurPGHy2iJdRDPg\""
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Content-Length",
              "value": "91754"
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:46 GMT"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 91754,
            "mimeType": "text/javascript",
            "text": "import { LogCategory, logInfo, logError, logDebug, logWarn } from \"/src/lib/utils/logger.ts\";\nexport class StremioVideoSystem {\n  containerElement;\n  videoElement = null;\n  subtitlesContainer = null;\n  subtitlesElement = null;\n  hlsInstance = null;\n  observedProps = {};\n  eventListeners = {};\n  // State\n  currentStream = null;\n  currentSubtitleTrack = null;\n  subtitlesData = [];\n  destroyed = false;\n  // Subtitle settings\n  extraSubtitlesSize = 25;\n  extraSubtitlesOffset = 0;\n  extraSubtitlesTextColor = \"#FFFFFF\";\n  extraSubtitlesBackgroundColor = \"rgba(0, 0, 0, 0.7)\";\n  extraSubtitlesOutlineColor = \"#000000\";\n  extraSubtitlesOpacity = 100;\n  extraSubtitlesDelay = 0;\n  constructor(options) {\n    this.containerElement = options.containerElement;\n    this.initializeContainer();\n  }\n  initializeContainer() {\n    this.containerElement.style.position = \"relative\";\n    this.containerElement.style.width = \"100%\";\n    this.containerElement.style.height = \"100%\";\n    this.containerElement.style.backgroundColor = \"#000\";\n  }\n  createVideoElement() {\n    if (this.videoElement) return;\n    logInfo(LogCategory.PLAYER, \"Creating new video element\");\n    this.videoElement = document.createElement(\"video\");\n    this.videoElement.style.width = \"100%\";\n    this.videoElement.style.height = \"100%\";\n    this.videoElement.style.backgroundColor = \"transparent\";\n    this.videoElement.controls = false;\n    this.videoElement.preload = \"auto\";\n    this.videoElement.playsInline = true;\n    if (\"bufferTime\" in this.videoElement) {\n      this.videoElement.bufferTime = 10;\n    }\n    this.containerElement.appendChild(this.videoElement);\n    this.setupVideoEventListeners();\n  }\n  setupVideoEventListeners() {\n    if (!this.videoElement) return;\n    this.videoElement.addEventListener(\"loadstart\", () => {\n      logDebug(LogCategory.PLAYER, \"Video loadstart event\");\n      this.emitPropChanged(\"loaded\", false);\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"loadedmetadata\", () => {\n      if (!this.videoElement) return;\n      logInfo(LogCategory.PLAYER, \"Video loadedmetadata event\", {\n        duration: this.videoElement.duration,\n        durationFormatted: `${Math.floor(this.videoElement.duration / 60)}:${Math.floor(this.videoElement.duration % 60).toString().padStart(2, \"0\")}`\n      });\n      this.emitPropChanged(\"loaded\", true);\n      this.emitPropChanged(\"duration\", this.videoElement.duration * 1e3);\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"timeupdate\", () => {\n      if (!this.videoElement) return;\n      const time = this.videoElement.currentTime * 1e3;\n      this.emitPropChanged(\"time\", time);\n      this.renderSubtitles(time);\n    });\n    this.videoElement.addEventListener(\"play\", () => {\n      this.emitPropChanged(\"paused\", false);\n    });\n    this.videoElement.addEventListener(\"pause\", () => {\n      this.emitPropChanged(\"paused\", true);\n    });\n    this.videoElement.addEventListener(\"waiting\", () => {\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"canplay\", () => {\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"progress\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"buffered\", this.videoElement.buffered);\n    });\n    this.videoElement.addEventListener(\"volumechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"volume\", Math.floor(this.videoElement.volume * 100));\n      this.emitPropChanged(\"muted\", this.videoElement.muted);\n    });\n    this.videoElement.addEventListener(\"ratechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"playbackSpeed\", this.videoElement.playbackRate);\n    });\n    this.videoElement.addEventListener(\"ended\", () => {\n      this.emit(\"ended\");\n    });\n    this.videoElement.addEventListener(\"error\", () => {\n      if (!this.videoElement) return;\n      const error = this.videoElement.error;\n      if (error) {\n        logError(LogCategory.PLAYER, \"Video playback error\", {\n          code: error.code,\n          message: error.message,\n          streamUrl: this.currentStream\n        });\n        this.emit(\"error\", {\n          critical: true,\n          message: `Video error: ${error.message}`,\n          code: error.code\n        });\n      }\n    });\n  }\n  createSubtitlesContainer() {\n    if (this.subtitlesContainer) return;\n    this.subtitlesContainer = document.createElement(\"div\");\n    this.subtitlesContainer.style.position = \"absolute\";\n    this.subtitlesContainer.style.left = \"0\";\n    this.subtitlesContainer.style.top = \"0\";\n    this.subtitlesContainer.style.width = \"100%\";\n    this.subtitlesContainer.style.height = \"100%\";\n    this.subtitlesContainer.style.pointerEvents = \"none\";\n    this.subtitlesContainer.style.zIndex = \"1000\";\n    this.subtitlesContainer.style.display = \"flex\";\n    this.subtitlesContainer.style.flexDirection = \"column\";\n    this.subtitlesContainer.style.justifyContent = \"flex-end\";\n    this.subtitlesContainer.style.alignItems = \"center\";\n    this.subtitlesContainer.style.overflow = \"hidden\";\n    this.containerElement.appendChild(this.subtitlesContainer);\n  }\n  renderSubtitles(currentTime) {\n    if (!this.subtitlesData.length || !this.currentSubtitleTrack) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    const adjustedTime = currentTime + this.extraSubtitlesDelay;\n    const activeCues = this.subtitlesData.filter(\n      (cue) => adjustedTime >= cue.startTime && adjustedTime <= cue.endTime\n    );\n    if (activeCues.length === 0) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    this.createSubtitlesContainer();\n    if (!this.subtitlesElement) {\n      this.subtitlesElement = document.createElement(\"div\");\n      this.subtitlesElement.style.position = \"relative\";\n      this.subtitlesElement.style.maxWidth = \"90%\";\n      this.subtitlesElement.style.textAlign = \"center\";\n      this.subtitlesElement.style.fontFamily = \"Arial, sans-serif\";\n      this.subtitlesElement.style.fontWeight = \"bold\";\n      this.subtitlesElement.style.lineHeight = \"1.2\";\n      this.subtitlesElement.style.wordWrap = \"break-word\";\n      this.subtitlesElement.style.whiteSpace = \"pre-wrap\";\n      this.subtitlesContainer.appendChild(this.subtitlesElement);\n    }\n    while (this.subtitlesElement.firstChild) {\n      this.subtitlesElement.removeChild(this.subtitlesElement.firstChild);\n    }\n    activeCues.forEach((cue) => {\n      const cueElement = document.createElement(\"div\");\n      cueElement.textContent = cue.text;\n      this.styleSubtitleElement(cueElement);\n      this.subtitlesElement.appendChild(cueElement);\n    });\n  }\n  styleSubtitleElement(element) {\n    const fontSize = Math.floor(this.extraSubtitlesSize / 25 * 3.5) + \"vmin\";\n    const opacity = this.extraSubtitlesOpacity / 100;\n    element.style.fontSize = fontSize;\n    element.style.opacity = opacity.toString();\n    element.style.color = this.extraSubtitlesTextColor;\n    element.style.backgroundColor = this.extraSubtitlesBackgroundColor;\n    element.style.padding = \"0.2em 0.4em\";\n    element.style.borderRadius = \"0.2em\";\n    element.style.margin = \"0.1em\";\n    element.style.display = \"inline-block\";\n    const outlineWidth = \"0.15rem\";\n    element.style.textShadow = [\n      `-${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`\n    ].join(\", \");\n    if (this.extraSubtitlesOffset !== 0) {\n      const offsetPercent = this.extraSubtitlesOffset + \"%\";\n      element.style.transform = `translateY(${offsetPercent})`;\n    }\n  }\n  removeSubtitlesElement() {\n    if (this.subtitlesElement && this.subtitlesElement.parentNode) {\n      this.subtitlesElement.parentNode.removeChild(this.subtitlesElement);\n      this.subtitlesElement = null;\n    }\n  }\n  async loadSubtitles(track) {\n    if (!track || !track.url) {\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n      return;\n    }\n    try {\n      const proxyUrl = `/api/subtitles?url=${encodeURIComponent(track.url)}`;\n      logInfo(LogCategory.STREAM, \"Loading subtitles via proxy\", { url: proxyUrl });\n      const response = await fetch(proxyUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to load subtitles: ${response.status}`);\n      }\n      const text = await response.text();\n      this.subtitlesData = this.parseSubtitles(text);\n      this.currentSubtitleTrack = track;\n      logInfo(LogCategory.STREAM, \"Subtitles loaded successfully\", {\n        cuesTotal: this.subtitlesData.length,\n        language: track.language || track.id\n      });\n    } catch (error) {\n      logError(LogCategory.STREAM, \"Subtitle loading failed\", {\n        url: track.url,\n        language: track.language || track.id\n      }, error);\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n    }\n  }\n  parseSubtitles(text) {\n    const cues = [];\n    if (text.includes(\"WEBVTT\")) {\n      logDebug(LogCategory.STREAM, \"Parsing WebVTT subtitles\");\n      const blocks = text.split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 2) {\n          const timeLineIndex = lines.findIndex((line) => line.includes(\"-->\"));\n          if (timeLineIndex >= 0) {\n            const timeLine = lines[timeLineIndex];\n            const textLines = lines.slice(timeLineIndex + 1);\n            const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})/);\n            if (timeMatch) {\n              const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n              const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n              cues.push({\n                startTime,\n                endTime,\n                text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n                // Remove HTML tags\n              });\n            }\n          }\n        }\n      });\n    } else if (text.includes(\"-->\")) {\n      logDebug(LogCategory.STREAM, \"Parsing SRT subtitles\");\n      const blocks = text.trim().split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 3) {\n          const timeLine = lines[1];\n          const textLines = lines.slice(2);\n          const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/);\n          if (timeMatch) {\n            const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n            const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n            cues.push({\n              startTime,\n              endTime,\n              text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n              // Remove HTML tags\n            });\n          }\n        }\n      });\n    }\n    logDebug(LogCategory.STREAM, \"Subtitle parsing completed\", { cuesTotal: cues.length });\n    return cues;\n  }\n  shouldUseHLS(streamUrl) {\n    return streamUrl.includes(\".m3u8\") || typeof window !== \"undefined\" && window.Hls?.isSupported() && !this.videoElement.canPlayType(\"application/vnd.apple.mpegurl\");\n  }\n  setupHLS(streamUrl) {\n    if (typeof window !== \"undefined\" && window.Hls?.isSupported()) {\n      const Hls = window.Hls;\n      this.hlsInstance = new Hls({\n        debug: false,\n        enableWorker: true,\n        lowLatencyMode: false,\n        backBufferLength: 30,\n        maxBufferLength: 50,\n        maxMaxBufferLength: 80,\n        maxFragLookUpTolerance: 0,\n        maxBufferHole: 0,\n        appendErrorMaxRetry: 20,\n        nudgeMaxRetry: 20,\n        manifestLoadingTimeOut: 3e4,\n        manifestLoadingMaxRetry: 10,\n        fragLoadPolicy: {\n          default: {\n            maxTimeToFirstByteMs: 1e4,\n            maxLoadTimeMs: 12e4,\n            timeoutRetry: {\n              maxNumRetry: 20,\n              retryDelayMs: 0,\n              maxRetryDelayMs: 15\n            },\n            errorRetry: {\n              maxNumRetry: 6,\n              retryDelayMs: 1e3,\n              maxRetryDelayMs: 15\n            }\n          }\n        }\n      });\n      this.hlsInstance.loadSource(streamUrl);\n      this.hlsInstance.attachMedia(this.videoElement);\n      this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {\n        this.updateAudioTracks();\n      });\n      this.hlsInstance.on(Hls.Events.ERROR, (_event, data) => {\n        if (data.fatal) {\n          this.emit(\"error\", {\n            critical: true,\n            message: `HLS Error: ${data.type} - ${data.details}`\n          });\n        }\n      });\n    } else {\n      this.videoElement.src = streamUrl;\n    }\n  }\n  updateAudioTracks() {\n    if (this.hlsInstance && this.hlsInstance.audioTracks) {\n      const tracks = this.hlsInstance.audioTracks.map((track, index) => ({\n        id: index.toString(),\n        name: track.name || `Track ${index + 1}`,\n        language: track.lang\n      }));\n      this.emitPropChanged(\"audioTracks\", tracks);\n    }\n  }\n  emitPropChanged(propName, propValue) {\n    if (this.observedProps[propName]) {\n      this.emit(\"propChanged\", propName, propValue);\n    }\n  }\n  emit(event, ...args) {\n    if (this.eventListeners[event]) {\n      this.eventListeners[event].forEach((listener) => listener(...args));\n    }\n  }\n  // Public API\n  on(event, listener) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [];\n    }\n    this.eventListeners[event].push(listener);\n  }\n  dispatch(action) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    switch (action.type) {\n      case \"observeProp\":\n        if (action.propName) {\n          this.observedProps[action.propName] = true;\n          this.emitCurrentProp(action.propName);\n        }\n        break;\n      case \"setProp\":\n        if (action.propName && action.propValue !== void 0) {\n          this.setProp(action.propName, action.propValue);\n        }\n        break;\n      case \"command\":\n        if (action.commandName) {\n          this.executeCommand(action.commandName, action.commandArgs);\n        }\n        break;\n    }\n  }\n  emitCurrentProp(propName) {\n    switch (propName) {\n      case \"loaded\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.readyState >= 1);\n        break;\n      case \"paused\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.paused);\n        break;\n      case \"time\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.currentTime * 1e3 : null);\n        break;\n      case \"duration\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.duration ? this.videoElement.duration * 1e3 : null);\n        break;\n      case \"buffering\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.readyState < 3);\n        break;\n      case \"buffered\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.buffered : null);\n        break;\n      case \"volume\":\n        this.emitPropChanged(propName, this.videoElement ? Math.floor(this.videoElement.volume * 100) : 100);\n        break;\n      case \"muted\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.muted : false);\n        break;\n      case \"playbackSpeed\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.playbackRate : 1);\n        break;\n    }\n  }\n  setProp(propName, propValue) {\n    switch (propName) {\n      case \"stream\":\n        if (propValue) {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"load\",\n            commandArgs: {\n              stream: { url: propValue },\n              autoplay: true\n            }\n          });\n        } else {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"unload\"\n          });\n        }\n        break;\n      case \"paused\":\n        if (this.videoElement) {\n          if (propValue) {\n            this.videoElement.pause();\n          } else {\n            this.videoElement.play().catch(() => {\n            });\n          }\n        }\n        break;\n      case \"time\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.currentTime = propValue / 1e3;\n        }\n        break;\n      case \"volume\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.muted = false;\n          this.videoElement.volume = Math.max(0, Math.min(100, propValue)) / 100;\n        }\n        break;\n      case \"muted\":\n        if (this.videoElement) {\n          this.videoElement.muted = !!propValue;\n        }\n        break;\n      case \"playbackSpeed\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.playbackRate = propValue;\n        }\n        break;\n      case \"selectedSubtitlesTrackId\":\n        break;\n      // Subtitle styling properties\n      case \"extraSubtitlesSize\":\n        this.extraSubtitlesSize = Math.max(10, Math.min(50, propValue || 25));\n        break;\n      case \"extraSubtitlesOffset\":\n        this.extraSubtitlesOffset = Math.max(-20, Math.min(20, propValue || 0));\n        break;\n      case \"extraSubtitlesTextColor\":\n        this.extraSubtitlesTextColor = propValue || \"#FFFFFF\";\n        break;\n      case \"extraSubtitlesBackgroundColor\":\n        this.extraSubtitlesBackgroundColor = propValue || \"rgba(0, 0, 0, 0.7)\";\n        break;\n      case \"extraSubtitlesOutlineColor\":\n        this.extraSubtitlesOutlineColor = propValue || \"#000000\";\n        break;\n      case \"extraSubtitlesOpacity\":\n        this.extraSubtitlesOpacity = Math.max(0, Math.min(100, propValue || 100));\n        break;\n      case \"extraSubtitlesDelay\":\n        this.extraSubtitlesDelay = propValue || 0;\n        break;\n    }\n  }\n  executeCommand(commandName, commandArgs) {\n    switch (commandName) {\n      case \"load\":\n        this.executeLoadCommand(commandArgs);\n        break;\n      case \"unload\":\n        this.executeUnloadCommand();\n        break;\n      case \"play\":\n        if (this.videoElement) {\n          this.videoElement.play().catch(() => {\n          });\n        }\n        break;\n      case \"pause\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n        }\n        break;\n      case \"stop\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n          this.videoElement.currentTime = 0;\n        }\n        break;\n      case \"seek\":\n        if (this.videoElement && commandArgs && commandArgs[0] !== void 0) {\n          this.videoElement.currentTime = commandArgs[0] / 1e3;\n        }\n        break;\n    }\n  }\n  executeLoadCommand(commandArgs) {\n    this.executeUnloadCommand();\n    if (commandArgs && commandArgs.stream && typeof commandArgs.stream.url === \"string\") {\n      this.currentStream = commandArgs.stream.url;\n      if (!this.videoElement) {\n        this.createVideoElement();\n      }\n      logInfo(LogCategory.STREAM, \"Loading stream via load command\", {\n        url: this.currentStream,\n        autoplay: typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true\n      });\n      if (this.videoElement) {\n        this.videoElement.autoplay = typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true;\n        if (commandArgs.time !== null && isFinite(commandArgs.time)) {\n          this.videoElement.currentTime = parseInt(commandArgs.time, 10) / 1e3;\n        }\n        if (this.currentStream && this.shouldUseHLS(this.currentStream)) {\n          logInfo(LogCategory.STREAM, \"Setting up HLS streaming\", { url: this.currentStream });\n          this.setupHLS(this.currentStream);\n        } else {\n          logInfo(LogCategory.STREAM, \"Setting direct video source\", { url: this.currentStream });\n          this.videoElement.preload = \"auto\";\n          this.videoElement.src = this.currentStream;\n          this.videoElement.setAttribute(\"playsinline\", \"true\");\n          this.videoElement.setAttribute(\"webkit-playsinline\", \"true\");\n          if (\"bufferData\" in this.videoElement) {\n            this.videoElement.bufferData = true;\n          }\n          this.videoElement.crossOrigin = null;\n          this.videoElement.addEventListener(\"loadstart\", () => {\n            logInfo(LogCategory.PERFORMANCE, \"Starting aggressive buffer loading\");\n          });\n          let bufferHealthTimer = null;\n          let lowBufferCount = 0;\n          this.videoElement.addEventListener(\"progress\", () => {\n            if (this.videoElement && this.videoElement.buffered.length > 0) {\n              const buffered = this.videoElement.buffered.end(this.videoElement.buffered.length - 1);\n              const current = this.videoElement.currentTime;\n              const bufferAhead = buffered - current;\n              logDebug(LogCategory.PERFORMANCE, \"Buffer status\", {\n                bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                currentTime: `${current.toFixed(1)}s`,\n                bufferedEnd: `${buffered.toFixed(1)}s`,\n                bufferHealth: bufferAhead < 5 ? \"LOW\" : bufferAhead < 15 ? \"MEDIUM\" : \"HIGH\"\n              });\n              if (bufferAhead < 5 && !this.videoElement.paused) {\n                lowBufferCount++;\n                logWarn(LogCategory.PERFORMANCE, \"Low buffer detected\", {\n                  bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                  lowBufferEvents: lowBufferCount,\n                  readyState: this.videoElement.readyState\n                });\n                if (bufferAhead < 3 || lowBufferCount > 2) {\n                  logInfo(LogCategory.PERFORMANCE, \"Pausing for aggressive buffer recovery\", {\n                    bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                    pauseDuration: \"5000ms\"\n                  });\n                  this.videoElement.pause();\n                  if (bufferHealthTimer) clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = setTimeout(() => {\n                    if (this.videoElement && this.videoElement.paused) {\n                      const newBuffered = this.videoElement.buffered.length > 0 ? this.videoElement.buffered.end(this.videoElement.buffered.length - 1) : 0;\n                      const newBufferAhead = newBuffered - this.videoElement.currentTime;\n                      logInfo(LogCategory.PERFORMANCE, \"Resuming after buffer recovery\", {\n                        bufferBefore: `${bufferAhead.toFixed(1)}s`,\n                        bufferAfter: `${newBufferAhead.toFixed(1)}s`\n                      });\n                      this.videoElement.play().catch(() => {\n                      });\n                      lowBufferCount = Math.max(0, lowBufferCount - 1);\n                    }\n                  }, 5e3);\n                }\n              } else if (bufferAhead > 10) {\n                lowBufferCount = 0;\n                if (bufferHealthTimer) {\n                  clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = null;\n                }\n              }\n            }\n          });\n          this.videoElement.addEventListener(\"stalled\", () => {\n            logWarn(LogCategory.PERFORMANCE, \"Video stalled, implementing recovery strategy\", {\n              readyState: this.videoElement?.readyState,\n              networkState: this.videoElement?.networkState,\n              currentTime: this.videoElement?.currentTime.toFixed(1)\n            });\n            setTimeout(() => {\n              if (this.videoElement && this.videoElement.readyState < 3) {\n                logInfo(LogCategory.PERFORMANCE, \"Forcing reload for bandwidth recovery\");\n                const currentTime = this.videoElement.currentTime;\n                this.videoElement.load();\n                this.videoElement.addEventListener(\"loadedmetadata\", () => {\n                  if (this.videoElement && currentTime > 0) {\n                    this.videoElement.currentTime = currentTime;\n                  }\n                }, { once: true });\n              }\n            }, 2e3);\n          });\n          this.videoElement.addEventListener(\"waiting\", () => {\n            logDebug(LogCategory.PERFORMANCE, \"Video waiting for data\");\n          });\n          this.videoElement.load();\n        }\n        this.emitPropChanged(\"stream\", this.currentStream);\n        this.emitPropChanged(\"loaded\", false);\n        this.emitPropChanged(\"buffering\", true);\n      }\n    }\n  }\n  executeUnloadCommand() {\n    this.currentStream = null;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.videoElement) {\n      this.videoElement.removeAttribute(\"src\");\n      this.videoElement.load();\n    }\n    this.emitPropChanged(\"stream\", null);\n  }\n  // Public method to load subtitles\n  loadSubtitleTrack(track) {\n    return this.loadSubtitles(track);\n  }\n  destroy() {\n    if (this.destroyed) return;\n    this.destroyed = true;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.subtitlesContainer && this.subtitlesContainer.parentNode) {\n      this.subtitlesContainer.parentNode.removeChild(this.subtitlesContainer);\n    }\n    if (this.videoElement && this.videoElement.parentNode) {\n      this.videoElement.parentNode.removeChild(this.videoElement);\n    }\n    this.eventListeners = {};\n    this.videoElement = null;\n    this.subtitlesContainer = null;\n    this.subtitlesElement = null;\n  }\n  get isDestroyed() {\n    return this.destroyed;\n  }\n}\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0cmVtaW9WaWRlb1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wbGV0ZSBTdHJlbWlvIFZpZGVvIFBsYXllciBTeXN0ZW1cbi8vIFR5cGVTY3JpcHQgaW1wbGVtZW50YXRpb24gd2l0aCBhbGwgU3RyZW1pbyBmZWF0dXJlc1xuXG5pbXBvcnQgeyBMb2dDYXRlZ29yeSwgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ0RlYnVnLCBsb2dXYXJuIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBWaWRlb1Byb3BlcnRpZXMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBsb2FkZWQ/OiBib29sZWFuO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgYnVmZmVyaW5nPzogYm9vbGVhbjtcbiAgYnVmZmVyZWQ/OiBUaW1lUmFuZ2VzIHwgbnVsbDtcbiAgYXVkaW9UcmFja3M/OiBBdWRpb1RyYWNrW107XG4gIHNlbGVjdGVkQXVkaW9UcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzVHJhY2tzPzogU3VidGl0bGVUcmFja1tdO1xuICBzZWxlY3RlZFN1YnRpdGxlc1RyYWNrSWQ/OiBzdHJpbmcgfCBudWxsO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1NpemU/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIHZvbHVtZT86IG51bWJlcjtcbiAgbXV0ZWQ/OiBib29sZWFuO1xuICBwbGF5YmFja1NwZWVkPzogbnVtYmVyO1xuICAvLyBFbmhhbmNlZCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVDdWUge1xuICBzdGFydFRpbWU6IG51bWJlcjtcbiAgZW5kVGltZTogbnVtYmVyO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9BY3Rpb24ge1xuICB0eXBlOiAnb2JzZXJ2ZVByb3AnIHwgJ3NldFByb3AnIHwgJ2NvbW1hbmQnO1xuICBwcm9wTmFtZT86IGtleW9mIFZpZGVvUHJvcGVydGllcztcbiAgcHJvcFZhbHVlPzogYW55O1xuICBjb21tYW5kTmFtZT86IHN0cmluZztcbiAgY29tbWFuZEFyZ3M/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9PcHRpb25zIHtcbiAgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJlbWlvVmlkZW9TeXN0ZW0ge1xuICBwcml2YXRlIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN1YnRpdGxlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGhsc0luc3RhbmNlOiBhbnkgPSBudWxsO1xuICBcbiAgcHJpdmF0ZSBvYnNlcnZlZFByb3BzOiB7IFtLIGluIGtleW9mIFZpZGVvUHJvcGVydGllc10/OiBib29sZWFuIH0gPSB7fTtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbltdIH0gPSB7fTtcbiAgXG4gIC8vIFN0YXRlXG4gIHByaXZhdGUgY3VycmVudFN0cmVhbTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY3VycmVudFN1YnRpdGxlVHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNEYXRhOiBTdWJ0aXRsZUN1ZVtdID0gW107XG4gIHByaXZhdGUgZGVzdHJveWVkID0gZmFsc2U7XG4gIFxuICAvLyBTdWJ0aXRsZSBzZXR0aW5nc1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzU2l6ZSA9IDI1O1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc1RleHRDb2xvciA9ICcjRkZGRkZGJztcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yID0gJyMwMDAwMDAnO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3BhY2l0eSA9IDEwMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0RlbGF5ID0gMDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBWaWRlb09wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQ7XG4gICAgdGhpcy5pbml0aWFsaXplQ29udGFpbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDb250YWluZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVWaWRlb0VsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ0NyZWF0aW5nIG5ldyB2aWRlbyBlbGVtZW50Jyk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJzsgLy8gQ2hhbmdlZCBmcm9tICdtZXRhZGF0YScgdG8gJ2F1dG8nIGZvciBiZXR0ZXIgYnVmZmVyaW5nXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgIC8vIERvbid0IHNldCBjcm9zc09yaWdpbiBmb3IgUmVhbC1EZWJyaWQgc3RyZWFtcyBhcyB0aGV5IGRvbid0IHN1cHBvcnQgQ09SU1xuICAgIFxuICAgIC8vIEFkZCBidWZmZXIgY29uZmlndXJhdGlvbiBmb3IgYmV0dGVyIHN0cmVhbWluZyBwZXJmb3JtYW5jZVxuICAgIGlmICgnYnVmZmVyVGltZScgaW4gdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICh0aGlzLnZpZGVvRWxlbWVudCBhcyBhbnkpLmJ1ZmZlclRpbWUgPSAxMDsgLy8gMTAgc2Vjb25kcyBidWZmZXJcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuc2V0dXBWaWRlb0V2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVmlkZW9FdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKSA9PiB7XG4gICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QTEFZRVIsICdWaWRlbyBsb2Fkc3RhcnQgZXZlbnQnKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYnVmZmVyaW5nJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUExBWUVSLCAnVmlkZW8gbG9hZGVkbWV0YWRhdGEgZXZlbnQnLCB7IFxuICAgICAgICBkdXJhdGlvbjogdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uRm9ybWF0dGVkOiBgJHtNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uIC8gNjApfToke01hdGguZmxvb3IodGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gJSA2MCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIHRydWUpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2R1cmF0aW9uJywgdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gKiAxMDAwKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpZGVvRWxlbWVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgdGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lICogMTAwMDtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd0aW1lJywgdGltZSk7XG4gICAgICB0aGlzLnJlbmRlclN1YnRpdGxlcyh0aW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJlZCcsIHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd2b2x1bWUnLCBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ211dGVkJywgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdwbGF5YmFja1NwZWVkJywgdGhpcy52aWRlb0VsZW1lbnQucGxheWJhY2tSYXRlKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdlbmRlZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMudmlkZW9FbGVtZW50LmVycm9yO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGxvZ0Vycm9yKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ1ZpZGVvIHBsYXliYWNrIGVycm9yJywge1xuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdHJlYW1Vcmw6IHRoaXMuY3VycmVudFN0cmVhbVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgVmlkZW8gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN1YnRpdGxlc0NvbnRhaW5lcigpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdWJ0aXRsZXMoY3VycmVudFRpbWU6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5zdWJ0aXRsZXNEYXRhLmxlbmd0aCB8fCAhdGhpcy5jdXJyZW50U3VidGl0bGVUcmFjaykge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWRqdXN0ZWRUaW1lID0gY3VycmVudFRpbWUgKyB0aGlzLmV4dHJhU3VidGl0bGVzRGVsYXk7XG4gICAgY29uc3QgYWN0aXZlQ3VlcyA9IHRoaXMuc3VidGl0bGVzRGF0YS5maWx0ZXIoY3VlID0+IFxuICAgICAgYWRqdXN0ZWRUaW1lID49IGN1ZS5zdGFydFRpbWUgJiYgYWRqdXN0ZWRUaW1lIDw9IGN1ZS5lbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChhY3RpdmVDdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVTdWJ0aXRsZXNDb250YWluZXIoKTtcbiAgICBcbiAgICBpZiAoIXRoaXMuc3VidGl0bGVzRWxlbWVudCkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJzkwJSc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdBcmlhbCwgc2Fucy1zZXJpZic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciEuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyBjb250ZW50XG4gICAgd2hpbGUgKHRoaXMuc3VidGl0bGVzRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIFJlbmRlciBhY3RpdmUgY3Vlc1xuICAgIGFjdGl2ZUN1ZXMuZm9yRWFjaChjdWUgPT4ge1xuICAgICAgY29uc3QgY3VlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY3VlRWxlbWVudC50ZXh0Q29udGVudCA9IGN1ZS50ZXh0O1xuICAgICAgdGhpcy5zdHlsZVN1YnRpdGxlRWxlbWVudChjdWVFbGVtZW50KTtcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCEuYXBwZW5kQ2hpbGQoY3VlRWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0eWxlU3VidGl0bGVFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZm9udFNpemUgPSBNYXRoLmZsb29yKCh0aGlzLmV4dHJhU3VidGl0bGVzU2l6ZSAvIDI1KSAqIDMuNSkgKyAndm1pbic7XG4gICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNPcGFjaXR5IC8gMTAwO1xuXG4gICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcbiAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvcjtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3I7XG4gICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuMmVtIDAuNGVtJztcbiAgICBlbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwLjJlbSc7XG4gICAgZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnMC4xZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXG4gICAgLy8gVGV4dCBzaGFkb3cgZm9yIG91dGxpbmUgZWZmZWN0XG4gICAgY29uc3Qgb3V0bGluZVdpZHRoID0gJzAuMTVyZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IFtcbiAgICAgIGAtJHtvdXRsaW5lV2lkdGh9IC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwIC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAke291dGxpbmVXaWR0aH0gLSR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYC0ke291dGxpbmVXaWR0aH0gMCAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAwIDAgJHt0aGlzLmV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yfWAsXG4gICAgICBgLSR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwICR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YFxuICAgIF0uam9pbignLCAnKTtcblxuICAgIC8vIFBvc2l0aW9uIG9mZnNldFxuICAgIGlmICh0aGlzLmV4dHJhU3VidGl0bGVzT2Zmc2V0ICE9PSAwKSB7XG4gICAgICBjb25zdCBvZmZzZXRQZXJjZW50ID0gdGhpcy5leHRyYVN1YnRpdGxlc09mZnNldCArICclJztcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtvZmZzZXRQZXJjZW50fSlgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNFbGVtZW50ICYmIHRoaXMuc3VidGl0bGVzRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0VsZW1lbnQpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRTdWJ0aXRsZXModHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsKSB7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2sudXJsKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0RhdGEgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBvdXIgc3VidGl0bGUgcHJveHkgdG8gYXZvaWQgQ09SUyBpc3N1ZXNcbiAgICAgIGNvbnN0IHByb3h5VXJsID0gYC9hcGkvc3VidGl0bGVzP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0cmFjay51cmwpfWA7XG4gICAgICBcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnTG9hZGluZyBzdWJ0aXRsZXMgdmlhIHByb3h5JywgeyB1cmw6IHByb3h5VXJsIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3h5VXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzdWJ0aXRsZXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gdGhpcy5wYXJzZVN1YnRpdGxlcyh0ZXh0KTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSB0cmFjaztcbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZXMgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgY3Vlc1RvdGFsOiB0aGlzLnN1YnRpdGxlc0RhdGEubGVuZ3RoLFxuICAgICAgICBsYW5ndWFnZTogdHJhY2subGFuZ3VhZ2UgfHwgdHJhY2suaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBsb2FkaW5nIGZhaWxlZCcsIHtcbiAgICAgICAgdXJsOiB0cmFjay51cmwsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5ndWFnZSB8fCB0cmFjay5pZFxuICAgICAgfSwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gW107XG4gICAgICB0aGlzLmN1cnJlbnRTdWJ0aXRsZVRyYWNrID0gbnVsbDtcbiAgICAgIHRoaXMucmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdWJ0aXRsZXModGV4dDogc3RyaW5nKTogU3VidGl0bGVDdWVbXSB7XG4gICAgY29uc3QgY3VlczogU3VidGl0bGVDdWVbXSA9IFtdO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgV2ViVlRUIGZvcm1hdFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdXRUJWVFQnKSkge1xuICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnUGFyc2luZyBXZWJWVFQgc3VidGl0bGVzJyk7XG4gICAgICBcbiAgICAgIC8vIFNwbGl0IGJ5IGRvdWJsZSBuZXdsaW5lcyB0byBnZXQgY3VlIGJsb2Nrc1xuICAgICAgY29uc3QgYmxvY2tzID0gdGV4dC5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgdGltZWxpbmUgKGNvbnRhaW5zIC0tPilcbiAgICAgICAgICBjb25zdCB0aW1lTGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS5pbmNsdWRlcygnLS0+JykpO1xuICAgICAgICAgIGlmICh0aW1lTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVMaW5lID0gbGluZXNbdGltZUxpbmVJbmRleF07XG4gICAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSh0aW1lTGluZUluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlYlZUVCBmb3JtYXQ6IDAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDAuMDAwXG4gICAgICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0aW1lTGluZS5tYXRjaCgvKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KS8pO1xuICAgICAgICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFsyXSkgKiA2MDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFszXSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbNV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzddKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzhdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGN1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dExpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IFxuICAgIC8vIFNSVCBmb3JtYXQgcGFyc2VyXG4gICAgZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnLS0+JykpIHtcbiAgICAgIGxvZ0RlYnVnKExvZ0NhdGVnb3J5LlNUUkVBTSwgJ1BhcnNpbmcgU1JUIHN1YnRpdGxlcycpO1xuICAgICAgXG4gICAgICBjb25zdCBibG9ja3MgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgY29uc3QgdGltZUxpbmUgPSBsaW5lc1sxXTtcbiAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSgyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTUlQgZm9ybWF0OiAwMDowMDowMCwwMDAgLS0+IDAwOjAwOjAwLDAwMFxuICAgICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRpbWVMaW5lLm1hdGNoKC8oXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSwoXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSksKFxcZHszfSkvKTtcbiAgICAgICAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbMl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzNdKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IHBhcnNlSW50KHRpbWVNYXRjaFs1XSkgKiAzNjAwMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFs3XSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbOF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdWVzLnB1c2goe1xuICAgICAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgIHRleHQ6IHRleHRMaW5lcy5qb2luKCdcXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBwYXJzaW5nIGNvbXBsZXRlZCcsIHsgY3Vlc1RvdGFsOiBjdWVzLmxlbmd0aCB9KTtcbiAgICByZXR1cm4gY3VlcztcbiAgfVxuXG5cbiAgcHJpdmF0ZSBzaG91bGRVc2VITFMoc3RyZWFtVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3RyZWFtVXJsLmluY2x1ZGVzKCcubTN1OCcpIHx8IFxuICAgICAgICAgICAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgXG4gICAgICAgICAgICAod2luZG93IGFzIGFueSkuSGxzPy5pc1N1cHBvcnRlZCgpICYmIFxuICAgICAgICAgICAgIXRoaXMudmlkZW9FbGVtZW50IS5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmwnKSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwSExTKHN0cmVhbVVybDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5IbHM/LmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIGNvbnN0IEhscyA9ICh3aW5kb3cgYXMgYW55KS5IbHM7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbmV3IEhscyh7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlV29ya2VyOiB0cnVlLFxuICAgICAgICBsb3dMYXRlbmN5TW9kZTogZmFsc2UsXG4gICAgICAgIGJhY2tCdWZmZXJMZW5ndGg6IDMwLFxuICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDUwLFxuICAgICAgICBtYXhNYXhCdWZmZXJMZW5ndGg6IDgwLFxuICAgICAgICBtYXhGcmFnTG9va1VwVG9sZXJhbmNlOiAwLFxuICAgICAgICBtYXhCdWZmZXJIb2xlOiAwLFxuICAgICAgICBhcHBlbmRFcnJvck1heFJldHJ5OiAyMCxcbiAgICAgICAgbnVkZ2VNYXhSZXRyeTogMjAsXG4gICAgICAgIG1hbmlmZXN0TG9hZGluZ1RpbWVPdXQ6IDMwMDAwLFxuICAgICAgICBtYW5pZmVzdExvYWRpbmdNYXhSZXRyeTogMTAsXG4gICAgICAgIGZyYWdMb2FkUG9saWN5OiB7XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbWF4VGltZVRvRmlyc3RCeXRlTXM6IDEwMDAwLFxuICAgICAgICAgICAgbWF4TG9hZFRpbWVNczogMTIwMDAwLFxuICAgICAgICAgICAgdGltZW91dFJldHJ5OiB7XG4gICAgICAgICAgICAgIG1heE51bVJldHJ5OiAyMCxcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JSZXRyeToge1xuICAgICAgICAgICAgICBtYXhOdW1SZXRyeTogNixcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5sb2FkU291cmNlKHN0cmVhbVVybCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmF0dGFjaE1lZGlhKHRoaXMudmlkZW9FbGVtZW50KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLk1BTklGRVNUX1BBUlNFRCwgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUF1ZGlvVHJhY2tzKCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLkVSUk9SLCAoX2V2ZW50OiBhbnksIGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5mYXRhbCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBITFMgRXJyb3I6ICR7ZGF0YS50eXBlfSAtICR7ZGF0YS5kZXRhaWxzfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIGZvciBTYWZhcmkgYW5kIG90aGVyIGJyb3dzZXJzIHdpdGggbmF0aXZlIEhMUyBzdXBwb3J0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCEuc3JjID0gc3RyZWFtVXJsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQXVkaW9UcmFja3MoKSB7XG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UgJiYgdGhpcy5obHNJbnN0YW5jZS5hdWRpb1RyYWNrcykge1xuICAgICAgY29uc3QgdHJhY2tzOiBBdWRpb1RyYWNrW10gPSB0aGlzLmhsc0luc3RhbmNlLmF1ZGlvVHJhY2tzLm1hcCgodHJhY2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgaWQ6IGluZGV4LnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHRyYWNrLm5hbWUgfHwgYFRyYWNrICR7aW5kZXggKyAxfWAsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5nXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYXVkaW9UcmFja3MnLCB0cmFja3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lOiBrZXlvZiBWaWRlb1Byb3BlcnRpZXMsIHByb3BWYWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZWRQcm9wc1twcm9wTmFtZV0pIHtcbiAgICAgIHRoaXMuZW1pdCgncHJvcENoYW5nZWQnLCBwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUElcbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0cmVtaW9WaWRlb1N5c3RlbSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGRpc3BhdGNoKGFjdGlvbjogVmlkZW9BY3Rpb24pIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3RyZW1pb1ZpZGVvU3lzdGVtIGluc3RhbmNlIGlzIGRlc3Ryb3llZCcpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29ic2VydmVQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZWRQcm9wc1thY3Rpb24ucHJvcE5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmVtaXRDdXJyZW50UHJvcChhY3Rpb24ucHJvcE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzZXRQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSAmJiBhY3Rpb24ucHJvcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnNldFByb3AoYWN0aW9uLnByb3BOYW1lLCBhY3Rpb24ucHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbWFuZCc6XG4gICAgICAgIGlmIChhY3Rpb24uY29tbWFuZE5hbWUpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGFjdGlvbi5jb21tYW5kTmFtZSwgYWN0aW9uLmNvbW1hbmRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXRDdXJyZW50UHJvcChwcm9wTmFtZToga2V5b2YgVmlkZW9Qcm9wZXJ0aWVzKSB7XG4gICAgc3dpdGNoIChwcm9wTmFtZSkge1xuICAgICAgY2FzZSAnbG9hZGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPj0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsICF0aGlzLnZpZGVvRWxlbWVudCB8fCB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSAqIDEwMDAgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5kdXJhdGlvbiA/IHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uICogMTAwMCA6IG51bGwpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmluZyc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCAhdGhpcy52aWRlb0VsZW1lbnQgfHwgdGhpcy52aWRlb0VsZW1lbnQucmVhZHlTdGF0ZSA8IDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2x1bWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkgOiAxMDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ211dGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgOiBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCA/IHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA6IDEpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldFByb3AocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpIHtcbiAgICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICAvLyBVc2UgU3RyZW1pbydzIGxvYWQgY29tbWFuZCBwYXR0ZXJuIGluc3RlYWQgb2YgZGlyZWN0IHN0cmVhbSBzZXR0aW5nXG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICBjb21tYW5kQXJnczoge1xuICAgICAgICAgICAgICBzdHJlYW06IHsgdXJsOiBwcm9wVmFsdWUgfSxcbiAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAndW5sb2FkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgaWYgKHByb3BWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0aW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwcm9wVmFsdWUgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndm9sdW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC52b2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSkpIC8gMTAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbXV0ZWQnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9ICEhcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiBwcm9wVmFsdWUgIT09IG51bGwgJiYgaXNGaW5pdGUocHJvcFZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdGVkU3VidGl0bGVzVHJhY2tJZCc6XG4gICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCBzdWJ0aXRsZSB0cmFja3MgdG8gYmUgcHJvdmlkZWRcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBoYW5kbGUgdGhlIHN1YnRpdGxlIHRyYWNrIGxvYWRpbmdcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBTdWJ0aXRsZSBzdHlsaW5nIHByb3BlcnRpZXNcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzU2l6ZSc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNTaXplID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDUwLCBwcm9wVmFsdWUgfHwgMjUpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc09mZnNldCc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNPZmZzZXQgPSBNYXRoLm1heCgtMjAsIE1hdGgubWluKDIwLCBwcm9wVmFsdWUgfHwgMCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzVGV4dENvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvciA9IHByb3BWYWx1ZSB8fCAnI0ZGRkZGRic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3InOlxuICAgICAgICB0aGlzLmV4dHJhU3VidGl0bGVzQmFja2dyb3VuZENvbG9yID0gcHJvcFZhbHVlIHx8ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvciA9IHByb3BWYWx1ZSB8fCAnIzAwMDAwMCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc09wYWNpdHkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSB8fCAxMDApKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc0RlbGF5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc0RlbGF5ID0gcHJvcFZhbHVlIHx8IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWU6IHN0cmluZywgY29tbWFuZEFyZ3M/OiBhbnkpIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmROYW1lKSB7XG4gICAgICBjYXNlICdsb2FkJzpcbiAgICAgICAgdGhpcy5leGVjdXRlTG9hZENvbW1hbmQoY29tbWFuZEFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VubG9hZCc6XG4gICAgICAgIHRoaXMuZXhlY3V0ZVVubG9hZENvbW1hbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0b3AnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlZWsnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgY29tbWFuZEFyZ3MgJiYgY29tbWFuZEFyZ3NbMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gY29tbWFuZEFyZ3NbMF0gLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUxvYWRDb21tYW5kKGNvbW1hbmRBcmdzOiBhbnkpIHtcbiAgICB0aGlzLmV4ZWN1dGVVbmxvYWRDb21tYW5kKCk7IC8vIFVubG9hZCBhbnkgZXhpc3Rpbmcgc3RyZWFtIGZpcnN0XG4gICAgXG4gICAgaWYgKGNvbW1hbmRBcmdzICYmIGNvbW1hbmRBcmdzLnN0cmVhbSAmJiB0eXBlb2YgY29tbWFuZEFyZ3Muc3RyZWFtLnVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IGNvbW1hbmRBcmdzLnN0cmVhbS51cmw7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVWaWRlb0VsZW1lbnQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdMb2FkaW5nIHN0cmVhbSB2aWEgbG9hZCBjb21tYW5kJywgeyBcbiAgICAgICAgdXJsOiB0aGlzLmN1cnJlbnRTdHJlYW0sXG4gICAgICAgIGF1dG9wbGF5OiB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB2aWRlbyBwcm9wZXJ0aWVzXG4gICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kQXJncy50aW1lICE9PSBudWxsICYmIGlzRmluaXRlKGNvbW1hbmRBcmdzLnRpbWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwYXJzZUludChjb21tYW5kQXJncy50aW1lLCAxMCkgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBITFMgb3IgZGlyZWN0IHZpZGVvXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdHJlYW0gJiYgdGhpcy5zaG91bGRVc2VITFModGhpcy5jdXJyZW50U3RyZWFtKSkge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyB1cCBITFMgc3RyZWFtaW5nJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICB0aGlzLnNldHVwSExTKHRoaXMuY3VycmVudFN0cmVhbSEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyBkaXJlY3QgdmlkZW8gc291cmNlJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ2dyZXNzaXZlIHByZWxvYWQgc3RyYXRlZ3kgZm9yIFJlYWwtRGVicmlkIHN0cmVhbXNcbiAgICAgICAgICAvLyBGb3JjZSBmdWxsIHByZWxvYWRpbmcgdG8gb3ZlcmNvbWUgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSB0aGlzLmN1cnJlbnRTdHJlYW0hO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbmZpZ3VyZSB2aWRlbyBlbGVtZW50IGZvciBvcHRpbWFsIHN0cmVhbWluZyBhbmQgYWdncmVzc2l2ZSBidWZmZXJpbmdcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJ3RydWUnKTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICd0cnVlJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yY2UgYWdncmVzc2l2ZSBidWZmZXJpbmcgZm9yIGxhcmdlIGZpbGVzXG4gICAgICAgICAgaWYgKCdidWZmZXJEYXRhJyBpbiB0aGlzLnZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgKHRoaXMudmlkZW9FbGVtZW50IGFzIGFueSkuYnVmZmVyRGF0YSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCBuZXR3b3JrIHN0YXRlIG9wdGltaXphdGlvblxuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmNyb3NzT3JpZ2luID0gbnVsbDsgLy8gUmVtb3ZlIENPUlMgcmVzdHJpY3Rpb25zXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGxvYWQgc3RyYXRlZ3kgb3B0aW1pemF0aW9uXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1N0YXJ0aW5nIGFnZ3Jlc3NpdmUgYnVmZmVyIGxvYWRpbmcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW50ZWxsaWdlbnQgYnVmZmVyIG1vbml0b3Jpbmcgd2l0aCBidWZmZXIgaGVhbHRoIG1hbmFnZW1lbnRcbiAgICAgICAgICBsZXQgYnVmZmVySGVhbHRoVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgbGV0IGxvd0J1ZmZlckNvdW50ID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5idWZmZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckFoZWFkID0gYnVmZmVyZWQgLSBjdXJyZW50O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdCdWZmZXIgc3RhdHVzJywge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckFoZWFkOiBgJHtidWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBgJHtjdXJyZW50LnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVyZWRFbmQ6IGAke2J1ZmZlcmVkLnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoOiBidWZmZXJBaGVhZCA8IDUgPyAnTE9XJyA6IGJ1ZmZlckFoZWFkIDwgMTUgPyAnTUVESVVNJyA6ICdISUdIJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE1vcmUgYWdncmVzc2l2ZSBidWZmZXIgbWFuYWdlbWVudCBmb3IgUmVhbC1EZWJyaWQgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgICAgIGlmIChidWZmZXJBaGVhZCA8IDUgJiYgIXRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIGxvd0J1ZmZlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0xvdyBidWZmZXIgZGV0ZWN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgIGxvd0J1ZmZlckV2ZW50czogbG93QnVmZmVyQ291bnQsXG4gICAgICAgICAgICAgICAgICByZWFkeVN0YXRlOiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRm9yIHZlcnkgbG93IGJ1ZmZlciBvciBmcmVxdWVudCBidWZmZXJpbmcsIHBhdXNlIGxvbmdlciB0byBidWlsZCB1cCBidWZmZXJcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyQWhlYWQgPCAzIHx8IGxvd0J1ZmZlckNvdW50ID4gMikge1xuICAgICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1BhdXNpbmcgZm9yIGFnZ3Jlc3NpdmUgYnVmZmVyIHJlY292ZXJ5Jywge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgICAgcGF1c2VEdXJhdGlvbjogJzUwMDBtcydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0J1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQubGVuZ3RoID4gMCA/IFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdCdWZmZXJBaGVhZCA9IG5ld0J1ZmZlcmVkIC0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1Jlc3VtaW5nIGFmdGVyIGJ1ZmZlciByZWNvdmVyeScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlckJlZm9yZTogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlckFmdGVyOiBgJHtuZXdCdWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IE1hdGgubWF4KDAsIGxvd0J1ZmZlckNvdW50IC0gMSk7IC8vIEdyYWR1YWxseSByZWR1Y2UgY291bnRlclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LCA1MDAwKTsgLy8gTG9uZ2VyIHBhdXNlIGZvciBiZXR0ZXIgYnVmZmVyIGJ1aWxkaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJ1ZmZlckFoZWFkID4gMTApIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb3VudGVyIHdoZW4gYnVmZmVyIGlzIHRydWx5IGhlYWx0aHlcbiAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBjb21wcmVoZW5zaXZlIHN0YWxsIGRldGVjdGlvbiBhbmQgcmVjb3ZlcnlcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdGFsbGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1ZpZGVvIHN0YWxsZWQsIGltcGxlbWVudGluZyByZWNvdmVyeSBzdHJhdGVneScsIHtcbiAgICAgICAgICAgICAgcmVhZHlTdGF0ZTogdGhpcy52aWRlb0VsZW1lbnQ/LnJlYWR5U3RhdGUsXG4gICAgICAgICAgICAgIG5ldHdvcmtTdGF0ZTogdGhpcy52aWRlb0VsZW1lbnQ/Lm5ldHdvcmtTdGF0ZSxcbiAgICAgICAgICAgICAgY3VycmVudFRpbWU6IHRoaXMudmlkZW9FbGVtZW50Py5jdXJyZW50VGltZS50b0ZpeGVkKDEpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9yZSBhZ2dyZXNzaXZlIHJlY292ZXJ5IGZvciBiYW5kd2lkdGgtbGltaXRlZCBzdHJlYW1zXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPCAzKSB7XG4gICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0ZvcmNpbmcgcmVsb2FkIGZvciBiYW5kd2lkdGggcmVjb3ZlcnknKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmxvYWQoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIHBvc2l0aW9uIGFmdGVyIHJlbG9hZFxuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIGN1cnJlbnRUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSA9IGN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMjAwMCk7IC8vIExvbmdlciBkZWxheSBmb3IgYmFuZHdpZHRoIHJlY292ZXJ5XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIHdhaXRpbmcgZXZlbnQgaGFuZGxpbmdcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdWaWRlbyB3YWl0aW5nIGZvciBkYXRhJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBFbWl0IHByb3BlcnR5IGNoYW5nZXNcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ3N0cmVhbScsIHRoaXMuY3VycmVudFN0cmVhbSk7XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGV4ZWN1dGVVbmxvYWRDb21tYW5kKCkge1xuICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IG51bGw7XG4gICAgXG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UpIHtcbiAgICAgIHRoaXMuaGxzSW5zdGFuY2UuZGVzdHJveSgpO1xuICAgICAgdGhpcy5obHNJbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCkge1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50LmxvYWQoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ3N0cmVhbScsIG51bGwpO1xuICB9XG5cbiAgLy8gUHVibGljIG1ldGhvZCB0byBsb2FkIHN1YnRpdGxlc1xuICBsb2FkU3VidGl0bGVUcmFjayh0cmFjazogU3VidGl0bGVUcmFjayB8IG51bGwpIHtcbiAgICByZXR1cm4gdGhpcy5sb2FkU3VidGl0bGVzKHRyYWNrKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAodGhpcyBhcyBhbnkpLmRlc3Ryb3llZCA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5obHNJbnN0YW5jZSkge1xuICAgICAgdGhpcy5obHNJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIgJiYgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0NvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMgPSB7fTtcbiAgICB0aGlzLnZpZGVvRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIgPSBudWxsO1xuICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXQgaXNEZXN0cm95ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVzdHJveWVkO1xuICB9XG59Il0sIm1hcHBpbmdzIjoiQUFHQSxTQUFTLGFBQWEsU0FBUyxVQUFVLFVBQVUsZUFBZTtBQWlFM0QsYUFBTSxtQkFBbUI7QUFBQSxFQUN0QjtBQUFBLEVBQ0EsZUFBd0M7QUFBQSxFQUN4QyxxQkFBeUM7QUFBQSxFQUN6QyxtQkFBdUM7QUFBQSxFQUN2QyxjQUFtQjtBQUFBLEVBRW5CLGdCQUE0RCxDQUFDO0FBQUEsRUFDN0QsaUJBQWdELENBQUM7QUFBQTtBQUFBLEVBR2pELGdCQUErQjtBQUFBLEVBQy9CLHVCQUE2QztBQUFBLEVBQzdDLGdCQUErQixDQUFDO0FBQUEsRUFDaEMsWUFBWTtBQUFBO0FBQUEsRUFHWixxQkFBcUI7QUFBQSxFQUNyQix1QkFBdUI7QUFBQSxFQUN2QiwwQkFBMEI7QUFBQSxFQUMxQixnQ0FBZ0M7QUFBQSxFQUNoQyw2QkFBNkI7QUFBQSxFQUM3Qix3QkFBd0I7QUFBQSxFQUN4QixzQkFBc0I7QUFBQSxF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"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": -1,
          "_transferSize": 0,
          "_error": null,
          "_fetchedViaServiceWorker": true,
          "_serviceWorkerResponseSource": "network"
        },
        "serverIPAddress": "",
        "startedDateTime": "2025-08-01T11:32:46.246Z",
        "time": 28.432000006432645,
        "timings": {
          "blocked": 0.578999996853061,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.0009999999999999992,
          "wait": 27.150999997820705,
          "receive": 0.7010000117588788,
          "_blocked_queueing": 0.570999996853061,
          "_workerStart": 0.005,
          "_workerReady": 0.886,
          "_workerFetchStart": 0.886,
          "_workerRespondWithSettled": 26.987
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "fetchAndCache",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 153,
                "columnNumber": 25
              },
              {
                "functionName": "handleRequest",
                "scriptId": "3",
                "url": "http://localhost:5173/sw.js",
                "lineNumber": 125,
                "columnNumber": 17
              }
            ],
            "parent": {
              "description": "await",
              "callFrames": [
                {
                  "functionName": "",
                  "scriptId": "3",
                  "url": "http://localhost:5173/sw.js",
                  "lineNumber": 112,
                  "columnNumber": 19
                }
              ]
            }
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33265",
        "request": {
          "method": "GET",
          "url": "http://localhost:5173/src/lib/video/StremioVideoSystem.ts?t=1754047966153",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/src/lib/video/StremioVideoPlayer.tsx?t=1754047966153"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [
            {
              "name": "t",
              "value": "1754047966153"
            }
          ],
          "cookies": [],
          "headersSize": 1002,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Access-Control-Allow-Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "91754"
            },
            {
              "name": "Content-Type",
              "value": "text/javascript"
            },
            {
              "name": "Date",
              "value": "Fri, 01 Aug 2025 11:32:46 GMT"
            },
            {
              "name": "Etag",
              "value": "W/\"671b-MDfjgxSgvHuypurPGHy2iJdRDPg\""
            },
            {
              "name": "Keep-Alive",
              "value": "timeout=5"
            },
            {
              "name": "Vary",
              "value": "Origin"
            }
          ],
          "cookies": [],
          "content": {
            "size": 91754,
            "mimeType": "text/javascript",
            "compression": 0,
            "text": "import { LogCategory, logInfo, logError, logDebug, logWarn } from \"/src/lib/utils/logger.ts\";\nexport class StremioVideoSystem {\n  containerElement;\n  videoElement = null;\n  subtitlesContainer = null;\n  subtitlesElement = null;\n  hlsInstance = null;\n  observedProps = {};\n  eventListeners = {};\n  // State\n  currentStream = null;\n  currentSubtitleTrack = null;\n  subtitlesData = [];\n  destroyed = false;\n  // Subtitle settings\n  extraSubtitlesSize = 25;\n  extraSubtitlesOffset = 0;\n  extraSubtitlesTextColor = \"#FFFFFF\";\n  extraSubtitlesBackgroundColor = \"rgba(0, 0, 0, 0.7)\";\n  extraSubtitlesOutlineColor = \"#000000\";\n  extraSubtitlesOpacity = 100;\n  extraSubtitlesDelay = 0;\n  constructor(options) {\n    this.containerElement = options.containerElement;\n    this.initializeContainer();\n  }\n  initializeContainer() {\n    this.containerElement.style.position = \"relative\";\n    this.containerElement.style.width = \"100%\";\n    this.containerElement.style.height = \"100%\";\n    this.containerElement.style.backgroundColor = \"#000\";\n  }\n  createVideoElement() {\n    if (this.videoElement) return;\n    logInfo(LogCategory.PLAYER, \"Creating new video element\");\n    this.videoElement = document.createElement(\"video\");\n    this.videoElement.style.width = \"100%\";\n    this.videoElement.style.height = \"100%\";\n    this.videoElement.style.backgroundColor = \"transparent\";\n    this.videoElement.controls = false;\n    this.videoElement.preload = \"auto\";\n    this.videoElement.playsInline = true;\n    if (\"bufferTime\" in this.videoElement) {\n      this.videoElement.bufferTime = 10;\n    }\n    this.containerElement.appendChild(this.videoElement);\n    this.setupVideoEventListeners();\n  }\n  setupVideoEventListeners() {\n    if (!this.videoElement) return;\n    this.videoElement.addEventListener(\"loadstart\", () => {\n      logDebug(LogCategory.PLAYER, \"Video loadstart event\");\n      this.emitPropChanged(\"loaded\", false);\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"loadedmetadata\", () => {\n      if (!this.videoElement) return;\n      logInfo(LogCategory.PLAYER, \"Video loadedmetadata event\", {\n        duration: this.videoElement.duration,\n        durationFormatted: `${Math.floor(this.videoElement.duration / 60)}:${Math.floor(this.videoElement.duration % 60).toString().padStart(2, \"0\")}`\n      });\n      this.emitPropChanged(\"loaded\", true);\n      this.emitPropChanged(\"duration\", this.videoElement.duration * 1e3);\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"timeupdate\", () => {\n      if (!this.videoElement) return;\n      const time = this.videoElement.currentTime * 1e3;\n      this.emitPropChanged(\"time\", time);\n      this.renderSubtitles(time);\n    });\n    this.videoElement.addEventListener(\"play\", () => {\n      this.emitPropChanged(\"paused\", false);\n    });\n    this.videoElement.addEventListener(\"pause\", () => {\n      this.emitPropChanged(\"paused\", true);\n    });\n    this.videoElement.addEventListener(\"waiting\", () => {\n      this.emitPropChanged(\"buffering\", true);\n    });\n    this.videoElement.addEventListener(\"canplay\", () => {\n      this.emitPropChanged(\"buffering\", false);\n    });\n    this.videoElement.addEventListener(\"progress\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"buffered\", this.videoElement.buffered);\n    });\n    this.videoElement.addEventListener(\"volumechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"volume\", Math.floor(this.videoElement.volume * 100));\n      this.emitPropChanged(\"muted\", this.videoElement.muted);\n    });\n    this.videoElement.addEventListener(\"ratechange\", () => {\n      if (!this.videoElement) return;\n      this.emitPropChanged(\"playbackSpeed\", this.videoElement.playbackRate);\n    });\n    this.videoElement.addEventListener(\"ended\", () => {\n      this.emit(\"ended\");\n    });\n    this.videoElement.addEventListener(\"error\", () => {\n      if (!this.videoElement) return;\n      const error = this.videoElement.error;\n      if (error) {\n        logError(LogCategory.PLAYER, \"Video playback error\", {\n          code: error.code,\n          message: error.message,\n          streamUrl: this.currentStream\n        });\n        this.emit(\"error\", {\n          critical: true,\n          message: `Video error: ${error.message}`,\n          code: error.code\n        });\n      }\n    });\n  }\n  createSubtitlesContainer() {\n    if (this.subtitlesContainer) return;\n    this.subtitlesContainer = document.createElement(\"div\");\n    this.subtitlesContainer.style.position = \"absolute\";\n    this.subtitlesContainer.style.left = \"0\";\n    this.subtitlesContainer.style.top = \"0\";\n    this.subtitlesContainer.style.width = \"100%\";\n    this.subtitlesContainer.style.height = \"100%\";\n    this.subtitlesContainer.style.pointerEvents = \"none\";\n    this.subtitlesContainer.style.zIndex = \"1000\";\n    this.subtitlesContainer.style.display = \"flex\";\n    this.subtitlesContainer.style.flexDirection = \"column\";\n    this.subtitlesContainer.style.justifyContent = \"flex-end\";\n    this.subtitlesContainer.style.alignItems = \"center\";\n    this.subtitlesContainer.style.overflow = \"hidden\";\n    this.containerElement.appendChild(this.subtitlesContainer);\n  }\n  renderSubtitles(currentTime) {\n    if (!this.subtitlesData.length || !this.currentSubtitleTrack) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    const adjustedTime = currentTime + this.extraSubtitlesDelay;\n    const activeCues = this.subtitlesData.filter(\n      (cue) => adjustedTime >= cue.startTime && adjustedTime <= cue.endTime\n    );\n    if (activeCues.length === 0) {\n      this.removeSubtitlesElement();\n      return;\n    }\n    this.createSubtitlesContainer();\n    if (!this.subtitlesElement) {\n      this.subtitlesElement = document.createElement(\"div\");\n      this.subtitlesElement.style.position = \"relative\";\n      this.subtitlesElement.style.maxWidth = \"90%\";\n      this.subtitlesElement.style.textAlign = \"center\";\n      this.subtitlesElement.style.fontFamily = \"Arial, sans-serif\";\n      this.subtitlesElement.style.fontWeight = \"bold\";\n      this.subtitlesElement.style.lineHeight = \"1.2\";\n      this.subtitlesElement.style.wordWrap = \"break-word\";\n      this.subtitlesElement.style.whiteSpace = \"pre-wrap\";\n      this.subtitlesContainer.appendChild(this.subtitlesElement);\n    }\n    while (this.subtitlesElement.firstChild) {\n      this.subtitlesElement.removeChild(this.subtitlesElement.firstChild);\n    }\n    activeCues.forEach((cue) => {\n      const cueElement = document.createElement(\"div\");\n      cueElement.textContent = cue.text;\n      this.styleSubtitleElement(cueElement);\n      this.subtitlesElement.appendChild(cueElement);\n    });\n  }\n  styleSubtitleElement(element) {\n    const fontSize = Math.floor(this.extraSubtitlesSize / 25 * 3.5) + \"vmin\";\n    const opacity = this.extraSubtitlesOpacity / 100;\n    element.style.fontSize = fontSize;\n    element.style.opacity = opacity.toString();\n    element.style.color = this.extraSubtitlesTextColor;\n    element.style.backgroundColor = this.extraSubtitlesBackgroundColor;\n    element.style.padding = \"0.2em 0.4em\";\n    element.style.borderRadius = \"0.2em\";\n    element.style.margin = \"0.1em\";\n    element.style.display = \"inline-block\";\n    const outlineWidth = \"0.15rem\";\n    element.style.textShadow = [\n      `-${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} -${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} 0 0 ${this.extraSubtitlesOutlineColor}`,\n      `-${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `0 ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`,\n      `${outlineWidth} ${outlineWidth} 0 ${this.extraSubtitlesOutlineColor}`\n    ].join(\", \");\n    if (this.extraSubtitlesOffset !== 0) {\n      const offsetPercent = this.extraSubtitlesOffset + \"%\";\n      element.style.transform = `translateY(${offsetPercent})`;\n    }\n  }\n  removeSubtitlesElement() {\n    if (this.subtitlesElement && this.subtitlesElement.parentNode) {\n      this.subtitlesElement.parentNode.removeChild(this.subtitlesElement);\n      this.subtitlesElement = null;\n    }\n  }\n  async loadSubtitles(track) {\n    if (!track || !track.url) {\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n      return;\n    }\n    try {\n      const proxyUrl = `/api/subtitles?url=${encodeURIComponent(track.url)}`;\n      logInfo(LogCategory.STREAM, \"Loading subtitles via proxy\", { url: proxyUrl });\n      const response = await fetch(proxyUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to load subtitles: ${response.status}`);\n      }\n      const text = await response.text();\n      this.subtitlesData = this.parseSubtitles(text);\n      this.currentSubtitleTrack = track;\n      logInfo(LogCategory.STREAM, \"Subtitles loaded successfully\", {\n        cuesTotal: this.subtitlesData.length,\n        language: track.language || track.id\n      });\n    } catch (error) {\n      logError(LogCategory.STREAM, \"Subtitle loading failed\", {\n        url: track.url,\n        language: track.language || track.id\n      }, error);\n      this.subtitlesData = [];\n      this.currentSubtitleTrack = null;\n      this.removeSubtitlesElement();\n    }\n  }\n  parseSubtitles(text) {\n    const cues = [];\n    if (text.includes(\"WEBVTT\")) {\n      logDebug(LogCategory.STREAM, \"Parsing WebVTT subtitles\");\n      const blocks = text.split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 2) {\n          const timeLineIndex = lines.findIndex((line) => line.includes(\"-->\"));\n          if (timeLineIndex >= 0) {\n            const timeLine = lines[timeLineIndex];\n            const textLines = lines.slice(timeLineIndex + 1);\n            const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})/);\n            if (timeMatch) {\n              const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n              const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n              cues.push({\n                startTime,\n                endTime,\n                text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n                // Remove HTML tags\n              });\n            }\n          }\n        }\n      });\n    } else if (text.includes(\"-->\")) {\n      logDebug(LogCategory.STREAM, \"Parsing SRT subtitles\");\n      const blocks = text.trim().split(/\\n\\s*\\n/);\n      blocks.forEach((block) => {\n        const lines = block.trim().split(\"\\n\");\n        if (lines.length >= 3) {\n          const timeLine = lines[1];\n          const textLines = lines.slice(2);\n          const timeMatch = timeLine.match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})\\s*-->\\s*(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/);\n          if (timeMatch) {\n            const startTime = parseInt(timeMatch[1]) * 36e5 + parseInt(timeMatch[2]) * 6e4 + parseInt(timeMatch[3]) * 1e3 + parseInt(timeMatch[4]);\n            const endTime = parseInt(timeMatch[5]) * 36e5 + parseInt(timeMatch[6]) * 6e4 + parseInt(timeMatch[7]) * 1e3 + parseInt(timeMatch[8]);\n            cues.push({\n              startTime,\n              endTime,\n              text: textLines.join(\"\\n\").replace(/<[^>]*>/g, \"\")\n              // Remove HTML tags\n            });\n          }\n        }\n      });\n    }\n    logDebug(LogCategory.STREAM, \"Subtitle parsing completed\", { cuesTotal: cues.length });\n    return cues;\n  }\n  shouldUseHLS(streamUrl) {\n    return streamUrl.includes(\".m3u8\") || typeof window !== \"undefined\" && window.Hls?.isSupported() && !this.videoElement.canPlayType(\"application/vnd.apple.mpegurl\");\n  }\n  setupHLS(streamUrl) {\n    if (typeof window !== \"undefined\" && window.Hls?.isSupported()) {\n      const Hls = window.Hls;\n      this.hlsInstance = new Hls({\n        debug: false,\n        enableWorker: true,\n        lowLatencyMode: false,\n        backBufferLength: 30,\n        maxBufferLength: 50,\n        maxMaxBufferLength: 80,\n        maxFragLookUpTolerance: 0,\n        maxBufferHole: 0,\n        appendErrorMaxRetry: 20,\n        nudgeMaxRetry: 20,\n        manifestLoadingTimeOut: 3e4,\n        manifestLoadingMaxRetry: 10,\n        fragLoadPolicy: {\n          default: {\n            maxTimeToFirstByteMs: 1e4,\n            maxLoadTimeMs: 12e4,\n            timeoutRetry: {\n              maxNumRetry: 20,\n              retryDelayMs: 0,\n              maxRetryDelayMs: 15\n            },\n            errorRetry: {\n              maxNumRetry: 6,\n              retryDelayMs: 1e3,\n              maxRetryDelayMs: 15\n            }\n          }\n        }\n      });\n      this.hlsInstance.loadSource(streamUrl);\n      this.hlsInstance.attachMedia(this.videoElement);\n      this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {\n        this.updateAudioTracks();\n      });\n      this.hlsInstance.on(Hls.Events.ERROR, (_event, data) => {\n        if (data.fatal) {\n          this.emit(\"error\", {\n            critical: true,\n            message: `HLS Error: ${data.type} - ${data.details}`\n          });\n        }\n      });\n    } else {\n      this.videoElement.src = streamUrl;\n    }\n  }\n  updateAudioTracks() {\n    if (this.hlsInstance && this.hlsInstance.audioTracks) {\n      const tracks = this.hlsInstance.audioTracks.map((track, index) => ({\n        id: index.toString(),\n        name: track.name || `Track ${index + 1}`,\n        language: track.lang\n      }));\n      this.emitPropChanged(\"audioTracks\", tracks);\n    }\n  }\n  emitPropChanged(propName, propValue) {\n    if (this.observedProps[propName]) {\n      this.emit(\"propChanged\", propName, propValue);\n    }\n  }\n  emit(event, ...args) {\n    if (this.eventListeners[event]) {\n      this.eventListeners[event].forEach((listener) => listener(...args));\n    }\n  }\n  // Public API\n  on(event, listener) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = [];\n    }\n    this.eventListeners[event].push(listener);\n  }\n  dispatch(action) {\n    if (this.destroyed) {\n      throw new Error(\"StremioVideoSystem instance is destroyed\");\n    }\n    switch (action.type) {\n      case \"observeProp\":\n        if (action.propName) {\n          this.observedProps[action.propName] = true;\n          this.emitCurrentProp(action.propName);\n        }\n        break;\n      case \"setProp\":\n        if (action.propName && action.propValue !== void 0) {\n          this.setProp(action.propName, action.propValue);\n        }\n        break;\n      case \"command\":\n        if (action.commandName) {\n          this.executeCommand(action.commandName, action.commandArgs);\n        }\n        break;\n    }\n  }\n  emitCurrentProp(propName) {\n    switch (propName) {\n      case \"loaded\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.readyState >= 1);\n        break;\n      case \"paused\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.paused);\n        break;\n      case \"time\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.currentTime * 1e3 : null);\n        break;\n      case \"duration\":\n        this.emitPropChanged(propName, this.videoElement && this.videoElement.duration ? this.videoElement.duration * 1e3 : null);\n        break;\n      case \"buffering\":\n        this.emitPropChanged(propName, !this.videoElement || this.videoElement.readyState < 3);\n        break;\n      case \"buffered\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.buffered : null);\n        break;\n      case \"volume\":\n        this.emitPropChanged(propName, this.videoElement ? Math.floor(this.videoElement.volume * 100) : 100);\n        break;\n      case \"muted\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.muted : false);\n        break;\n      case \"playbackSpeed\":\n        this.emitPropChanged(propName, this.videoElement ? this.videoElement.playbackRate : 1);\n        break;\n    }\n  }\n  setProp(propName, propValue) {\n    switch (propName) {\n      case \"stream\":\n        if (propValue) {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"load\",\n            commandArgs: {\n              stream: { url: propValue },\n              autoplay: true\n            }\n          });\n        } else {\n          this.dispatch({\n            type: \"command\",\n            commandName: \"unload\"\n          });\n        }\n        break;\n      case \"paused\":\n        if (this.videoElement) {\n          if (propValue) {\n            this.videoElement.pause();\n          } else {\n            this.videoElement.play().catch(() => {\n            });\n          }\n        }\n        break;\n      case \"time\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.currentTime = propValue / 1e3;\n        }\n        break;\n      case \"volume\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.muted = false;\n          this.videoElement.volume = Math.max(0, Math.min(100, propValue)) / 100;\n        }\n        break;\n      case \"muted\":\n        if (this.videoElement) {\n          this.videoElement.muted = !!propValue;\n        }\n        break;\n      case \"playbackSpeed\":\n        if (this.videoElement && propValue !== null && isFinite(propValue)) {\n          this.videoElement.playbackRate = propValue;\n        }\n        break;\n      case \"selectedSubtitlesTrackId\":\n        break;\n      // Subtitle styling properties\n      case \"extraSubtitlesSize\":\n        this.extraSubtitlesSize = Math.max(10, Math.min(50, propValue || 25));\n        break;\n      case \"extraSubtitlesOffset\":\n        this.extraSubtitlesOffset = Math.max(-20, Math.min(20, propValue || 0));\n        break;\n      case \"extraSubtitlesTextColor\":\n        this.extraSubtitlesTextColor = propValue || \"#FFFFFF\";\n        break;\n      case \"extraSubtitlesBackgroundColor\":\n        this.extraSubtitlesBackgroundColor = propValue || \"rgba(0, 0, 0, 0.7)\";\n        break;\n      case \"extraSubtitlesOutlineColor\":\n        this.extraSubtitlesOutlineColor = propValue || \"#000000\";\n        break;\n      case \"extraSubtitlesOpacity\":\n        this.extraSubtitlesOpacity = Math.max(0, Math.min(100, propValue || 100));\n        break;\n      case \"extraSubtitlesDelay\":\n        this.extraSubtitlesDelay = propValue || 0;\n        break;\n    }\n  }\n  executeCommand(commandName, commandArgs) {\n    switch (commandName) {\n      case \"load\":\n        this.executeLoadCommand(commandArgs);\n        break;\n      case \"unload\":\n        this.executeUnloadCommand();\n        break;\n      case \"play\":\n        if (this.videoElement) {\n          this.videoElement.play().catch(() => {\n          });\n        }\n        break;\n      case \"pause\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n        }\n        break;\n      case \"stop\":\n        if (this.videoElement) {\n          this.videoElement.pause();\n          this.videoElement.currentTime = 0;\n        }\n        break;\n      case \"seek\":\n        if (this.videoElement && commandArgs && commandArgs[0] !== void 0) {\n          this.videoElement.currentTime = commandArgs[0] / 1e3;\n        }\n        break;\n    }\n  }\n  executeLoadCommand(commandArgs) {\n    this.executeUnloadCommand();\n    if (commandArgs && commandArgs.stream && typeof commandArgs.stream.url === \"string\") {\n      this.currentStream = commandArgs.stream.url;\n      if (!this.videoElement) {\n        this.createVideoElement();\n      }\n      logInfo(LogCategory.STREAM, \"Loading stream via load command\", {\n        url: this.currentStream,\n        autoplay: typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true\n      });\n      if (this.videoElement) {\n        this.videoElement.autoplay = typeof commandArgs.autoplay === \"boolean\" ? commandArgs.autoplay : true;\n        if (commandArgs.time !== null && isFinite(commandArgs.time)) {\n          this.videoElement.currentTime = parseInt(commandArgs.time, 10) / 1e3;\n        }\n        if (this.currentStream && this.shouldUseHLS(this.currentStream)) {\n          logInfo(LogCategory.STREAM, \"Setting up HLS streaming\", { url: this.currentStream });\n          this.setupHLS(this.currentStream);\n        } else {\n          logInfo(LogCategory.STREAM, \"Setting direct video source\", { url: this.currentStream });\n          this.videoElement.preload = \"auto\";\n          this.videoElement.src = this.currentStream;\n          this.videoElement.setAttribute(\"playsinline\", \"true\");\n          this.videoElement.setAttribute(\"webkit-playsinline\", \"true\");\n          if (\"bufferData\" in this.videoElement) {\n            this.videoElement.bufferData = true;\n          }\n          this.videoElement.crossOrigin = null;\n          this.videoElement.addEventListener(\"loadstart\", () => {\n            logInfo(LogCategory.PERFORMANCE, \"Starting aggressive buffer loading\");\n          });\n          let bufferHealthTimer = null;\n          let lowBufferCount = 0;\n          this.videoElement.addEventListener(\"progress\", () => {\n            if (this.videoElement && this.videoElement.buffered.length > 0) {\n              const buffered = this.videoElement.buffered.end(this.videoElement.buffered.length - 1);\n              const current = this.videoElement.currentTime;\n              const bufferAhead = buffered - current;\n              logDebug(LogCategory.PERFORMANCE, \"Buffer status\", {\n                bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                currentTime: `${current.toFixed(1)}s`,\n                bufferedEnd: `${buffered.toFixed(1)}s`,\n                bufferHealth: bufferAhead < 5 ? \"LOW\" : bufferAhead < 15 ? \"MEDIUM\" : \"HIGH\"\n              });\n              if (bufferAhead < 5 && !this.videoElement.paused) {\n                lowBufferCount++;\n                logWarn(LogCategory.PERFORMANCE, \"Low buffer detected\", {\n                  bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                  lowBufferEvents: lowBufferCount,\n                  readyState: this.videoElement.readyState\n                });\n                if (bufferAhead < 3 || lowBufferCount > 2) {\n                  logInfo(LogCategory.PERFORMANCE, \"Pausing for aggressive buffer recovery\", {\n                    bufferAhead: `${bufferAhead.toFixed(1)}s`,\n                    pauseDuration: \"5000ms\"\n                  });\n                  this.videoElement.pause();\n                  if (bufferHealthTimer) clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = setTimeout(() => {\n                    if (this.videoElement && this.videoElement.paused) {\n                      const newBuffered = this.videoElement.buffered.length > 0 ? this.videoElement.buffered.end(this.videoElement.buffered.length - 1) : 0;\n                      const newBufferAhead = newBuffered - this.videoElement.currentTime;\n                      logInfo(LogCategory.PERFORMANCE, \"Resuming after buffer recovery\", {\n                        bufferBefore: `${bufferAhead.toFixed(1)}s`,\n                        bufferAfter: `${newBufferAhead.toFixed(1)}s`\n                      });\n                      this.videoElement.play().catch(() => {\n                      });\n                      lowBufferCount = Math.max(0, lowBufferCount - 1);\n                    }\n                  }, 5e3);\n                }\n              } else if (bufferAhead > 10) {\n                lowBufferCount = 0;\n                if (bufferHealthTimer) {\n                  clearTimeout(bufferHealthTimer);\n                  bufferHealthTimer = null;\n                }\n              }\n            }\n          });\n          this.videoElement.addEventListener(\"stalled\", () => {\n            logWarn(LogCategory.PERFORMANCE, \"Video stalled, implementing recovery strategy\", {\n              readyState: this.videoElement?.readyState,\n              networkState: this.videoElement?.networkState,\n              currentTime: this.videoElement?.currentTime.toFixed(1)\n            });\n            setTimeout(() => {\n              if (this.videoElement && this.videoElement.readyState < 3) {\n                logInfo(LogCategory.PERFORMANCE, \"Forcing reload for bandwidth recovery\");\n                const currentTime = this.videoElement.currentTime;\n                this.videoElement.load();\n                this.videoElement.addEventListener(\"loadedmetadata\", () => {\n                  if (this.videoElement && currentTime > 0) {\n                    this.videoElement.currentTime = currentTime;\n                  }\n                }, { once: true });\n              }\n            }, 2e3);\n          });\n          this.videoElement.addEventListener(\"waiting\", () => {\n            logDebug(LogCategory.PERFORMANCE, \"Video waiting for data\");\n          });\n          this.videoElement.load();\n        }\n        this.emitPropChanged(\"stream\", this.currentStream);\n        this.emitPropChanged(\"loaded\", false);\n        this.emitPropChanged(\"buffering\", true);\n      }\n    }\n  }\n  executeUnloadCommand() {\n    this.currentStream = null;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.videoElement) {\n      this.videoElement.removeAttribute(\"src\");\n      this.videoElement.load();\n    }\n    this.emitPropChanged(\"stream\", null);\n  }\n  // Public method to load subtitles\n  loadSubtitleTrack(track) {\n    return this.loadSubtitles(track);\n  }\n  destroy() {\n    if (this.destroyed) return;\n    this.destroyed = true;\n    if (this.hlsInstance) {\n      this.hlsInstance.destroy();\n      this.hlsInstance = null;\n    }\n    if (this.subtitlesContainer && this.subtitlesContainer.parentNode) {\n      this.subtitlesContainer.parentNode.removeChild(this.subtitlesContainer);\n    }\n    if (this.videoElement && this.videoElement.parentNode) {\n      this.videoElement.parentNode.removeChild(this.videoElement);\n    }\n    this.eventListeners = {};\n    this.videoElement = null;\n    this.subtitlesContainer = null;\n    this.subtitlesElement = null;\n  }\n  get isDestroyed() {\n    return this.destroyed;\n  }\n}\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0cmVtaW9WaWRlb1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wbGV0ZSBTdHJlbWlvIFZpZGVvIFBsYXllciBTeXN0ZW1cbi8vIFR5cGVTY3JpcHQgaW1wbGVtZW50YXRpb24gd2l0aCBhbGwgU3RyZW1pbyBmZWF0dXJlc1xuXG5pbXBvcnQgeyBMb2dDYXRlZ29yeSwgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ0RlYnVnLCBsb2dXYXJuIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBWaWRlb1Byb3BlcnRpZXMge1xuICBzdHJlYW0/OiBzdHJpbmcgfCBudWxsO1xuICBsb2FkZWQ/OiBib29sZWFuO1xuICBwYXVzZWQ/OiBib29sZWFuO1xuICB0aW1lPzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgYnVmZmVyaW5nPzogYm9vbGVhbjtcbiAgYnVmZmVyZWQ/OiBUaW1lUmFuZ2VzIHwgbnVsbDtcbiAgYXVkaW9UcmFja3M/OiBBdWRpb1RyYWNrW107XG4gIHNlbGVjdGVkQXVkaW9UcmFja0lkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3VidGl0bGVzVHJhY2tzPzogU3VidGl0bGVUcmFja1tdO1xuICBzZWxlY3RlZFN1YnRpdGxlc1RyYWNrSWQ/OiBzdHJpbmcgfCBudWxsO1xuICBzdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1NpemU/OiBudW1iZXI7XG4gIHN1YnRpdGxlc1RleHRDb2xvcj86IHN0cmluZztcbiAgc3VidGl0bGVzQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBzdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIHN1YnRpdGxlc09wYWNpdHk/OiBudW1iZXI7XG4gIHZvbHVtZT86IG51bWJlcjtcbiAgbXV0ZWQ/OiBib29sZWFuO1xuICBwbGF5YmFja1NwZWVkPzogbnVtYmVyO1xuICAvLyBFbmhhbmNlZCBzdWJ0aXRsZSBwcm9wZXJ0aWVzXG4gIGV4dHJhU3VidGl0bGVzU2l6ZT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNPZmZzZXQ/OiBudW1iZXI7XG4gIGV4dHJhU3VidGl0bGVzVGV4dENvbG9yPzogc3RyaW5nO1xuICBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIGV4dHJhU3VidGl0bGVzT3BhY2l0eT86IG51bWJlcjtcbiAgZXh0cmFTdWJ0aXRsZXNEZWxheT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1RyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWJ0aXRsZVRyYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBsYW5ndWFnZT86IHN0cmluZztcbiAgdXJsPzogc3RyaW5nO1xuICBlbWJlZGRlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VidGl0bGVDdWUge1xuICBzdGFydFRpbWU6IG51bWJlcjtcbiAgZW5kVGltZTogbnVtYmVyO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9BY3Rpb24ge1xuICB0eXBlOiAnb2JzZXJ2ZVByb3AnIHwgJ3NldFByb3AnIHwgJ2NvbW1hbmQnO1xuICBwcm9wTmFtZT86IGtleW9mIFZpZGVvUHJvcGVydGllcztcbiAgcHJvcFZhbHVlPzogYW55O1xuICBjb21tYW5kTmFtZT86IHN0cmluZztcbiAgY29tbWFuZEFyZ3M/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9PcHRpb25zIHtcbiAgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJlbWlvVmlkZW9TeXN0ZW0ge1xuICBwcml2YXRlIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN1YnRpdGxlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGhsc0luc3RhbmNlOiBhbnkgPSBudWxsO1xuICBcbiAgcHJpdmF0ZSBvYnNlcnZlZFByb3BzOiB7IFtLIGluIGtleW9mIFZpZGVvUHJvcGVydGllc10/OiBib29sZWFuIH0gPSB7fTtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbltdIH0gPSB7fTtcbiAgXG4gIC8vIFN0YXRlXG4gIHByaXZhdGUgY3VycmVudFN0cmVhbTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY3VycmVudFN1YnRpdGxlVHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdWJ0aXRsZXNEYXRhOiBTdWJ0aXRsZUN1ZVtdID0gW107XG4gIHByaXZhdGUgZGVzdHJveWVkID0gZmFsc2U7XG4gIFxuICAvLyBTdWJ0aXRsZSBzZXR0aW5nc1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzU2l6ZSA9IDI1O1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc1RleHRDb2xvciA9ICcjRkZGRkZGJztcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0JhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yID0gJyMwMDAwMDAnO1xuICBwcml2YXRlIGV4dHJhU3VidGl0bGVzT3BhY2l0eSA9IDEwMDtcbiAgcHJpdmF0ZSBleHRyYVN1YnRpdGxlc0RlbGF5ID0gMDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBWaWRlb09wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQ7XG4gICAgdGhpcy5pbml0aWFsaXplQ29udGFpbmVyKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVDb250YWluZXIoKSB7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5jb250YWluZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVWaWRlb0VsZW1lbnQoKSB7XG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICBsb2dJbmZvKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ0NyZWF0aW5nIG5ldyB2aWRlbyBlbGVtZW50Jyk7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgIHRoaXMudmlkZW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XG4gICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJzsgLy8gQ2hhbmdlZCBmcm9tICdtZXRhZGF0YScgdG8gJ2F1dG8nIGZvciBiZXR0ZXIgYnVmZmVyaW5nXG4gICAgdGhpcy52aWRlb0VsZW1lbnQucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgIC8vIERvbid0IHNldCBjcm9zc09yaWdpbiBmb3IgUmVhbC1EZWJyaWQgc3RyZWFtcyBhcyB0aGV5IGRvbid0IHN1cHBvcnQgQ09SU1xuICAgIFxuICAgIC8vIEFkZCBidWZmZXIgY29uZmlndXJhdGlvbiBmb3IgYmV0dGVyIHN0cmVhbWluZyBwZXJmb3JtYW5jZVxuICAgIGlmICgnYnVmZmVyVGltZScgaW4gdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICh0aGlzLnZpZGVvRWxlbWVudCBhcyBhbnkpLmJ1ZmZlclRpbWUgPSAxMDsgLy8gMTAgc2Vjb25kcyBidWZmZXJcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIHRoaXMuc2V0dXBWaWRlb0V2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVmlkZW9FdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKSA9PiB7XG4gICAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5QTEFZRVIsICdWaWRlbyBsb2Fkc3RhcnQgZXZlbnQnKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYnVmZmVyaW5nJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuUExBWUVSLCAnVmlkZW8gbG9hZGVkbWV0YWRhdGEgZXZlbnQnLCB7IFxuICAgICAgICBkdXJhdGlvbjogdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24sXG4gICAgICAgIGR1cmF0aW9uRm9ybWF0dGVkOiBgJHtNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uIC8gNjApfToke01hdGguZmxvb3IodGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gJSA2MCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2xvYWRlZCcsIHRydWUpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2R1cmF0aW9uJywgdGhpcy52aWRlb0VsZW1lbnQuZHVyYXRpb24gKiAxMDAwKTtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpZGVvRWxlbWVudCkgcmV0dXJuO1xuICAgICAgY29uc3QgdGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lICogMTAwMDtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd0aW1lJywgdGltZSk7XG4gICAgICB0aGlzLnJlbmRlclN1YnRpdGxlcyh0aW1lKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgncGF1c2VkJywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ2J1ZmZlcmluZycsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJlZCcsIHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3ZvbHVtZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCd2b2x1bWUnLCBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkpO1xuICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ211dGVkJywgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdwbGF5YmFja1NwZWVkJywgdGhpcy52aWRlb0VsZW1lbnQucGxheWJhY2tSYXRlKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdlbmRlZCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmlkZW9FbGVtZW50KSByZXR1cm47XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMudmlkZW9FbGVtZW50LmVycm9yO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGxvZ0Vycm9yKExvZ0NhdGVnb3J5LlBMQVlFUiwgJ1ZpZGVvIHBsYXliYWNrIGVycm9yJywge1xuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdHJlYW1Vcmw6IHRoaXMuY3VycmVudFN0cmVhbVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgVmlkZW8gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN1YnRpdGxlc0NvbnRhaW5lcigpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNDb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdWJ0aXRsZXMoY3VycmVudFRpbWU6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5zdWJ0aXRsZXNEYXRhLmxlbmd0aCB8fCAhdGhpcy5jdXJyZW50U3VidGl0bGVUcmFjaykge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWRqdXN0ZWRUaW1lID0gY3VycmVudFRpbWUgKyB0aGlzLmV4dHJhU3VidGl0bGVzRGVsYXk7XG4gICAgY29uc3QgYWN0aXZlQ3VlcyA9IHRoaXMuc3VidGl0bGVzRGF0YS5maWx0ZXIoY3VlID0+IFxuICAgICAgYWRqdXN0ZWRUaW1lID49IGN1ZS5zdGFydFRpbWUgJiYgYWRqdXN0ZWRUaW1lIDw9IGN1ZS5lbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChhY3RpdmVDdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVTdWJ0aXRsZXNDb250YWluZXIoKTtcbiAgICBcbiAgICBpZiAoIXRoaXMuc3VidGl0bGVzRWxlbWVudCkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJzkwJSc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdBcmlhbCwgc2Fucy1zZXJpZic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgICB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciEuYXBwZW5kQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyBjb250ZW50XG4gICAgd2hpbGUgKHRoaXMuc3VidGl0bGVzRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5zdWJ0aXRsZXNFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIFJlbmRlciBhY3RpdmUgY3Vlc1xuICAgIGFjdGl2ZUN1ZXMuZm9yRWFjaChjdWUgPT4ge1xuICAgICAgY29uc3QgY3VlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY3VlRWxlbWVudC50ZXh0Q29udGVudCA9IGN1ZS50ZXh0O1xuICAgICAgdGhpcy5zdHlsZVN1YnRpdGxlRWxlbWVudChjdWVFbGVtZW50KTtcbiAgICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCEuYXBwZW5kQ2hpbGQoY3VlRWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0eWxlU3VidGl0bGVFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZm9udFNpemUgPSBNYXRoLmZsb29yKCh0aGlzLmV4dHJhU3VidGl0bGVzU2l6ZSAvIDI1KSAqIDMuNSkgKyAndm1pbic7XG4gICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNPcGFjaXR5IC8gMTAwO1xuXG4gICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcbiAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvcjtcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3I7XG4gICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuMmVtIDAuNGVtJztcbiAgICBlbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwLjJlbSc7XG4gICAgZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnMC4xZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXG4gICAgLy8gVGV4dCBzaGFkb3cgZm9yIG91dGxpbmUgZWZmZWN0XG4gICAgY29uc3Qgb3V0bGluZVdpZHRoID0gJzAuMTVyZW0nO1xuICAgIGVsZW1lbnQuc3R5bGUudGV4dFNoYWRvdyA9IFtcbiAgICAgIGAtJHtvdXRsaW5lV2lkdGh9IC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwIC0ke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAke291dGxpbmVXaWR0aH0gLSR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYC0ke291dGxpbmVXaWR0aH0gMCAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAwIDAgJHt0aGlzLmV4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yfWAsXG4gICAgICBgLSR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YCxcbiAgICAgIGAwICR7b3V0bGluZVdpZHRofSAwICR7dGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvcn1gLFxuICAgICAgYCR7b3V0bGluZVdpZHRofSAke291dGxpbmVXaWR0aH0gMCAke3RoaXMuZXh0cmFTdWJ0aXRsZXNPdXRsaW5lQ29sb3J9YFxuICAgIF0uam9pbignLCAnKTtcblxuICAgIC8vIFBvc2l0aW9uIG9mZnNldFxuICAgIGlmICh0aGlzLmV4dHJhU3VidGl0bGVzT2Zmc2V0ICE9PSAwKSB7XG4gICAgICBjb25zdCBvZmZzZXRQZXJjZW50ID0gdGhpcy5leHRyYVN1YnRpdGxlc09mZnNldCArICclJztcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtvZmZzZXRQZXJjZW50fSlgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpIHtcbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNFbGVtZW50ICYmIHRoaXMuc3VidGl0bGVzRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0VsZW1lbnQpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRTdWJ0aXRsZXModHJhY2s6IFN1YnRpdGxlVHJhY2sgfCBudWxsKSB7XG4gICAgaWYgKCF0cmFjayB8fCAhdHJhY2sudXJsKSB7XG4gICAgICB0aGlzLnN1YnRpdGxlc0RhdGEgPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5yZW1vdmVTdWJ0aXRsZXNFbGVtZW50KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBvdXIgc3VidGl0bGUgcHJveHkgdG8gYXZvaWQgQ09SUyBpc3N1ZXNcbiAgICAgIGNvbnN0IHByb3h5VXJsID0gYC9hcGkvc3VidGl0bGVzP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0cmFjay51cmwpfWA7XG4gICAgICBcbiAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnTG9hZGluZyBzdWJ0aXRsZXMgdmlhIHByb3h5JywgeyB1cmw6IHByb3h5VXJsIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3h5VXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzdWJ0aXRsZXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gdGhpcy5wYXJzZVN1YnRpdGxlcyh0ZXh0KTtcbiAgICAgIHRoaXMuY3VycmVudFN1YnRpdGxlVHJhY2sgPSB0cmFjaztcbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZXMgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgY3Vlc1RvdGFsOiB0aGlzLnN1YnRpdGxlc0RhdGEubGVuZ3RoLFxuICAgICAgICBsYW5ndWFnZTogdHJhY2subGFuZ3VhZ2UgfHwgdHJhY2suaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcihMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBsb2FkaW5nIGZhaWxlZCcsIHtcbiAgICAgICAgdXJsOiB0cmFjay51cmwsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5ndWFnZSB8fCB0cmFjay5pZFxuICAgICAgfSwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgdGhpcy5zdWJ0aXRsZXNEYXRhID0gW107XG4gICAgICB0aGlzLmN1cnJlbnRTdWJ0aXRsZVRyYWNrID0gbnVsbDtcbiAgICAgIHRoaXMucmVtb3ZlU3VidGl0bGVzRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdWJ0aXRsZXModGV4dDogc3RyaW5nKTogU3VidGl0bGVDdWVbXSB7XG4gICAgY29uc3QgY3VlczogU3VidGl0bGVDdWVbXSA9IFtdO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgV2ViVlRUIGZvcm1hdFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdXRUJWVFQnKSkge1xuICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnUGFyc2luZyBXZWJWVFQgc3VidGl0bGVzJyk7XG4gICAgICBcbiAgICAgIC8vIFNwbGl0IGJ5IGRvdWJsZSBuZXdsaW5lcyB0byBnZXQgY3VlIGJsb2Nrc1xuICAgICAgY29uc3QgYmxvY2tzID0gdGV4dC5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgdGltZWxpbmUgKGNvbnRhaW5zIC0tPilcbiAgICAgICAgICBjb25zdCB0aW1lTGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS5pbmNsdWRlcygnLS0+JykpO1xuICAgICAgICAgIGlmICh0aW1lTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVMaW5lID0gbGluZXNbdGltZUxpbmVJbmRleF07XG4gICAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSh0aW1lTGluZUluZGV4ICsgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdlYlZUVCBmb3JtYXQ6IDAwOjAwOjAwLjAwMCAtLT4gMDA6MDA6MDAuMDAwXG4gICAgICAgICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0aW1lTGluZS5tYXRjaCgvKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSlcXC4oXFxkezN9KS8pO1xuICAgICAgICAgICAgaWYgKHRpbWVNYXRjaCkge1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFsyXSkgKiA2MDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFszXSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbNV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzddKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzhdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGN1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dExpbmVzLmpvaW4oJ1xcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IFxuICAgIC8vIFNSVCBmb3JtYXQgcGFyc2VyXG4gICAgZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnLS0+JykpIHtcbiAgICAgIGxvZ0RlYnVnKExvZ0NhdGVnb3J5LlNUUkVBTSwgJ1BhcnNpbmcgU1JUIHN1YnRpdGxlcycpO1xuICAgICAgXG4gICAgICBjb25zdCBibG9ja3MgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxuXFxzKlxcbi8pO1xuICAgICAgXG4gICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gYmxvY2sudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgY29uc3QgdGltZUxpbmUgPSBsaW5lc1sxXTtcbiAgICAgICAgICBjb25zdCB0ZXh0TGluZXMgPSBsaW5lcy5zbGljZSgyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTUlQgZm9ybWF0OiAwMDowMDowMCwwMDAgLS0+IDAwOjAwOjAwLDAwMFxuICAgICAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRpbWVMaW5lLm1hdGNoKC8oXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSwoXFxkezN9KVxccyotLT5cXHMqKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSksKFxcZHszfSkvKTtcbiAgICAgICAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZUludCh0aW1lTWF0Y2hbMV0pICogMzYwMDAwMCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbMl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzNdKSAqIDEwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQodGltZU1hdGNoWzRdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IHBhcnNlSW50KHRpbWVNYXRjaFs1XSkgKiAzNjAwMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbNl0pICogNjAwMDAgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRpbWVNYXRjaFs3XSkgKiAxMDAwICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0aW1lTWF0Y2hbOF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdWVzLnB1c2goe1xuICAgICAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgIHRleHQ6IHRleHRMaW5lcy5qb2luKCdcXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2dEZWJ1ZyhMb2dDYXRlZ29yeS5TVFJFQU0sICdTdWJ0aXRsZSBwYXJzaW5nIGNvbXBsZXRlZCcsIHsgY3Vlc1RvdGFsOiBjdWVzLmxlbmd0aCB9KTtcbiAgICByZXR1cm4gY3VlcztcbiAgfVxuXG5cbiAgcHJpdmF0ZSBzaG91bGRVc2VITFMoc3RyZWFtVXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3RyZWFtVXJsLmluY2x1ZGVzKCcubTN1OCcpIHx8IFxuICAgICAgICAgICAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgXG4gICAgICAgICAgICAod2luZG93IGFzIGFueSkuSGxzPy5pc1N1cHBvcnRlZCgpICYmIFxuICAgICAgICAgICAgIXRoaXMudmlkZW9FbGVtZW50IS5jYW5QbGF5VHlwZSgnYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmwnKSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwSExTKHN0cmVhbVVybDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5IbHM/LmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIGNvbnN0IEhscyA9ICh3aW5kb3cgYXMgYW55KS5IbHM7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbmV3IEhscyh7XG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlV29ya2VyOiB0cnVlLFxuICAgICAgICBsb3dMYXRlbmN5TW9kZTogZmFsc2UsXG4gICAgICAgIGJhY2tCdWZmZXJMZW5ndGg6IDMwLFxuICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IDUwLFxuICAgICAgICBtYXhNYXhCdWZmZXJMZW5ndGg6IDgwLFxuICAgICAgICBtYXhGcmFnTG9va1VwVG9sZXJhbmNlOiAwLFxuICAgICAgICBtYXhCdWZmZXJIb2xlOiAwLFxuICAgICAgICBhcHBlbmRFcnJvck1heFJldHJ5OiAyMCxcbiAgICAgICAgbnVkZ2VNYXhSZXRyeTogMjAsXG4gICAgICAgIG1hbmlmZXN0TG9hZGluZ1RpbWVPdXQ6IDMwMDAwLFxuICAgICAgICBtYW5pZmVzdExvYWRpbmdNYXhSZXRyeTogMTAsXG4gICAgICAgIGZyYWdMb2FkUG9saWN5OiB7XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgbWF4VGltZVRvRmlyc3RCeXRlTXM6IDEwMDAwLFxuICAgICAgICAgICAgbWF4TG9hZFRpbWVNczogMTIwMDAwLFxuICAgICAgICAgICAgdGltZW91dFJldHJ5OiB7XG4gICAgICAgICAgICAgIG1heE51bVJldHJ5OiAyMCxcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JSZXRyeToge1xuICAgICAgICAgICAgICBtYXhOdW1SZXRyeTogNixcbiAgICAgICAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAwLFxuICAgICAgICAgICAgICBtYXhSZXRyeURlbGF5TXM6IDE1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5sb2FkU291cmNlKHN0cmVhbVVybCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlLmF0dGFjaE1lZGlhKHRoaXMudmlkZW9FbGVtZW50KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLk1BTklGRVNUX1BBUlNFRCwgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUF1ZGlvVHJhY2tzKCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5obHNJbnN0YW5jZS5vbihIbHMuRXZlbnRzLkVSUk9SLCAoX2V2ZW50OiBhbnksIGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZGF0YS5mYXRhbCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjcml0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBITFMgRXJyb3I6ICR7ZGF0YS50eXBlfSAtICR7ZGF0YS5kZXRhaWxzfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIGZvciBTYWZhcmkgYW5kIG90aGVyIGJyb3dzZXJzIHdpdGggbmF0aXZlIEhMUyBzdXBwb3J0XG4gICAgICB0aGlzLnZpZGVvRWxlbWVudCEuc3JjID0gc3RyZWFtVXJsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQXVkaW9UcmFja3MoKSB7XG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UgJiYgdGhpcy5obHNJbnN0YW5jZS5hdWRpb1RyYWNrcykge1xuICAgICAgY29uc3QgdHJhY2tzOiBBdWRpb1RyYWNrW10gPSB0aGlzLmhsc0luc3RhbmNlLmF1ZGlvVHJhY2tzLm1hcCgodHJhY2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgaWQ6IGluZGV4LnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHRyYWNrLm5hbWUgfHwgYFRyYWNrICR7aW5kZXggKyAxfWAsXG4gICAgICAgIGxhbmd1YWdlOiB0cmFjay5sYW5nXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZCgnYXVkaW9UcmFja3MnLCB0cmFja3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lOiBrZXlvZiBWaWRlb1Byb3BlcnRpZXMsIHByb3BWYWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZWRQcm9wc1twcm9wTmFtZV0pIHtcbiAgICAgIHRoaXMuZW1pdCgncHJvcENoYW5nZWQnLCBwcm9wTmFtZSwgcHJvcFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAodGhpcy5ldmVudExpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUElcbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0cmVtaW9WaWRlb1N5c3RlbSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIGRpc3BhdGNoKGFjdGlvbjogVmlkZW9BY3Rpb24pIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3RyZW1pb1ZpZGVvU3lzdGVtIGluc3RhbmNlIGlzIGRlc3Ryb3llZCcpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29ic2VydmVQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZWRQcm9wc1thY3Rpb24ucHJvcE5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmVtaXRDdXJyZW50UHJvcChhY3Rpb24ucHJvcE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzZXRQcm9wJzpcbiAgICAgICAgaWYgKGFjdGlvbi5wcm9wTmFtZSAmJiBhY3Rpb24ucHJvcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnNldFByb3AoYWN0aW9uLnByb3BOYW1lLCBhY3Rpb24ucHJvcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbWFuZCc6XG4gICAgICAgIGlmIChhY3Rpb24uY29tbWFuZE5hbWUpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGFjdGlvbi5jb21tYW5kTmFtZSwgYWN0aW9uLmNvbW1hbmRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXRDdXJyZW50UHJvcChwcm9wTmFtZToga2V5b2YgVmlkZW9Qcm9wZXJ0aWVzKSB7XG4gICAgc3dpdGNoIChwcm9wTmFtZSkge1xuICAgICAgY2FzZSAnbG9hZGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPj0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsICF0aGlzLnZpZGVvRWxlbWVudCB8fCB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSAqIDEwMDAgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5kdXJhdGlvbiA/IHRoaXMudmlkZW9FbGVtZW50LmR1cmF0aW9uICogMTAwMCA6IG51bGwpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmluZyc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCAhdGhpcy52aWRlb0VsZW1lbnQgfHwgdGhpcy52aWRlb0VsZW1lbnQucmVhZHlTdGF0ZSA8IDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2J1ZmZlcmVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQgOiBudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2b2x1bWUnOlxuICAgICAgICB0aGlzLmVtaXRQcm9wQ2hhbmdlZChwcm9wTmFtZSwgdGhpcy52aWRlb0VsZW1lbnQgPyBNYXRoLmZsb29yKHRoaXMudmlkZW9FbGVtZW50LnZvbHVtZSAqIDEwMCkgOiAxMDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ211dGVkJzpcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQocHJvcE5hbWUsIHRoaXMudmlkZW9FbGVtZW50ID8gdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgOiBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKHByb3BOYW1lLCB0aGlzLnZpZGVvRWxlbWVudCA/IHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA6IDEpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldFByb3AocHJvcE5hbWU6IGtleW9mIFZpZGVvUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpIHtcbiAgICBzd2l0Y2ggKHByb3BOYW1lKSB7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICAvLyBVc2UgU3RyZW1pbydzIGxvYWQgY29tbWFuZCBwYXR0ZXJuIGluc3RlYWQgb2YgZGlyZWN0IHN0cmVhbSBzZXR0aW5nXG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAnbG9hZCcsXG4gICAgICAgICAgICBjb21tYW5kQXJnczoge1xuICAgICAgICAgICAgICBzdHJlYW06IHsgdXJsOiBwcm9wVmFsdWUgfSxcbiAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21tYW5kJyxcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiAndW5sb2FkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGF1c2VkJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgaWYgKHByb3BWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0aW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwcm9wVmFsdWUgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndm9sdW1lJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBpc0Zpbml0ZShwcm9wVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC52b2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSkpIC8gMTAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbXV0ZWQnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZCA9ICEhcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncGxheWJhY2tTcGVlZCc6XG4gICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiBwcm9wVmFsdWUgIT09IG51bGwgJiYgaXNGaW5pdGUocHJvcFZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdGVkU3VidGl0bGVzVHJhY2tJZCc6XG4gICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCBzdWJ0aXRsZSB0cmFja3MgdG8gYmUgcHJvdmlkZWRcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCBoYW5kbGUgdGhlIHN1YnRpdGxlIHRyYWNrIGxvYWRpbmdcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBTdWJ0aXRsZSBzdHlsaW5nIHByb3BlcnRpZXNcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzU2l6ZSc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNTaXplID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDUwLCBwcm9wVmFsdWUgfHwgMjUpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc09mZnNldCc6XG4gICAgICAgIHRoaXMuZXh0cmFTdWJ0aXRsZXNPZmZzZXQgPSBNYXRoLm1heCgtMjAsIE1hdGgubWluKDIwLCBwcm9wVmFsdWUgfHwgMCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzVGV4dENvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc1RleHRDb2xvciA9IHByb3BWYWx1ZSB8fCAnI0ZGRkZGRic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNCYWNrZ3JvdW5kQ29sb3InOlxuICAgICAgICB0aGlzLmV4dHJhU3VidGl0bGVzQmFja2dyb3VuZENvbG9yID0gcHJvcFZhbHVlIHx8ICdyZ2JhKDAsIDAsIDAsIDAuNyknO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4dHJhU3VidGl0bGVzT3V0bGluZUNvbG9yJzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc091dGxpbmVDb2xvciA9IHByb3BWYWx1ZSB8fCAnIzAwMDAwMCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXh0cmFTdWJ0aXRsZXNPcGFjaXR5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc09wYWNpdHkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHByb3BWYWx1ZSB8fCAxMDApKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleHRyYVN1YnRpdGxlc0RlbGF5JzpcbiAgICAgICAgdGhpcy5leHRyYVN1YnRpdGxlc0RlbGF5ID0gcHJvcFZhbHVlIHx8IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWU6IHN0cmluZywgY29tbWFuZEFyZ3M/OiBhbnkpIHtcbiAgICBzd2l0Y2ggKGNvbW1hbmROYW1lKSB7XG4gICAgICBjYXNlICdsb2FkJzpcbiAgICAgICAgdGhpcy5leGVjdXRlTG9hZENvbW1hbmQoY29tbWFuZEFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VubG9hZCc6XG4gICAgICAgIHRoaXMuZXhlY3V0ZVVubG9hZENvbW1hbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwbGF5JzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3BhdXNlJzpcbiAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0b3AnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlZWsnOlxuICAgICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQgJiYgY29tbWFuZEFyZ3MgJiYgY29tbWFuZEFyZ3NbMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lID0gY29tbWFuZEFyZ3NbMF0gLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZUxvYWRDb21tYW5kKGNvbW1hbmRBcmdzOiBhbnkpIHtcbiAgICB0aGlzLmV4ZWN1dGVVbmxvYWRDb21tYW5kKCk7IC8vIFVubG9hZCBhbnkgZXhpc3Rpbmcgc3RyZWFtIGZpcnN0XG4gICAgXG4gICAgaWYgKGNvbW1hbmRBcmdzICYmIGNvbW1hbmRBcmdzLnN0cmVhbSAmJiB0eXBlb2YgY29tbWFuZEFyZ3Muc3RyZWFtLnVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IGNvbW1hbmRBcmdzLnN0cmVhbS51cmw7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVWaWRlb0VsZW1lbnQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5TVFJFQU0sICdMb2FkaW5nIHN0cmVhbSB2aWEgbG9hZCBjb21tYW5kJywgeyBcbiAgICAgICAgdXJsOiB0aGlzLmN1cnJlbnRTdHJlYW0sXG4gICAgICAgIGF1dG9wbGF5OiB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB2aWRlbyBwcm9wZXJ0aWVzXG4gICAgICBpZiAodGhpcy52aWRlb0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0eXBlb2YgY29tbWFuZEFyZ3MuYXV0b3BsYXkgPT09ICdib29sZWFuJyA/IGNvbW1hbmRBcmdzLmF1dG9wbGF5IDogdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kQXJncy50aW1lICE9PSBudWxsICYmIGlzRmluaXRlKGNvbW1hbmRBcmdzLnRpbWUpKSB7XG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWUgPSBwYXJzZUludChjb21tYW5kQXJncy50aW1lLCAxMCkgLyAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBITFMgb3IgZGlyZWN0IHZpZGVvXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdHJlYW0gJiYgdGhpcy5zaG91bGRVc2VITFModGhpcy5jdXJyZW50U3RyZWFtKSkge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyB1cCBITFMgc3RyZWFtaW5nJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICB0aGlzLnNldHVwSExTKHRoaXMuY3VycmVudFN0cmVhbSEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ0luZm8oTG9nQ2F0ZWdvcnkuU1RSRUFNLCAnU2V0dGluZyBkaXJlY3QgdmlkZW8gc291cmNlJywgeyB1cmw6IHRoaXMuY3VycmVudFN0cmVhbSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ2dyZXNzaXZlIHByZWxvYWQgc3RyYXRlZ3kgZm9yIFJlYWwtRGVicmlkIHN0cmVhbXNcbiAgICAgICAgICAvLyBGb3JjZSBmdWxsIHByZWxvYWRpbmcgdG8gb3ZlcmNvbWUgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zcmMgPSB0aGlzLmN1cnJlbnRTdHJlYW0hO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbmZpZ3VyZSB2aWRlbyBlbGVtZW50IGZvciBvcHRpbWFsIHN0cmVhbWluZyBhbmQgYWdncmVzc2l2ZSBidWZmZXJpbmdcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJ3RydWUnKTtcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dlYmtpdC1wbGF5c2lubGluZScsICd0cnVlJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yY2UgYWdncmVzc2l2ZSBidWZmZXJpbmcgZm9yIGxhcmdlIGZpbGVzXG4gICAgICAgICAgaWYgKCdidWZmZXJEYXRhJyBpbiB0aGlzLnZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgKHRoaXMudmlkZW9FbGVtZW50IGFzIGFueSkuYnVmZmVyRGF0YSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCBuZXR3b3JrIHN0YXRlIG9wdGltaXphdGlvblxuICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmNyb3NzT3JpZ2luID0gbnVsbDsgLy8gUmVtb3ZlIENPUlMgcmVzdHJpY3Rpb25zXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGxvYWQgc3RyYXRlZ3kgb3B0aW1pemF0aW9uXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1N0YXJ0aW5nIGFnZ3Jlc3NpdmUgYnVmZmVyIGxvYWRpbmcnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW50ZWxsaWdlbnQgYnVmZmVyIG1vbml0b3Jpbmcgd2l0aCBidWZmZXIgaGVhbHRoIG1hbmFnZW1lbnRcbiAgICAgICAgICBsZXQgYnVmZmVySGVhbHRoVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgbGV0IGxvd0J1ZmZlckNvdW50ID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCAmJiB0aGlzLnZpZGVvRWxlbWVudC5idWZmZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckFoZWFkID0gYnVmZmVyZWQgLSBjdXJyZW50O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdCdWZmZXIgc3RhdHVzJywge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckFoZWFkOiBgJHtidWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBgJHtjdXJyZW50LnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVyZWRFbmQ6IGAke2J1ZmZlcmVkLnRvRml4ZWQoMSl9c2AsXG4gICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoOiBidWZmZXJBaGVhZCA8IDUgPyAnTE9XJyA6IGJ1ZmZlckFoZWFkIDwgMTUgPyAnTUVESVVNJyA6ICdISUdIJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE1vcmUgYWdncmVzc2l2ZSBidWZmZXIgbWFuYWdlbWVudCBmb3IgUmVhbC1EZWJyaWQgYmFuZHdpZHRoIGxpbWl0YXRpb25zXG4gICAgICAgICAgICAgIGlmIChidWZmZXJBaGVhZCA8IDUgJiYgIXRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIGxvd0J1ZmZlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0xvdyBidWZmZXIgZGV0ZWN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgIGxvd0J1ZmZlckV2ZW50czogbG93QnVmZmVyQ291bnQsXG4gICAgICAgICAgICAgICAgICByZWFkeVN0YXRlOiB0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRm9yIHZlcnkgbG93IGJ1ZmZlciBvciBmcmVxdWVudCBidWZmZXJpbmcsIHBhdXNlIGxvbmdlciB0byBidWlsZCB1cCBidWZmZXJcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyQWhlYWQgPCAzIHx8IGxvd0J1ZmZlckNvdW50ID4gMikge1xuICAgICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1BhdXNpbmcgZm9yIGFnZ3Jlc3NpdmUgYnVmZmVyIHJlY292ZXJ5Jywge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJBaGVhZDogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgICAgcGF1c2VEdXJhdGlvbjogJzUwMDBtcydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0J1ZmZlcmVkID0gdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQubGVuZ3RoID4gMCA/IFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQuYnVmZmVyZWQuZW5kKHRoaXMudmlkZW9FbGVtZW50LmJ1ZmZlcmVkLmxlbmd0aCAtIDEpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdCdWZmZXJBaGVhZCA9IG5ld0J1ZmZlcmVkIC0gdGhpcy52aWRlb0VsZW1lbnQuY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1Jlc3VtaW5nIGFmdGVyIGJ1ZmZlciByZWNvdmVyeScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlckJlZm9yZTogYCR7YnVmZmVyQWhlYWQudG9GaXhlZCgxKX1zYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlckFmdGVyOiBgJHtuZXdCdWZmZXJBaGVhZC50b0ZpeGVkKDEpfXNgXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IE1hdGgubWF4KDAsIGxvd0J1ZmZlckNvdW50IC0gMSk7IC8vIEdyYWR1YWxseSByZWR1Y2UgY291bnRlclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LCA1MDAwKTsgLy8gTG9uZ2VyIHBhdXNlIGZvciBiZXR0ZXIgYnVmZmVyIGJ1aWxkaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJ1ZmZlckFoZWFkID4gMTApIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb3VudGVyIHdoZW4gYnVmZmVyIGlzIHRydWx5IGhlYWx0aHlcbiAgICAgICAgICAgICAgICBsb3dCdWZmZXJDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckhlYWx0aFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYnVmZmVySGVhbHRoVGltZXIpO1xuICAgICAgICAgICAgICAgICAgYnVmZmVySGVhbHRoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBjb21wcmVoZW5zaXZlIHN0YWxsIGRldGVjdGlvbiBhbmQgcmVjb3ZlcnlcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdGFsbGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nV2FybihMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ1ZpZGVvIHN0YWxsZWQsIGltcGxlbWVudGluZyByZWNvdmVyeSBzdHJhdGVneScsIHtcbiAgICAgICAgICAgICAgcmVhZHlTdGF0ZTogdGhpcy52aWRlb0VsZW1lbnQ/LnJlYWR5U3RhdGUsXG4gICAgICAgICAgICAgIG5ldHdvcmtTdGF0ZTogdGhpcy52aWRlb0VsZW1lbnQ/Lm5ldHdvcmtTdGF0ZSxcbiAgICAgICAgICAgICAgY3VycmVudFRpbWU6IHRoaXMudmlkZW9FbGVtZW50Py5jdXJyZW50VGltZS50b0ZpeGVkKDEpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9yZSBhZ2dyZXNzaXZlIHJlY292ZXJ5IGZvciBiYW5kd2lkdGgtbGltaXRlZCBzdHJlYW1zXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnJlYWR5U3RhdGUgPCAzKSB7XG4gICAgICAgICAgICAgICAgbG9nSW5mbyhMb2dDYXRlZ29yeS5QRVJGT1JNQU5DRSwgJ0ZvcmNpbmcgcmVsb2FkIGZvciBiYW5kd2lkdGggcmVjb3ZlcnknKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IHRoaXMudmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmxvYWQoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIHBvc2l0aW9uIGFmdGVyIHJlbG9hZFxuICAgICAgICAgICAgICAgIHRoaXMudmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIGN1cnJlbnRUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5jdXJyZW50VGltZSA9IGN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMjAwMCk7IC8vIExvbmdlciBkZWxheSBmb3IgYmFuZHdpZHRoIHJlY292ZXJ5XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIHdhaXRpbmcgZXZlbnQgaGFuZGxpbmdcbiAgICAgICAgICB0aGlzLnZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgKCkgPT4ge1xuICAgICAgICAgICAgbG9nRGVidWcoTG9nQ2F0ZWdvcnkuUEVSRk9STUFOQ0UsICdWaWRlbyB3YWl0aW5nIGZvciBkYXRhJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy52aWRlb0VsZW1lbnQubG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBFbWl0IHByb3BlcnR5IGNoYW5nZXNcbiAgICAgICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ3N0cmVhbScsIHRoaXMuY3VycmVudFN0cmVhbSk7XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdsb2FkZWQnLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuZW1pdFByb3BDaGFuZ2VkKCdidWZmZXJpbmcnLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGV4ZWN1dGVVbmxvYWRDb21tYW5kKCkge1xuICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IG51bGw7XG4gICAgXG4gICAgaWYgKHRoaXMuaGxzSW5zdGFuY2UpIHtcbiAgICAgIHRoaXMuaGxzSW5zdGFuY2UuZGVzdHJveSgpO1xuICAgICAgdGhpcy5obHNJbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnZpZGVvRWxlbWVudCkge1xuICAgICAgdGhpcy52aWRlb0VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50LmxvYWQoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5lbWl0UHJvcENoYW5nZWQoJ3N0cmVhbScsIG51bGwpO1xuICB9XG5cbiAgLy8gUHVibGljIG1ldGhvZCB0byBsb2FkIHN1YnRpdGxlc1xuICBsb2FkU3VidGl0bGVUcmFjayh0cmFjazogU3VidGl0bGVUcmFjayB8IG51bGwpIHtcbiAgICByZXR1cm4gdGhpcy5sb2FkU3VidGl0bGVzKHRyYWNrKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAodGhpcyBhcyBhbnkpLmRlc3Ryb3llZCA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5obHNJbnN0YW5jZSkge1xuICAgICAgdGhpcy5obHNJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmhsc0luc3RhbmNlID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdWJ0aXRsZXNDb250YWluZXIgJiYgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN1YnRpdGxlc0NvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudmlkZW9FbGVtZW50ICYmIHRoaXMudmlkZW9FbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMudmlkZW9FbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy52aWRlb0VsZW1lbnQpO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMgPSB7fTtcbiAgICB0aGlzLnZpZGVvRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIgPSBudWxsO1xuICAgIHRoaXMuc3VidGl0bGVzRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXQgaXNEZXN0cm95ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVzdHJveWVkO1xuICB9XG59Il0sIm1hcHBpbmdzIjoiQUFHQSxTQUFTLGFBQWEsU0FBUyxVQUFVLFVBQVUsZUFBZTtBQWlFM0QsYUFBTSxtQkFBbUI7QUFBQSxFQUN0QjtBQUFBLEVBQ0EsZUFBd0M7QUFBQSxFQUN4QyxxQkFBeUM7QUFBQSxFQUN6QyxtQkFBdUM7QUFBQSxFQUN2QyxjQUFtQjtBQUFBLEVBRW5CLGdCQUE0RCxDQUFDO0FBQUEsRUFDN0QsaUJBQWdELENBQUM7QUFBQTtBQUFBLEVBR2pELGdCQUErQjtBQUFBLEVBQy9CLHVCQUE2QztBQUFBLEVBQzdDLGdCQUErQixDQUFDO0FBQUEsRUFDaEMsWUFBWTtBQUFBO0FBQUEsRUFHWixxQkFBcUI7QUFBQSxFQUNyQix1QkFBdUI7QUFBQSxFQUN2QiwwQkFBMEI7QUFBQSxFQUMxQixnQ0FBZ0M7QUFBQSxFQUNoQyw2QkFBNkI7QUFBQSxFQUM3Qix3QkFBd0I7QUFBQSxFQUN4QixzQkFBc0I7QUFBQSxF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"
          },
          "redirectURL": "",
          "headersSize": 292,
          "bodySize": 91754,
          "_transferSize": 92046,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:46.250Z",
        "time": 9.809000010136515,
        "timings": {
          "blocked": 3.2869999978067352,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.20299999999999996,
          "wait": 2.652000000556,
          "receive": 3.66700001177378,
          "_blocked_queueing": 2.8949999978067353,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "sendLogBatch",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 50,
                "columnNumber": 12
              },
              {
                "functionName": "flushToFile",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 85,
                "columnNumber": 9
              },
              {
                "functionName": "",
                "scriptId": "36",
                "url": "http://localhost:5173/src/lib/utils/logger.ts",
                "lineNumber": 34,
                "columnNumber": 11
              }
            ]
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "33265",
        "request": {
          "method": "POST",
          "url": "http://localhost:5173/api/logs",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Accept",
              "value": "*/*"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Content-Length",
              "value": "46685"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Host",
              "value": "localhost:5173"
            },
            {
              "name": "Origin",
              "value": "http://localhost:5173"
            },
            {
              "name": "Referer",
              "value": "http://localhost:5173/watch/tt26743210?stream=https%3A%2F%2Fsgp1-4.download.real-debrid.com%2Fd%2F7ZATI3Q7EVVUS75%2FHow.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv&quality=4K"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "empty"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "cors"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "same-origin"
            },
            {
              "name": "Sec-GPC",
              "value": "1"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?1"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Android\""
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": 1145,
          "bodySize": 46685,
          "postData": {
            "mimeType": "application/json",
            "text": "{\"logs\":[{\"timestamp\":\"2025-08-01T11:32:42.578Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.587Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.596Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.609Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.618Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.629Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.642Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.657Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.667Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.684Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.699Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.724Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.740Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.753Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.766Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.783Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.804Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.821Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.831Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.845Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.857Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.874Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.884Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.896Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.904Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.915Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.924Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.936Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.945Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.958Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.969Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.977Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.987Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:42.995Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.003Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.011Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.024Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.033Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.045Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.058Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.067Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.079Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.092Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.103Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.116Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.127Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.135Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.148Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.158Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.173Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.188Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.201Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.210Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.222Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.229Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.237Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.249Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.258Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.272Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.281Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.289Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.300Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.310Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.322Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.333Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.346Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.358Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.374Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.385Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.398Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.416Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.435Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.461Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.484Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.497Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.504Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.511Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.518Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.529Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.540Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.555Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.568Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.586Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.599Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.612Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.622Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.633Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.652Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.672Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.687Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.700Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.714Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.728Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.739Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.754Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.770Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.784Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.794Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.809Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.823Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.837Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.855Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.865Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.876Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.883Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.894Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.905Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.915Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.923Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.936Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.944Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.954Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.964Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.976Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.989Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:43.998Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.010Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.017Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.028Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.035Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.044Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.056Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.066Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.073Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.081Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.090Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.096Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.107Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.120Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.134Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.144Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.156Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.171Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.179Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.196Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.209Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.218Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.227Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.237Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.254Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.266Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.273Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.281Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.293Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.300Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.311Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.319Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.332Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.342Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.351Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.362Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.378Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.388Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.399Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.408Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.420Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.428Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.435Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.447Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.455Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.466Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.475Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.484Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.493Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.502Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.512Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.524Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.538Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.544Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.556Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.563Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.575Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.583Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.595Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.602Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.609Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.619Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.627Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.640Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.649Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.659Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.668Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.678Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.687Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.697Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.704Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.717Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.728Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.746Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.761Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.772Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.798Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.847Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.865Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.881Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.893Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.906Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.916Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.923Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.932Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.937Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.943Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.949Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.958Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.966Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.974Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.982Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:44.992Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.003Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.013Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.024Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.035Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.044Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.056Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.069Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.080Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.092Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.107Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.119Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.130Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.145Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.157Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.168Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.180Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.189Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.199Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.207Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.216Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.231Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.241Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.251Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.259Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.267Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.277Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.287Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.295Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.304Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.313Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.325Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.335Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.347Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.357Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.371Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.383Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.394Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.403Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.414Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.429Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.438Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.448Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.457Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.469Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.479Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.489Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.499Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.508Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.518Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.526Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.538Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.549Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.561Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.577Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.589Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.603Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.616Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.629Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.640Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.657Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.666Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.674Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.682Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.690Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.701Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.712Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.718Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.729Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.736Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.742Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.748Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.760Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.768Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.777Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.790Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.798Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.808Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.820Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.828Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.836Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.847Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.867Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.872Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.879Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.891Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.901Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.913Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.921Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.928Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.935Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.948Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.955Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.964Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.972Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.986Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:45.997Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.010Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.017Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.028Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.037Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.048Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.060Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.072Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.084Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.096Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.108Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.124Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.140Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.153Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.190Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.208Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.266Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.274Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.281Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.292Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.307Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.323Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.336Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.358Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.368Z\",\"level\":2,\"category\":\"PLAYER\",\"message\":\"Creating new video element\"},{\"timestamp\":\"2025-08-01T11:32:46.372Z\",\"level\":2,\"category\":\"STREAM\",\"message\":\"Loading stream via load command\",\"data\":{\"url\":\"https://sgp1-4.download.real-debrid.com/d/7ZATI3Q7EVVUS75/How.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv\",\"autoplay\":true}},{\"timestamp\":\"2025-08-01T11:32:46.374Z\",\"level\":2,\"category\":\"STREAM\",\"message\":\"Setting direct video source\",\"data\":{\"url\":\"https://sgp1-4.download.real-debrid.com/d/7ZATI3Q7EVVUS75/How.to.Train.Your.Dragon.2025.2160p.HDR10Plus.DV.WEBRip.6CH.x265.HEVC-PSA.mkv\"}},{\"timestamp\":\"2025-08-01T11:32:46.384Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.396Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.404Z\",\"level\":3,\"category\":\"PLAYER\",\"message\":\"Video loadstart event\"},{\"timestamp\":\"2025-08-01T11:32:46.404Z\",\"level\":2,\"category\":\"PERFORMANCE\",\"message\":\"Starting aggressive buffer loading\"},{\"timestamp\":\"2025-08-01T11:32:46.411Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.428Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.448Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.461Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.472Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.478Z\",\"level\":2,\"category\":\"PLAYER\",\"message\":\"Video loadedmetadata event\",\"data\":{\"duration\":7519.512,\"durationFormatted\":\"125:19\"}},{\"timestamp\":\"2025-08-01T11:32:46.493Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.512Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.526Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.537Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.550Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.556Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.561Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.566Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.571Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.577Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.585Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.592Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.602Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.613Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.623Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.638Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.653Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.667Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.679Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.688Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.698Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.705Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.714Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.727Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.737Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.746Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.757Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.768Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.777Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.788Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.801Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.808Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.815Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.825Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.832Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.841Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.851Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.859Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.868Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.877Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.886Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.897Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.907Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.915Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.925Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.938Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.953Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:46.978Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.003Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.020Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.036Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.052Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.071Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.088Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.110Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.124Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.145Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.191Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.221Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.246Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.258Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.286Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.312Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.333Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.354Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.373Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.390Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.403Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.419Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.437Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.456Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.475Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.500Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.520Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.536Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.556Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"},{\"timestamp\":\"2025-08-01T11:32:47.572Z\",\"level\":3,\"category\":\"PERFORMANCE\",\"message\":\"Video waiting for data\"}]}"
          }
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "headers": [
            {
              "name": "Vary",
              "value": "Origin"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "content-length",
              "value": "68"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "date",
              "value": "Fri, 01 Aug 2025 11:32:47 GMT"
            },
            {
              "name": "etag",
              "value": "W/\"44-bYAF8ieFZw0rBVMwp8rQjm3nHmY\""
            },
            {
              "name": "x-powered-by",
              "value": "Express"
            }
          ],
          "cookies": [],
          "content": {
            "size": 68,
            "mimeType": "application/json",
            "compression": 0,
            "text": "{\"status\":\"ok\",\"message\":\"Logged 417 entries to app-2025-08-01.log\"}"
          },
          "redirectURL": "",
          "headersSize": 253,
          "bodySize": 68,
          "_transferSize": 321,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "[::1]",
        "startedDateTime": "2025-08-01T11:32:47.577Z",
        "time": 64.96099999640137,
        "timings": {
          "blocked": 26.919999994843266,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.577,
          "wait": 30.90599999333173,
          "receive": 6.558000008226372,
          "_blocked_queueing": 26.312999994843267,
          "_workerStart": -23.453,
          "_workerReady": -22.075,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      }
    ]
  }
}